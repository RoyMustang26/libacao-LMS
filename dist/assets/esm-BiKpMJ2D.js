import{n as e,r as t,t as n}from"./rolldown-runtime-DGruFWvd.js";import{Yn as r}from"./antd-B_p1HNUS.js";import{D as i,F as a,I as o,L as s,M as c,N as l,P as u,R as d,_ as f,a as p,d as m,f as h,h as g,j as _,l as v,m as y,n as b,o as x,s as S,t as C,v as w,y as T,z as E}from"./vec2-DqStZ3m5.js";var D=function(e){return e!==null&&typeof e!=`function`&&isFinite(e.length)},O=function(e,t){return D(e)?e.indexOf(t)>-1:!1},k=function(e,t){if(!D(e))return e;for(var n=[],r=0;r<e.length;r++){var i=e[r];t(i,r)&&n.push(i)}return n},A=function(e,t){return t===void 0&&(t=[]),k(e,function(e){return!O(t,e)})},ee={}.toString,te=function(e,t){return ee.call(e)===`[object `+t+`]`},j=(function(e){return te(e,`Function`)}),M=function(e){return e==null},N=(function(e){return Array.isArray?Array.isArray(e):te(e,`Array`)}),P=(function(e){var t=typeof e;return e!==null&&t===`object`||t===`function`});function ne(e,t){if(e){var n;if(N(e))for(var r=0,i=e.length;r<i&&(n=t(e[r],r),n!==!1);r++);else if(P(e)){for(var a in e)if(e.hasOwnProperty(a)&&(n=t(e[a],a),n===!1))break}}}var F=ne,re=Object.keys?function(e){return Object.keys(e)}:function(e){var t=[];return F(e,function(n,r){j(e)&&r===`prototype`||t.push(r)}),t};function ie(e,t){var n=re(t),r=n.length;if(M(e))return!r;for(var i=0;i<r;i+=1){var a=n[i];if(t[a]!==e[a]||!(a in e))return!1}return!0}var ae=ie,oe=function(e){return typeof e==`object`&&!!e},se=function(e){if(!oe(e)||!te(e,`Object`))return!1;if(Object.getPrototypeOf(e)===null)return!0;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t};function ce(e,t){if(!N(e))return null;var n;if(j(t)&&(n=t),se(t)&&(n=function(e){return ae(e,t)}),n){for(var r=0;r<e.length;r+=1)if(n(e[r]))return e[r]}return null}var le=ce;function ue(e,t,n){n===void 0&&(n=0);for(var r=n;r<e.length;r++)if(t(e[r],r))return r;return-1}var de=ue,fe=function(e,t){for(var n=null,r=0;r<e.length;r++){var i=e[r][t];if(!M(i)){n=N(i)?i[0]:i;break}}return n},pe=function(e){if(!N(e))return[];for(var t=[],n=0;n<e.length;n++)t=t.concat(e[n]);return t},me=(function(e){if(N(e))return e.reduce(function(e,t){return Math.max(e,t)},e[0])}),he=(function(e){if(N(e))return e.reduce(function(e,t){return Math.min(e,t)},e[0])}),ge=function(e){var t=e.filter(function(e){return!isNaN(e)});if(!t.length)return{min:0,max:0};if(N(e[0])){for(var n=[],r=0;r<e.length;r++)n=n.concat(e[r]);t=n}var i=me(t);return{min:he(t),max:i}},_e=Array.prototype;_e.splice,_e.indexOf;var ve=Array.prototype.splice,ye=function(e,t){if(!D(e))return[];for(var n=e?t.length:0,r=n-1;n--;){var i=void 0,a=t[n];(n===r||a!==i)&&(i=a,ve.call(e,a,1))}return e},be=function(e,t,n){if(!N(e)&&!se(e))return e;var r=n;return F(e,function(e,n){r=t(r,e,n)}),r},xe=function(e,t){var n=[];if(!D(e))return n;for(var r=-1,i=[],a=e.length;++r<a;){var o=e[r];t(o,r,e)&&(n.push(o),i.push(r))}return ye(e,i),n},I=(function(e){return te(e,`String`)});function Se(e,t){var n;if(j(t))n=function(e,n){return t(e)-t(n)};else{var r=[];I(t)?r.push(t):N(t)&&(r=t),n=function(e,t){for(var n=0;n<r.length;n+=1){var i=r[n];if(e[i]>t[i])return 1;if(e[i]<t[i])return-1}return 0}}return e.sort(n),e}var Ce=Se;function we(e,t){t===void 0&&(t=new Map);var n=[];if(Array.isArray(e))for(var r=0,i=e.length;r<i;r++){var a=e[r];t.has(a)||(n.push(a),t.set(a,!0))}return n}var Te=(function(e,t){for(var n=[],r={},i=0;i<e.length;i++){var a=e[i][t];if(!M(a)){N(a)||(a=[a]);for(var o=0;o<a.length;o++){var s=a[o];r[s]||(n.push(s),r[s]=!0)}}}return n});function Ee(e){if(D(e))return e[0]}function De(e){if(D(e)){var t=e;return t[t.length-1]}}var Oe=function(e,t){for(var n=0;n<e.length;n++)if(!t(e[n],n))return!1;return!0},ke=function(e,t){for(var n=0;n<e.length;n++)if(t(e[n],n))return!0;return!1},Ae=Object.prototype.hasOwnProperty;function je(e,t){if(!t||!N(e))return{};for(var n={},r=j(t)?t:function(e){return e[t]},i,a=0;a<e.length;a++){var o=e[a];i=r(o),Ae.call(n,i)?n[i].push(o):n[i]=[o]}return n}var Me=je;function Ne(e,t){if(!t)return{0:e};if(!j(t)){var n=N(t)?t:t.replace(/\s+/g,``).split(`*`);t=function(e){for(var t=`_`,r=0,i=n.length;r<i;r++)t+=e[n[r]]&&e[n[r]].toString();return t}}return Me(e,t)}var Pe=(function(e,t){if(!t)return[e];var n=Ne(e,t),r=[];for(var i in n)r.push(n[i]);return r}),Fe=function(e,t,n){return e<t?t:e>n?n:e},Ie=function(e,t){var n=t.toString(),r=n.indexOf(`.`);if(r===-1)return Math.round(e);var i=n.substr(r+1).length;return i>20&&(i=20),parseFloat(e.toFixed(i))},L=function(e){return te(e,`Number`)};Number.isInteger&&Number.isInteger;var Le=1e-5;function Re(e,t,n){return n===void 0&&(n=Le),Math.abs(e-t)<n}var ze=(function(e,t){if(N(e)){for(var n,r=-1/0,i=0;i<e.length;i++){var a=e[i],o=j(t)?t(a):a[t];o>r&&(n=a,r=o)}return n}}),Be=(function(e,t){if(N(e)){for(var n,r=1/0,i=0;i<e.length;i++){var a=e[i],o=j(t)?t(a):a[t];o<r&&(n=a,r=o)}return n}}),Ve=function(e,t){return(e%t+t)%t};180/Math.PI;var He=Math.PI/180,Ue=function(e){return He*e},We=F,Ge=(function(e,t){return e.hasOwnProperty(t)}),Ke=Object.values?function(e){return Object.values(e)}:function(e){var t=[];return F(e,function(n,r){j(e)&&r===`prototype`||t.push(n)}),t},qe=(function(e){return M(e)?``:e.toString()}),Je=function(e){return qe(e).toLowerCase()};function Ye(e,t){return!e||!t?e:e.replace(/\\?\{([^{}]+)\}/g,function(e,n){return e.charAt(0)===`\\`?e.slice(1):t[n]===void 0?``:t[n]})}var Xe=Ye,Ze=function(e){var t=qe(e);return t.charAt(0).toUpperCase()+t.substring(1)},Qe={}.toString,$e=function(e){return Qe.call(e).replace(/^\[object /,``).replace(/]$/,``)},et=function(e){return te(e,`Boolean`)},tt=function(e){return te(e,`Date`)},nt=function(e){return e===null},rt=Object.prototype,it=function(e){var t=e&&e.constructor,n=typeof t==`function`&&t.prototype||rt;return e===n},at=function(e){return e===void 0},ot=function(e){return e instanceof Element||e instanceof HTMLDocument};function st(e){return(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return setTimeout(e,16)})(e)}function ct(e){(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout)(e)}function lt(e,t){for(var n in t)t.hasOwnProperty(n)&&n!==`constructor`&&t[n]!==void 0&&(e[n]=t[n])}function ut(e,t,n,r){return t&&lt(e,t),n&&lt(e,n),r&&lt(e,r),e}var dt=function(e){if(typeof e!=`object`||!e)return e;var t;if(N(e)){t=[];for(var n=0,r=e.length;n<r;n++)typeof e[n]==`object`&&e[n]!=null?t[n]=dt(e[n]):t[n]=e[n]}else for(var i in t={},e)typeof e[i]==`object`&&e[i]!=null?t[i]=dt(e[i]):t[i]=e[i];return t},ft=dt;function pt(e,t,n){var r;return function(){var i=this,a=arguments,o=function(){r=null,n||e.apply(i,a)},s=n&&!r;clearTimeout(r),r=setTimeout(o,t),s&&e.apply(i,a)}}var mt=pt,ht=(function(e,t){if(!j(e))throw TypeError(`Expected a function`);var n=function(){var r=[...arguments],i=t?t.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=e.apply(this,r);return a.set(i,o),o};return n.cache=new Map,n}),gt=5;function _t(e,t,n,r){for(var i in n||=0,r||=gt,t)if(t.hasOwnProperty(i)){var a=t[i];a!==null&&se(a)?(se(e[i])||(e[i]={}),n<r?_t(e[i],a,n+1,r):e[i]=t[i]):N(a)?(e[i]=[],e[i]=e[i].concat(a)):a!==void 0&&(e[i]=a)}}var R=function(e){for(var t=[...arguments].slice(1),n=0;n<t.length;n+=1)_t(e,t[n]);return e},vt=function(e,t){if(!D(e))return-1;var n=Array.prototype.indexOf;if(n)return n.call(e,t);for(var r=-1,i=0;i<e.length;i++)if(e[i]===t){r=i;break}return r},yt=Object.prototype.hasOwnProperty;function bt(e){if(M(e))return!0;if(D(e))return!e.length;var t=$e(e);if(t===`Map`||t===`Set`)return!e.size;if(it(e))return!Object.keys(e).length;for(var n in e)if(yt.call(e,n))return!1;return!0}var xt=bt,St=function(e,t){if(e===t)return!0;if(!e||!t||I(e)||I(t))return!1;if(D(e)||D(t)){if(e.length!==t.length)return!1;for(var n=!0,r=0;r<e.length&&(n=St(e[r],t[r]),n);r++);return n}if(oe(e)||oe(t)){var i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;for(var n=!0,r=0;r<i.length&&(n=St(e[i[r]],t[i[r]]),n);r++);return n}return!1},Ct=St,wt=function(e,t){if(!D(e))return e;for(var n=[],r=0;r<e.length;r++){var i=e[r];n.push(t(i,r))}return n},Tt=function(e){return e},Et=(function(e,t){t===void 0&&(t=Tt);var n={};return P(e)&&!M(e)&&Object.keys(e).forEach(function(r){n[r]=t(e[r],r)}),n}),z=(function(e,t,n){for(var r=0,i=I(t)?t.split(`.`):t;e&&r<i.length;)e=e[i[r++]];return e===void 0||r<i.length?n:e}),Dt=(function(e,t,n){var r=e,i=I(t)?t.split(`.`):t;return i.forEach(function(e,t){t<i.length-1?(P(r[e])||(r[e]=L(i[t+1])?[]:{}),r=r[e]):r[e]=n}),e}),Ot=Object.prototype.hasOwnProperty,kt=(function(e,t){if(e===null||!se(e))return{};var n={};return F(t,function(t){Ot.call(e,t)&&(n[t]=e[t])}),n}),At=(function(e,t){return be(e,function(e,n,r){return t.includes(r)||(e[r]=n),e},{})}),jt=(function(e,t,n){var r,i,a,o,s=0;n||={};var c=function(){s=n.leading===!1?0:Date.now(),r=null,o=e.apply(i,a),r||(i=a=null)},l=function(){var l=Date.now();!s&&n.leading===!1&&(s=l);var u=t-(l-s);return i=this,a=arguments,u<=0||u>t?(r&&=(clearTimeout(r),null),s=l,o=e.apply(i,a),r||(i=a=null)):!r&&n.trailing!==!1&&(r=setTimeout(c,u)),o};return l.cancel=function(){clearTimeout(r),s=0,r=i=a=null},l}),Mt=(function(e){return D(e)?Array.prototype.slice.call(e):[]}),Nt={},Pt=(function(e){return e||=`g`,Nt[e]?Nt[e]+=1:Nt[e]=1,e+Nt[e]}),Ft=(function(){});function It(e){return M(e)?0:D(e)?e.length:Object.keys(e).length}var Lt,Rt=ht(function(e,t){t===void 0&&(t={});var n=t.fontSize,r=t.fontFamily,i=t.fontWeight,a=t.fontStyle,o=t.fontVariant;return Lt||=document.createElement(`canvas`).getContext(`2d`),Lt.font=[a,o,i,n+`px`,r].join(` `),Lt.measureText(I(e)?e:``).width},function(e,t){return t===void 0&&(t={}),d([e],Ke(t)).join(``)}),zt=(function(e,t,n,r){r===void 0&&(r=`...`);var i=16,a=Rt(r,n),o=I(e)?e:qe(e),s=t,c=[],l,u;if(Rt(e,n)<=t)return e;for(;l=o.substr(0,i),u=Rt(l,n),!(u+a>s&&u>s);)if(c.push(l),s-=u,o=o.substr(i),!o)return c.join(``);for(;l=o.substr(0,1),u=Rt(l,n),!(u+a>s);)if(c.push(l),s-=u,o=o.substr(1),!o)return c.join(``);return``+c.join(``)+r}),Bt=function(){function e(){this.map={}}return e.prototype.has=function(e){return this.map[e]!==void 0},e.prototype.get=function(e,t){var n=this.map[e];return n===void 0?t:n},e.prototype.set=function(e,t){this.map[e]=t},e.prototype.clear=function(){this.map={}},e.prototype.delete=function(e){delete this.map[e]},e.prototype.size=function(){return Object.keys(this.map).length},e}(),Vt;(function(e){e.FORE=`fore`,e.MID=`mid`,e.BG=`bg`})(Vt||={});var B;(function(e){e.TOP=`top`,e.TOP_LEFT=`top-left`,e.TOP_RIGHT=`top-right`,e.RIGHT=`right`,e.RIGHT_TOP=`right-top`,e.RIGHT_BOTTOM=`right-bottom`,e.LEFT=`left`,e.LEFT_TOP=`left-top`,e.LEFT_BOTTOM=`left-bottom`,e.BOTTOM=`bottom`,e.BOTTOM_LEFT=`bottom-left`,e.BOTTOM_RIGHT=`bottom-right`,e.RADIUS=`radius`,e.CIRCLE=`circle`,e.NONE=`none`})(B||={});var Ht;(function(e){e.AXIS=`axis`,e.GRID=`grid`,e.LEGEND=`legend`,e.TOOLTIP=`tooltip`,e.ANNOTATION=`annotation`,e.SLIDER=`slider`,e.SCROLLBAR=`scrollbar`,e.OTHER=`other`})(Ht||={});var Ut={FORE:3,MID:2,BG:1},V;(function(e){e.BEFORE_RENDER=`beforerender`,e.AFTER_RENDER=`afterrender`,e.BEFORE_PAINT=`beforepaint`,e.AFTER_PAINT=`afterpaint`,e.BEFORE_CHANGE_DATA=`beforechangedata`,e.AFTER_CHANGE_DATA=`afterchangedata`,e.BEFORE_CLEAR=`beforeclear`,e.AFTER_CLEAR=`afterclear`,e.BEFORE_DESTROY=`beforedestroy`,e.BEFORE_CHANGE_SIZE=`beforechangesize`,e.AFTER_CHANGE_SIZE=`afterchangesize`})(V||={});var Wt;(function(e){e.BEFORE_DRAW_ANIMATE=`beforeanimate`,e.AFTER_DRAW_ANIMATE=`afteranimate`,e.BEFORE_RENDER_LABEL=`beforerenderlabel`,e.AFTER_RENDER_LABEL=`afterrenderlabel`})(Wt||={});var Gt;(function(e){e.MOUSE_ENTER=`plot:mouseenter`,e.MOUSE_DOWN=`plot:mousedown`,e.MOUSE_MOVE=`plot:mousemove`,e.MOUSE_UP=`plot:mouseup`,e.MOUSE_LEAVE=`plot:mouseleave`,e.TOUCH_START=`plot:touchstart`,e.TOUCH_MOVE=`plot:touchmove`,e.TOUCH_END=`plot:touchend`,e.TOUCH_CANCEL=`plot:touchcancel`,e.CLICK=`plot:click`,e.DBLCLICK=`plot:dblclick`,e.CONTEXTMENU=`plot:contextmenu`,e.LEAVE=`plot:leave`,e.ENTER=`plot:enter`})(Gt||={});var Kt;(function(e){e.ACTIVE=`active`,e.INACTIVE=`inactive`,e.SELECTED=`selected`,e.DEFAULT=`default`})(Kt||={});var qt=[`color`,`shape`,`size`],Jt=`_origin`,Yt=.25,Xt={};function Zt(e){var t=Xt[e];if(!t)throw Error(`G engine '${e}' is not exist, please register it at first.`);return t}function Qt(e,t){Xt[e]=t}function $t(e,t,n){if(e){if(typeof e.addEventListener==`function`)return e.addEventListener(t,n,!1),{remove:function(){e.removeEventListener(t,n,!1)}};if(typeof e.attachEvent==`function`)return e.attachEvent(`on`+t,n),{remove:function(){e.detachEvent(`on`+t,n)}}}}var en,tn,nn,rn;function an(){en=document.createElement(`table`),tn=document.createElement(`tr`),nn=/^\s*<(\w+|!)[^>]*>/,rn={tr:document.createElement(`tbody`),tbody:en,thead:en,tfoot:en,td:tn,th:tn,"*":document.createElement(`div`)}}function on(e){en||an();var t=nn.test(e)&&RegExp.$1;(!t||!(t in rn))&&(t=`*`);var n=rn[t];e=typeof e==`string`?e.replace(/(^\s*)|(\s*$)/g,``):e,n.innerHTML=``+e;var r=n.childNodes[0];return r&&n.contains(r)&&n.removeChild(r),r}function sn(e,t,n){var r;try{r=window.getComputedStyle?window.getComputedStyle(e,null)[t]:e.style[t]}catch{}finally{r=r===void 0?n:r}return r}function cn(e,t){var n=sn(e,`height`,t);return n===`auto`&&(n=e.offsetHeight),parseFloat(n)}function ln(e,t){var n=cn(e,t),r=parseFloat(sn(e,`borderTopWidth`))||0,i=parseFloat(sn(e,`paddingTop`))||0,a=parseFloat(sn(e,`paddingBottom`))||0,o=parseFloat(sn(e,`borderBottomWidth`))||0,s=parseFloat(sn(e,`marginTop`))||0,c=parseFloat(sn(e,`marginBottom`))||0;return n+r+o+i+a+s+c}function un(e,t){var n=sn(e,`width`,t);return n===`auto`&&(n=e.offsetWidth),parseFloat(n)}function dn(e,t){var n=un(e,t),r=parseFloat(sn(e,`borderLeftWidth`))||0,i=parseFloat(sn(e,`paddingLeft`))||0,a=parseFloat(sn(e,`paddingRight`))||0,o=parseFloat(sn(e,`borderRightWidth`))||0,s=parseFloat(sn(e,`marginRight`))||0,c=parseFloat(sn(e,`marginLeft`))||0;return n+r+o+i+a+c+s}function fn(e,t){if(e)for(var n in t)t.hasOwnProperty(n)&&(e.style[n]=t[n]);return e}function pn(e){var t=getComputedStyle(e);return{width:(e.clientWidth||parseInt(t.width,10))-parseInt(t.paddingLeft,10)-parseInt(t.paddingRight,10),height:(e.clientHeight||parseInt(t.height,10))-parseInt(t.paddingTop,10)-parseInt(t.paddingBottom,10)}}function mn(e){return typeof e==`number`&&!isNaN(e)}function hn(e,t,n,r){var i=n,a=r;if(t){var o=pn(e);i=o.width?o.width:i,a=o.height?o.height:a}return{width:Math.max(mn(i)?i:1,1),height:Math.max(mn(a)?a:1,1)}}function gn(e){var t=e.parentNode;t&&t.removeChild(e)}var _n=`*`,vn=function(){function e(){this._events={}}return e.prototype.on=function(e,t,n){return this._events[e]||(this._events[e]=[]),this._events[e].push({callback:t,once:!!n}),this},e.prototype.once=function(e,t){return this.on(e,t,!0)},e.prototype.emit=function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=this._events[e]||[],a=this._events[_n]||[],o=function(r){for(var i=r.length,a=0;a<i;a++)if(r[a]){var o=r[a],s=o.callback;o.once&&(r.splice(a,1),r.length===0&&delete t._events[e],i--,a--),s.apply(t,n)}};o(i),o(a)},e.prototype.off=function(e,t){if(!e)this._events={};else if(!t)delete this._events[e];else{for(var n=this._events[e]||[],r=n.length,i=0;i<r;i++)n[i].callback===t&&(n.splice(i,1),r--,i--);n.length===0&&delete this._events[e]}return this},e.prototype.getEvents=function(){return this._events},e}(),yn=function(e){l(t,e);function t(t){var n=e.call(this)||this;n.destroyed=!1;var r=t.visible;return n.visible=r===void 0?!0:r,n}return t.prototype.show=function(){this.visible||this.changeVisible(!0)},t.prototype.hide=function(){this.visible&&this.changeVisible(!1)},t.prototype.destroy=function(){this.off(),this.destroyed=!0},t.prototype.changeVisible=function(e){this.visible!==e&&(this.visible=e)},t}(vn),bn=e({catmullRomToBezier:()=>Tn,fillPath:()=>Xn,fillPathByDiff:()=>er,formatPath:()=>rr,intersection:()=>Kn,parsePathArray:()=>Nn,parsePathString:()=>wn,pathToAbsolute:()=>Dn,pathToCurve:()=>jn,rectPath:()=>zn}),xn=`	
\v\f\r \xA0 ᠎             　\u2028\u2029`,Sn=RegExp(`([a-z])[`+xn+`,]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?[`+xn+`]*,?[`+xn+`]*)+)`,`ig`),Cn=RegExp(`(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)[`+xn+`]*,?[`+xn+`]*`,`ig`),wn=function(e){if(!e)return null;if(N(e))return e;var t={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},n=[];return String(e).replace(Sn,function(r,i,a){var o=[],s=i.toLowerCase();if(a.replace(Cn,function(e,t){t&&o.push(+t)}),s===`m`&&o.length>2&&(n.push([i].concat(o.splice(0,2))),s=`l`,i=i===`m`?`l`:`L`),s===`o`&&o.length===1&&n.push([i,o[0]]),s===`r`)n.push([i].concat(o));else for(;o.length>=t[s]&&(n.push([i].concat(o.splice(0,t[s]))),t[s]););return e}),n},Tn=function(e,t){for(var n=[],r=0,i=e.length;i-2*!t>r;r+=2){var a=[{x:+e[r-2],y:+e[r-1]},{x:+e[r],y:+e[r+1]},{x:+e[r+2],y:+e[r+3]},{x:+e[r+4],y:+e[r+5]}];t?r?i-4===r?a[3]={x:+e[0],y:+e[1]}:i-2===r&&(a[2]={x:+e[0],y:+e[1]},a[3]={x:+e[2],y:+e[3]}):a[0]={x:+e[i-2],y:+e[i-1]}:i-4===r?a[3]=a[2]:r||(a[0]={x:+e[r],y:+e[r+1]}),n.push([`C`,(-a[0].x+6*a[1].x+a[2].x)/6,(-a[0].y+6*a[1].y+a[2].y)/6,(a[1].x+6*a[2].x-a[3].x)/6,(a[1].y+6*a[2].y-a[3].y)/6,a[2].x,a[2].y])}return n},En=function(e,t,n,r,i){var a=[];if(i===null&&r===null&&(r=n),e=+e,t=+t,n=+n,r=+r,i!==null){var o=Math.PI/180,s=e+n*Math.cos(-r*o),c=e+n*Math.cos(-i*o),l=t+n*Math.sin(-r*o),u=t+n*Math.sin(-i*o);a=[[`M`,s,l],[`A`,n,n,0,+(i-r>180),0,c,u]]}else a=[[`M`,e,t],[`m`,0,-r],[`a`,n,r,0,1,1,0,2*r],[`a`,n,r,0,1,1,0,-2*r],[`z`]];return a},Dn=function(e){if(e=wn(e),!e||!e.length)return[[`M`,0,0]];var t=[],n=0,r=0,i=0,a=0,o=0,s,c;e[0][0]===`M`&&(n=+e[0][1],r=+e[0][2],i=n,a=r,o++,t[0]=[`M`,n,r]);for(var l=e.length===3&&e[0][0]===`M`&&e[1][0].toUpperCase()===`R`&&e[2][0].toUpperCase()===`Z`,u=void 0,d=void 0,f=o,p=e.length;f<p;f++){if(t.push(u=[]),d=e[f],s=d[0],s!==s.toUpperCase())switch(u[0]=s.toUpperCase(),u[0]){case`A`:u[1]=d[1],u[2]=d[2],u[3]=d[3],u[4]=d[4],u[5]=d[5],u[6]=+d[6]+n,u[7]=+d[7]+r;break;case`V`:u[1]=+d[1]+r;break;case`H`:u[1]=+d[1]+n;break;case`R`:c=[n,r].concat(d.slice(1));for(var m=2,h=c.length;m<h;m++)c[m]=+c[m]+n,c[++m]=+c[m]+r;t.pop(),t=t.concat(Tn(c,l));break;case`O`:t.pop(),c=En(n,r,d[1],d[2]),c.push(c[0]),t=t.concat(c);break;case`U`:t.pop(),t=t.concat(En(n,r,d[1],d[2],d[3])),u=[`U`].concat(t[t.length-1].slice(-2));break;case`M`:i=+d[1]+n,a=+d[2]+r;break;default:for(var m=1,h=d.length;m<h;m++)u[m]=+d[m]+(m%2?n:r)}else if(s===`R`)c=[n,r].concat(d.slice(1)),t.pop(),t=t.concat(Tn(c,l)),u=[`R`].concat(d.slice(-2));else if(s===`O`)t.pop(),c=En(n,r,d[1],d[2]),c.push(c[0]),t=t.concat(c);else if(s===`U`)t.pop(),t=t.concat(En(n,r,d[1],d[2],d[3])),u=[`U`].concat(t[t.length-1].slice(-2));else for(var g=0,_=d.length;g<_;g++)u[g]=d[g];if(s=s.toUpperCase(),s!==`O`)switch(u[0]){case`Z`:n=+i,r=+a;break;case`H`:n=u[1];break;case`V`:r=u[1];break;case`M`:i=u[u.length-2],a=u[u.length-1];break;default:n=u[u.length-2],r=u[u.length-1]}}return t},On=function(e,t,n,r){return[e,t,n,r,n,r]},kn=function(e,t,n,r,i,a){var o=1/3,s=2/3;return[o*e+s*n,o*t+s*r,o*i+s*n,o*a+s*r,i,a]},An=function(e,t,n,r,i,a,o,s,c,l){n===r&&(n+=1);var u=Math.PI*120/180,d=Math.PI/180*(+i||0),f=[],p,m,h,g,_,v=function(e,t,n){var r=e*Math.cos(n)-t*Math.sin(n),i=e*Math.sin(n)+t*Math.cos(n);return{x:r,y:i}};if(l)m=l[0],h=l[1],g=l[2],_=l[3];else{p=v(e,t,-d),e=p.x,t=p.y,p=v(s,c,-d),s=p.x,c=p.y,e===s&&t===c&&(s+=1,c+=1);var y=(e-s)/2,b=(t-c)/2,x=y*y/(n*n)+b*b/(r*r);x>1&&(x=Math.sqrt(x),n=x*n,r=x*r);var S=n*n,C=r*r,w=(a===o?-1:1)*Math.sqrt(Math.abs((S*C-S*b*b-C*y*y)/(S*b*b+C*y*y)));g=w*n*b/r+(e+s)/2,_=w*-r*y/n+(t+c)/2,m=Math.asin(((t-_)/r).toFixed(9)),h=Math.asin(((c-_)/r).toFixed(9)),m=e<g?Math.PI-m:m,h=s<g?Math.PI-h:h,m<0&&(m=Math.PI*2+m),h<0&&(h=Math.PI*2+h),o&&m>h&&(m-=Math.PI*2),!o&&h>m&&(h-=Math.PI*2)}var T=h-m;if(Math.abs(T)>u){var E=h,D=s,O=c;h=m+u*(o&&h>m?1:-1),s=g+n*Math.cos(h),c=_+r*Math.sin(h),f=An(s,c,n,r,i,0,o,D,O,[h,E,g,_])}T=h-m;var k=Math.cos(m),A=Math.sin(m),ee=Math.cos(h),te=Math.sin(h),j=Math.tan(T/4),M=4/3*n*j,N=4/3*r*j,P=[e,t],ne=[e+M*A,t-N*k],F=[s+M*te,c-N*ee],re=[s,c];if(ne[0]=2*P[0]-ne[0],ne[1]=2*P[1]-ne[1],l)return[ne,F,re].concat(f);f=[ne,F,re].concat(f).join().split(`,`);for(var ie=[],ae=0,oe=f.length;ae<oe;ae++)ie[ae]=ae%2?v(f[ae-1],f[ae],d).y:v(f[ae],f[ae+1],d).x;return ie},jn=function(e,t){var n=Dn(e),r=t&&Dn(t),i={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},o=[],s=[],c=``,l=``,u,d=function(e,t,n){var r,i;if(!e)return[`C`,t.x,t.y,t.x,t.y,t.x,t.y];switch(!(e[0]in{T:1,Q:1})&&(t.qx=t.qy=null),e[0]){case`M`:t.X=e[1],t.Y=e[2];break;case`A`:e=[`C`].concat(An.apply(0,[t.x,t.y].concat(e.slice(1))));break;case`S`:n===`C`||n===`S`?(r=t.x*2-t.bx,i=t.y*2-t.by):(r=t.x,i=t.y),e=[`C`,r,i].concat(e.slice(1));break;case`T`:n===`Q`||n===`T`?(t.qx=t.x*2-t.qx,t.qy=t.y*2-t.qy):(t.qx=t.x,t.qy=t.y),e=[`C`].concat(kn(t.x,t.y,t.qx,t.qy,e[1],e[2]));break;case`Q`:t.qx=e[1],t.qy=e[2],e=[`C`].concat(kn(t.x,t.y,e[1],e[2],e[3],e[4]));break;case`L`:e=[`C`].concat(On(t.x,t.y,e[1],e[2]));break;case`H`:e=[`C`].concat(On(t.x,t.y,e[1],t.y));break;case`V`:e=[`C`].concat(On(t.x,t.y,t.x,e[1]));break;case`Z`:e=[`C`].concat(On(t.x,t.y,t.X,t.Y));break;default:break}return e},f=function(e,t){if(e[t].length>7){e[t].shift();for(var i=e[t];i.length;)o[t]=`A`,r&&(s[t]=`A`),e.splice(t++,0,[`C`].concat(i.splice(0,6)));e.splice(t,1),u=Math.max(n.length,r&&r.length||0)}},p=function(e,t,i,a,o){e&&t&&e[o][0]===`M`&&t[o][0]!==`M`&&(t.splice(o,0,[`M`,a.x,a.y]),i.bx=0,i.by=0,i.x=e[o][1],i.y=e[o][2],u=Math.max(n.length,r&&r.length||0))};u=Math.max(n.length,r&&r.length||0);for(var m=0;m<u;m++){n[m]&&(c=n[m][0]),c!==`C`&&(o[m]=c,m&&(l=o[m-1])),n[m]=d(n[m],i,l),o[m]!==`A`&&c===`C`&&(o[m]=`C`),f(n,m),r&&(r[m]&&(c=r[m][0]),c!==`C`&&(s[m]=c,m&&(l=s[m-1])),r[m]=d(r[m],a,l),s[m]!==`A`&&c===`C`&&(s[m]=`C`),f(r,m)),p(n,r,i,a,m),p(r,n,a,i,m);var h=n[m],g=r&&r[m],_=h.length,v=r&&g.length;i.x=h[_-2],i.y=h[_-1],i.bx=parseFloat(h[_-4])||i.x,i.by=parseFloat(h[_-3])||i.y,a.bx=r&&(parseFloat(g[v-4])||a.x),a.by=r&&(parseFloat(g[v-3])||a.y),a.x=r&&g[v-2],a.y=r&&g[v-1]}return r?[n,r]:n},Mn=/,?([a-z]),?/gi,Nn=function(e){return e.join(`,`).replace(Mn,`$1`)},Pn=function(e,t,n,r,i){var a=-3*t+9*n-9*r+3*i,o=e*a+6*t-12*n+6*r;return e*o-3*t+3*n},Fn=function(e,t,n,r,i,a,o,s,c){c===null&&(c=1),c=c>1?1:c<0?0:c;for(var l=c/2,u=12,d=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],f=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],p=0,m=0;m<u;m++){var h=l*d[m]+l,g=Pn(h,e,n,i,o),_=Pn(h,t,r,a,s),v=g*g+_*_;p+=f[m]*Math.sqrt(v)}return l*p},In=function(e,t,n,r,i,a,o,s){for(var c=[],l=[[],[]],u,d,f,p,m=0;m<2;++m){if(m===0?(d=6*e-12*n+6*i,u=-3*e+9*n-9*i+3*o,f=3*n-3*e):(d=6*t-12*r+6*a,u=-3*t+9*r-9*a+3*s,f=3*r-3*t),Math.abs(u)<1e-12){if(Math.abs(d)<1e-12)continue;p=-f/d,p>0&&p<1&&c.push(p);continue}var h=d*d-4*f*u,g=Math.sqrt(h);if(!(h<0)){var _=(-d+g)/(2*u);_>0&&_<1&&c.push(_);var v=(-d-g)/(2*u);v>0&&v<1&&c.push(v)}}for(var y=c.length,b=y,x;y--;)p=c[y],x=1-p,l[0][y]=x*x*x*e+3*x*x*p*n+3*x*p*p*i+p*p*p*o,l[1][y]=x*x*x*t+3*x*x*p*r+3*x*p*p*a+p*p*p*s;return l[0][b]=e,l[1][b]=t,l[0][b+1]=o,l[1][b+1]=s,l[0].length=l[1].length=b+2,{min:{x:Math.min.apply(0,l[0]),y:Math.min.apply(0,l[1])},max:{x:Math.max.apply(0,l[0]),y:Math.max.apply(0,l[1])}}},Ln=function(e,t,n,r,i,a,o,s){if(!(Math.max(e,n)<Math.min(i,o)||Math.min(e,n)>Math.max(i,o)||Math.max(t,r)<Math.min(a,s)||Math.min(t,r)>Math.max(a,s))){var c=(e*r-t*n)*(i-o)-(e-n)*(i*s-a*o),l=(e*r-t*n)*(a-s)-(t-r)*(i*s-a*o),u=(e-n)*(a-s)-(t-r)*(i-o);if(u){var d=c/u,f=l/u,p=+d.toFixed(2),m=+f.toFixed(2);if(!(p<+Math.min(e,n).toFixed(2)||p>+Math.max(e,n).toFixed(2)||p<+Math.min(i,o).toFixed(2)||p>+Math.max(i,o).toFixed(2)||m<+Math.min(t,r).toFixed(2)||m>+Math.max(t,r).toFixed(2)||m<+Math.min(a,s).toFixed(2)||m>+Math.max(a,s).toFixed(2)))return{x:d,y:f}}}},Rn=function(e,t,n){return t>=e.x&&t<=e.x+e.width&&n>=e.y&&n<=e.y+e.height},zn=function(e,t,n,r,i){if(i)return[[`M`,+e+ +i,t],[`l`,n-i*2,0],[`a`,i,i,0,0,1,i,i],[`l`,0,r-i*2],[`a`,i,i,0,0,1,-i,i],[`l`,i*2-n,0],[`a`,i,i,0,0,1,-i,-i],[`l`,0,i*2-r],[`a`,i,i,0,0,1,i,-i],[`z`]];var a=[[`M`,e,t],[`l`,n,0],[`l`,0,r],[`l`,-n,0],[`z`]];return a.parsePathArray=Nn,a},Bn=function(e,t,n,r){return e===null&&(e=t=n=r=0),t===null&&(t=e.y,n=e.width,r=e.height,e=e.x),{x:e,y:t,width:n,w:n,height:r,h:r,x2:e+n,y2:t+r,cx:e+n/2,cy:t+r/2,r1:Math.min(n,r)/2,r2:Math.max(n,r)/2,r0:Math.sqrt(n*n+r*r)/2,path:zn(e,t,n,r),vb:[e,t,n,r].join(` `)}},Vn=function(e,t){return e=Bn(e),t=Bn(t),Rn(t,e.x,e.y)||Rn(t,e.x2,e.y)||Rn(t,e.x,e.y2)||Rn(t,e.x2,e.y2)||Rn(e,t.x,t.y)||Rn(e,t.x2,t.y)||Rn(e,t.x,t.y2)||Rn(e,t.x2,t.y2)||(e.x<t.x2&&e.x>t.x||t.x<e.x2&&t.x>e.x)&&(e.y<t.y2&&e.y>t.y||t.y<e.y2&&t.y>e.y)},Hn=function(e,t,n,r,i,a,o,s){N(e)||(e=[e,t,n,r,i,a,o,s]);var c=In.apply(null,e);return Bn(c.min.x,c.min.y,c.max.x-c.min.x,c.max.y-c.min.y)},Un=function(e,t,n,r,i,a,o,s,c){var l=1-c,u=l**3,d=l**2,f=c*c,p=f*c,m=u*e+d*3*c*n+l*3*c*c*i+p*o,h=u*t+d*3*c*r+l*3*c*c*a+p*s,g=e+2*c*(n-e)+f*(i-2*n+e),_=t+2*c*(r-t)+f*(a-2*r+t),v=n+2*c*(i-n)+f*(o-2*i+n),y=r+2*c*(a-r)+f*(s-2*a+r),b=l*e+c*n,x=l*t+c*r,S=l*i+c*o,C=l*a+c*s,w=90-Math.atan2(g-v,_-y)*180/Math.PI;return{x:m,y:h,m:{x:g,y:_},n:{x:v,y},start:{x:b,y:x},end:{x:S,y:C},alpha:w}},Wn=function(e,t,n){var r=Hn(e),i=Hn(t);if(!Vn(r,i))return n?0:[];for(var a=Fn.apply(0,e),o=Fn.apply(0,t),s=~~(a/8),c=~~(o/8),l=[],u=[],d={},f=n?0:[],p=0;p<s+1;p++){var m=Un.apply(0,e.concat(p/s));l.push({x:m.x,y:m.y,t:p/s})}for(var p=0;p<c+1;p++){var m=Un.apply(0,t.concat(p/c));u.push({x:m.x,y:m.y,t:p/c})}for(var p=0;p<s;p++)for(var h=0;h<c;h++){var g=l[p],_=l[p+1],v=u[h],y=u[h+1],b=Math.abs(_.x-g.x)<.001?`y`:`x`,x=Math.abs(y.x-v.x)<.001?`y`:`x`,S=Ln(g.x,g.y,_.x,_.y,v.x,v.y,y.x,y.y);if(S){if(d[S.x.toFixed(4)]===S.y.toFixed(4))continue;d[S.x.toFixed(4)]=S.y.toFixed(4);var C=g.t+Math.abs((S[b]-g[b])/(_[b]-g[b]))*(_.t-g.t),w=v.t+Math.abs((S[x]-v[x])/(y[x]-v[x]))*(y.t-v.t);C>=0&&C<=1&&w>=0&&w<=1&&(n?f+=1:f.push({x:S.x,y:S.y,t1:C,t2:w}))}}return f},Gn=function(e,t,n){e=jn(e),t=jn(t);for(var r,i,a,o,s,c,l,u,d,f,p=n?0:[],m=0,h=e.length;m<h;m++){var g=e[m];if(g[0]===`M`)r=s=g[1],i=c=g[2];else{g[0]===`C`?(d=[r,i].concat(g.slice(1)),r=d[6],i=d[7]):(d=[r,i,r,i,s,c,s,c],r=s,i=c);for(var _=0,v=t.length;_<v;_++){var y=t[_];if(y[0]===`M`)a=l=y[1],o=u=y[2];else{y[0]===`C`?(f=[a,o].concat(y.slice(1)),a=f[6],o=f[7]):(f=[a,o,a,o,l,u,l,u],a=l,o=u);var b=Wn(d,f,n);if(n)p+=b;else{for(var x=0,S=b.length;x<S;x++)b[x].segment1=m,b[x].segment2=_,b[x].bez1=d,b[x].bez2=f;p=p.concat(b)}}}}}return p},Kn=function(e,t){return Gn(e,t)};function qn(e,t){var n=[],r=[];function i(e,t){if(e.length===1)n.push(e[0]),r.push(e[0]);else{for(var a=[],o=0;o<e.length-1;o++)o===0&&n.push(e[0]),o===e.length-2&&r.push(e[o+1]),a[o]=[(1-t)*e[o][0]+t*e[o+1][0],(1-t)*e[o][1]+t*e[o+1][1]];i(a,t)}}return e.length&&i(e,t),{left:n,right:r.reverse()}}function Jn(e,t,n){var r=[[e[1],e[2]]];n||=2;var i=[];t[0]===`A`?(r.push(t[6]),r.push(t[7])):t[0]===`C`?(r.push([t[1],t[2]]),r.push([t[3],t[4]]),r.push([t[5],t[6]])):t[0]===`S`||t[0]===`Q`?(r.push([t[1],t[2]]),r.push([t[3],t[4]])):r.push([t[1],t[2]]);for(var a=r,o=1/n,s=0;s<n-1;s++){var c=o/(1-o*s),l=qn(a,c);i.push(l.left),a=l.right}return i.push(a),i.map(function(e){var t=[];return e.length===4&&(t.push(`C`),t=t.concat(e[2])),e.length>=3&&(e.length===3&&t.push(`Q`),t=t.concat(e[1])),e.length===2&&t.push(`L`),t=t.concat(e[e.length-1]),t})}var Yn=function(e,t,n){if(n===1)return[[].concat(e)];var r=[];if(t[0]===`L`||t[0]===`C`||t[0]===`Q`)r=r.concat(Jn(e,t,n));else{var i=[].concat(e);i[0]===`M`&&(i[0]=`L`);for(var a=0;a<=n-1;a++)r.push(i)}return r},Xn=function(e,t){if(e.length===1)return e;var n=e.length-1,r=t.length-1,i=n/r,a=[];if(e.length===1&&e[0][0]===`M`){for(var o=0;o<r-n;o++)e.push(e[0]);return e}for(var o=0;o<r;o++){var s=Math.floor(i*o);a[s]=(a[s]||0)+1}var c=a.reduce(function(t,r,i){return i===n?t.concat(e[n]):t.concat(Yn(e[i],e[i+1],r))},[]);return c.unshift(e[0]),(t[r]===`Z`||t[r]===`z`)&&c.push(`Z`),c},Zn=function(e,t){if(e.length!==t.length)return!1;var n=!0;return F(e,function(e,r){if(e!==t[r])return n=!1,!1}),n};function Qn(e,t,n){var r=null,i=n;return t<i&&(i=t,r=`add`),e<i&&(i=e,r=`del`),{type:r,min:i}}var $n=function(e,t){var n=e.length,r=t.length,i,a,o=0;if(n===0||r===0)return null;for(var s=[],c=0;c<=n;c++)s[c]=[],s[c][0]={min:c};for(var l=0;l<=r;l++)s[0][l]={min:l};for(var c=1;c<=n;c++){i=e[c-1];for(var l=1;l<=r;l++){a=t[l-1],o=Zn(i,a)?0:1;var u=s[c-1][l].min+1,d=s[c][l-1].min+1,f=s[c-1][l-1].min+o;s[c][l]=Qn(u,d,f)}}return s},er=function(e,t){var n=$n(e,t),r=e.length,i=t.length,a=[],o=1,s=1;if(n[r][i].min!==r){for(var c=1;c<=r;c++){var l=n[c][c].min;s=c;for(var u=o;u<=i;u++)n[c][u].min<l&&(l=n[c][u].min,s=u);o=s,n[c][o].type&&a.push({index:c-1,type:n[c][o].type})}for(var c=a.length-1;c>=0;c--)o=a[c].index,a[c].type===`add`?e.splice(o,0,[].concat(e[o])):e.splice(o,1)}r=e.length;var d=i-r;if(r<i)for(var c=0;c<d;c++)e[r-1][0]===`z`||e[r-1][0]===`Z`?e.splice(r-2,0,e[r-2]):e.push(e[r-1]),r+=1;return e};function tr(e,t,n){for(var r=[].concat(e),i,a=1/(n+1),o=nr(t)[0],s=1;s<=n;s++)a*=s,i=Math.floor(e.length*a),i===0?r.unshift([o[0]*a+e[i][0]*(1-a),o[1]*a+e[i][1]*(1-a)]):r.splice(i,0,[o[0]*a+e[i][0]*(1-a),o[1]*a+e[i][1]*(1-a)]);return r}function nr(e){var t=[];switch(e[0]){case`M`:t.push([e[1],e[2]]);break;case`L`:t.push([e[1],e[2]]);break;case`A`:t.push([e[6],e[7]]);break;case`Q`:t.push([e[3],e[4]]),t.push([e[1],e[2]]);break;case`T`:t.push([e[1],e[2]]);break;case`C`:t.push([e[5],e[6]]),t.push([e[1],e[2]]),t.push([e[3],e[4]]);break;case`S`:t.push([e[3],e[4]]),t.push([e[1],e[2]]);break;case`H`:t.push([e[1],e[1]]);break;case`V`:t.push([e[1],e[1]]);break;default:}return t}var rr=function(e,t){if(e.length<=1)return e;for(var n,r=0;r<t.length;r++)if(e[r][0]!==t[r][0])switch(n=nr(e[r]),t[r][0]){case`M`:e[r]=[`M`].concat(n[0]);break;case`L`:e[r]=[`L`].concat(n[0]);break;case`A`:e[r]=[].concat(t[r]),e[r][6]=n[0][0],e[r][7]=n[0][1];break;case`Q`:if(n.length<2)if(r>0)n=tr(n,e[r-1],1);else{e[r]=t[r];break}e[r]=[`Q`].concat(n.reduce(function(e,t){return e.concat(t)},[]));break;case`T`:e[r]=[`T`].concat(n[0]);break;case`C`:if(n.length<3)if(r>0)n=tr(n,e[r-1],2);else{e[r]=t[r];break}e[r]=[`C`].concat(n.reduce(function(e,t){return e.concat(t)},[]));break;case`S`:if(n.length<2)if(r>0)n=tr(n,e[r-1],1);else{e[r]=t[r];break}e[r]=[`S`].concat(n.reduce(function(e,t){return e.concat(t)},[]));break;default:e[r]=t[r]}return e},ir=function(){function e(e,t){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=e,this.name=e,this.originalEvent=t,this.timeStamp=t.timeStamp}return e.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},e.prototype.stopPropagation=function(){this.propagationStopped=!0},e.prototype.toString=function(){return`[Event (type=`+this.type+`)]`},e.prototype.save=function(){},e.prototype.restore=function(){},e}();function ar(e,t){var n=e.indexOf(t);n!==-1&&e.splice(n,1)}var or=typeof window<`u`&&window.document!==void 0;function sr(e,t){if(e.isCanvas())return!0;for(var n=t.getParent(),r=!1;n;){if(n===e){r=!0;break}n=n.getParent()}return r}function cr(e){return e.cfg.visible&&e.cfg.capture}var lr=function(e){l(t,e);function t(t){var n=e.call(this)||this;n.destroyed=!1;var r=n.getDefaultCfg();return n.cfg=ut(r,t),n}return t.prototype.getDefaultCfg=function(){return{}},t.prototype.get=function(e){return this.cfg[e]},t.prototype.set=function(e,t){this.cfg[e]=t},t.prototype.destroy=function(){this.cfg={destroyed:!0},this.off(),this.destroyed=!0},t}(vn),ur=function(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,a;r<i;r++)(a||!(r in t))&&(a||=Array.prototype.slice.call(t,0,r),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))},dr=function(){function e(e,t,n){this.name=e,this.version=t,this.os=n,this.type=`browser`}return e}(),fr=function(){function e(e){this.version=e,this.type=`node`,this.name=`node`,this.os=process.platform}return e}(),pr=function(){function e(e,t,n,r){this.name=e,this.version=t,this.os=n,this.bot=r,this.type=`bot-device`}return e}(),mr=function(){function e(){this.type=`bot`,this.bot=!0,this.name=`bot`,this.version=null,this.os=null}return e}(),hr=function(){function e(){this.type=`react-native`,this.name=`react-native`,this.version=null,this.os=null}return e}(),gr=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,_r=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,vr=3,yr=[[`aol`,/AOLShield\/([0-9\._]+)/],[`edge`,/Edge\/([0-9\._]+)/],[`edge-ios`,/EdgiOS\/([0-9\._]+)/],[`yandexbrowser`,/YaBrowser\/([0-9\._]+)/],[`kakaotalk`,/KAKAOTALK\s([0-9\.]+)/],[`samsung`,/SamsungBrowser\/([0-9\.]+)/],[`silk`,/\bSilk\/([0-9._-]+)\b/],[`miui`,/MiuiBrowser\/([0-9\.]+)$/],[`beaker`,/BeakerBrowser\/([0-9\.]+)/],[`edge-chromium`,/EdgA?\/([0-9\.]+)/],[`chromium-webview`,/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],[`chrome`,/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],[`phantomjs`,/PhantomJS\/([0-9\.]+)(:?\s|$)/],[`crios`,/CriOS\/([0-9\.]+)(:?\s|$)/],[`firefox`,/Firefox\/([0-9\.]+)(?:\s|$)/],[`fxios`,/FxiOS\/([0-9\.]+)/],[`opera-mini`,/Opera Mini.*Version\/([0-9\.]+)/],[`opera`,/Opera\/([0-9\.]+)(?:\s|$)/],[`opera`,/OPR\/([0-9\.]+)(:?\s|$)/],[`pie`,/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],[`pie`,/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],[`netfront`,/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],[`ie`,/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],[`ie`,/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],[`ie`,/MSIE\s(7\.0)/],[`bb10`,/BB10;\sTouch.*Version\/([0-9\.]+)/],[`android`,/Android\s([0-9\.]+)/],[`ios`,/Version\/([0-9\._]+).*Mobile.*Safari.*/],[`safari`,/Version\/([0-9\._]+).*Safari/],[`facebook`,/FB[AS]V\/([0-9\.]+)/],[`instagram`,/Instagram\s([0-9\.]+)/],[`ios-webview`,/AppleWebKit\/([0-9\.]+).*Mobile/],[`ios-webview`,/AppleWebKit\/([0-9\.]+).*Gecko\)$/],[`curl`,/^curl\/([0-9\.]+)$/],[`searchbot`,gr]],br=[[`iOS`,/iP(hone|od|ad)/],[`Android OS`,/Android/],[`BlackBerry OS`,/BlackBerry|BB10/],[`Windows Mobile`,/IEMobile/],[`Amazon OS`,/Kindle/],[`Windows 3.11`,/Win16/],[`Windows 95`,/(Windows 95)|(Win95)|(Windows_95)/],[`Windows 98`,/(Windows 98)|(Win98)/],[`Windows 2000`,/(Windows NT 5.0)|(Windows 2000)/],[`Windows XP`,/(Windows NT 5.1)|(Windows XP)/],[`Windows Server 2003`,/(Windows NT 5.2)/],[`Windows Vista`,/(Windows NT 6.0)/],[`Windows 7`,/(Windows NT 6.1)/],[`Windows 8`,/(Windows NT 6.2)/],[`Windows 8.1`,/(Windows NT 6.3)/],[`Windows 10`,/(Windows NT 10.0)/],[`Windows ME`,/Windows ME/],[`Windows CE`,/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],[`Open BSD`,/OpenBSD/],[`Sun OS`,/SunOS/],[`Chrome OS`,/CrOS/],[`Linux`,/(Linux)|(X11)/],[`Mac OS`,/(Mac_PowerPC)|(Macintosh)/],[`QNX`,/QNX/],[`BeOS`,/BeOS/],[`OS/2`,/OS\/2/]];function xr(e){return e?Cr(e):typeof document>`u`&&typeof navigator<`u`&&navigator.product===`ReactNative`?new hr:typeof navigator<`u`?Cr(navigator.userAgent):Tr()}function Sr(e){return e!==``&&yr.reduce(function(t,n){var r=n[0],i=n[1];if(t)return t;var a=i.exec(e);return!!a&&[r,a]},!1)}function Cr(e){var t=Sr(e);if(!t)return null;var n=t[0],r=t[1];if(n===`searchbot`)return new mr;var i=r[1]&&r[1].split(`.`).join(`_`).split(`_`).slice(0,3);i?i.length<vr&&(i=ur(ur([],i,!0),Er(vr-i.length),!0)):i=[];var a=i.join(`.`),o=wr(e),s=_r.exec(e);return s&&s[1]?new pr(n,a,o,s[1]):new dr(n,a,o)}function wr(e){for(var t=0,n=br.length;t<n;t++){var r=br[t],i=r[0];if(r[1].exec(e))return i}return null}function Tr(){return typeof process<`u`&&process.version?new fr(process.version.slice(1)):null}function Er(e){for(var t=[],n=0;n<e;n++)t.push(`0`);return t}function Dr(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],c=t[6],l=t[7],u=t[8],d=u*o-s*l,f=-u*a+s*c,p=l*a-o*c,m=n*d+r*f+i*p;return m?(m=1/m,e[0]=d*m,e[1]=(-u*r+i*l)*m,e[2]=(s*r-i*o)*m,e[3]=f*m,e[4]=(u*n-i*c)*m,e[5]=(-s*n+i*a)*m,e[6]=p*m,e[7]=(-l*n+r*c)*m,e[8]=(o*n-r*a)*m,e):null}function Or(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],c=t[5],l=t[6],u=t[7],d=t[8],f=n[0],p=n[1],m=n[2],h=n[3],g=n[4],_=n[5],v=n[6],y=n[7],b=n[8];return e[0]=f*r+p*o+m*l,e[1]=f*i+p*s+m*u,e[2]=f*a+p*c+m*d,e[3]=h*r+g*o+_*l,e[4]=h*i+g*s+_*u,e[5]=h*a+g*c+_*d,e[6]=v*r+y*o+b*l,e[7]=v*i+y*s+b*u,e[8]=v*a+y*c+b*d,e}function kr(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e}function Ar(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=-n,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function jr(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function Mr(e,t,n){var r=[0,0,0,0,0,0,0,0,0];return kr(r,n),Or(e,r,t)}function Nr(e,t,n){var r=[0,0,0,0,0,0,0,0,0];return Ar(r,n),Or(e,r,t)}function Pr(e,t,n){var r=[0,0,0,0,0,0,0,0,0];return jr(r,n),Or(e,r,t)}function Fr(e,t,n){return Or(e,n,t)}function Ir(e,t){for(var n=e?[].concat(e):[1,0,0,0,1,0,0,0,1],r=0,i=t.length;r<i;r++){var a=t[r];switch(a[0]){case`t`:Mr(n,n,[a[1],a[2]]);break;case`s`:Pr(n,n,[a[1],a[2]]);break;case`r`:Nr(n,n,a[1]);break;case`m`:Fr(n,n,a[1]);break;default:break}}return n}function Lr(e,t){return e[0]*t[1]-t[0]*e[1]}function Rr(e,t,n){var r=b(e,t),i=Lr(e,t)>=0;return n?i?Math.PI*2-r:r:i?r:Math.PI*2-r}function zr(e,t){var n=[],r=e[0],i=e[1],a=e[2],o=e[3],s=e[4],c=e[5],l=e[6],u=e[7],d=e[8],f=t[0],p=t[1],m=t[2],h=t[3],g=t[4],_=t[5],v=t[6],y=t[7],b=t[8];return n[0]=f*r+p*o+m*l,n[1]=f*i+p*s+m*u,n[2]=f*a+p*c+m*d,n[3]=h*r+g*o+_*l,n[4]=h*i+g*s+_*u,n[5]=h*a+g*c+_*d,n[6]=v*r+y*o+b*l,n[7]=v*i+y*s+b*u,n[8]=v*a+y*c+b*d,n}function Br(e,t){var n=[],r=t[0],i=t[1];return n[0]=e[0]*r+e[3]*i+e[6],n[1]=e[1]*r+e[4]*i+e[7],n}function Vr(e){var t=[],n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],c=e[6],l=e[7],u=e[8],d=u*o-s*l,f=-u*a+s*c,p=l*a-o*c,m=n*d+r*f+i*p;return m?(m=1/m,t[0]=d*m,t[1]=(-u*r+i*l)*m,t[2]=(s*r-i*o)*m,t[3]=f*m,t[4]=(u*n-i*c)*m,t[5]=(-s*n+i*a)*m,t[6]=p*m,t[7]=(-l*n+r*c)*m,t[8]=(o*n-r*a)*m,t):null}var Hr=Ir,Ur=`matrix`,Wr=[`zIndex`,`capture`,`visible`,`type`],Gr=[`repeat`],Kr=`:`,qr=`*`;function Jr(e){for(var t=[],n=0;n<e.length;n++)N(e[n])?t.push([].concat(e[n])):t.push(e[n]);return t}function Yr(e,t){var n={},r=t.attrs;for(var i in e)n[i]=r[i];return n}function Xr(e,t){var n={},r=t.attr();return F(e,function(e,t){Gr.indexOf(t)===-1&&!Ct(r[t],e)&&(n[t]=e)}),n}function Zr(e,t){if(t.onFrame)return e;var n=t.startTime,r=t.delay,i=t.duration,a=Object.prototype.hasOwnProperty;return F(e,function(e){n+r<e.startTime+e.delay+e.duration&&i>e.delay&&F(t.toAttrs,function(t,n){a.call(e.toAttrs,n)&&(delete e.toAttrs[n],delete e.fromAttrs[n])})}),e}var Qr=function(e){l(t,e);function t(t){var n=e.call(this,t)||this;n.attrs={};var r=n.getDefaultAttrs();return ut(r,t.attrs),n.attrs=r,n.initAttrs(r),n.initAnimate(),n}return t.prototype.getDefaultCfg=function(){return{visible:!0,capture:!0,zIndex:0}},t.prototype.getDefaultAttrs=function(){return{matrix:this.getDefaultMatrix(),opacity:1}},t.prototype.onCanvasChange=function(e){},t.prototype.initAttrs=function(e){},t.prototype.initAnimate=function(){this.set(`animable`,!0),this.set(`animating`,!1)},t.prototype.isGroup=function(){return!1},t.prototype.getParent=function(){return this.get(`parent`)},t.prototype.getCanvas=function(){return this.get(`canvas`)},t.prototype.attr=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=t[0],i=t[1];if(!r)return this.attrs;if(P(r)){for(var a in r)this.setAttr(a,r[a]);return this.afterAttrsChange(r),this}return t.length===2?(this.setAttr(r,i),this.afterAttrsChange((e={},e[r]=i,e)),this):this.attrs[r]},t.prototype.isClipped=function(e,t){var n=this.getClip();return n&&!n.isHit(e,t)},t.prototype.setAttr=function(e,t){var n=this.attrs[e];n!==t&&(this.attrs[e]=t,this.onAttrChange(e,t,n))},t.prototype.onAttrChange=function(e,t,n){e===`matrix`&&this.set(`totalMatrix`,null)},t.prototype.afterAttrsChange=function(e){if(this.cfg.isClipShape){var t=this.cfg.applyTo;t&&t.onCanvasChange(`clip`)}else this.onCanvasChange(`attr`)},t.prototype.show=function(){return this.set(`visible`,!0),this.onCanvasChange(`show`),this},t.prototype.hide=function(){return this.set(`visible`,!1),this.onCanvasChange(`hide`),this},t.prototype.setZIndex=function(e){this.set(`zIndex`,e);var t=this.getParent();return t&&t.sort(),this},t.prototype.toFront=function(){var e=this.getParent();if(e){var t=e.getChildren();this.get(`el`);var n=t.indexOf(this);t.splice(n,1),t.push(this),this.onCanvasChange(`zIndex`)}},t.prototype.toBack=function(){var e=this.getParent();if(e){var t=e.getChildren();this.get(`el`);var n=t.indexOf(this);t.splice(n,1),t.unshift(this),this.onCanvasChange(`zIndex`)}},t.prototype.remove=function(e){e===void 0&&(e=!0);var t=this.getParent();t?(ar(t.getChildren(),this),t.get(`clearing`)||this.onCanvasChange(`remove`)):this.onCanvasChange(`remove`),e&&this.destroy()},t.prototype.resetMatrix=function(){this.attr(Ur,this.getDefaultMatrix()),this.onCanvasChange(`matrix`)},t.prototype.getMatrix=function(){return this.attr(Ur)},t.prototype.setMatrix=function(e){this.attr(Ur,e),this.onCanvasChange(`matrix`)},t.prototype.getTotalMatrix=function(){var e=this.cfg.totalMatrix;if(!e){var t=this.attr(`matrix`),n=this.cfg.parentMatrix;e=n&&t?zr(n,t):t||n,this.set(`totalMatrix`,e)}return e},t.prototype.applyMatrix=function(e){var t=this.attr(`matrix`),n=null;n=e&&t?zr(e,t):t||e,this.set(`totalMatrix`,n),this.set(`parentMatrix`,e)},t.prototype.getDefaultMatrix=function(){return null},t.prototype.applyToMatrix=function(e){var t=this.attr(`matrix`);return t?Br(t,e):e},t.prototype.invertFromMatrix=function(e){var t=this.attr(`matrix`);if(t){var n=Vr(t);if(n)return Br(n,e)}return e},t.prototype.setClip=function(e){var t=this.getCanvas(),n=null;if(e){var r=this.getShapeBase(),i=Ze(e.type),a=r[i];a&&(n=new a({type:e.type,isClipShape:!0,applyTo:this,attrs:e.attrs,canvas:t}))}return this.set(`clipShape`,n),this.onCanvasChange(`clip`),n},t.prototype.getClip=function(){return this.cfg.clipShape||null},t.prototype.clone=function(){var e=this,t=this.attrs,n={};F(t,function(e,r){N(t[r])?n[r]=Jr(t[r]):n[r]=t[r]});var r=this.constructor,i=new r({attrs:n});return F(Wr,function(t){i.set(t,e.get(t))}),i},t.prototype.destroy=function(){this.destroyed||(this.attrs={},e.prototype.destroy.call(this))},t.prototype.isAnimatePaused=function(){return this.get(`_pause`).isPaused},t.prototype.animate=function(){var e=[...arguments];if(!(!this.get(`timeline`)&&!this.get(`canvas`))){this.set(`animating`,!0);var t=this.get(`timeline`);t||(t=this.get(`canvas`).get(`timeline`),this.set(`timeline`,t));var n=this.get(`animations`)||[];t.timer||t.initTimer();var r=e[0],i=e[1],a=e[2],o=a===void 0?`easeLinear`:a,s=e[3],c=s===void 0?Ft:s,l=e[4],u=l===void 0?0:l,d,f,p,m,h;j(r)?(d=r,r={}):P(r)&&r.onFrame&&(d=r.onFrame,f=r.repeat),P(i)?(h=i,i=h.duration,o=h.easing||`easeLinear`,u=h.delay||0,f=h.repeat||f||!1,c=h.callback||Ft,p=h.pauseCallback||Ft,m=h.resumeCallback||Ft):(L(c)&&(u=c,c=null),j(o)?(c=o,o=`easeLinear`):o||=`easeLinear`);var g=Xr(r,this),_={fromAttrs:Yr(g,this),toAttrs:g,duration:i,easing:o,repeat:f,callback:c,pauseCallback:p,resumeCallback:m,delay:u,startTime:t.getTime(),id:Pt(),onFrame:d,pathFormatted:!1};n.length>0?n=Zr(n,_):t.addAnimator(this),n.push(_),this.set(`animations`,n),this.set(`_pause`,{isPaused:!1})}},t.prototype.stopAnimate=function(e){var t=this;e===void 0&&(e=!0);var n=this.get(`animations`);F(n,function(n){e&&(n.onFrame?t.attr(n.onFrame(1)):t.attr(n.toAttrs)),n.callback&&n.callback()}),this.set(`animating`,!1),this.set(`animations`,[])},t.prototype.pauseAnimate=function(){var e=this.get(`timeline`),t=this.get(`animations`),n=e.getTime();return F(t,function(e){e._paused=!0,e._pauseTime=n,e.pauseCallback&&e.pauseCallback()}),this.set(`_pause`,{isPaused:!0,pauseTime:n}),this},t.prototype.resumeAnimate=function(){var e=this.get(`timeline`).getTime(),t=this.get(`animations`),n=this.get(`_pause`).pauseTime;return F(t,function(t){t.startTime+=e-n,t._paused=!1,t._pauseTime=null,t.resumeCallback&&t.resumeCallback()}),this.set(`_pause`,{isPaused:!1}),this.set(`animations`,t),this},t.prototype.emitDelegation=function(e,t){var n=this,r=t.propagationPath;this.getEvents();var i;e===`mouseenter`?i=t.fromShape:e===`mouseleave`&&(i=t.toShape);for(var a=function(e){var a=r[e],s=a.get(`name`);if(s){if((a.isGroup()||a.isCanvas&&a.isCanvas())&&i&&sr(a,i))return`break`;N(s)?F(s,function(e){n.emitDelegateEvent(a,e,t)}):o.emitDelegateEvent(a,s,t)}},o=this,s=0;s<r.length&&a(s)!==`break`;s++);},t.prototype.emitDelegateEvent=function(e,t,n){var r=this.getEvents(),i=t+Kr+n.type;(r[i]||r[qr])&&(n.name=i,n.currentTarget=e,n.delegateTarget=this,n.delegateObject=e.get(`delegateObject`),this.emit(i,n))},t.prototype.translate=function(e,t){e===void 0&&(e=0),t===void 0&&(t=0);var n=this.getMatrix(),r=Hr(n,[[`t`,e,t]]);return this.setMatrix(r),this},t.prototype.move=function(e,t){var n=this.attr(`x`)||0,r=this.attr(`y`)||0;return this.translate(e-n,t-r),this},t.prototype.moveTo=function(e,t){return this.move(e,t)},t.prototype.scale=function(e,t){var n=this.getMatrix(),r=Hr(n,[[`s`,e,t||e]]);return this.setMatrix(r),this},t.prototype.rotate=function(e){var t=this.getMatrix(),n=Hr(t,[[`r`,e]]);return this.setMatrix(n),this},t.prototype.rotateAtStart=function(e){var t=this.attr(),n=t.x,r=t.y,i=this.getMatrix(),a=Hr(i,[[`t`,-n,-r],[`r`,e],[`t`,n,r]]);return this.setMatrix(a),this},t.prototype.rotateAtPoint=function(e,t,n){var r=this.getMatrix(),i=Hr(r,[[`t`,-e,-t],[`r`,n],[`t`,e,t]]);return this.setMatrix(i),this},t}(lr),$r={},ei=`_INDEX`;function ti(e,t){if(e.set(`canvas`,t),e.isGroup()){var n=e.get(`children`);n.length&&n.forEach(function(e){ti(e,t)})}}function ni(e,t){if(e.set(`timeline`,t),e.isGroup()){var n=e.get(`children`);n.length&&n.forEach(function(e){ni(e,t)})}}function ri(e,t,n){n===void 0&&(n=!0),n?t.destroy():(t.set(`parent`,null),t.set(`canvas`,null)),ar(e.getChildren(),t)}function ii(e){return function(t,n){var r=e(t,n);return r===0?t[ei]-n[ei]:r}}var ai=function(e){l(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.isCanvas=function(){return!1},t.prototype.getBBox=function(){var e=1/0,t=-1/0,n=1/0,r=-1/0,i=this.getChildren().filter(function(e){return e.get(`visible`)&&(!e.isGroup()||e.isGroup()&&e.getChildren().length>0)});return i.length>0?F(i,function(i){var a=i.getBBox(),o=a.minX,s=a.maxX,c=a.minY,l=a.maxY;o<e&&(e=o),s>t&&(t=s),c<n&&(n=c),l>r&&(r=l)}):(e=0,t=0,n=0,r=0),{x:e,y:n,minX:e,minY:n,maxX:t,maxY:r,width:t-e,height:r-n}},t.prototype.getCanvasBBox=function(){var e=1/0,t=-1/0,n=1/0,r=-1/0,i=this.getChildren().filter(function(e){return e.get(`visible`)&&(!e.isGroup()||e.isGroup()&&e.getChildren().length>0)});return i.length>0?F(i,function(i){var a=i.getCanvasBBox(),o=a.minX,s=a.maxX,c=a.minY,l=a.maxY;o<e&&(e=o),s>t&&(t=s),c<n&&(n=c),l>r&&(r=l)}):(e=0,t=0,n=0,r=0),{x:e,y:n,minX:e,minY:n,maxX:t,maxY:r,width:t-e,height:r-n}},t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return t.children=[],t},t.prototype.onAttrChange=function(t,n,r){if(e.prototype.onAttrChange.call(this,t,n,r),t===`matrix`){var i=this.getTotalMatrix();this._applyChildrenMarix(i)}},t.prototype.applyMatrix=function(t){var n=this.getTotalMatrix();e.prototype.applyMatrix.call(this,t);var r=this.getTotalMatrix();r!==n&&this._applyChildrenMarix(r)},t.prototype._applyChildrenMarix=function(e){var t=this.getChildren();F(t,function(t){t.applyMatrix(e)})},t.prototype.addShape=function(){var e=[...arguments],t=e[0],n=e[1];P(t)?n=t:n.type=t;var r=$r[n.type];r||(r=Ze(n.type),$r[n.type]=r);var i=new(this.getShapeBase())[r](n);return this.add(i),i},t.prototype.addGroup=function(){var e=[...arguments],t=e[0],n=e[1],r;if(j(t))r=n?new t(n):new t({parent:this});else{var i=t||{};r=new(this.getGroupBase())(i)}return this.add(r),r},t.prototype.getCanvas=function(){return this.isCanvas()?this:this.get(`canvas`)},t.prototype.getShape=function(e,t,n){if(!cr(this))return null;var r=this.getChildren(),i;if(this.isCanvas())i=this._findShape(r,e,t,n);else{var a=[e,t,1];a=this.invertFromMatrix(a),this.isClipped(a[0],a[1])||(i=this._findShape(r,a[0],a[1],n))}return i},t.prototype._findShape=function(e,t,n,r){for(var i=null,a=e.length-1;a>=0;a--){var o=e[a];if(cr(o)&&(o.isGroup()?i=o.getShape(t,n,r):o.isHit(t,n)&&(i=o)),i)break}return i},t.prototype.add=function(e){var t=this.getCanvas(),n=this.getChildren(),r=this.get(`timeline`),i=e.getParent();i&&ri(i,e,!1),e.set(`parent`,this),t&&ti(e,t),r&&ni(e,r),n.push(e),e.onCanvasChange(`add`),this._applyElementMatrix(e)},t.prototype._applyElementMatrix=function(e){var t=this.getTotalMatrix();t&&e.applyMatrix(t)},t.prototype.getChildren=function(){return this.get(`children`)||[]},t.prototype.sort=function(){var e=this.getChildren();F(e,function(e,t){return e[ei]=t,e}),e.sort(ii(function(e,t){return e.get(`zIndex`)-t.get(`zIndex`)})),this.onCanvasChange(`sort`)},t.prototype.clear=function(){if(this.set(`clearing`,!0),!this.destroyed){for(var e=this.getChildren(),t=e.length-1;t>=0;t--)e[t].destroy();this.set(`children`,[]),this.onCanvasChange(`clear`),this.set(`clearing`,!1)}},t.prototype.destroy=function(){this.get(`destroyed`)||(this.clear(),e.prototype.destroy.call(this))},t.prototype.getFirst=function(){return this.getChildByIndex(0)},t.prototype.getLast=function(){var e=this.getChildren();return this.getChildByIndex(e.length-1)},t.prototype.getChildByIndex=function(e){return this.getChildren()[e]},t.prototype.getCount=function(){return this.getChildren().length},t.prototype.contain=function(e){return this.getChildren().indexOf(e)>-1},t.prototype.removeChild=function(e,t){t===void 0&&(t=!0),this.contain(e)&&e.remove(t)},t.prototype.findAll=function(e){var t=[],n=this.getChildren();return F(n,function(n){e(n)&&t.push(n),n.isGroup()&&(t=t.concat(n.findAll(e)))}),t},t.prototype.find=function(e){var t=null,n=this.getChildren();return F(n,function(n){if(e(n)?t=n:n.isGroup()&&(t=n.find(e)),t)return!1}),t},t.prototype.findById=function(e){return this.find(function(t){return t.get(`id`)===e})},t.prototype.findByClassName=function(e){return this.find(function(t){return t.get(`className`)===e})},t.prototype.findAllByName=function(e){return this.findAll(function(t){return t.get(`name`)===e})},t}(Qr),oi=0,si=0,ci=0,li=1e3,ui,di,fi=0,pi=0,mi=0,hi=typeof performance==`object`&&performance.now?performance:Date,gi=typeof window==`object`&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function _i(){return pi||=(gi(vi),hi.now()+mi)}function vi(){pi=0}function yi(){this._call=this._time=this._next=null}yi.prototype=bi.prototype={constructor:yi,restart:function(e,t,n){if(typeof e!=`function`)throw TypeError(`callback is not a function`);n=(n==null?_i():+n)+(t==null?0:+t),!this._next&&di!==this&&(di?di._next=this:ui=this,di=this),this._call=e,this._time=n,Ti()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ti())}};function bi(e,t,n){var r=new yi;return r.restart(e,t,n),r}function xi(){_i(),++oi;for(var e=ui,t;e;)(t=pi-e._time)>=0&&e._call.call(null,t),e=e._next;--oi}function Si(){pi=(fi=hi.now())+mi,oi=si=0;try{xi()}finally{oi=0,wi(),pi=0}}function Ci(){var e=hi.now(),t=e-fi;t>li&&(mi-=t,fi=e)}function wi(){for(var e,t=ui,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:ui=n);di=e,Ti(r)}function Ti(e){oi||(si&&=clearTimeout(si),e-pi>24?(e<1/0&&(si=setTimeout(Si,e-hi.now()-mi)),ci&&=clearInterval(ci)):(ci||=(fi=hi.now(),setInterval(Ci,li)),oi=1,gi(Si)))}function Ei(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Di(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Oi(){}var ki=.7,Ai=1/ki,ji=`\\s*([+-]?\\d+)\\s*`,Mi=`\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*`,Ni=`\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*`,Pi=/^#([0-9a-f]{3,8})$/,Fi=RegExp(`^rgb\\(${ji},${ji},${ji}\\)$`),Ii=RegExp(`^rgb\\(${Ni},${Ni},${Ni}\\)$`),Li=RegExp(`^rgba\\(${ji},${ji},${ji},${Mi}\\)$`),Ri=RegExp(`^rgba\\(${Ni},${Ni},${Ni},${Mi}\\)$`),zi=RegExp(`^hsl\\(${Mi},${Ni},${Ni}\\)$`),Bi=RegExp(`^hsla\\(${Mi},${Ni},${Ni},${Mi}\\)$`),Vi={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ei(Oi,Ki,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Hi,formatHex:Hi,formatHex8:Ui,formatHsl:Wi,formatRgb:Gi,toString:Gi});function Hi(){return this.rgb().formatHex()}function Ui(){return this.rgb().formatHex8()}function Wi(){return aa(this).formatHsl()}function Gi(){return this.rgb().formatRgb()}function Ki(e){var t,n;return e=(e+``).trim().toLowerCase(),(t=Pi.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?qi(t):n===3?new Zi(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Ji(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Ji(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Fi.exec(e))?new Zi(t[1],t[2],t[3],1):(t=Ii.exec(e))?new Zi(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Li.exec(e))?Ji(t[1],t[2],t[3],t[4]):(t=Ri.exec(e))?Ji(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=zi.exec(e))?ia(t[1],t[2]/100,t[3]/100,1):(t=Bi.exec(e))?ia(t[1],t[2]/100,t[3]/100,t[4]):Vi.hasOwnProperty(e)?qi(Vi[e]):e===`transparent`?new Zi(NaN,NaN,NaN,0):null}function qi(e){return new Zi(e>>16&255,e>>8&255,e&255,1)}function Ji(e,t,n,r){return r<=0&&(e=t=n=NaN),new Zi(e,t,n,r)}function Yi(e){return e instanceof Oi||(e=Ki(e)),e?(e=e.rgb(),new Zi(e.r,e.g,e.b,e.opacity)):new Zi}function Xi(e,t,n,r){return arguments.length===1?Yi(e):new Zi(e,t,n,r??1)}function Zi(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Ei(Zi,Xi,Di(Oi,{brighter(e){return e=e==null?Ai:Ai**+e,new Zi(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?ki:ki**+e,new Zi(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Zi(na(this.r),na(this.g),na(this.b),ta(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Qi,formatHex:Qi,formatHex8:$i,formatRgb:ea,toString:ea}));function Qi(){return`#${ra(this.r)}${ra(this.g)}${ra(this.b)}`}function $i(){return`#${ra(this.r)}${ra(this.g)}${ra(this.b)}${ra((isNaN(this.opacity)?1:this.opacity)*255)}`}function ea(){let e=ta(this.opacity);return`${e===1?`rgb(`:`rgba(`}${na(this.r)}, ${na(this.g)}, ${na(this.b)}${e===1?`)`:`, ${e})`}`}function ta(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function na(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ra(e){return e=na(e),(e<16?`0`:``)+e.toString(16)}function ia(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new sa(e,t,n,r)}function aa(e){if(e instanceof sa)return new sa(e.h,e.s,e.l,e.opacity);if(e instanceof Oi||(e=Ki(e)),!e)return new sa;if(e instanceof sa)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),o=NaN,s=a-i,c=(a+i)/2;return s?(o=t===a?(n-r)/s+(n<r)*6:n===a?(r-t)/s+2:(t-n)/s+4,s/=c<.5?a+i:2-a-i,o*=60):s=c>0&&c<1?0:o,new sa(o,s,c,e.opacity)}function oa(e,t,n,r){return arguments.length===1?aa(e):new sa(e,t,n,r??1)}function sa(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Ei(sa,oa,Di(Oi,{brighter(e){return e=e==null?Ai:Ai**+e,new sa(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?ki:ki**+e,new sa(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Zi(ua(e>=240?e-240:e+120,i,r),ua(e,i,r),ua(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new sa(ca(this.h),la(this.s),la(this.l),ta(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let e=ta(this.opacity);return`${e===1?`hsl(`:`hsla(`}${ca(this.h)}, ${la(this.s)*100}%, ${la(this.l)*100}%${e===1?`)`:`, ${e})`}`}}));function ca(e){return e=(e||0)%360,e<0?e+360:e}function la(e){return Math.max(0,Math.min(1,e||0))}function ua(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}var da=e=>()=>e;function fa(e,t){return function(n){return e+n*t}}function pa(e,t,n){return e**=+n,t=t**+n-e,n=1/n,function(r){return(e+r*t)**+n}}function ma(e){return(e=+e)==1?ha:function(t,n){return n-t?pa(t,n,e):da(isNaN(t)?n:t)}}function ha(e,t){var n=t-e;return n?fa(e,n):da(isNaN(e)?t:e)}var ga=(function e(t){var n=ma(t);function r(e,t){var r=n((e=Xi(e)).r,(t=Xi(t)).r),i=n(e.g,t.g),a=n(e.b,t.b),o=ha(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=i(t),e.b=a(t),e.opacity=o(t),e+``}}return r.gamma=e,r})(1);function _a(e,t){t||=[];var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=e[i]*(1-a)+t[i]*a;return r}}function va(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function ya(e,t){return(va(t)?_a:ba)(e,t)}function ba(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=Array(r),a=Array(n),o;for(o=0;o<r;++o)i[o]=ka(e[o],t[o]);for(;o<n;++o)a[o]=t[o];return function(e){for(o=0;o<r;++o)a[o]=i[o](e);return a}}function xa(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Sa(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Ca(e,t){var n={},r={},i;for(i in(typeof e!=`object`||!e)&&(e={}),(typeof t!=`object`||!t)&&(t={}),t)i in e?n[i]=ka(e[i],t[i]):r[i]=t[i];return function(e){for(i in n)r[i]=n[i](e);return r}}var wa=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ta=new RegExp(wa.source,`g`);function Ea(e){return function(){return e}}function Da(e){return function(t){return e(t)+``}}function Oa(e,t){var n=wa.lastIndex=Ta.lastIndex=0,r,i,a,o=-1,s=[],c=[];for(e+=``,t+=``;(r=wa.exec(e))&&(i=Ta.exec(t));)(a=i.index)>n&&(a=t.slice(n,a),s[o]?s[o]+=a:s[++o]=a),(r=r[0])===(i=i[0])?s[o]?s[o]+=i:s[++o]=i:(s[++o]=null,c.push({i:o,x:Sa(r,i)})),n=Ta.lastIndex;return n<t.length&&(a=t.slice(n),s[o]?s[o]+=a:s[++o]=a),s.length<2?c[0]?Da(c[0].x):Ea(t):(t=c.length,function(e){for(var n=0,r;n<t;++n)s[(r=c[n]).i]=r.x(e);return s.join(``)})}function ka(e,t){var n=typeof t,r;return t==null||n===`boolean`?da(t):(n===`number`?Sa:n===`string`?(r=Ki(t))?(t=r,ga):Oa:t instanceof Ki?ga:t instanceof Date?xa:va(t)?_a:Array.isArray(t)?ba:typeof t.valueOf!=`function`&&typeof t.toString!=`function`||isNaN(t)?Ca:Sa)(e,t)}function Aa(e){return+e}function ja(e){return e*e}function Ma(e){return e*(2-e)}function Na(e){return((e*=2)<=1?e*e:--e*(2-e)+1)/2}function Pa(e){return e*e*e}function Fa(e){return--e*e*e+1}function Ia(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var La=3,Ra=(function e(t){t=+t;function n(e){return e**+t}return n.exponent=e,n})(La),za=(function e(t){t=+t;function n(e){return 1-(1-e)**t}return n.exponent=e,n})(La),Ba=(function e(t){t=+t;function n(e){return((e*=2)<=1?e**+t:2-(2-e)**t)/2}return n.exponent=e,n})(La),Va=Math.PI,Ha=Va/2;function Ua(e){return+e==1?1:1-Math.cos(e*Ha)}function Wa(e){return Math.sin(e*Ha)}function Ga(e){return(1-Math.cos(Va*e))/2}function Ka(e){return(2**(-10*e)-.0009765625)*1.0009775171065494}function qa(e){return Ka(1-e)}function Ja(e){return 1-Ka(e)}function Ya(e){return((e*=2)<=1?Ka(1-e):2-Ka(e-1))/2}function Xa(e){return 1-Math.sqrt(1-e*e)}function Za(e){return Math.sqrt(1- --e*e)}function Qa(e){return((e*=2)<=1?1-Math.sqrt(1-e*e):Math.sqrt(1-(e-=2)*e)+1)/2}var $a=4/11,eo=6/11,to=8/11,no=3/4,ro=9/11,io=10/11,ao=15/16,oo=21/22,so=63/64,co=1/$a/$a;function lo(e){return 1-uo(1-e)}function uo(e){return(e=+e)<$a?co*e*e:e<to?co*(e-=eo)*e+no:e<io?co*(e-=ro)*e+ao:co*(e-=oo)*e+so}function fo(e){return((e*=2)<=1?1-uo(1-e):uo(e-1)+1)/2}var po=1.70158,mo=(function e(t){t=+t;function n(e){return(e=+e)*e*(t*(e-1)+e)}return n.overshoot=e,n})(po),ho=(function e(t){t=+t;function n(e){return--e*e*((e+1)*t+e)+1}return n.overshoot=e,n})(po),go=(function e(t){t=+t;function n(e){return((e*=2)<1?e*e*((t+1)*e-t):(e-=2)*e*((t+1)*e+t)+2)/2}return n.overshoot=e,n})(po),_o=2*Math.PI,vo=1,yo=.3,bo=(function e(t,n){var r=Math.asin(1/(t=Math.max(1,t)))*(n/=_o);function i(e){return t*Ka(- --e)*Math.sin((r-e)/n)}return i.amplitude=function(t){return e(t,n*_o)},i.period=function(n){return e(t,n)},i})(vo,yo),xo=(function e(t,n){var r=Math.asin(1/(t=Math.max(1,t)))*(n/=_o);function i(e){return 1-t*Ka(e=+e)*Math.sin((e+r)/n)}return i.amplitude=function(t){return e(t,n*_o)},i.period=function(n){return e(t,n)},i})(vo,yo),So=(function e(t,n){var r=Math.asin(1/(t=Math.max(1,t)))*(n/=_o);function i(e){return((e=e*2-1)<0?t*Ka(-e)*Math.sin((r-e)/n):2-t*Ka(e)*Math.sin((r+e)/n))/2}return i.amplitude=function(t){return e(t,n*_o)},i.period=function(n){return e(t,n)},i})(vo,yo),Co=e({easeBack:()=>go,easeBackIn:()=>mo,easeBackInOut:()=>go,easeBackOut:()=>ho,easeBounce:()=>uo,easeBounceIn:()=>lo,easeBounceInOut:()=>fo,easeBounceOut:()=>uo,easeCircle:()=>Qa,easeCircleIn:()=>Xa,easeCircleInOut:()=>Qa,easeCircleOut:()=>Za,easeCubic:()=>Ia,easeCubicIn:()=>Pa,easeCubicInOut:()=>Ia,easeCubicOut:()=>Fa,easeElastic:()=>xo,easeElasticIn:()=>bo,easeElasticInOut:()=>So,easeElasticOut:()=>xo,easeExp:()=>Ya,easeExpIn:()=>qa,easeExpInOut:()=>Ya,easeExpOut:()=>Ja,easeLinear:()=>Aa,easePoly:()=>Ba,easePolyIn:()=>Ra,easePolyInOut:()=>Ba,easePolyOut:()=>za,easeQuad:()=>Na,easeQuadIn:()=>ja,easeQuadInOut:()=>Na,easeQuadOut:()=>Ma,easeSin:()=>Ga,easeSinIn:()=>Ua,easeSinInOut:()=>Ga,easeSinOut:()=>Wa}),wo={};function To(e){return wo[e.toLowerCase()]||Co[e]}function Eo(e,t){wo[e.toLowerCase()]=t}var Do=function(e){return[`fill`,`stroke`,`fillStyle`,`strokeStyle`].includes(e)},Oo=function(e){return/^[r,R,L,l]{1}[\s]*\(/.test(e)},ko=[1,0,0,0,1,0,0,0,1];function Ao(e,t,n){var r={},i=t.fromAttrs,a=t.toAttrs;if(!e.destroyed){var o;for(var s in a)if(!Ct(i[s],a[s]))if(s===`path`){var c=a[s],l=i[s];c.length>l.length?(c=wn(a[s]),l=wn(i[s]),l=er(l,c),l=rr(l,c),t.fromAttrs.path=l,t.toAttrs.path=c):t.pathFormatted||=(c=wn(a[s]),l=wn(i[s]),l=rr(l,c),t.fromAttrs.path=l,t.toAttrs.path=c,!0),r[s]=[];for(var u=0;u<c.length;u++){for(var d=c[u],f=l[u],p=[],m=0;m<d.length;m++)L(d[m])&&f&&L(f[m])?(o=ka(f[m],d[m]),p.push(o(n))):p.push(d[m]);r[s].push(p)}}else s===`matrix`?r[s]=ya(i[s]||ko,a[s]||ko)(n):Do(s)&&Oo(a[s])?r[s]=a[s]:j(a[s])||(o=ka(i[s],a[s]),r[s]=o(n));e.attr(r)}}function jo(e,t,n){var r=t.startTime,i=t.delay;if(n<r+i||t._paused)return!1;var a,o=t.duration,s=t.easing,c=To(s);if(n=n-r-t.delay,t.repeat)a=n%o/o,a=c(a);else if(a=n/o,a<1)a=c(a);else return t.onFrame?e.attr(t.onFrame(1)):e.attr(t.toAttrs),!0;if(t.onFrame){var l=t.onFrame(a);e.attr(l)}else Ao(e,t,a);return!1}var Mo=function(){function e(e){this.animators=[],this.current=0,this.timer=null,this.canvas=e}return e.prototype.initTimer=function(){var e=this,t=!1,n,r,i;this.timer=bi(function(a){if(e.current=a,e.animators.length>0){for(var o=e.animators.length-1;o>=0;o--){if(n=e.animators[o],n.destroyed){e.removeAnimator(o);continue}if(!n.isAnimatePaused()){r=n.get(`animations`);for(var s=r.length-1;s>=0;s--)i=r[s],t=jo(n,i,a),t&&(r.splice(s,1),t=!1,i.callback&&i.callback())}r.length===0&&e.removeAnimator(o)}e.canvas.get(`autoDraw`)||e.canvas.draw()}})},e.prototype.addAnimator=function(e){this.animators.push(e)},e.prototype.removeAnimator=function(e){this.animators.splice(e,1)},e.prototype.isAnimating=function(){return!!this.animators.length},e.prototype.stop=function(){this.timer&&this.timer.stop()},e.prototype.stopAllAnimations=function(e){e===void 0&&(e=!0),this.animators.forEach(function(t){t.stopAnimate(e)}),this.animators=[],this.canvas.draw()},e.prototype.getTime=function(){return this.current},e}(),No=40,Po=0,Fo=[`mousedown`,`mouseup`,`dblclick`,`mouseout`,`mouseover`,`mousemove`,`mouseleave`,`mouseenter`,`touchstart`,`touchmove`,`touchend`,`dragenter`,`dragover`,`dragleave`,`drop`,`contextmenu`,`mousewheel`];function Io(e,t,n){n.name=t,n.target=e,n.currentTarget=e,n.delegateTarget=e,e.emit(t,n)}function Lo(e,t,n){if(n.bubbles){var r=void 0,i=!1;if(t===`mouseenter`?(r=n.fromShape,i=!0):t===`mouseleave`&&(i=!0,r=n.toShape),e.isCanvas()&&i)return;if(r&&sr(e,r)){n.bubbles=!1;return}n.name=t,n.currentTarget=e,n.delegateTarget=e,e.emit(t,n)}}var Ro=function(){function e(e){var t=this;this.draggingShape=null,this.dragging=!1,this.currentShape=null,this.mousedownShape=null,this.mousedownPoint=null,this._eventCallback=function(e){var n=e.type;t._triggerEvent(n,e)},this._onDocumentMove=function(e){if(t.canvas.get(`el`)!==e.target&&(t.dragging||t.currentShape)){var n=t._getPointInfo(e);t.dragging&&t._emitEvent(`drag`,e,n,t.draggingShape)}},this._onDocumentMouseUp=function(e){if(t.canvas.get(`el`)!==e.target&&t.dragging){var n=t._getPointInfo(e);t.draggingShape&&t._emitEvent(`drop`,e,n,null),t._emitEvent(`dragend`,e,n,t.draggingShape),t._afterDrag(t.draggingShape,n,e)}},this.canvas=e.canvas}return e.prototype.init=function(){this._bindEvents()},e.prototype._bindEvents=function(){var e=this,t=this.canvas.get(`el`);F(Fo,function(n){t.addEventListener(n,e._eventCallback)}),document&&(document.addEventListener(`mousemove`,this._onDocumentMove),document.addEventListener(`mouseup`,this._onDocumentMouseUp))},e.prototype._clearEvents=function(){var e=this,t=this.canvas.get(`el`);F(Fo,function(n){t.removeEventListener(n,e._eventCallback)}),document&&(document.removeEventListener(`mousemove`,this._onDocumentMove),document.removeEventListener(`mouseup`,this._onDocumentMouseUp))},e.prototype._getEventObj=function(e,t,n,r,i,a){var o=new ir(e,t);return o.fromShape=i,o.toShape=a,o.x=n.x,o.y=n.y,o.clientX=n.clientX,o.clientY=n.clientY,o.propagationPath.push(r),o},e.prototype._getShape=function(e,t){return this.canvas.getShape(e.x,e.y,t)},e.prototype._getPointInfo=function(e){var t=this.canvas,n=t.getClientByEvent(e),r=t.getPointByEvent(e);return{x:r.x,y:r.y,clientX:n.x,clientY:n.y}},e.prototype._triggerEvent=function(e,t){var n=this._getPointInfo(t),r=this._getShape(n,t),i=this[`_on`+e],a=!1;if(i)i.call(this,n,r,t);else{var o=this.currentShape;e===`mouseenter`||e===`dragenter`||e===`mouseover`?(this._emitEvent(e,t,n,null,null,r),r&&this._emitEvent(e,t,n,r,null,r),e===`mouseenter`&&this.draggingShape&&this._emitEvent(`dragenter`,t,n,null)):e===`mouseleave`||e===`dragleave`||e===`mouseout`?(a=!0,o&&this._emitEvent(e,t,n,o,o,null),this._emitEvent(e,t,n,null,o,null),e===`mouseleave`&&this.draggingShape&&this._emitEvent(`dragleave`,t,n,null)):this._emitEvent(e,t,n,r,null,null)}if(a||(this.currentShape=r),r&&!r.get(`destroyed`)){var s=this.canvas,c=s.get(`el`);c.style.cursor=r.attr(`cursor`)||s.get(`cursor`)}},e.prototype._onmousedown=function(e,t,n){n.button===Po&&(this.mousedownShape=t,this.mousedownPoint=e,this.mousedownTimeStamp=n.timeStamp),this._emitEvent(`mousedown`,n,e,t,null,null)},e.prototype._emitMouseoverEvents=function(e,t,n,r){var i=this.canvas.get(`el`);n!==r&&(n&&(this._emitEvent(`mouseout`,e,t,n,n,r),this._emitEvent(`mouseleave`,e,t,n,n,r),(!r||r.get(`destroyed`))&&(i.style.cursor=this.canvas.get(`cursor`))),r&&(this._emitEvent(`mouseover`,e,t,r,n,r),this._emitEvent(`mouseenter`,e,t,r,n,r)))},e.prototype._emitDragoverEvents=function(e,t,n,r,i){r?(r!==n&&(n&&this._emitEvent(`dragleave`,e,t,n,n,r),this._emitEvent(`dragenter`,e,t,r,n,r)),i||this._emitEvent(`dragover`,e,t,r)):n&&this._emitEvent(`dragleave`,e,t,n,n,r),i&&this._emitEvent(`dragover`,e,t,r)},e.prototype._afterDrag=function(e,t,n){e&&(e.set(`capture`,!0),this.draggingShape=null),this.dragging=!1;var r=this._getShape(t,n);r!==e&&this._emitMouseoverEvents(n,t,e,r),this.currentShape=r},e.prototype._onmouseup=function(e,t,n){if(n.button===Po){var r=this.draggingShape;this.dragging?(r&&this._emitEvent(`drop`,n,e,t),this._emitEvent(`dragend`,n,e,r),this._afterDrag(r,e,n)):(this._emitEvent(`mouseup`,n,e,t),t===this.mousedownShape&&this._emitEvent(`click`,n,e,t),this.mousedownShape=null,this.mousedownPoint=null)}},e.prototype._ondragover=function(e,t,n){n.preventDefault();var r=this.currentShape;this._emitDragoverEvents(n,e,r,t,!0)},e.prototype._onmousemove=function(e,t,n){var r=this.canvas,i=this.currentShape,a=this.draggingShape;if(this.dragging)a&&this._emitDragoverEvents(n,e,i,t,!1),this._emitEvent(`drag`,n,e,a);else{var o=this.mousedownPoint;if(o){var s=this.mousedownShape,c=n.timeStamp-this.mousedownTimeStamp,l=o.clientX-e.clientX,u=o.clientY-e.clientY,d=l*l+u*u;c>120||d>No?s&&s.get(`draggable`)?(a=this.mousedownShape,a.set(`capture`,!1),this.draggingShape=a,this.dragging=!0,this._emitEvent(`dragstart`,n,e,a),this.mousedownShape=null,this.mousedownPoint=null):!s&&r.get(`draggable`)?(this.dragging=!0,this._emitEvent(`dragstart`,n,e,null),this.mousedownShape=null,this.mousedownPoint=null):(this._emitMouseoverEvents(n,e,i,t),this._emitEvent(`mousemove`,n,e,t)):(this._emitMouseoverEvents(n,e,i,t),this._emitEvent(`mousemove`,n,e,t))}else this._emitMouseoverEvents(n,e,i,t),this._emitEvent(`mousemove`,n,e,t)}},e.prototype._emitEvent=function(e,t,n,r,i,a){var o=this._getEventObj(e,t,n,r,i,a);if(r){o.shape=r,Io(r,e,o);for(var s=r.getParent();s;)s.emitDelegation(e,o),o.propagationStopped||Lo(s,e,o),o.propagationPath.push(s),s=s.getParent()}else{var c=this.canvas;Io(c,e,o)}},e.prototype.destroy=function(){this._clearEvents(),this.canvas=null,this.currentShape=null,this.draggingShape=null,this.mousedownPoint=null,this.mousedownShape=null,this.mousedownTimeStamp=null},e}(),zo=`px`,Bo=xr(),Vo=Bo&&Bo.name===`firefox`,Ho=function(e){l(t,e);function t(t){var n=e.call(this,t)||this;return n.initContainer(),n.initDom(),n.initEvents(),n.initTimeline(),n}return t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return t.cursor=`default`,t.supportCSSTransform=!1,t},t.prototype.initContainer=function(){var e=this.get(`container`);I(e)&&(e=document.getElementById(e),this.set(`container`,e))},t.prototype.initDom=function(){var e=this.createDom();this.set(`el`,e),this.get(`container`).appendChild(e),this.setDOMSize(this.get(`width`),this.get(`height`))},t.prototype.initEvents=function(){var e=new Ro({canvas:this});e.init(),this.set(`eventController`,e)},t.prototype.initTimeline=function(){var e=new Mo(this);this.set(`timeline`,e)},t.prototype.setDOMSize=function(e,t){var n=this.get(`el`);or&&(n.style.width=e+zo,n.style.height=t+zo)},t.prototype.changeSize=function(e,t){this.setDOMSize(e,t),this.set(`width`,e),this.set(`height`,t),this.onCanvasChange(`changeSize`)},t.prototype.getRenderer=function(){return this.get(`renderer`)},t.prototype.getCursor=function(){return this.get(`cursor`)},t.prototype.setCursor=function(e){this.set(`cursor`,e);var t=this.get(`el`);or&&t&&(t.style.cursor=e)},t.prototype.getPointByEvent=function(e){if(this.get(`supportCSSTransform`)){if(Vo&&!M(e.layerX)&&e.layerX!==e.offsetX)return{x:e.layerX,y:e.layerY};if(!M(e.offsetX))return{x:e.offsetX,y:e.offsetY}}var t=this.getClientByEvent(e),n=t.x,r=t.y;return this.getPointByClient(n,r)},t.prototype.getClientByEvent=function(e){var t=e;return e.touches&&(t=e.type===`touchend`?e.changedTouches[0]:e.touches[0]),{x:t.clientX,y:t.clientY}},t.prototype.getPointByClient=function(e,t){var n=this.get(`el`).getBoundingClientRect();return{x:e-n.left,y:t-n.top}},t.prototype.getClientByPoint=function(e,t){var n=this.get(`el`).getBoundingClientRect();return{x:e+n.left,y:t+n.top}},t.prototype.draw=function(){},t.prototype.removeDom=function(){var e=this.get(`el`);e.parentNode.removeChild(e)},t.prototype.clearEvents=function(){this.get(`eventController`).destroy()},t.prototype.isCanvas=function(){return!0},t.prototype.getParent=function(){return null},t.prototype.destroy=function(){var t=this.get(`timeline`);this.get(`destroyed`)||(this.clear(),t&&t.stop(),this.clearEvents(),this.removeDom(),e.prototype.destroy.call(this))},t}(ai),Uo=function(e){l(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.isGroup=function(){return!0},t.prototype.isEntityGroup=function(){return!1},t.prototype.clone=function(){for(var t=e.prototype.clone.call(this),n=this.getChildren(),r=0;r<n.length;r++){var i=n[r];t.add(i.clone())}return t},t}(ai),Wo=function(e){l(t,e);function t(t){return e.call(this,t)||this}return t.prototype._isInBBox=function(e,t){var n=this.getBBox();return n.minX<=e&&n.maxX>=e&&n.minY<=t&&n.maxY>=t},t.prototype.afterAttrsChange=function(t){e.prototype.afterAttrsChange.call(this,t),this.clearCacheBBox()},t.prototype.getBBox=function(){var e=this.cfg.bbox;return e||(e=this.calculateBBox(),this.set(`bbox`,e)),e},t.prototype.getCanvasBBox=function(){var e=this.cfg.canvasBBox;return e||(e=this.calculateCanvasBBox(),this.set(`canvasBBox`,e)),e},t.prototype.applyMatrix=function(t){e.prototype.applyMatrix.call(this,t),this.set(`canvasBBox`,null)},t.prototype.calculateCanvasBBox=function(){var e=this.getBBox(),t=this.getTotalMatrix(),n=e.minX,r=e.minY,i=e.maxX,a=e.maxY;if(t){var o=Br(t,[e.minX,e.minY]),s=Br(t,[e.maxX,e.minY]),c=Br(t,[e.minX,e.maxY]),l=Br(t,[e.maxX,e.maxY]);n=Math.min(o[0],s[0],c[0],l[0]),i=Math.max(o[0],s[0],c[0],l[0]),r=Math.min(o[1],s[1],c[1],l[1]),a=Math.max(o[1],s[1],c[1],l[1])}var u=this.attrs;if(u.shadowColor){var d=u.shadowBlur,f=d===void 0?0:d,p=u.shadowOffsetX,m=p===void 0?0:p,h=u.shadowOffsetY,g=h===void 0?0:h,_=n-f+m,v=i+f+m,y=r-f+g,b=a+f+g;n=Math.min(n,_),i=Math.max(i,v),r=Math.min(r,y),a=Math.max(a,b)}return{x:n,y:r,minX:n,minY:r,maxX:i,maxY:a,width:i-n,height:a-r}},t.prototype.clearCacheBBox=function(){this.set(`bbox`,null),this.set(`canvasBBox`,null)},t.prototype.isClipShape=function(){return this.get(`isClipShape`)},t.prototype.isInShape=function(e,t){return!1},t.prototype.isOnlyHitBox=function(){return!1},t.prototype.isHit=function(e,t){var n=this.get(`startArrowShape`),r=this.get(`endArrowShape`),i=[e,t,1];i=this.invertFromMatrix(i);var a=i[0],o=i[1],s=this._isInBBox(a,o);return this.isOnlyHitBox()?s:!!(s&&!this.isClipped(a,o)&&(this.isInShape(a,o)||n&&n.isHit(a,o)||r&&r.isHit(a,o)))},t}(Qr),Go=new Map;function Ko(e,t){Go.set(e,t)}function qo(e){return Go.get(e)}function Jo(e){var t=e.attr(),n=t.x,r=t.y,i=t.width,a=t.height;return{x:n,y:r,width:i,height:a}}function Yo(e){var t=e.attr(),n=t.x,r=t.y,i=t.r;return{x:n-i,y:r-i,width:i*2,height:i*2}}function Xo(e,t,n,r){var i=e-n,a=t-r;return Math.sqrt(i*i+a*a)}function Zo(e,t){return Math.abs(e-t)<.001}function Qo(e,t){var n=he(e),r=he(t),i=me(e),a=me(t);return{x:n,y:r,width:i-n,height:a-r}}function $o(e){return(e+Math.PI*2)%(Math.PI*2)}var es={box:function(e,t,n,r){return Qo([e,n],[t,r])},length:function(e,t,n,r){return Xo(e,t,n,r)},pointAt:function(e,t,n,r,i){return{x:(1-i)*e+i*n,y:(1-i)*t+i*r}},pointDistance:function(e,t,n,r,i,a){var o=(n-e)*(i-e)+(r-t)*(a-t);if(o<0)return Xo(e,t,i,a);var s=(n-e)*(n-e)+(r-t)*(r-t);return o>s?Xo(n,r,i,a):this.pointToLine(e,t,n,r,i,a)},pointToLine:function(e,t,n,r,i,a){var o=[n-e,r-t];if(S(o,[0,0]))return Math.sqrt((i-e)*(i-e)+(a-t)*(a-t));var s=[-o[1],o[0]];y(s,s);var c=[i-e,a-t];return Math.abs(x(c,s))},tangentAngle:function(e,t,n,r){return Math.atan2(r-t,n-e)}},ts=1e-4;function ns(e,t,n,r,i,a){var o,s=1/0,c=[n,r],l=20;a&&a>200&&(l=a/10);for(var u=1/l,d=u/10,f=0;f<=l;f++){var p=f*u,m=[i.apply(null,e.concat([p])),i.apply(null,t.concat([p]))],h=Xo(c[0],c[1],m[0],m[1]);h<s&&(o=p,s=h)}if(o===0)return{x:e[0],y:t[0]};if(o===1){var g=e.length;return{x:e[g-1],y:t[g-1]}}s=1/0;for(var f=0;f<32&&!(d<ts);f++){var _=o-d,v=o+d,m=[i.apply(null,e.concat([_])),i.apply(null,t.concat([_]))],h=Xo(c[0],c[1],m[0],m[1]);if(_>=0&&h<s)o=_,s=h;else{var y=[i.apply(null,e.concat([v])),i.apply(null,t.concat([v]))],b=Xo(c[0],c[1],y[0],y[1]);v<=1&&b<s?(o=v,s=b):d*=.5}}return{x:i.apply(null,e.concat([o])),y:i.apply(null,t.concat([o]))}}function rs(e,t){for(var n=0,r=e.length,i=0;i<r;i++){var a=e[i],o=t[i],s=e[(i+1)%r],c=t[(i+1)%r];n+=Xo(a,o,s,c)}return n/2}function os(e,t,n,r){var i=1-r;return i*i*e+2*r*i*t+r*r*n}function ss(e,t,n){var r=e+n-2*t;if(Zo(r,0))return[.5];var i=(e-t)/r;return i<=1&&i>=0?[i]:[]}function cs(e,t,n,r){return 2*(1-r)*(t-e)+2*r*(n-t)}function ls(e,t,n,r,i,a,o){var s=os(e,n,i,o),c=os(t,r,a,o),l=es.pointAt(e,t,n,r,o),u=es.pointAt(n,r,i,a,o);return[[e,t,l.x,l.y,s,c],[s,c,u.x,u.y,i,a]]}function us(e,t,n,r,i,a,o){if(o===0)return(Xo(e,t,n,r)+Xo(n,r,i,a)+Xo(e,t,i,a))/2;var s=ls(e,t,n,r,i,a,.5),c=s[0],l=s[1];return c.push(o-1),l.push(o-1),us.apply(null,c)+us.apply(null,l)}var ds={box:function(e,t,n,r,i,a){var o=ss(e,n,i)[0],s=ss(t,r,a)[0],c=[e,i],l=[t,a];return o!==void 0&&c.push(os(e,n,i,o)),s!==void 0&&l.push(os(t,r,a,s)),Qo(c,l)},length:function(e,t,n,r,i,a){return us(e,t,n,r,i,a,3)},nearestPoint:function(e,t,n,r,i,a,o,s){return ns([e,n,i],[t,r,a],o,s,os)},pointDistance:function(e,t,n,r,i,a,o,s){var c=this.nearestPoint(e,t,n,r,i,a,o,s);return Xo(c.x,c.y,o,s)},interpolationAt:os,pointAt:function(e,t,n,r,i,a,o){return{x:os(e,n,i,o),y:os(t,r,a,o)}},divide:function(e,t,n,r,i,a,o){return ls(e,t,n,r,i,a,o)},tangentAngle:function(e,t,n,r,i,a,o){var s=cs(e,n,i,o),c=cs(t,r,a,o);return $o(Math.atan2(c,s))}};function fs(e,t,n,r,i){var a=1-i;return a*a*a*e+3*t*i*a*a+3*n*i*i*a+r*i*i*i}function ps(e,t,n,r,i){var a=1-i;return 3*(a*a*(t-e)+2*a*i*(n-t)+i*i*(r-n))}function ms(e,t,n,r){var i=-3*e+9*t-9*n+3*r,a=6*e-12*t+6*n,o=3*t-3*e,s=[],c,l,u;if(Zo(i,0))Zo(a,0)||(c=-o/a,c>=0&&c<=1&&s.push(c));else{var d=a*a-4*i*o;Zo(d,0)?s.push(-a/(2*i)):d>0&&(u=Math.sqrt(d),c=(-a+u)/(2*i),l=(-a-u)/(2*i),c>=0&&c<=1&&s.push(c),l>=0&&l<=1&&s.push(l))}return s}function hs(e,t,n,r,i,a,o,s,c){var l=fs(e,n,i,o,c),u=fs(t,r,a,s,c),d=es.pointAt(e,t,n,r,c),f=es.pointAt(n,r,i,a,c),p=es.pointAt(i,a,o,s,c),m=es.pointAt(d.x,d.y,f.x,f.y,c),h=es.pointAt(f.x,f.y,p.x,p.y,c);return[[e,t,d.x,d.y,m.x,m.y,l,u],[l,u,h.x,h.y,p.x,p.y,o,s]]}function gs(e,t,n,r,i,a,o,s,c){if(c===0)return rs([e,n,i,o],[t,r,a,s]);var l=hs(e,t,n,r,i,a,o,s,.5),u=l[0],d=l[1];return u.push(c-1),d.push(c-1),gs.apply(null,u)+gs.apply(null,d)}var _s={extrema:ms,box:function(e,t,n,r,i,a,o,s){for(var c=[e,o],l=[t,s],u=ms(e,n,i,o),d=ms(t,r,a,s),f=0;f<u.length;f++)c.push(fs(e,n,i,o,u[f]));for(var f=0;f<d.length;f++)l.push(fs(t,r,a,s,d[f]));return Qo(c,l)},length:function(e,t,n,r,i,a,o,s){return gs(e,t,n,r,i,a,o,s,3)},nearestPoint:function(e,t,n,r,i,a,o,s,c,l,u){return ns([e,n,i,o],[t,r,a,s],c,l,fs,u)},pointDistance:function(e,t,n,r,i,a,o,s,c,l,u){var d=this.nearestPoint(e,t,n,r,i,a,o,s,c,l,u);return Xo(d.x,d.y,c,l)},interpolationAt:fs,pointAt:function(e,t,n,r,i,a,o,s,c){return{x:fs(e,n,i,o,c),y:fs(t,r,a,s,c)}},divide:function(e,t,n,r,i,a,o,s,c){return hs(e,t,n,r,i,a,o,s,c)},tangentAngle:function(e,t,n,r,i,a,o,s,c){var l=ps(e,n,i,o,c),u=ps(t,r,a,s,c);return $o(Math.atan2(u,l))}};function vs(e,t){var n=Math.abs(e);return t>0?n:n*-1}var ys={box:function(e,t,n,r){return{x:e-n,y:t-r,width:n*2,height:r*2}},length:function(e,t,n,r){return Math.PI*(3*(n+r)-Math.sqrt((3*n+r)*(n+3*r)))},nearestPoint:function(e,t,n,r,i,a){var o=n,s=r;if(o===0||s===0)return{x:e,y:t};for(var c=i-e,l=a-t,u=Math.abs(c),d=Math.abs(l),f=o*o,p=s*s,m=Math.PI/4,h,g,_=0;_<4;_++){h=o*Math.cos(m),g=s*Math.sin(m);var v=(f-p)*Math.cos(m)**3/o,y=(p-f)*Math.sin(m)**3/s,b=h-v,x=g-y,S=u-v,C=d-y,w=Math.hypot(x,b),T=Math.hypot(C,S),E=w*Math.asin((b*C-x*S)/(w*T))/Math.sqrt(f+p-h*h-g*g);m+=E,m=Math.min(Math.PI/2,Math.max(0,m))}return{x:e+vs(h,c),y:t+vs(g,l)}},pointDistance:function(e,t,n,r,i,a){var o=this.nearestPoint(e,t,n,r,i,a);return Xo(o.x,o.y,i,a)},pointAt:function(e,t,n,r,i){var a=2*Math.PI*i;return{x:e+n*Math.cos(a),y:t+r*Math.sin(a)}},tangentAngle:function(e,t,n,r,i){var a=2*Math.PI*i,o=Math.atan2(r*Math.cos(a),-n*Math.sin(a));return $o(o)}};function bs(e,t,n,r,i,a,o,s){return-1*n*Math.cos(i)*Math.sin(s)-r*Math.sin(i)*Math.cos(s)}function xs(e,t,n,r,i,a,o,s){return-1*n*Math.sin(i)*Math.sin(s)+r*Math.cos(i)*Math.cos(s)}function Ss(e,t,n){return Math.atan(-t/e*Math.tan(n))}function Cs(e,t,n){return Math.atan(t/(e*Math.tan(n)))}function ws(e,t,n,r,i,a){return n*Math.cos(i)*Math.cos(a)-r*Math.sin(i)*Math.sin(a)+e}function Ts(e,t,n,r,i,a){return n*Math.sin(i)*Math.cos(a)+r*Math.cos(i)*Math.sin(a)+t}function Es(e,t,n,r){return(Math.atan2(r*e,n*t)+Math.PI*2)%(Math.PI*2)}function Ds(e,t,n){return{x:e*Math.cos(n),y:t*Math.sin(n)}}function Os(e,t,n){var r=Math.cos(n),i=Math.sin(n);return[e*r-t*i,e*i+t*r]}var ks={box:function(e,t,n,r,i,a,o){for(var s=Ss(n,r,i),c=1/0,l=-1/0,u=[a,o],d=-Math.PI*2;d<=Math.PI*2;d+=Math.PI){var f=s+d;a<o?a<f&&f<o&&u.push(f):o<f&&f<a&&u.push(f)}for(var d=0;d<u.length;d++){var p=ws(e,t,n,r,i,u[d]);p<c&&(c=p),p>l&&(l=p)}for(var m=Cs(n,r,i),h=1/0,g=-1/0,_=[a,o],d=-Math.PI*2;d<=Math.PI*2;d+=Math.PI){var v=m+d;a<o?a<v&&v<o&&_.push(v):o<v&&v<a&&_.push(v)}for(var d=0;d<_.length;d++){var y=Ts(e,t,n,r,i,_[d]);y<h&&(h=y),y>g&&(g=y)}return{x:c,y:h,width:l-c,height:g-h}},length:function(e,t,n,r,i,a,o){},nearestPoint:function(e,t,n,r,i,a,o,s,c){var l=Os(s-e,c-t,-i),u=l[0],d=l[1],f=ys.nearestPoint(0,0,n,r,u,d),p=Es(n,r,f.x,f.y);p<a?f=Ds(n,r,a):p>o&&(f=Ds(n,r,o));var m=Os(f.x,f.y,i);return{x:m[0]+e,y:m[1]+t}},pointDistance:function(e,t,n,r,i,a,o,s,c){var l=this.nearestPoint(e,t,n,r,s,c);return Xo(l.x,l.y,s,c)},pointAt:function(e,t,n,r,i,a,o,s){var c=(o-a)*s+a;return{x:ws(e,t,n,r,i,c),y:Ts(e,t,n,r,i,c)}},tangentAngle:function(e,t,n,r,i,a,o,s){var c=(o-a)*s+a,l=bs(e,t,n,r,i,a,o,c),u=xs(e,t,n,r,i,a,o,c);return $o(Math.atan2(u,l))}};function As(e){for(var t=0,n=[],r=0;r<e.length-1;r++){var i=e[r],a=e[r+1],o=Xo(i[0],i[1],a[0],a[1]),s={from:i,to:a,length:o};n.push(s),t+=o}return{segments:n,totalLength:t}}function js(e){if(e.length<2)return 0;for(var t=0,n=0;n<e.length-1;n++){var r=e[n],i=e[n+1];t+=Xo(r[0],r[1],i[0],i[1])}return t}function Ms(e,t){if(t>1||t<0||e.length<2)return null;var n=As(e),r=n.segments,i=n.totalLength;if(i===0)return{x:e[0][0],y:e[0][1]};for(var a=0,o=null,s=0;s<r.length;s++){var c=r[s],l=c.from,u=c.to,d=c.length/i;if(t>=a&&t<=a+d){var f=(t-a)/d;o=es.pointAt(l[0],l[1],u[0],u[1],f);break}a+=d}return o}function Ns(e,t){if(t>1||t<0||e.length<2)return 0;for(var n=As(e),r=n.segments,i=n.totalLength,a=0,o=0,s=0;s<r.length;s++){var c=r[s],l=c.from,u=c.to,d=c.length/i;if(t>=a&&t<=a+d){o=Math.atan2(u[1]-l[1],u[0]-l[0]);break}a+=d}return o}function Ps(e,t,n){for(var r=1/0,i=0;i<e.length-1;i++){var a=e[i],o=e[i+1],s=es.pointDistance(a[0],a[1],o[0],o[1],t,n);s<r&&(r=s)}return r}var Fs={box:function(e){for(var t=[],n=[],r=0;r<e.length;r++){var i=e[r];t.push(i[0]),n.push(i[1])}return Qo(t,n)},length:function(e){return js(e)},pointAt:function(e,t){return Ms(e,t)},pointDistance:function(e,t,n){return Ps(e,t,n)},tangentAngle:function(e,t){return Ns(e,t)}};function Is(e,t){return!e||!t?e||t:{minX:Math.min(e.minX,t.minX),minY:Math.min(e.minY,t.minY),maxX:Math.max(e.maxX,t.maxX),maxY:Math.max(e.maxY,t.maxY)}}function Ls(e,t){var n=e.get(`startArrowShape`),r=e.get(`endArrowShape`),i=null,a=null;return n&&(i=n.getCanvasBBox(),t=Is(t,i)),r&&(a=r.getCanvasBBox(),t=Is(t,a)),t}function Rs(e){for(var t=e.attr().points,n=[],r=[],i=0;i<t.length;i++){var a=t[i];n.push(a[0]),r.push(a[1])}var o=Qo(n,r),s=o.x,c=o.y,l=o.width,u=o.height,d={minX:s,minY:c,maxX:s+l,maxY:c+u};return d=Ls(e,d),{x:d.minX,y:d.minY,width:d.maxX-d.minX,height:d.maxY-d.minY}}function zs(e){for(var t=e.attr().points,n=[],r=[],i=0;i<t.length;i++){var a=t[i];n.push(a[0]),r.push(a[1])}return Qo(n,r)}var Bs=null;function Vs(){if(!Bs){var e=document.createElement(`canvas`);e.width=1,e.height=1,Bs=e.getContext(`2d`)}return Bs}function Hs(e,t,n){var r=1;if(I(e)&&(r=e.split(`
`).length),r>1){var i=Us(t,n);return t*r+i*(r-1)}return t}function Us(e,t){return t?t-e:e*.14}function Ws(e,t){var n=Vs(),r=0;if(M(e)||e===``)return r;if(n.save(),n.font=t,I(e)&&e.includes(`
`)){var i=e.split(`
`);F(i,function(e){var t=n.measureText(e).width;r<t&&(r=t)})}else r=n.measureText(e).width;return n.restore(),r}function Gs(e){var t=e.fontSize,n=e.fontFamily,r=e.fontWeight,i=e.fontStyle,a=e.fontVariant;return[i,a,r,t+`px`,n].join(` `).trim()}function Ks(e){var t=e.attr(),n=t.x,r=t.y,i=t.text,a=t.fontSize,o=t.lineHeight,s=t.font;s||=Gs(t);var c=Ws(i,s),l;if(!c)l={x:n,y:r,width:0,height:0};else{var u=t.textAlign,d=t.textBaseline,f=Hs(i,a,o),p={x:n,y:r-f};u&&(u===`end`||u===`right`?p.x-=c:u===`center`&&(p.x-=c/2)),d&&(d===`top`?p.y+=f:d===`middle`&&(p.y+=f/2)),l={x:p.x,y:p.y,width:c,height:f}}return l}var qs=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi,Js=/[^\s\,]+/gi;function Ys(e){var t=e||[];if(N(t))return t;if(I(t))return t=t.match(qs),F(t,function(e,n){if(e=e.match(Js),e[0].length>1){var r=e[0].charAt(0);e.splice(1,0,e[0].substr(1)),e[0]=r}F(e,function(t,n){isNaN(t)||(e[n]=+t)}),t[n]=e}),t}var Xs=Ys;function Zs(e,t,n,r){var i=[],a=!!r,o,s,c,l,u,d,_;if(a){c=r[0],l=r[1];for(var v=0,y=e.length;v<y;v+=1){var b=e[v];c=h([0,0],c,b),l=m([0,0],l,b)}}for(var v=0,x=e.length;v<x;v+=1){var b=e[v];if(v===0&&!n)_=b;else if(v===x-1&&!n)d=b,i.push(_),i.push(d);else{var S=[v?v-1:x-1,v-1][n?0:1];o=e[S],s=e[n?(v+1)%x:v+1];var w=[0,0];w=f(w,s,o),w=g(w,w,t);var T=p(b,o),E=p(b,s),D=T+E;D!==0&&(T/=D,E/=D);var O=g([0,0],w,-T),k=g([0,0],w,E);d=C([0,0],b,O),u=C([0,0],b,k),u=h([0,0],u,m([0,0],s,b)),u=m([0,0],u,h([0,0],s,b)),O=f([0,0],u,b),O=g([0,0],O,-T/E),d=C([0,0],b,O),d=h([0,0],d,m([0,0],o,b)),d=m([0,0],d,h([0,0],o,b)),k=f([0,0],b,d),k=g([0,0],k,E/T),u=C([0,0],b,k),a&&(d=m([0,0],d,c),d=h([0,0],d,l),u=m([0,0],u,c),u=h([0,0],u,l)),i.push(_),i.push(d),_=u}}return n&&i.push(i.shift()),i}function Qs(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=[[0,0],[1,1]]);for(var r=!!t,i=[],a=0,o=e.length;a<o;a+=2)i.push([e[a],e[a+1]]);for(var s=Zs(i,.4,r,n),c=i.length,l=[],u,d,f,a=0;a<c-1;a+=1)u=s[a*2],d=s[a*2+1],f=i[a+1],l.push([`C`,u[0],u[1],d[0],d[1],f[0],f[1]]);return r&&(u=s[c],d=s[c+1],f=i[0],l.push([`C`,u[0],u[1],d[0],d[1],f[0],f[1]])),l}var $s=Qs,ec=`	
\v\f\r \xA0 ᠎             　\u2028\u2029`,tc=RegExp(`([a-z])[`+ec+`,]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?[`+ec+`]*,?[`+ec+`]*)+)`,`ig`),nc=RegExp(`(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)[`+ec+`]*,?[`+ec+`]*`,`ig`);function rc(e){if(!e)return null;if(N(e))return e;var t={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},n=[];return String(e).replace(tc,function(e,r,i){var a=[],o=r.toLowerCase();if(i.replace(nc,function(e,t){t&&a.push(+t)}),o===`m`&&a.length>2&&(n.push([r].concat(a.splice(0,2))),o=`l`,r=r===`m`?`l`:`L`),o===`o`&&a.length===1&&n.push([r,a[0]]),o===`r`)n.push([r].concat(a));else for(;a.length>=t[o]&&(n.push([r].concat(a.splice(0,t[o]))),t[o]););return``}),n}var ic=/[a-z]/;function ac(e,t){return[t[0]+(t[0]-e[0]),t[1]+(t[1]-e[1])]}function oc(e){var t=rc(e);if(!t||!t.length)return[[`M`,0,0]];for(var n=!1,r=0;r<t.length;r++){var i=t[r][0];if(ic.test(i)||[`V`,`H`,`T`,`S`].indexOf(i)>=0){n=!0;break}}if(!n)return t;var a=[],o=0,s=0,c=0,l=0,u=0,d=t[0];(d[0]===`M`||d[0]===`m`)&&(o=+d[1],s=+d[2],c=o,l=s,u++,a[0]=[`M`,o,s]);for(var r=u,f=t.length;r<f;r++){var p=t[r],m=a[r-1],h=[],i=p[0],g=i.toUpperCase();if(i!==g)switch(h[0]=g,g){case`A`:h[1]=p[1],h[2]=p[2],h[3]=p[3],h[4]=p[4],h[5]=p[5],h[6]=+p[6]+o,h[7]=+p[7]+s;break;case`V`:h[1]=+p[1]+s;break;case`H`:h[1]=+p[1]+o;break;case`M`:c=+p[1]+o,l=+p[2]+s,h[1]=c,h[2]=l;break;default:for(var _=1,v=p.length;_<v;_++)h[_]=+p[_]+(_%2?o:s)}else h=t[r];switch(g){case`Z`:o=+c,s=+l;break;case`H`:o=h[1],h=[`L`,o,s];break;case`V`:s=h[1],h=[`L`,o,s];break;case`T`:o=h[1],s=h[2];var y=ac([m[1],m[2]],[m[3],m[4]]);h=[`Q`,y[0],y[1],o,s];break;case`S`:o=h[h.length-2],s=h[h.length-1];var b=m.length,x=ac([m[b-4],m[b-3]],[m[b-2],m[b-1]]);h=[`C`,x[0],x[1],h[1],h[2],o,s];break;case`M`:c=h[h.length-2],l=h[h.length-1];break;default:o=h[h.length-2],s=h[h.length-1]}a.push(h)}return a}Math.PI*2;function sc(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function cc(e,t){return sc(e)*sc(t)?(e[0]*t[0]+e[1]*t[1])/(sc(e)*sc(t)):1}function lc(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(cc(e,t))}function uc(e,t){return e[0]===t[0]&&e[1]===t[1]}function dc(e,t){var n=t[1],r=t[2],i=Ve(Ue(t[3]),Math.PI*2),a=t[4],o=t[5],s=e[0],c=e[1],l=t[6],u=t[7],d=Math.cos(i)*(s-l)/2+Math.sin(i)*(c-u)/2,f=-1*Math.sin(i)*(s-l)/2+Math.cos(i)*(c-u)/2,p=d*d/(n*n)+f*f/(r*r);p>1&&(n*=Math.sqrt(p),r*=Math.sqrt(p));var m=n*n*(f*f)+r*r*(d*d),h=m?Math.sqrt((n*n*(r*r)-m)/m):1;a===o&&(h*=-1),isNaN(h)&&(h=0);var g=r?h*n*f/r:0,_=n?h*-r*d/n:0,v=(s+l)/2+Math.cos(i)*g-Math.sin(i)*_,y=(c+u)/2+Math.sin(i)*g+Math.cos(i)*_,b=[(d-g)/n,(f-_)/r],x=[(-1*d-g)/n,(-1*f-_)/r],S=lc([1,0],b),C=lc(b,x);return cc(b,x)<=-1&&(C=Math.PI),cc(b,x)>=1&&(C=0),o===0&&C>0&&(C-=2*Math.PI),o===1&&C<0&&(C+=2*Math.PI),{cx:v,cy:y,rx:uc(e,[l,u])?0:n,ry:uc(e,[l,u])?0:r,startAngle:S,endAngle:S+C,xRotation:i,arcFlag:a,sweepFlag:o}}function fc(e,t){return[t[0]+(t[0]-e[0]),t[1]+(t[1]-e[1])]}function pc(e){e=Xs(e);for(var t=[],n=null,r=null,i=null,a=0,o=e.length,s=0;s<o;s++){var c=e[s];r=e[s+1];var l=c[0],u={command:l,prePoint:n,params:c,startTangent:null,endTangent:null};switch(l){case`M`:i=[c[1],c[2]],a=s;break;case`A`:u.arcParams=dc(n,c);break;default:break}if(l===`Z`)n=i,r=e[a+1];else{var d=c.length;n=[c[d-2],c[d-1]]}r&&r[0]===`Z`&&(r=e[a],t[a]&&(t[a].prePoint=n)),u.currentPoint=n,t[a]&&uc(n,t[a].currentPoint)&&(t[a].prePoint=u.prePoint),u.nextPoint=r?[r[r.length-2],r[r.length-1]]:null;var f=u.prePoint;if([`L`,`H`,`V`].includes(l))u.startTangent=[f[0]-n[0],f[1]-n[1]],u.endTangent=[n[0]-f[0],n[1]-f[1]];else if(l===`Q`){var p=[c[1],c[2]];u.startTangent=[f[0]-p[0],f[1]-p[1]],u.endTangent=[n[0]-p[0],n[1]-p[1]]}else if(l===`T`){var m=t[s-1],p=fc(m.currentPoint,f);m.command===`Q`?(u.command=`Q`,u.startTangent=[f[0]-p[0],f[1]-p[1]],u.endTangent=[n[0]-p[0],n[1]-p[1]]):(u.command=`TL`,u.startTangent=[f[0]-n[0],f[1]-n[1]],u.endTangent=[n[0]-f[0],n[1]-f[1]])}else if(l===`C`){var h=[c[1],c[2]],g=[c[3],c[4]];u.startTangent=[f[0]-h[0],f[1]-h[1]],u.endTangent=[n[0]-g[0],n[1]-g[1]],u.startTangent[0]===0&&u.startTangent[1]===0&&(u.startTangent=[h[0]-g[0],h[1]-g[1]]),u.endTangent[0]===0&&u.endTangent[1]===0&&(u.endTangent=[g[0]-h[0],g[1]-h[1]])}else if(l===`S`){var m=t[s-1],h=fc(m.currentPoint,f),g=[c[1],c[2]];m.command===`C`?(u.command=`C`,u.startTangent=[f[0]-h[0],f[1]-h[1]],u.endTangent=[n[0]-g[0],n[1]-g[1]]):(u.command=`SQ`,u.startTangent=[f[0]-g[0],f[1]-g[1]],u.endTangent=[n[0]-g[0],n[1]-g[1]])}else if(l===`A`){var _=.001,v=u.arcParams||{},y=v.cx,b=y===void 0?0:y,x=v.cy,S=x===void 0?0:x,C=v.rx,w=C===void 0?0:C,T=v.ry,E=T===void 0?0:T,D=v.sweepFlag,O=D===void 0?0:D,k=v.startAngle,A=k===void 0?0:k,ee=v.endAngle,te=ee===void 0?0:ee;O===0&&(_*=-1);var j=w*Math.cos(A-_)+b,M=E*Math.sin(A-_)+S;u.startTangent=[j-i[0],M-i[1]];var N=w*Math.cos(A+te+_)+b,P=E*Math.sin(A+te-_)+S;u.endTangent=[f[0]-N,f[1]-P]}t.push(u)}return t}var mc=function(e,t,n){return e>=t&&e<=n};function hc(e,t,n,r){var i=.001,a={x:n.x-e.x,y:n.y-e.y},o={x:t.x-e.x,y:t.y-e.y},s={x:r.x-n.x,y:r.y-n.y},c=o.x*s.y-o.y*s.x,l=c*c,u=o.x*o.x+o.y*o.y,d=s.x*s.x+s.y*s.y,f=null;if(l>i*u*d){var p=(a.x*s.y-a.y*s.x)/c,m=(a.x*o.y-a.y*o.x)/c;mc(p,0,1)&&mc(m,0,1)&&(f={x:e.x+p*o.x,y:e.y+p*o.y})}return f}var gc=1e-6;function _c(e){return Math.abs(e)<gc?0:e<0?-1:1}function vc(e,t,n){return(n[0]-e[0])*(t[1]-e[1])===(t[0]-e[0])*(n[1]-e[1])&&Math.min(e[0],t[0])<=n[0]&&n[0]<=Math.max(e[0],t[0])&&Math.min(e[1],t[1])<=n[1]&&n[1]<=Math.max(e[1],t[1])}function yc(e,t,n){var r=!1,i=e.length;if(i<=2)return!1;for(var a=0;a<i;a++){var o=e[a],s=e[(a+1)%i];if(vc(o,s,[t,n]))return!0;_c(o[1]-n)>0!=_c(s[1]-n)>0&&_c(t-(n-o[1])*(o[0]-s[0])/(o[1]-s[1])-o[0])<0&&(r=!r)}return r}function bc(e){for(var t=[],n=e.length,r=0;r<n-1;r++){var i=e[r],a=e[r+1];t.push({from:{x:i[0],y:i[1]},to:{x:a[0],y:a[1]}})}if(t.length>1){var o=e[0],s=e[n-1];t.push({from:{x:s[0],y:s[1]},to:{x:o[0],y:o[1]}})}return t}function xc(e,t){var n=!1;return F(e,function(e){if(hc(e.from,e.to,t.from,t.to))return n=!0,!1}),n}function Sc(e){var t=e.map(function(e){return e[0]}),n=e.map(function(e){return e[1]});return{minX:Math.min.apply(null,t),maxX:Math.max.apply(null,t),minY:Math.min.apply(null,n),maxY:Math.max.apply(null,n)}}function Cc(e,t){return!(t.minX>e.maxX||t.maxX<e.minX||t.minY>e.maxY||t.maxY<e.minY)}function wc(e,t){if(e.length<2||t.length<2)return!1;var n=Sc(e),r=Sc(t);if(!Cc(n,r))return!1;var i=!1;if(F(t,function(t){if(yc(e,t[0],t[1]))return i=!0,!1}),i||(F(e,function(e){if(yc(t,e[0],e[1]))return i=!0,!1}),i))return!0;var a=bc(e),o=bc(t),s=!1;return F(o,function(e){if(xc(a,e))return s=!0,!1}),s}function Tc(e,t){for(var n=[],r=[],i=[],a=0;a<e.length;a++){var o=e[a],s=o.currentPoint,c=o.params,l=o.prePoint,u=void 0;switch(o.command){case`Q`:u=ds.box(l[0],l[1],c[1],c[2],c[3],c[4]);break;case`C`:u=_s.box(l[0],l[1],c[1],c[2],c[3],c[4],c[5],c[6]);break;case`A`:var d=o.arcParams;u=ks.box(d.cx,d.cy,d.rx,d.ry,d.xRotation,d.startAngle,d.endAngle);break;default:n.push(s[0]),r.push(s[1]);break}u&&(o.box=u,n.push(u.x,u.x+u.width),r.push(u.y,u.y+u.height)),t&&(o.command===`L`||o.command===`M`)&&o.prePoint&&o.nextPoint&&i.push(o)}n=n.filter(function(e){return!Number.isNaN(e)&&e!==1/0&&e!==-1/0}),r=r.filter(function(e){return!Number.isNaN(e)&&e!==1/0&&e!==-1/0});var f=he(n),p=he(r),m=me(n),h=me(r);if(i.length===0)return{x:f,y:p,width:m-f,height:h-p};for(var a=0;a<i.length;a++){var o=i[a],s=o.currentPoint,g=void 0;s[0]===f?(g=Ec(o,t),f-=g.xExtra):s[0]===m&&(g=Ec(o,t),m+=g.xExtra),s[1]===p?(g=Ec(o,t),p-=g.yExtra):s[1]===h&&(g=Ec(o,t),h+=g.yExtra)}return{x:f,y:p,width:m-f,height:h-p}}function Ec(e,t){var n=e.prePoint,r=e.currentPoint,i=e.nextPoint,a=(r[0]-n[0])**2+(r[1]-n[1])**2,o=(r[0]-i[0])**2+(r[1]-i[1])**2,s=(n[0]-i[0])**2+(n[1]-i[1])**2,c=Math.acos((a+o-s)/(2*Math.sqrt(a)*Math.sqrt(o)));if(!c||Math.sin(c)===0||Re(c,0))return{xExtra:0,yExtra:0};var l=Math.abs(Math.atan2(i[1]-r[1],i[0]-r[0])),u=Math.abs(Math.atan2(i[0]-r[0],i[1]-r[1]));return l=l>Math.PI/2?Math.PI-l:l,u=u>Math.PI/2?Math.PI-u:u,{xExtra:Math.cos(c/2-l)*(t/2*(1/Math.sin(c/2)))-t/2||0,yExtra:Math.cos(u-c/2)*(t/2*(1/Math.sin(c/2)))-t/2||0}}function Dc(e){var t=e.attr(),n=t.path,r=t.stroke?t.lineWidth:0,i=e.get(`segments`)||pc(n),a=Tc(i,r),o=a.x,s=a.y,c=a.width,l=a.height,u={minX:o,minY:s,maxX:o+c,maxY:s+l};return u=Ls(e,u),{x:u.minX,y:u.minY,width:u.maxX-u.minX,height:u.maxY-u.minY}}function Oc(e){var t=e.attr(),n=t.x1,r=t.y1,i=t.x2,a=t.y2,o={minX:Math.min(n,i),maxX:Math.max(n,i),minY:Math.min(r,a),maxY:Math.max(r,a)};return o=Ls(e,o),{x:o.minX,y:o.minY,width:o.maxX-o.minX,height:o.maxY-o.minY}}function kc(e){var t=e.attr(),n=t.x,r=t.y,i=t.rx,a=t.ry;return{x:n-i,y:r-a,width:i*2,height:a*2}}Ko(`rect`,Jo),Ko(`image`,Jo),Ko(`circle`,Yo),Ko(`marker`,Yo),Ko(`polyline`,Rs),Ko(`polygon`,zs),Ko(`text`,Ks),Ko(`path`,Dc),Ko(`line`,Oc),Ko(`ellipse`,kc);var Ac=1/2,jc=1/2,Mc=.05,Nc=function(){function e(e){var t=e.xField,n=e.yField,r=e.adjustNames,i=r===void 0?[`x`,`y`]:r,a=e.dimValuesMap;this.adjustNames=i,this.xField=t,this.yField=n,this.dimValuesMap=a}return e.prototype.isAdjust=function(e){return this.adjustNames.indexOf(e)>=0},e.prototype.getAdjustRange=function(e,t,n){var r=this.yField,i=n.indexOf(t),a=n.length,o,s;return!r&&this.isAdjust(`y`)?(o=0,s=1):a>1?(o=n[i===0?0:i-1],s=n[i===a-1?a-1:i+1],i===0?o-=(s-t)/2:o+=(t-o)/2,i===a-1?s+=(t-n[a-2])/2:s-=(s-t)/2):(o=t===0?0:t-.5,s=t===0?1:t+.5),{pre:o,next:s}},e.prototype.adjustData=function(e,t){var n=this,r=this.getDimValues(t);F(e,function(e,t){F(r,function(r,i){n.adjustDim(i,r,e,t)})})},e.prototype.groupData=function(e,t){return F(e,function(e){e[t]===void 0&&(e[t]=0)}),Me(e,t)},e.prototype.adjustDim=function(e,t,n,r){},e.prototype.getDimValues=function(e){var t=this,n=t.xField,r=t.yField,i=ut({},this.dimValuesMap),a=[];if(n&&this.isAdjust(`x`)&&a.push(n),r&&this.isAdjust(`y`)&&a.push(r),a.forEach(function(t){i&&i[t]||(i[t]=Te(e,t).sort(function(e,t){return e-t}))}),!r&&this.isAdjust(`y`)){var o=`y`;i[o]=[0,1]}return i},e}(),Pc={},Fc=function(e){return Pc[e.toLowerCase()]},Ic=function(e,t){if(Fc(e))throw Error(`Adjust type '`+e+`' existed.`);Pc[e.toLowerCase()]=t},Lc=function(e,t){return Lc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},Lc(e,t)};function Rc(e,t){Lc(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var zc=function(){return zc=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},zc.apply(this,arguments)},Bc=function(e){Rc(t,e);function t(t){var n=e.call(this,t)||this;n.cacheMap={},n.adjustDataArray=[],n.mergeData=[];var r=t.marginRatio,i=r===void 0?Ac:r,a=t.dodgeRatio,o=a===void 0?jc:a,s=t.dodgeBy,c=t.intervalPadding,l=t.dodgePadding,u=t.xDimensionLength,d=t.groupNum,f=t.defaultSize,p=t.maxColumnWidth,m=t.minColumnWidth,h=t.columnWidthRatio,g=t.customOffset;return n.marginRatio=i,n.dodgeRatio=o,n.dodgeBy=s,n.intervalPadding=c,n.dodgePadding=l,n.xDimensionLegenth=u,n.groupNum=d,n.defaultSize=f,n.maxColumnWidth=p,n.minColumnWidth=m,n.columnWidthRatio=h,n.customOffset=g,n}return t.prototype.process=function(e){var t=ft(e),n=pe(t),r=this.dodgeBy,i=r?Pe(n,r):t;return this.cacheMap={},this.adjustDataArray=i,this.mergeData=n,this.adjustData(i,n),this.adjustDataArray=[],this.mergeData=[],t},t.prototype.adjustDim=function(e,t,n,r){var i=this,a=this.customOffset,o=this.getDistribution(e),s=this.groupData(n,e);return F(s,function(n,s){var c=t.length===1?{pre:t[0]-1,next:t[0]+1}:i.getAdjustRange(e,parseFloat(s),t);F(n,function(t){var n=t[e],s=o[n],l=s.indexOf(r);if(M(a))t[e]=i.getDodgeOffset(c,l,s.length);else{var u=c.pre,d=c.next;t[e]=j(a)?a(t,c):(u+d)/2+a}})}),[]},t.prototype.getDodgeOffset=function(e,t,n){var r=this,i=r.dodgeRatio,a=r.marginRatio,o=r.intervalPadding,s=r.dodgePadding,c=e.pre,l=e.next,u=l-c,d;if(!M(o)&&M(s)&&o>=0){var f=this.getIntervalOnlyOffset(n,t);d=c+f}else if(!M(s)&&M(o)&&s>=0){var f=this.getDodgeOnlyOffset(n,t);d=c+f}else if(!M(o)&&!M(s)&&o>=0&&s>=0){var f=this.getIntervalAndDodgeOffset(n,t);d=c+f}else{var p=u*i/n,m=a*p,f=1/2*(u-n*p-(n-1)*m)+((t+1)*p+t*m)-1/2*p-1/2*u;d=(c+l)/2+f}return d},t.prototype.getIntervalOnlyOffset=function(e,t){var n=this,r=n.defaultSize,i=n.intervalPadding,a=n.xDimensionLegenth,o=n.groupNum,s=n.dodgeRatio,c=n.maxColumnWidth,l=n.minColumnWidth,u=n.columnWidthRatio,d=i/a,f=(1-(o-1)*d)/o*s/(e-1),p=((1-d*(o-1))/o-f*(e-1))/e;if(p=M(u)?p:1/o/e*u,!M(c)){var m=c/a;p=Math.min(p,m)}if(!M(l)){var h=l/a;p=Math.max(p,h)}return p=r?r/a:p,f=((1-(o-1)*d)/o-e*p)/(e-1),((1/2+t)*p+t*f+1/2*d)*o-d/2},t.prototype.getDodgeOnlyOffset=function(e,t){var n=this,r=n.defaultSize,i=n.dodgePadding,a=n.xDimensionLegenth,o=n.groupNum,s=n.marginRatio,c=n.maxColumnWidth,l=n.minColumnWidth,u=n.columnWidthRatio,d=i/a,f=1*s/(o-1),p=((1-f*(o-1))/o-d*(e-1))/e;if(p=u?1/o/e*u:p,!M(c)){var m=c/a;p=Math.min(p,m)}if(!M(l)){var h=l/a;p=Math.max(p,h)}return p=r?r/a:p,f=(1-(p*e+d*(e-1))*o)/(o-1),((1/2+t)*p+t*d+1/2*f)*o-f/2},t.prototype.getIntervalAndDodgeOffset=function(e,t){var n=this,r=n.intervalPadding,i=n.dodgePadding,a=n.xDimensionLegenth,o=n.groupNum,s=r/a,c=i/a,l=((1-s*(o-1))/o-c*(e-1))/e;return((1/2+t)*l+t*c+1/2*s)*o-s/2},t.prototype.getDistribution=function(e){var t=this.adjustDataArray,n=this.cacheMap,r=n[e];return r||(r={},F(t,function(t,n){var i=Te(t,e);i.length||i.push(0),F(i,function(e){r[e]||(r[e]=[]),r[e].push(n)})}),n[e]=r),r},t}(Nc);function Vc(e,t){return(t-e)*Math.random()+e}var Hc=function(e){Rc(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.process=function(e){var t=ft(e),n=pe(t);return this.adjustData(t,n),t},t.prototype.adjustDim=function(e,t,n){var r=this,i=this.groupData(n,e);return F(i,function(n,i){return r.adjustGroup(n,e,parseFloat(i),t)})},t.prototype.getAdjustOffset=function(e){var t=e.pre,n=e.next,r=(n-t)*Mc;return Vc(t+r,n-r)},t.prototype.adjustGroup=function(e,t,n,r){var i=this,a=this.getAdjustRange(t,n,r);return F(e,function(e){e[t]=i.getAdjustOffset(a)}),e},t}(Nc),Uc=Bt,Wc=function(e){Rc(t,e);function t(t){var n=e.call(this,t)||this,r=t.adjustNames,i=r===void 0?[`y`]:r,a=t.height,o=a===void 0?NaN:a,s=t.size,c=s===void 0?10:s,l=t.reverseOrder,u=l===void 0?!1:l;return n.adjustNames=i,n.height=o,n.size=c,n.reverseOrder=u,n}return t.prototype.process=function(e){var t=this,n=t.yField,r=t.reverseOrder,i=n?this.processStack(e):this.processOneDimStack(e);return r?this.reverse(i):i},t.prototype.reverse=function(e){return e.slice(0).reverse()},t.prototype.processStack=function(e){var t=this,n=t.xField,r=t.yField,i=t.reverseOrder?this.reverse(e):e,a=new Uc,o=new Uc;return i.map(function(e){return e.map(function(e){var t,i=z(e,n,0),s=z(e,[r]),c=i.toString();if(s=N(s)?s[1]:s,!M(s)){var l=s>=0?a:o;l.has(c)||l.set(c,0);var u=l.get(c),d=s+u;return l.set(c,d),zc(zc({},e),(t={},t[r]=[u,d],t))}return e})})},t.prototype.processOneDimStack=function(e){var t=this,n=this,r=n.xField,i=n.height,a=n.reverseOrder,o=`y`,s=a?this.reverse(e):e,c=new Uc;return s.map(function(e){return e.map(function(e){var n,a=t.size,s=e[r],l=a*2/i;c.has(s)||c.set(s,l/2);var u=c.get(s);return c.set(s,u+l),zc(zc({},e),(n={},n[o]=u,n))})})},t}(Nc),Gc=function(e){Rc(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.process=function(e){var t=pe(e),n=this,r=n.xField,i=n.yField,a=this.getXValuesMaxMap(t),o=Math.max.apply(Math,Object.keys(a).map(function(e){return a[e]}));return wt(e,function(e){return wt(e,function(e){var t,n,s=e[i],c=e[r];if(N(s)){var l=(o-a[c])/2;return zc(zc({},e),(t={},t[i]=wt(s,function(e){return l+e}),t))}var u=(o-s)/2;return zc(zc({},e),(n={},n[i]=[u,s+u],n))})})},t.prototype.getXValuesMaxMap=function(e){var t=this,n=this,r=n.xField,i=n.yField,a=Me(e,function(e){return e[r]});return Et(a,function(e){return t.getDimMaxValue(e,i)})},t.prototype.getDimMaxValue=function(e,t){var n=wt(e,function(e){return z(e,t,[])}),r=pe(n);return Math.max.apply(Math,r)},t}(Nc);Ic(`Dodge`,Bc),Ic(`Jitter`,Hc),Ic(`Stack`,Wc),Ic(`Symmetric`,Gc);var Kc=function(e,t){return I(t)?t:e.invert(e.scale(t))},qc=function(){function e(e){this.names=[],this.scales=[],this.linear=!1,this.values=[],this.callback=function(){return[]},this._parseCfg(e)}return e.prototype.mapping=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=t.map(function(t,n){return e._toOriginParam(t,e.scales[n])});return this.callback.apply(this,r)},e.prototype.getLinearValue=function(e){var t=this.values.length-1,n=Math.floor(t*e),r=t*e-n,i=this.values[n],a=n===t?i:this.values[n+1];return i+(a-i)*r},e.prototype.getNames=function(){for(var e=this.scales,t=this.names,n=Math.min(e.length,t.length),r=[],i=0;i<n;i+=1)r.push(t[i]);return r},e.prototype.getFields=function(){return this.scales.map(function(e){return e.field})},e.prototype.getScale=function(e){return this.scales[this.names.indexOf(e)]},e.prototype.defaultCallback=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return t.length===0?this.values:t.map(function(t,n){var r=e.scales[n];return r.type===`identity`?r.values[0]:e._getAttributeValue(r,t)})},e.prototype._parseCfg=function(e){var t=this,n=e.type,r=n===void 0?`base`:n,i=e.names,a=i===void 0?[]:i,o=e.scales,s=o===void 0?[]:o,c=e.values,l=c===void 0?[]:c,u=e.callback;this.type=r,this.scales=s,this.values=l,this.names=a,this.callback=function(){var e=[...arguments];if(u){var n=u.apply(void 0,e);if(!M(n))return[n]}return t.defaultCallback.apply(t,e)}},e.prototype._getAttributeValue=function(e,t){if(e.isCategory&&!this.linear){var n=e.translate(t);return this.values[n%this.values.length]}var r=e.scale(t);return this.getLinearValue(r)},e.prototype._toOriginParam=function(e,t){return t.isLinear?e:N(e)?e.map(function(e){return Kc(t,e)}):Kc(t,e)},e}(),Jc=/rgba?\(([\s.,0-9]+)\)/,Yc=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,Xc=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,Zc=/[\d.]+:(#[^\s]+|[^\)]+\))/gi,Qc=function(e){return/^[r,R,L,l]{1}[\s]*\(/.test(e)},$c=function(){var e=document.createElement(`i`);return e.title=`Web Colour Picker`,e.style.display=`none`,document.body.appendChild(e),e},el=function(e,t,n,r){return e[r]+(t[r]-e[r])*n};function tl(e){return`#`+rl(e[0])+rl(e[1])+rl(e[2])}var nl=function(e){return[parseInt(e.substr(1,2),16),parseInt(e.substr(3,2),16),parseInt(e.substr(5,2),16)]},rl=function(e){var t=Math.round(e).toString(16);return t.length===1?`0`+t:t},il=function(e,t){var n=isNaN(Number(t))||t<0?0:t>1?1:Number(t),r=e.length-1,i=Math.floor(r*n),a=r*n-i,o=e[i],s=i===r?o:e[i+1];return tl([el(o,s,a,0),el(o,s,a,1),el(o,s,a,2)])},al,ol=function(e){if(e[0]===`#`&&e.length===7)return e;al||=$c(),al.style.color=e;var t=document.defaultView.getComputedStyle(al,``).getPropertyValue(`color`),n=Jc.exec(t)[1].split(/\s*,\s*/).map(function(e){return Number(e)});return t=tl(n),t},sl={rgb2arr:nl,gradient:function(e){var t=I(e)?e.split(`-`):e,n=wt(t,function(e){return nl(e.indexOf(`#`)===-1?ol(e):e)});return function(e){return il(n,e)}},toRGB:ht(ol),toCSSGradient:function(e){if(Qc(e)){var t,n=void 0;if(e[0]===`l`){var r=Yc.exec(e),i=+r[1]+90;n=r[2],t=`linear-gradient(`+i+`deg, `}else if(e[0]===`r`){t=`radial-gradient(`;var r=Xc.exec(e);n=r[4]}var a=n.match(Zc);return F(a,function(e,n){var r=e.split(`:`);t+=r[1]+` `+r[0]*100+`%`,n!==a.length-1&&(t+=`, `)}),t+=`)`,t}return e}},cl=function(e){l(t,e);function t(t){var n=e.call(this,t)||this;return n.type=`color`,n.names=[`color`],I(n.values)&&(n.linear=!0),n.gradient=sl.gradient(n.values),n}return t.prototype.getLinearValue=function(e){return this.gradient(e)},t}(qc),ll=function(e){l(t,e);function t(t){var n=e.call(this,t)||this;return n.type=`opacity`,n.names=[`opacity`],n}return t}(qc),ul=function(e){l(t,e);function t(t){var n=e.call(this,t)||this;return n.names=[`x`,`y`],n.type=`position`,n}return t.prototype.mapping=function(e,t){var n=this.scales,r=n[0],i=n[1];return M(e)||M(t)?[]:[N(e)?e.map(function(e){return r.scale(e)}):r.scale(e),N(t)?t.map(function(e){return i.scale(e)}):i.scale(t)]},t}(qc),dl=function(e){l(t,e);function t(t){var n=e.call(this,t)||this;return n.type=`shape`,n.names=[`shape`],n}return t.prototype.getLinearValue=function(e){var t=Math.round((this.values.length-1)*e);return this.values[t]},t}(qc),fl=function(e){l(t,e);function t(t){var n=e.call(this,t)||this;return n.type=`size`,n.names=[`size`],n}return t}(qc),pl={};function ml(e){return pl[e]}function hl(e,t){pl[e]=t}var gl=function(){function e(e){this.type=`base`,this.isCategory=!1,this.isLinear=!1,this.isContinuous=!1,this.isIdentity=!1,this.values=[],this.range=[0,1],this.ticks=[],this.__cfg__=e,this.initCfg(),this.init()}return e.prototype.translate=function(e){return e},e.prototype.change=function(e){ut(this.__cfg__,e),this.init()},e.prototype.clone=function(){return this.constructor(this.__cfg__)},e.prototype.getTicks=function(){var e=this;return wt(this.ticks,function(t,n){return P(t)?t:{text:e.getText(t,n),tickValue:t,value:e.scale(t)}})},e.prototype.getText=function(e,t){var n=this.formatter,r=n?n(e,t):e;return M(r)||!j(r.toString)?``:r.toString()},e.prototype.getConfig=function(e){return this.__cfg__[e]},e.prototype.init=function(){ut(this,this.__cfg__),this.setDomain(),xt(this.getConfig(`ticks`))&&(this.ticks=this.calculateTicks())},e.prototype.initCfg=function(){},e.prototype.setDomain=function(){},e.prototype.calculateTicks=function(){var e=this.tickMethod,t=[];if(I(e)){var n=ml(e);if(!n)throw Error(`There is no method to to calculate ticks!`);t=n(this)}else j(e)&&(t=e(this));return t},e.prototype.rangeMin=function(){return this.range[0]},e.prototype.rangeMax=function(){return this.range[1]},e.prototype.calcPercent=function(e,t,n){return L(e)?(e-t)/(n-t):NaN},e.prototype.calcValue=function(e,t,n){return t+e*(n-t)},e}(),_l=function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=`cat`,t.isCategory=!0,t}return t.prototype.buildIndexMap=function(){if(!this.translateIndexMap){this.translateIndexMap=new Map;for(var e=0;e<this.values.length;e++)this.translateIndexMap.set(this.values[e],e)}},t.prototype.translate=function(e){this.buildIndexMap();var t=this.translateIndexMap.get(e);return t===void 0&&(t=L(e)?e:NaN),t},t.prototype.scale=function(e){var t=this.translate(e),n=this.calcPercent(t,this.min,this.max);return this.calcValue(n,this.rangeMin(),this.rangeMax())},t.prototype.invert=function(e){var t=this.max-this.min,n=this.calcPercent(e,this.rangeMin(),this.rangeMax()),r=Math.round(t*n)+this.min;return r<this.min||r>this.max?NaN:this.values[r]},t.prototype.getText=function(t){var n=[...arguments].slice(1),r=t;return L(t)&&!this.values.includes(t)&&(r=this.values[r]),e.prototype.getText.apply(this,d([r],n))},t.prototype.initCfg=function(){this.tickMethod=`cat`},t.prototype.setDomain=function(){if(M(this.getConfig(`min`))&&(this.min=0),M(this.getConfig(`max`))){var e=this.values.length;this.max=e>1?e-1:e}this.translateIndexMap&&=void 0},t}(gl),vl=e({assign:()=>Ol,default:()=>Jl,defaultI18n:()=>Ml,format:()=>Kl,parse:()=>ql,setGlobalDateI18n:()=>Pl,setGlobalDateMasks:()=>Gl}),yl=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,bl=`\\d\\d?`,xl=`\\d\\d`,Sl=`\\d{3}`,Cl=`\\d{4}`,wl=`[^\\s]+`,Tl=/\[([^]*?)\]/gm;function El(e,t){for(var n=[],r=0,i=e.length;r<i;r++)n.push(e[r].substr(0,t));return n}var Dl=function(e){return function(t,n){var r=n[e].map(function(e){return e.toLowerCase()}).indexOf(t.toLowerCase());return r>-1?r:null}};function Ol(e){for(var t=[...arguments].slice(1),n=0,r=t;n<r.length;n++){var i=r[n];for(var a in i)e[a]=i[a]}return e}var kl=[`Sunday`,`Monday`,`Tuesday`,`Wednesday`,`Thursday`,`Friday`,`Saturday`],Al=[`January`,`February`,`March`,`April`,`May`,`June`,`July`,`August`,`September`,`October`,`November`,`December`],jl=El(Al,3),Ml={dayNamesShort:El(kl,3),dayNames:kl,monthNamesShort:jl,monthNames:Al,amPm:[`am`,`pm`],DoFn:function(e){return e+[`th`,`st`,`nd`,`rd`][e%10>3?0:(e-e%10==10?0:1)*e%10]}},Nl=Ol({},Ml),Pl=function(e){return Nl=Ol(Nl,e)},Fl=function(e){return e.replace(/[|\\{()[^$+*?.-]/g,`\\$&`)},Il=function(e,t){for(t===void 0&&(t=2),e=String(e);e.length<t;)e=`0`+e;return e},Ll={D:function(e){return String(e.getDate())},DD:function(e){return Il(e.getDate())},Do:function(e,t){return t.DoFn(e.getDate())},d:function(e){return String(e.getDay())},dd:function(e){return Il(e.getDay())},ddd:function(e,t){return t.dayNamesShort[e.getDay()]},dddd:function(e,t){return t.dayNames[e.getDay()]},M:function(e){return String(e.getMonth()+1)},MM:function(e){return Il(e.getMonth()+1)},MMM:function(e,t){return t.monthNamesShort[e.getMonth()]},MMMM:function(e,t){return t.monthNames[e.getMonth()]},YY:function(e){return Il(String(e.getFullYear()),4).substr(2)},YYYY:function(e){return Il(e.getFullYear(),4)},h:function(e){return String(e.getHours()%12||12)},hh:function(e){return Il(e.getHours()%12||12)},H:function(e){return String(e.getHours())},HH:function(e){return Il(e.getHours())},m:function(e){return String(e.getMinutes())},mm:function(e){return Il(e.getMinutes())},s:function(e){return String(e.getSeconds())},ss:function(e){return Il(e.getSeconds())},S:function(e){return String(Math.round(e.getMilliseconds()/100))},SS:function(e){return Il(Math.round(e.getMilliseconds()/10),2)},SSS:function(e){return Il(e.getMilliseconds(),3)},a:function(e,t){return e.getHours()<12?t.amPm[0]:t.amPm[1]},A:function(e,t){return e.getHours()<12?t.amPm[0].toUpperCase():t.amPm[1].toUpperCase()},ZZ:function(e){var t=e.getTimezoneOffset();return(t>0?`-`:`+`)+Il(Math.floor(Math.abs(t)/60)*100+Math.abs(t)%60,4)},Z:function(e){var t=e.getTimezoneOffset();return(t>0?`-`:`+`)+Il(Math.floor(Math.abs(t)/60),2)+`:`+Il(Math.abs(t)%60,2)}},Rl=function(e){return e-1},zl=[null,bl],Bl=[null,wl],Vl=[`isPm`,wl,function(e,t){var n=e.toLowerCase();return n===t.amPm[0]?0:n===t.amPm[1]?1:null}],Hl=[`timezoneOffset`,`[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?`,function(e){var t=(e+``).match(/([+-]|\d\d)/gi);if(t){var n=t[1]*60+parseInt(t[2],10);return t[0]===`+`?n:-n}return 0}],Ul={D:[`day`,bl],DD:[`day`,xl],Do:[`day`,bl+wl,function(e){return parseInt(e,10)}],M:[`month`,bl,Rl],MM:[`month`,xl,Rl],YY:[`year`,xl,function(e){var t=+(``+new Date().getFullYear()).substr(0,2);return+(``+(+e>68?t-1:t)+e)}],h:[`hour`,bl,void 0,`isPm`],hh:[`hour`,xl,void 0,`isPm`],H:[`hour`,bl],HH:[`hour`,xl],m:[`minute`,bl],mm:[`minute`,xl],s:[`second`,bl],ss:[`second`,xl],YYYY:[`year`,Cl],S:[`millisecond`,`\\d`,function(e){return e*100}],SS:[`millisecond`,xl,function(e){return e*10}],SSS:[`millisecond`,Sl],d:zl,dd:zl,ddd:Bl,dddd:Bl,MMM:[`month`,wl,Dl(`monthNamesShort`)],MMMM:[`month`,wl,Dl(`monthNames`)],a:Vl,A:Vl,ZZ:Hl,Z:Hl},Wl={default:`ddd MMM DD YYYY HH:mm:ss`,shortDate:`M/D/YY`,mediumDate:`MMM D, YYYY`,longDate:`MMMM D, YYYY`,fullDate:`dddd, MMMM D, YYYY`,isoDate:`YYYY-MM-DD`,isoDateTime:`YYYY-MM-DDTHH:mm:ssZ`,shortTime:`HH:mm`,mediumTime:`HH:mm:ss`,longTime:`HH:mm:ss.SSS`},Gl=function(e){return Ol(Wl,e)},Kl=function(e,t,n){if(t===void 0&&(t=Wl.default),n===void 0&&(n={}),typeof e==`number`&&(e=new Date(e)),Object.prototype.toString.call(e)!==`[object Date]`||isNaN(e.getTime()))throw Error(`Invalid Date pass to format`);t=Wl[t]||t;var r=[];t=t.replace(Tl,function(e,t){return r.push(t),`@@@`});var i=Ol(Ol({},Nl),n);return t=t.replace(yl,function(t){return Ll[t](e,i)}),t.replace(/@@@/g,function(){return r.shift()})};function ql(e,t,n){if(n===void 0&&(n={}),typeof t!=`string`)throw Error(`Invalid format in fecha parse`);if(t=Wl[t]||t,e.length>1e3)return null;var r={year:new Date().getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},i=[],a=[],o=t.replace(Tl,function(e,t){return a.push(Fl(t)),`@@@`}),s={},c={};o=Fl(o).replace(yl,function(e){var t=Ul[e],n=t[0],r=t[1],a=t[3];if(s[n])throw Error(`Invalid format. `+n+` specified twice in format`);return s[n]=!0,a&&(c[a]=!0),i.push(t),`(`+r+`)`}),Object.keys(c).forEach(function(e){if(!s[e])throw Error(`Invalid format. `+e+` is required in specified format`)}),o=o.replace(/@@@/g,function(){return a.shift()});var l=e.match(new RegExp(o,`i`));if(!l)return null;for(var u=Ol(Ol({},Nl),n),d=1;d<l.length;d++){var f=i[d-1],p=f[0],m=f[2],h=m?m(l[d],u):+l[d];if(h==null)return null;r[p]=h}r.isPm===1&&r.hour!=null&&+r.hour!=12?r.hour=+r.hour+12:r.isPm===0&&+r.hour==12&&(r.hour=0);var g;if(r.timezoneOffset==null){g=new Date(r.year,r.month,r.day,r.hour,r.minute,r.second,r.millisecond);for(var _=[[`month`,`getMonth`],[`day`,`getDate`],[`hour`,`getHours`],[`minute`,`getMinutes`],[`second`,`getSeconds`]],d=0,v=_.length;d<v;d++)if(s[_[d][0]]&&r[_[d][0]]!==g[_[d][1]]())return null}else if(g=new Date(Date.UTC(r.year,r.month,r.day,r.hour,r.minute-r.timezoneOffset,r.second,r.millisecond)),r.month>11||r.month<0||r.day>31||r.day<1||r.hour>23||r.hour<0||r.minute>59||r.minute<0||r.second>59||r.second<0)return null;return g}var Jl={format:Kl,parse:ql,defaultI18n:Ml,setGlobalDateI18n:Pl,setGlobalDateMasks:Gl};function Yl(e){return function(t,n,r,i){for(var a=M(r)?0:r,o=M(i)?t.length:i;a<o;){var s=a+o>>>1;e(t[s])>n?o=s:a=s+1}return a}}var Xl=`format`;function Zl(e,t){return(vl[Xl]||Jl[Xl])(e,t)}function Ql(e){return I(e)&&(e=e.indexOf(`T`)>0?new Date(e).getTime():new Date(e.replace(/-/gi,`/`)).getTime()),tt(e)&&(e=e.getTime()),e}var $l=1e3,eu=60*$l,tu=60*eu,nu=24*tu,ru=nu*31,iu=nu*365,au=[[`HH:mm:ss`,$l],[`HH:mm:ss`,$l*10],[`HH:mm:ss`,$l*30],[`HH:mm`,eu],[`HH:mm`,eu*10],[`HH:mm`,eu*30],[`HH`,tu],[`HH`,tu*6],[`HH`,tu*12],[`YYYY-MM-DD`,nu],[`YYYY-MM-DD`,nu*4],[`YYYY-WW`,nu*7],[`YYYY-MM`,ru],[`YYYY-MM`,ru*4],[`YYYY-MM`,ru*6],[`YYYY`,nu*380]];function ou(e,t,n){var r=(t-e)/n,i=Yl(function(e){return e[1]})(au,r)-1,a=au[i];return i<0?a=au[0]:i>=au.length&&(a=De(au)),a}var su=function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=`timeCat`,t}return t.prototype.translate=function(e){e=Ql(e);var t=this.values.indexOf(e);return t===-1&&(t=L(e)&&e<this.values.length?e:NaN),t},t.prototype.getText=function(e,t){var n=this.translate(e);if(n>-1){var r=this.values[n],i=this.formatter;return r=i?i(r,t):Zl(r,this.mask),r}return e},t.prototype.initCfg=function(){this.tickMethod=`time-cat`,this.mask=`YYYY-MM-DD`,this.tickCount=7},t.prototype.setDomain=function(){var t=this.values;F(t,function(e,n){t[n]=Ql(e)}),t.sort(function(e,t){return e-t}),e.prototype.setDomain.call(this)},t}(_l),cu=function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.isContinuous=!0,t}return t.prototype.scale=function(e){if(M(e))return NaN;var t=this.rangeMin(),n=this.rangeMax(),r=this.max,i=this.min;if(r===i)return t;var a=this.getScalePercent(e);return t+a*(n-t)},t.prototype.init=function(){e.prototype.init.call(this);var t=this.ticks,n=Ee(t),r=De(t);n<this.min&&(this.min=n),r>this.max&&(this.max=r),M(this.minLimit)||(this.min=n),M(this.maxLimit)||(this.max=r)},t.prototype.setDomain=function(){var e=ge(this.values),t=e.min,n=e.max;M(this.min)&&(this.min=t),M(this.max)&&(this.max=n),this.min>this.max&&(this.min=t,this.max=n)},t.prototype.calculateTicks=function(){var t=this,n=e.prototype.calculateTicks.call(this);return this.nice||(n=k(n,function(e){return e>=t.min&&e<=t.max})),n},t.prototype.getScalePercent=function(e){var t=this.max,n=this.min;return(e-n)/(t-n)},t.prototype.getInvertPercent=function(e){return(e-this.rangeMin())/(this.rangeMax()-this.rangeMin())},t}(gl),lu=function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=`linear`,t.isLinear=!0,t}return t.prototype.invert=function(e){var t=this.getInvertPercent(e);return this.min+t*(this.max-this.min)},t.prototype.initCfg=function(){this.tickMethod=`wilkinson-extended`,this.nice=!1},t}(cu);function uu(e,t){var n=Math.E;return t>=0?n**+(Math.log(t)/e):n**+(Math.log(-t)/e)*-1}function du(e,t){return e===1?1:Math.log(t)/Math.log(e)}function fu(e,t,n){M(n)&&(n=Math.max.apply(null,e));var r=n;return F(e,function(e){e>0&&e<r&&(r=e)}),r===n&&(r=n/t),r>1&&(r=1),r}var pu=function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=`log`,t}return t.prototype.invert=function(e){var t=this.base,n=du(t,this.max),r=this.rangeMin(),i=this.rangeMax()-r,a,o=this.positiveMin;if(o){if(e===0)return 0;a=du(t,o/t);var s=1/(n-a)*i;if(e<s)return e/s*o}else a=du(t,this.min);var c=(e-r)/i*(n-a)+a;return t**+c},t.prototype.initCfg=function(){this.tickMethod=`log`,this.base=10,this.tickCount=6,this.nice=!0},t.prototype.setDomain=function(){e.prototype.setDomain.call(this);var t=this.min;if(t<0)throw Error(`When you use log scale, the minimum value must be greater than zero!`);t===0&&(this.positiveMin=fu(this.values,this.base,this.max))},t.prototype.getScalePercent=function(e){var t=this.max,n=this.min;if(t===n||e<=0)return 0;var r=this.base,i=this.positiveMin;return i&&(n=i*1/r),e<i?e/i/(du(r,t)-du(r,n)):(du(r,e)-du(r,n))/(du(r,t)-du(r,n))},t}(cu),mu=function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=`pow`,t}return t.prototype.invert=function(e){var t=this.getInvertPercent(e),n=this.exponent,r=uu(n,this.max),i=uu(n,this.min),a=t*(r-i)+i,o=a>=0?1:-1;return a**+n*o},t.prototype.initCfg=function(){this.tickMethod=`pow`,this.exponent=2,this.tickCount=5,this.nice=!0},t.prototype.getScalePercent=function(e){var t=this.max,n=this.min;if(t===n)return 0;var r=this.exponent;return(uu(r,e)-uu(r,n))/(uu(r,t)-uu(r,n))},t}(cu),hu=function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=`time`,t}return t.prototype.getText=function(e,t){var n=this.translate(e),r=this.formatter;return r?r(n,t):Zl(n,this.mask)},t.prototype.scale=function(t){var n=t;return(I(n)||tt(n))&&(n=this.translate(n)),e.prototype.scale.call(this,n)},t.prototype.translate=function(e){return Ql(e)},t.prototype.initCfg=function(){this.tickMethod=`time-pretty`,this.mask=`YYYY-MM-DD`,this.tickCount=7,this.nice=!1},t.prototype.setDomain=function(){var e=this.values,t=this.getConfig(`min`),n=this.getConfig(`max`);if((!M(t)||!L(t))&&(this.min=this.translate(this.min)),(!M(n)||!L(n))&&(this.max=this.translate(this.max)),e&&e.length){var r=[],i=1/0,a=i,o=0;F(e,function(e){var t=Ql(e);if(isNaN(t))throw TypeError(`Invalid Time: `+e+` in time scale!`);i>t?(a=i,i=t):a>t&&(a=t),o<t&&(o=t),r.push(t)}),e.length>1&&(this.minTickInterval=a-i),M(t)&&(this.min=i),M(n)&&(this.max=o)}},t}(lu),gu=function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=`quantize`,t}return t.prototype.invert=function(e){var t=this.ticks,n=t.length,r=this.getInvertPercent(e),i=Math.floor(r*(n-1));if(i>=n-1)return De(t);if(i<0)return Ee(t);var a=t[i],o=t[i+1],s=i/(n-1),c=(i+1)/(n-1);return a+(r-s)/(c-s)*(o-a)},t.prototype.initCfg=function(){this.tickMethod=`r-pretty`,this.tickCount=5,this.nice=!0},t.prototype.calculateTicks=function(){var t=e.prototype.calculateTicks.call(this);return this.nice||(De(t)!==this.max&&t.push(this.max),Ee(t)!==this.min&&t.unshift(this.min)),t},t.prototype.getScalePercent=function(e){var t=this.ticks;if(e<Ee(t))return 0;if(e>De(t))return 1;var n=0;return F(t,function(t,r){if(e>=t)n=r;else return!1}),n/(t.length-1)},t}(cu),_u=function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=`quantile`,t}return t.prototype.initCfg=function(){this.tickMethod=`quantile`,this.tickCount=5,this.nice=!0},t}(gu),vu={};function yu(e){return vu[e]}function bu(e,t){if(yu(e))throw Error(`type '`+e+`' existed.`);vu[e]=t}var xu=function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=`identity`,t.isIdentity=!0,t}return t.prototype.calculateTicks=function(){return this.values},t.prototype.scale=function(e){return this.values[0]!==e&&L(e)?e:this.range[0]},t.prototype.invert=function(e){var t=this.range;return e<t[0]||e>t[1]?NaN:this.values[0]},t}(gl);function Su(e){var t=e.values,n=e.tickInterval,r=e.tickCount,i=e.showLast;if(L(n)){var a=k(t,function(e,t){return t%n===0}),o=De(t);return i&&De(a)!==o&&a.push(o),a}var s=t.length,c=e.min,l=e.max;if(M(c)&&(c=0),M(l)&&(l=t.length-1),!L(r)||r>=s)return t.slice(c,l+1);if(r<=0||l<=0)return[];for(var u=r===1?s:Math.floor(s/(r-1)),d=[],f=c,p=0;p<r&&!(f>=l);p++)f=Math.min(c+p*u,l),p===r-1&&i?d.push(t[l]):d.push(t[f]);return d}function Cu(e){var t=e.min,n=e.max,r=e.nice,i=e.tickCount,a=new Ou;return a.domain([t,n]),r&&a.nice(i),a.ticks(i)}var wu=5,Tu=Math.sqrt(50),Eu=Math.sqrt(10),Du=Math.sqrt(2),Ou=function(){function e(){this._domain=[0,1]}return e.prototype.domain=function(e){return e?(this._domain=Array.from(e,Number),this):this._domain.slice()},e.prototype.nice=function(e){var t,n;e===void 0&&(e=wu);var r=this._domain.slice(),i=0,a=this._domain.length-1,o=this._domain[i],s=this._domain[a],c;return s<o&&(t=[s,o],o=t[0],s=t[1],n=[a,i],i=n[0],a=n[1]),c=Au(o,s,e),c>0?(o=Math.floor(o/c)*c,s=Math.ceil(s/c)*c,c=Au(o,s,e)):c<0&&(o=Math.ceil(o*c)/c,s=Math.floor(s*c)/c,c=Au(o,s,e)),c>0?(r[i]=Math.floor(o/c)*c,r[a]=Math.ceil(s/c)*c,this.domain(r)):c<0&&(r[i]=Math.ceil(o*c)/c,r[a]=Math.floor(s*c)/c,this.domain(r)),this},e.prototype.ticks=function(e){return e===void 0&&(e=wu),ku(this._domain[0],this._domain[this._domain.length-1],e||wu)},e}();function ku(e,t,n){var r,i=-1,a,o,s;if(t=+t,e=+e,n=+n,e===t&&n>0)return[e];if((r=t<e)&&(a=e,e=t,t=a),(s=Au(e,t,n))===0||!isFinite(s))return[];if(s>0)for(e=Math.ceil(e/s),t=Math.floor(t/s),o=Array(a=Math.ceil(t-e+1));++i<a;)o[i]=(e+i)*s;else for(e=Math.floor(e*s),t=Math.ceil(t*s),o=Array(a=Math.ceil(e-t+1));++i<a;)o[i]=(e-i)/s;return r&&o.reverse(),o}function Au(e,t,n){var r=(t-e)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),a=r/10**i;return i>=0?(a>=Tu?10:a>=Eu?5:a>=Du?2:1)*10**i:-(10**-i)/(a>=Tu?10:a>=Eu?5:a>=Du?2:1)}function ju(e,t,n){return(n===`ceil`?Math.ceil(e/t):n===`floor`?Math.floor(e/t):Math.round(e/t))*t}function Mu(e,t,n){var r=ju(e,n,`floor`),i=ju(t,n,`ceil`);r=Ie(r,n),i=Ie(i,n);for(var a=[],o=Math.max((i-r)/(2**12-1),n),s=r;s<=i;s+=o){var c=Ie(s,o);a.push(c)}return{min:r,max:i,ticks:a}}function Nu(e,t,n){var r,i=e.minLimit,a=e.maxLimit,o=e.min,s=e.max,c=e.tickCount,l=c===void 0?5:c,u=M(i)?M(t)?o:t:i,d=M(a)?M(n)?s:n:a;if(u>d&&(r=[u,d],d=r[0],u=r[1]),l<=2)return[u,d];for(var f=(d-u)/(l-1),p=[],m=0;m<l;m++)p.push(u+f*m);return p}function Pu(e){var t=e.min,n=e.max,r=e.tickInterval,i=e.minLimit,a=e.maxLimit,o=Cu(e);return!M(i)||!M(a)?Nu(e,Ee(o),De(o)):r?Mu(t,n,r).ticks:o}function Fu(e){return Math.abs(e)<1e-15?e:parseFloat(e.toFixed(15))}var Iu=[1,5,2,2.5,4,3],Lu=2**-52*100;function Ru(e,t){return(e%t+t)%t}function zu(e){return Math.round(e*0xe8d4a51000)/0xe8d4a51000}function Bu(e,t,n,r,i,a){var o=It(t),s=vt(t,e),c=0,l=Ru(r,a);return(l<Lu||a-l<Lu)&&r<=0&&i>=0&&(c=1),1-s/(o-1)-n+c}function Vu(e,t,n){var r=It(t);return 1-vt(t,e)/(r-1)-n+1}function Hu(e,t,n,r,i,a){var o=(e-1)/(a-i),s=(t-1)/(Math.max(a,r)-Math.min(n,i));return 2-Math.max(o/s,s/o)}function Uu(e,t){return e>=t?2-(e-1)/(t-1):1}function Wu(e,t,n,r){var i=t-e;return 1-.5*((t-r)**2+(e-n)**2)/(.1*i)**2}function Gu(e,t,n){var r=t-e;return n>r?1-((n-r)/2)**2/(.1*r)**2:1}function Ku(){return 1}function qu(e,t,n,r,i,a){n===void 0&&(n=5),r===void 0&&(r=!0),i===void 0&&(i=Iu),a===void 0&&(a=[.25,.2,.5,.05]);var o=n<0?0:Math.round(n);if(Number.isNaN(e)||Number.isNaN(t)||typeof e!=`number`||typeof t!=`number`||!o)return{min:0,max:0,ticks:[]};if(t-e<1e-15||o===1)return{min:e,max:t,ticks:[e]};if(t-e>1e148){var s=n||5,c=(t-e)/s;return{min:e,max:t,ticks:Array(s).fill(null).map(function(t,n){return Fu(e+c*n)})}}for(var l={score:-2,lmin:0,lmax:0,lstep:0},u=1;u<1/0;){for(var d=0;d<i.length;d+=1){var f=i[d],p=Vu(f,i,u);if(a[0]*p+a[1]+a[2]+a[3]<l.score){u=1/0;break}for(var m=2;m<1/0;){var h=Uu(m,o);if(a[0]*p+a[1]+a[2]*h+a[3]<l.score)break;for(var g=(t-e)/(m+1)/u/f,_=Math.ceil(Math.log10(g));_<1/0;){var v=u*f*10**_,y=Gu(e,t,v*(m-1));if(a[0]*p+a[1]*y+a[2]*h+a[3]<l.score)break;var b=Math.floor(t/v)*u-(m-1)*u,x=Math.ceil(e/v)*u;if(b<=x)for(var s=x-b,S=0;S<=s;S+=1){var C=(b+S)*(v/u),w=C+v*(m-1),T=v,E=Bu(f,i,u,C,w,T),D=Wu(e,t,C,w),O=Hu(m,o,e,t,C,w),k=Ku(),A=a[0]*E+a[1]*D+a[2]*O+a[3]*k;A>l.score&&(!r||C<=e&&w>=t)&&(l.lmin=C,l.lmax=w,l.lstep=T,l.score=A)}_+=1}m+=1}}u+=1}var ee=Fu(l.lmax),te=Fu(l.lmin),j=Fu(l.lstep),M=Math.floor(zu((ee-te)/j))+1,N=Array(M);N[0]=Fu(te);for(var d=1;d<M;d++)N[d]=Fu(N[d-1]+j);return{min:Math.min(e,Ee(N)),max:Math.max(t,De(N)),ticks:N}}function Ju(e){var t=e.min,n=e.max,r=e.tickCount,i=e.nice,a=e.tickInterval,o=e.minLimit,s=e.maxLimit,c=qu(t,n,r,i).ticks;return!M(o)||!M(s)?Nu(e,Ee(c),De(c)):a?Mu(t,n,a).ticks:c}function Yu(e){var t=e.base,n=e.tickCount,r=e.min,i=e.max,a=e.values,o,s=du(t,i);if(r>0)o=Math.floor(du(t,r));else{var c=fu(a,t,i);o=Math.floor(du(t,c))}for(var l=s-o,u=Math.ceil(l/n),d=[],f=o;f<s+u;f+=u)d.push(t**+f);return r<=0&&d.unshift(0),d}function Xu(e,t,n){if(n===void 0&&(n=5),e===t)return{max:t,min:e,ticks:[e]};var r=n<0?0:Math.round(n);if(r===0)return{max:t,min:e,ticks:[]};var i=1.5,a=.5+1.5*i,o=(t-e)/r,s=10**Math.floor(Math.log10(o)),c=s;2*s-o<i*(o-c)&&(c=2*s,5*s-o<a*(o-c)&&(c=5*s,10*s-o<i*(o-c)&&(c=10*s)));for(var l=Math.ceil(t/c),u=Math.floor(e/c),d=Math.max(l*c,t),f=Math.min(u*c,e),p=Math.floor((d-f)/c)+1,m=Array(p),h=0;h<p;h++)m[h]=Fu(f+h*c);return{min:f,max:d,ticks:m}}function Zu(e){var t=e.exponent,n=e.tickCount,r=Math.ceil(uu(t,e.max)),i=Math.floor(uu(t,e.min));return Xu(i,r,n).ticks.map(function(e){var n=e>=0?1:-1;return e**+t*n})}function Qu(e,t){var n=e.length*t;return t===1?e[e.length-1]:t===0?e[0]:n%1==0?e.length%2==0?(e[n-1]+e[n])/2:e[n]:e[Math.ceil(n)-1]}function $u(e){var t=e.tickCount,n=e.values;if(!n||!n.length)return[];for(var r=n.slice().sort(function(e,t){return e-t}),i=[],a=0;a<t;a++){var o=a/(t-1);i.push(Qu(r,o))}return i}function ed(e){var t=e.min,n=e.max,r=e.tickCount,i=e.tickInterval,a=e.minLimit,o=e.maxLimit,s=Xu(t,n,r).ticks;return!M(a)||!M(o)?Nu(e,Ee(s),De(s)):i?Mu(t,n,i).ticks:s}function td(e){var t=e.min,n=e.max,r=e.minTickInterval,i=e.tickInterval,a=e.tickCount;if(i)a=Math.ceil((n-t)/i);else{i=ou(t,n,a)[1];var o=(n-t)/i/a;o>1&&(i*=Math.ceil(o)),r&&i<r&&(i=r)}i=Math.max(Math.floor((n-t)/(2**12-1)),i);for(var s=[],c=t;c<n+i;c+=i)s.push(c);return s}function nd(e){return Su(_({showLast:!0},e))}function rd(e){return new Date(e).getFullYear()}function id(e){return new Date(e,0,1).getTime()}function ad(e){return new Date(e).getMonth()}function od(e,t){var n=rd(e),r=rd(t),i=ad(e),a=ad(t);return(r-n)*12+(a-i)%12}function sd(e,t){return new Date(e,t,1).getTime()}function cd(e,t){return Math.ceil((t-e)/nu)}function ld(e,t){return Math.ceil((t-e)/tu)}function ud(e,t){return Math.ceil((t-e)/(60*1e3))}function dd(e){var t=e.min,n=e.max,r=e.minTickInterval,i=e.tickCount,a=e.tickInterval,o=[];a||(a=(n-t)/i,r&&a<r&&(a=r)),a=Math.max(Math.floor((n-t)/(2**12-1)),a);var s=rd(t);if(a>31536e6)for(var c=rd(n),l=Math.ceil(a/iu),u=s;u<=c+l;u+=l)o.push(id(u));else if(a>26784e5)for(var d=Math.ceil(a/ru),f=ad(t),p=od(t,n),u=0;u<=p+d;u+=d)o.push(sd(s,u+f));else if(a>864e5)for(var m=new Date(t),h=m.getFullYear(),g=m.getMonth(),_=m.getDate(),v=Math.ceil(a/nu),y=cd(t,n),u=0;u<y+v;u+=v)o.push(new Date(h,g,_+u).getTime());else if(a>36e5)for(var m=new Date(t),h=m.getFullYear(),g=m.getMonth(),v=m.getDate(),b=m.getHours(),x=Math.ceil(a/tu),S=ld(t,n),u=0;u<=S+x;u+=x)o.push(new Date(h,g,v,b+u).getTime());else if(a>6e4)for(var C=ud(t,n),w=Math.ceil(a/eu),u=0;u<=C+w;u+=w)o.push(t+u*eu);else{var T=a;T<1e3&&(T=$l);for(var E=Math.floor(t/$l)*$l,D=Math.ceil((n-t)/$l),O=Math.ceil(T/$l),u=0;u<D+O;u+=O)o.push(E+u*$l)}return o.length>=512&&console.warn(`Notice: current ticks length(`+o.length+`) >= 512, may cause performance issues, even out of memory. Because of the configure "tickInterval"(in milliseconds, current is `+a+`) is too small, increase the value to solve the problem!`),o}hl(`cat`,Su),hl(`time-cat`,nd),hl(`wilkinson-extended`,Ju),hl(`r-pretty`,ed),hl(`time`,td),hl(`time-pretty`,dd),hl(`log`,Yu),hl(`pow`,Zu),hl(`quantile`,$u),hl(`d3-linear`,Pu),bu(`cat`,_l),bu(`category`,_l),bu(`identity`,xu),bu(`linear`,lu),bu(`log`,pu),bu(`pow`,mu),bu(`time`,hu),bu(`timeCat`,su),bu(`quantize`,gu),bu(`quantile`,_u);var fd={},pd=function(e){return fd[e.toLowerCase()]},md=function(e,t){if(pd(e))throw Error(`Attribute type '${e}' existed.`);fd[e.toLowerCase()]=t};md(`Color`,cl),md(`Opacity`,ll),md(`Position`,ul),md(`Shape`,dl),md(`Size`,fl);var hd=function(){function e(e){this.type=`coordinate`,this.isRect=!1,this.isHelix=!1,this.isPolar=!1,this.isReflectX=!1,this.isReflectY=!1;var t=e.start,n=e.end,r=e.matrix,i=r===void 0?[1,0,0,0,1,0,0,0,1]:r,a=e.isTransposed,o=a===void 0?!1:a;this.start=t,this.end=n,this.matrix=i,this.originalMatrix=s([],i),this.isTransposed=o}return e.prototype.initial=function(){this.center={x:(this.start.x+this.end.x)/2,y:(this.start.y+this.end.y)/2},this.width=Math.abs(this.end.x-this.start.x),this.height=Math.abs(this.end.y-this.start.y)},e.prototype.update=function(e){ut(this,e),this.initial()},e.prototype.convertDim=function(e,t){var n,r=this[t],i=r.start,a=r.end;return this.isReflect(t)&&(n=[a,i],i=n[0],a=n[1]),i+e*(a-i)},e.prototype.invertDim=function(e,t){var n,r=this[t],i=r.start,a=r.end;return this.isReflect(t)&&(n=[a,i],i=n[0],a=n[1]),(e-i)/(a-i)},e.prototype.applyMatrix=function(e,t,n){n===void 0&&(n=0);var r=this.matrix,a=[e,t,n];return i(a,a,r),a},e.prototype.invertMatrix=function(e,t,n){n===void 0&&(n=0);var r=this.matrix,a=Dr([0,0,0,0,0,0,0,0,0],r),o=[e,t,n];return a&&i(o,o,a),o},e.prototype.convert=function(e){var t=this.convertPoint(e),n=t.x,r=t.y,i=this.applyMatrix(n,r,1);return{x:i[0],y:i[1]}},e.prototype.invert=function(e){var t=this.invertMatrix(e.x,e.y,1);return this.invertPoint({x:t[0],y:t[1]})},e.prototype.rotate=function(e){var t=this.matrix,n=this.center;return Mr(t,t,[-n.x,-n.y]),Nr(t,t,e),Mr(t,t,[n.x,n.y]),this},e.prototype.reflect=function(e){return e===`x`?this.isReflectX=!this.isReflectX:this.isReflectY=!this.isReflectY,this},e.prototype.scale=function(e,t){var n=this.matrix,r=this.center;return Mr(n,n,[-r.x,-r.y]),Pr(n,n,[e,t]),Mr(n,n,[r.x,r.y]),this},e.prototype.translate=function(e,t){var n=this.matrix;return Mr(n,n,[e,t]),this},e.prototype.transpose=function(){return this.isTransposed=!this.isTransposed,this},e.prototype.getCenter=function(){return this.center},e.prototype.getWidth=function(){return this.width},e.prototype.getHeight=function(){return this.height},e.prototype.getRadius=function(){return this.radius},e.prototype.isReflect=function(e){return e===`x`?this.isReflectX:this.isReflectY},e.prototype.resetMatrix=function(e){this.matrix=e||s([],this.originalMatrix)},e}(),gd=function(e){l(t,e);function t(t){var n=e.call(this,t)||this;return n.isRect=!0,n.type=`cartesian`,n.initial(),n}return t.prototype.initial=function(){e.prototype.initial.call(this);var t=this.start,n=this.end;this.x={start:t.x,end:n.x},this.y={start:t.y,end:n.y}},t.prototype.convertPoint=function(e){var t,n=e.x,r=e.y;return this.isTransposed&&(t=[r,n],n=t[0],r=t[1]),{x:this.convertDim(n,`x`),y:this.convertDim(r,`y`)}},t.prototype.invertPoint=function(e){var t,n=this.invertDim(e.x,`x`),r=this.invertDim(e.y,`y`);return this.isTransposed&&(t=[r,n],n=t[0],r=t[1]),{x:n,y:r}},t}(hd),_d=function(e){l(t,e);function t(t){var n=e.call(this,t)||this;n.isHelix=!0,n.type=`helix`;var r=t.startAngle,i=r===void 0?1.25*Math.PI:r,a=t.endAngle,o=a===void 0?7.25*Math.PI:a,s=t.innerRadius,c=s===void 0?0:s,l=t.radius;return n.startAngle=i,n.endAngle=o,n.innerRadius=c,n.radius=l,n.initial(),n}return t.prototype.initial=function(){e.prototype.initial.call(this);var t=(this.endAngle-this.startAngle)/(2*Math.PI)+1,n=Math.min(this.width,this.height)/2;this.radius&&this.radius>=0&&this.radius<=1&&(n*=this.radius),this.d=Math.floor(n*(1-this.innerRadius)/t),this.a=this.d/(Math.PI*2),this.x={start:this.startAngle,end:this.endAngle},this.y={start:this.innerRadius*n,end:this.innerRadius*n+this.d*.99}},t.prototype.convertPoint=function(e){var t,n=e.x,r=e.y;this.isTransposed&&(t=[r,n],n=t[0],r=t[1]);var i=this.convertDim(n,`x`),a=this.a*i,o=this.convertDim(r,`y`);return{x:this.center.x+Math.cos(i)*(a+o),y:this.center.y+Math.sin(i)*(a+o)}},t.prototype.invertPoint=function(e){var t,n=this.d+this.y.start,r=w([0,0],[e.x,e.y],[this.center.x,this.center.y]),i=Rr(r,[1,0],!0),a=i*this.a;v(r)<a&&(a=v(r)),i=2*Math.floor((v(r)-a)/n)*Math.PI+i;var o=this.a*i,s=v(r)-o;s=Re(s,0)?0:s;var c=this.invertDim(i,`x`),l=this.invertDim(s,`y`);return c=Re(c,0)?0:c,l=Re(l,0)?0:l,this.isTransposed&&(t=[l,c],c=t[0],l=t[1]),{x:c,y:l}},t}(hd),vd=function(e){l(t,e);function t(t){var n=e.call(this,t)||this;n.isPolar=!0,n.type=`polar`;var r=t.startAngle,i=r===void 0?-Math.PI/2:r,a=t.endAngle,o=a===void 0?Math.PI*3/2:a,s=t.innerRadius,c=s===void 0?0:s,l=t.radius;return n.startAngle=i,n.endAngle=o,n.innerRadius=c,n.radius=l,n.initial(),n}return t.prototype.initial=function(){for(e.prototype.initial.call(this);this.endAngle<this.startAngle;)this.endAngle+=Math.PI*2;var t=this.getOneBox(),n=t.maxX-t.minX,r=t.maxY-t.minY,i=Math.abs(t.minX)/n,a=Math.abs(t.minY)/r,o;this.height/r>this.width/n?(o=this.width/n,this.circleCenter={x:this.center.x-(.5-i)*this.width,y:this.center.y-(.5-a)*o*r}):(o=this.height/r,this.circleCenter={x:this.center.x-(.5-i)*o*n,y:this.center.y-(.5-a)*this.height}),this.polarRadius=this.radius,this.radius?this.radius>0&&this.radius<=1?this.polarRadius=o*this.radius:(this.radius<=0||this.radius>o)&&(this.polarRadius=o):this.polarRadius=o,this.x={start:this.startAngle,end:this.endAngle},this.y={start:this.innerRadius*this.polarRadius,end:this.polarRadius}},t.prototype.getRadius=function(){return this.polarRadius},t.prototype.convertPoint=function(e){var t,n=this.getCenter(),r=e.x,i=e.y;return this.isTransposed&&(t=[i,r],r=t[0],i=t[1]),r=this.convertDim(r,`x`),i=this.convertDim(i,`y`),{x:n.x+Math.cos(r)*i,y:n.y+Math.sin(r)*i}},t.prototype.invertPoint=function(e){var t,n=this.getCenter(),r=[e.x-n.x,e.y-n.y],a=this,o=a.startAngle,s=a.endAngle;this.isReflect(`x`)&&(t=[s,o],o=t[0],s=t[1]);var c=[1,0,0,0,1,0,0,0,1];Nr(c,c,o);var l=[1,0,0];i(l,l,c);var u=[l[0],l[1]],d=Rr(u,r,s<o);Re(d,Math.PI*2)&&(d=0);var f=v(r),p=d/(s-o);p=s-o>0?p:-p;var m=this.invertDim(f,`y`),h={x:0,y:0};return h.x=this.isTransposed?m:p,h.y=this.isTransposed?p:m,h},t.prototype.getCenter=function(){return this.circleCenter},t.prototype.getOneBox=function(){var e=this.startAngle,t=this.endAngle;if(Math.abs(t-e)>=Math.PI*2)return{minX:-1,maxX:1,minY:-1,maxY:1};for(var n=[0,Math.cos(e),Math.cos(t)],r=[0,Math.sin(e),Math.sin(t)],i=Math.min(e,t);i<Math.max(e,t);i+=Math.PI/18)n.push(Math.cos(i)),r.push(Math.sin(i));return{minX:Math.min.apply(Math,n),maxX:Math.max.apply(Math,n),minY:Math.min.apply(Math,r),maxY:Math.max.apply(Math,r)}},t}(hd),yd={},bd=function(e){return yd[e.toLowerCase()]},xd=function(e,t){yd[e.toLowerCase()]=t};xd(`rect`,gd),xd(`cartesian`,gd),xd(`polar`,vd),xd(`helix`,_d);function Sd(e,t,n){var r=new ir(t,n);r.target=e,r.propagationPath.push(e),e.emitDelegation(t,r);for(var i=e.getParent();i;)i.emitDelegation(t,r),r.propagationPath.push(i),i=i.getParent()}var Cd=[1,0,0,0,1,0,0,0,1];function wd(e,t,n){return n===void 0&&(n=Cd),t?Ir(n,[[`t`,-e.x,-e.y],[`r`,t],[`t`,e.x,e.y]]):null}function Td(e,t){return!e.x&&!e.y?null:Ir(t||Cd,[[`t`,e.x,e.y]])}function Ed(e){var t=[1,0,0],n=[0,0,0];return i(n,t,e),Math.atan2(n[1],n[0])}function Dd(e,t){var n=[0,0];return T(n,t,e),n}function Od(e,t){var n=Dd(e,[t.minX,t.minY]),r=Dd(e,[t.maxX,t.minY]),i=Dd(e,[t.minX,t.maxY]),a=Dd(e,[t.maxX,t.maxY]),o=Math.min(n[0],r[0],i[0],a[0]),s=Math.max(n[0],r[0],i[0],a[0]),c=Math.min(n[1],r[1],i[1],a[1]),l=Math.max(n[1],r[1],i[1],a[1]);return{x:o,y:c,minX:o,minY:c,maxX:s,maxY:l,width:s-o,height:l-c}}function kd(e,t,n,r){if(t){var i=wd({x:n,y:r},t,e.getMatrix());e.setMatrix(i)}}function Ad(e,t,n){var r=Td({x:t,y:n});e.attr(`matrix`,r)}function jd(e){var t=0,n=0,r=0,i=0;return L(e)?t=n=r=i=e:N(e)&&(t=e[0],r=M(e[1])?e[0]:e[1],i=M(e[2])?e[0]:e[2],n=M(e[3])?r:e[3]),[t,r,i,n]}function Md(e){for(var t=e.childNodes,n=t.length-1;n>=0;n--)e.removeChild(t[n])}function Nd(e,t){return!!e.className.match(RegExp(`(\\s|^)`+t+`(\\s|$)`))}function Pd(e){var t=e.start,n=e.end,r=Math.min(t.x,n.x),i=Math.min(t.y,n.y),a=Math.max(t.x,n.x),o=Math.max(t.y,n.y);return{x:r,y:i,minX:r,minY:i,maxX:a,maxY:o,width:a-r,height:o-i}}function Fd(e){var t=e.map(function(e){return e.x}),n=e.map(function(e){return e.y}),r=Math.min.apply(Math,t),i=Math.min.apply(Math,n),a=Math.max.apply(Math,t),o=Math.max.apply(Math,n);return{x:r,y:i,minX:r,minY:i,maxX:a,maxY:o,width:a-r,height:o-i}}function Id(e,t,n,r){var i=e+n,a=t+r;return{x:e,y:t,width:n,height:r,minX:e,minY:t,maxX:isNaN(i)?0:i,maxY:isNaN(a)?0:a}}function Ld(e,t,n){return(1-n)*e+t*n}function Rd(e,t,n){return{x:e.x+Math.cos(n)*t,y:e.y+Math.sin(n)*t}}function zd(e,t){var n=t.x-e.x,r=t.y-e.y;return Math.sqrt(n*n+r*r)}var Bd=function(e,t,n){return n===void 0&&(n=(2**-52)**.5),[e,t].includes(1/0)?Math.abs(e)===Math.abs(t):Math.abs(e-t)<n};function Vd(e,t){var n=Math.max(e.minX,t.minX),r=Math.max(e.minY,t.minY),i=Math.min(e.maxX,t.maxX),a=Math.min(e.maxY,t.maxY);return Id(n,r,i-n,a-r)}function Hd(e){var t=e.getClip(),n=t&&t.getBBox(),r;if(!e.isGroup())r=e.getBBox();else{var i=1/0,a=-1/0,o=1/0,s=-1/0,c=e.getChildren();c.length>0?F(c,function(e){if(e.get(`visible`)){if(e.isGroup()&&e.get(`children`).length===0)return!0;var t=Hd(e),n=e.applyToMatrix([t.minX,t.minY,1]),r=e.applyToMatrix([t.minX,t.maxY,1]),c=e.applyToMatrix([t.maxX,t.minY,1]),l=e.applyToMatrix([t.maxX,t.maxY,1]),u=Math.min(n[0],r[0],c[0],l[0]),d=Math.max(n[0],r[0],c[0],l[0]),f=Math.min(n[1],r[1],c[1],l[1]),p=Math.max(n[1],r[1],c[1],l[1]);u<i&&(i=u),d>a&&(a=d),f<o&&(o=f),p>s&&(s=p)}}):(i=0,a=0,o=0,s=0),r=Id(i,o,a-i,s-o)}return n?Vd(r,n):r}function Ud(e,t){if(!(!e.getClip()&&!t.getClip())){var n=t.getClip();if(!n){e.setClip(null);return}var r={type:n.get(`type`),attrs:n.attr()};e.setClip(r)}}function Wd(e){return e+`px`}function Gd(e,t,n,r){var i=zd(e,t),a=r/i,o=0;return n===`start`?o=0-a:n===`end`&&(o=1+a),{x:Ld(e.x,t.x,o),y:Ld(e.y,t.y,o)}}var Kd={none:[],point:[`x`,`y`],region:[`start`,`end`],points:[`points`],circle:[`center`,`radius`,`startAngle`,`endAngle`]},qd=function(e){l(t,e);function t(t){var n=e.call(this,t)||this;return n.initCfg(),n}return t.prototype.getDefaultCfg=function(){return{id:``,name:``,type:``,locationType:`none`,offsetX:0,offsetY:0,animate:!1,capture:!0,updateAutoRender:!1,animateOption:{appear:null,update:{duration:400,easing:`easeQuadInOut`},enter:{duration:400,easing:`easeQuadInOut`},leave:{duration:350,easing:`easeQuadIn`}},events:null,defaultCfg:{},visible:!0}},t.prototype.clear=function(){},t.prototype.update=function(e){var t=this,n=this.get(`defaultCfg`)||{};F(e,function(e,r){var i=t.get(r),a=e;i!==e&&(P(e)&&n[r]&&(a=R({},n[r],e)),t.set(r,a))}),this.updateInner(e),this.afterUpdate(e)},t.prototype.updateInner=function(e){},t.prototype.afterUpdate=function(e){Ge(e,`visible`)&&(e.visible?this.show():this.hide()),Ge(e,`capture`)&&this.setCapture(e.capture)},t.prototype.getLayoutBBox=function(){return this.getBBox()},t.prototype.getLocationType=function(){return this.get(`locationType`)},t.prototype.getOffset=function(){return{offsetX:this.get(`offsetX`),offsetY:this.get(`offsetY`)}},t.prototype.setOffset=function(e,t){this.update({offsetX:e,offsetY:t})},t.prototype.setLocation=function(e){var t=_({},e);this.update(t)},t.prototype.getLocation=function(){var e=this,t={},n=this.get(`locationType`),r=Kd[n];return F(r,function(n){t[n]=e.get(n)}),t},t.prototype.isList=function(){return!1},t.prototype.isSlider=function(){return!1},t.prototype.init=function(){},t.prototype.initCfg=function(){var e=this,t=this.get(`defaultCfg`);F(t,function(t,n){var r=e.get(n);if(P(r)){var i=R({},t,r);e.set(n,i)}})},t}(lr),Jd=`update_status`,Yd=[`visible`,`tip`,`delegateObject`],Xd=[`container`,`group`,`shapesMap`,`isRegister`,`isUpdating`,`destroyed`],Zd=function(e){l(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return _(_({},t),{container:null,shapesMap:{},group:null,capture:!0,isRegister:!1,isUpdating:!1,isInit:!0})},t.prototype.remove=function(){this.clear(),this.get(`group`).remove()},t.prototype.clear=function(){this.get(`group`).clear(),this.set(`shapesMap`,{}),this.clearOffScreenCache(),this.set(`isInit`,!0)},t.prototype.getChildComponentById=function(e){var t=this.getElementById(e);return t&&t.get(`component`)},t.prototype.getElementById=function(e){return this.get(`shapesMap`)[e]},t.prototype.getElementByLocalId=function(e){var t=this.getElementId(e);return this.getElementById(t)},t.prototype.getElementsByName=function(e){var t=[];return F(this.get(`shapesMap`),function(n){n.get(`name`)===e&&t.push(n)}),t},t.prototype.getContainer=function(){return this.get(`container`)},t.prototype.updateInner=function(e){this.offScreenRender(),this.get(`updateAutoRender`)&&this.render()},t.prototype.render=function(){var e=this.get(`offScreenGroup`);e||=this.offScreenRender();var t=this.get(`group`);this.updateElements(e,t),this.deleteElements(),this.applyOffset(),this.get(`eventInitted`)||(this.initEvent(),this.set(`eventInitted`,!0)),this.set(`isInit`,!1)},t.prototype.show=function(){this.get(`group`).show(),this.set(`visible`,!0)},t.prototype.hide=function(){this.get(`group`).hide(),this.set(`visible`,!1)},t.prototype.setCapture=function(e){this.get(`group`).set(`capture`,e),this.set(`capture`,e)},t.prototype.destroy=function(){this.removeEvent(),this.remove(),e.prototype.destroy.call(this)},t.prototype.getBBox=function(){return this.get(`group`).getCanvasBBox()},t.prototype.getLayoutBBox=function(){var e=this.get(`group`),t=this.getInnerLayoutBBox(),n=e.getTotalMatrix();return n&&(t=Od(n,t)),t},t.prototype.on=function(e,t,n){return this.get(`group`).on(e,t,n),this},t.prototype.off=function(e,t){var n=this.get(`group`);return n&&n.off(e,t),this},t.prototype.emit=function(e,t){this.get(`group`).emit(e,t)},t.prototype.init=function(){e.prototype.init.call(this),this.get(`group`)||this.initGroup(),this.offScreenRender()},t.prototype.getInnerLayoutBBox=function(){return this.get(`offScreenBBox`)||this.get(`group`).getBBox()},t.prototype.delegateEmit=function(e,t){var n=this.get(`group`);t.target=n,n.emit(e,t),Sd(n,e,t)},t.prototype.createOffScreenGroup=function(){return new(this.get(`group`).getGroupBase())({delegateObject:this.getDelegateObject()})},t.prototype.applyOffset=function(){var e=this.get(`offsetX`),t=this.get(`offsetY`);this.moveElementTo(this.get(`group`),{x:e,y:t})},t.prototype.initGroup=function(){var e=this.get(`container`);this.set(`group`,e.addGroup({id:this.get(`id`),name:this.get(`name`),capture:this.get(`capture`),visible:this.get(`visible`),isComponent:!0,component:this,delegateObject:this.getDelegateObject()}))},t.prototype.offScreenRender=function(){this.clearOffScreenCache();var e=this.createOffScreenGroup();return this.renderInner(e),this.set(`offScreenGroup`,e),this.set(`offScreenBBox`,Hd(e)),e},t.prototype.addGroup=function(e,t){this.appendDelegateObject(e,t);var n=e.addGroup(t);return this.get(`isRegister`)&&this.registerElement(n),n},t.prototype.addShape=function(e,t){this.appendDelegateObject(e,t);var n=e.addShape(t);return this.get(`isRegister`)&&this.registerElement(n),n},t.prototype.addComponent=function(e,t){var n=t.id,r=t.component,i=o(t,[`id`,`component`]),a=new r(_(_({},i),{id:n,container:e,updateAutoRender:this.get(`updateAutoRender`)}));return a.init(),a.render(),this.get(`isRegister`)&&this.registerElement(a.get(`group`)),a},t.prototype.initEvent=function(){},t.prototype.removeEvent=function(){this.get(`group`).off()},t.prototype.getElementId=function(e){var t=this.get(`id`),n=this.get(`name`);return t+`-`+n+`-`+e},t.prototype.registerElement=function(e){var t=e.get(`id`);this.get(`shapesMap`)[t]=e},t.prototype.unregisterElement=function(e){var t=e.get(`id`);delete this.get(`shapesMap`)[t]},t.prototype.moveElementTo=function(e,t){var n=Td(t);e.attr(`matrix`,n)},t.prototype.addAnimation=function(e,t,n){var r=t.attr(`opacity`);M(r)&&(r=1),t.attr(`opacity`,0),t.animate({opacity:r},n)},t.prototype.removeAnimation=function(e,t,n){t.animate({opacity:0},n)},t.prototype.updateAnimation=function(e,t,n,r){t.animate(n,r)},t.prototype.updateElements=function(e,t){var n=this,r=this.get(`animate`),i=this.get(`animateOption`),a=e.getChildren().slice(0),o;F(a,function(e){var a=e.get(`id`),s=n.getElementById(a),c=e.get(`name`);if(s)if(e.get(`isComponent`)){var l=e.get(`component`),u=s.get(`component`),d=kt(l.cfg,A(re(l.cfg),Xd));u.update(d),s.set(Jd,`update`)}else{var f=n.getReplaceAttrs(s,e);r&&i.update?n.updateAnimation(c,s,f,i.update):s.attr(f),e.isGroup()&&n.updateElements(e,s),F(Yd,function(t){s.set(t,e.get(t))}),Ud(s,e),o=s,s.set(Jd,`update`)}else{t.add(e);var p=t.getChildren();if(p.splice(p.length-1,1),o){var m=p.indexOf(o);p.splice(m+1,0,e)}else p.unshift(e);if(n.registerElement(e),e.set(Jd,`add`),e.get(`isComponent`)){var l=e.get(`component`);l.set(`container`,t)}else e.isGroup()&&n.registerNewGroup(e);if(o=e,r){var h=n.get(`isInit`)?i.appear:i.enter;h&&n.addAnimation(c,e,h)}}})},t.prototype.clearUpdateStatus=function(e){var t=e.getChildren();F(t,function(e){e.set(Jd,null)})},t.prototype.clearOffScreenCache=function(){var e=this.get(`offScreenGroup`);e&&e.destroy(),this.set(`offScreenGroup`,null),this.set(`offScreenBBox`,null)},t.prototype.getDelegateObject=function(){var e,t=this.get(`name`);return e={},e[t]=this,e.component=this,e},t.prototype.appendDelegateObject=function(e,t){var n=e.get(`delegateObject`);t.delegateObject||={},ut(t.delegateObject,n)},t.prototype.getReplaceAttrs=function(e,t){var n=e.attr(),r=t.attr();return F(n,function(e,t){r[t]===void 0&&(r[t]=void 0)}),r},t.prototype.registerNewGroup=function(e){var t=this,n=e.getChildren();F(n,function(e){t.registerElement(e),e.set(Jd,`add`),e.isGroup()&&t.registerNewGroup(e)})},t.prototype.deleteElements=function(){var e=this,t=this.get(`shapesMap`),n=[];F(t,function(e,t){!e.get(Jd)||e.destroyed?n.push([t,e]):e.set(Jd,null)});var r=this.get(`animate`),i=this.get(`animateOption`);F(n,function(n){var a=n[0],o=n[1];if(!o.destroyed){var s=o.get(`name`);if(r&&i.leave){var c=ut({callback:function(){e.removeElement(o)}},i.leave);e.removeAnimation(s,o,c)}else e.removeElement(o)}delete t[a]})},t.prototype.removeElement=function(e){if(e.get(`isGroup`)){var t=e.get(`component`);t&&t.destroy()}e.remove()},t}(qd),Qd=`…`;function $d(e){for(var t=0,n=0;n<e.length;n++)t+=ef(e,n);return t}function ef(e,t){return e.charCodeAt(t)>0&&e.charCodeAt(t)<128?1:2}function tf(e,t,n){n===void 0&&(n=`tail`);var r=e.length,i=``;if(n===`tail`){for(var a=0,o=0;a<t;){var s=ef(e,o);if(a+s<=t)i+=e[o],a+=ef(e,o),o++;else break}i+=Qd}else if(n===`head`){for(var a=0,o=r-1;a<t;){var s=ef(e,o);if(a+s<=t)i+=e[o],a+=ef(e,o),o--;else break}i=Qd+i}else{for(var c=``,l=``,a=0,u=0,d=r-1;a<t;){var f=ef(e,u),p=!1;f+a<=t&&(c+=e[u],u++,a+=f,p=!0);var m=ef(e,d);if(m+a<=t&&(l=e[d]+l,a+=m,d--,p=!0),!p)break}i=c+Qd+l}return i}var nf=`…`,rf=2,af=400;function sf(e){for(var t=e.map(function(e){var t=e.attr(`text`);return M(t)?``:``+t}),n=0,r=0,i=0;i<t.length;i+=1){for(var a=0,o=0;o<=t[i].length;o+=1){var s=t[i].charCodeAt(o);s>=19968&&s<=40869?a+=2:a+=1}a>n&&(n=a,r=i)}return e[r].getBBox().width}function cf(e){if(e.length>af)return sf(e);var t=0;return F(e,function(e){var n=e.getBBox().width;t<n&&(t=n)}),t}function lf(e,t){var n=t.getCanvasBBox();return e?n.width:n.height}function uf(e,t,n,r){r===void 0&&(r=`tail`);var i=t.attr(`text`)??``;if(r===`tail`){var a=kt(t.attr(),[`fontSize`,`fontFamily`,`fontWeight`,`fontStyle`,`fontVariant`]),o=zt(i,n,a,`…`);return i===o?(t.set(`tip`,null),!1):(t.attr(`text`,o),t.set(`tip`,i),!0)}var s=lf(e,t),c=$d(i),l=!1;if(n<s){var u=Math.floor(n/s*c)-rf,d=void 0;d=u>=0?tf(i,u,r):nf,d&&(t.attr(`text`,d),l=!0)}return l?t.set(`tip`,i):t.set(`tip`,null),l}function df(e,t){var n=t.x,r=t.y,i=t.content,a=t.style,o=t.id,s=t.name,c=t.rotate,l=t.maxLength,u=t.autoEllipsis,d=t.isVertical,f=t.ellipsisPosition,p=t.background,m=e.addGroup({id:o+`-group`,name:s+`-group`,attrs:{x:n,y:r}}),h=m.addShape({type:`text`,id:o,name:s,attrs:_({x:0,y:0,text:i},a)}),g=jd(z(p,`padding`,0));if(l&&u){var v=l-(g[1]+g[3]);uf(!d,h,v,f)}if(p){var y=z(p,`style`,{}),b=h.getCanvasBBox(),x=b.minX,S=b.minY,C=b.width,w=b.height;m.addShape(`rect`,{id:o+`-bg`,name:o+`-bg`,attrs:_({x:x-g[3],y:S-g[0],width:C+g[1]+g[3],height:w+g[0]+g[2]},y)}).toBack()}Ad(m,n,r),kd(m,c,n,r)}var H={fontFamily:`
  BlinkMacSystemFont, "Segoe UI", Roboto,"Helvetica Neue",
  Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei",
  SimSun, "sans-serif"`,textColor:`#2C3542`,activeTextColor:`#333333`,uncheckedColor:`#D8D8D8`,lineColor:`#416180`,regionColor:`#CCD7EB`,verticalAxisRotate:-Math.PI/4,horizontalAxisRotate:Math.PI/4,descriptionIconStroke:`#fff`,descriptionIconFill:`rgba(58, 73, 101, .25)`},ff=function(e){l(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return _(_({},t),{name:`annotation`,type:`line`,locationType:`region`,start:null,end:null,style:{},text:null,defaultCfg:{style:{fill:H.textColor,fontSize:12,textAlign:`center`,textBaseline:`bottom`,fontFamily:H.fontFamily},text:{position:`center`,autoRotate:!0,content:null,offsetX:0,offsetY:0,style:{stroke:H.lineColor,lineWidth:1}}}})},t.prototype.renderInner=function(e){this.renderLine(e),this.get(`text`)&&this.renderLabel(e)},t.prototype.renderLine=function(e){var t=this.get(`start`),n=this.get(`end`),r=this.get(`style`);this.addShape(e,{type:`line`,id:this.getElementId(`line`),name:`annotation-line`,attrs:_({x1:t.x,y1:t.y,x2:n.x,y2:n.y},r)})},t.prototype.getLabelPoint=function(e,t,n){var r=n===`start`?0:n===`center`?.5:I(n)&&n.indexOf(`%`)!==-1?parseInt(n,10)/100:L(n)?n:1;return(r>1||r<0)&&(r=1),{x:Ld(e.x,t.x,r),y:Ld(e.y,t.y,r)}},t.prototype.renderLabel=function(e){var t=this.get(`text`),n=this.get(`start`),r=this.get(`end`),i=t.position,a=t.content,o=t.style,s=t.offsetX,c=t.offsetY,l=t.autoRotate,u=t.maxLength,d=t.autoEllipsis,f=t.ellipsisPosition,p=t.background,m=t.isVertical,h=m===void 0?!1:m,g=this.getLabelPoint(n,r,i),_=g.x+s,v=g.y+c,y={id:this.getElementId(`line-text`),name:`annotation-line-text`,x:_,y:v,content:a,style:o,maxLength:u,autoEllipsis:d,ellipsisPosition:f,background:p,isVertical:h};if(l){var b=[r.x-n.x,r.y-n.y];y.rotate=Math.atan2(b[1],b[0])}df(e,y)},t}(Zd),pf=function(e){l(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return _(_({},t),{name:`annotation`,type:`text`,locationType:`point`,x:0,y:0,content:``,rotate:null,style:{},background:null,maxLength:null,autoEllipsis:!0,isVertical:!1,ellipsisPosition:`tail`,defaultCfg:{style:{fill:H.textColor,fontSize:12,textAlign:`center`,textBaseline:`middle`,fontFamily:H.fontFamily}}})},t.prototype.setLocation=function(e){this.set(`x`,e.x),this.set(`y`,e.y),this.resetLocation()},t.prototype.renderInner=function(e){var t=this.getLocation(),n=t.x,r=t.y,i=this.get(`content`),a=this.get(`style`),o=this.getElementId(`text`),s=this.get(`name`)+`-text`,c=this.get(`maxLength`),l=this.get(`autoEllipsis`),u=this.get(`isVertical`),d=this.get(`ellipsisPosition`),f=this.get(`background`),p=this.get(`rotate`);df(e,{id:o,name:s,x:n,y:r,content:i,style:a,maxLength:c,autoEllipsis:l,isVertical:u,ellipsisPosition:d,background:f,rotate:p})},t.prototype.resetLocation=function(){var e=this.getElementByLocalId(`text-group`);if(e){var t=this.getLocation(),n=t.x,r=t.y,i=this.get(`rotate`);Ad(e,n,r),kd(e,i,n,r)}},t}(Zd),mf=function(e){l(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return _(_({},t),{name:`annotation`,type:`arc`,locationType:`circle`,center:null,radius:100,startAngle:-Math.PI/2,endAngle:Math.PI*3/2,style:{stroke:`#999`,lineWidth:1}})},t.prototype.renderInner=function(e){this.renderArc(e)},t.prototype.getArcPath=function(){var e=this.getLocation(),t=e.center,n=e.radius,r=e.startAngle,i=e.endAngle,a=Rd(t,n,r),o=Rd(t,n,i),s=i-r>Math.PI?1:0,c=[[`M`,a.x,a.y]];if(i-r===Math.PI*2){var l=Rd(t,n,r+Math.PI);c.push([`A`,n,n,0,s,1,l.x,l.y]),c.push([`A`,n,n,0,s,1,o.x,o.y])}else c.push([`A`,n,n,0,s,1,o.x,o.y]);return c},t.prototype.renderArc=function(e){var t=this.getArcPath(),n=this.get(`style`);this.addShape(e,{type:`path`,id:this.getElementId(`arc`),name:`annotation-arc`,attrs:_({path:t},n)})},t}(Zd),hf=function(e){l(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return _(_({},t),{name:`annotation`,type:`region`,locationType:`region`,start:null,end:null,style:{},defaultCfg:{style:{lineWidth:0,fill:H.regionColor,opacity:.4}}})},t.prototype.renderInner=function(e){this.renderRegion(e)},t.prototype.renderRegion=function(e){var t=this.get(`start`),n=this.get(`end`),r=this.get(`style`),i=Pd({start:t,end:n});this.addShape(e,{type:`rect`,id:this.getElementId(`region`),name:`annotation-region`,attrs:_({x:i.x,y:i.y,width:i.width,height:i.height},r)})},t}(Zd),gf=function(e){l(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return _(_({},t),{name:`annotation`,type:`image`,locationType:`region`,start:null,end:null,src:null,style:{}})},t.prototype.renderInner=function(e){this.renderImage(e)},t.prototype.getImageAttrs=function(){var e=this.get(`start`),t=this.get(`end`),n=this.get(`style`),r=Pd({start:e,end:t}),i=this.get(`src`);return _({x:r.x,y:r.y,img:i,width:r.width,height:r.height},n)},t.prototype.renderImage=function(e){this.addShape(e,{type:`image`,id:this.getElementId(`image`),name:`annotation-image`,attrs:this.getImageAttrs()})},t}(Zd),_f=function(e){l(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return _(_({},t),{name:`annotation`,type:`dataMarker`,locationType:`point`,x:0,y:0,point:{},line:{},text:{},direction:`upward`,autoAdjust:!0,coordinateBBox:null,defaultCfg:{point:{display:!0,style:{r:3,fill:`#FFFFFF`,stroke:`#1890FF`,lineWidth:2}},line:{display:!0,length:20,style:{stroke:H.lineColor,lineWidth:1}},text:{content:``,display:!0,style:{fill:H.textColor,opacity:.65,fontSize:12,textAlign:`start`,fontFamily:H.fontFamily}}}})},t.prototype.renderInner=function(e){z(this.get(`line`),`display`)&&this.renderLine(e),z(this.get(`text`),`display`)&&this.renderText(e),z(this.get(`point`),`display`)&&this.renderPoint(e),this.get(`autoAdjust`)&&this.autoAdjust(e)},t.prototype.applyOffset=function(){this.moveElementTo(this.get(`group`),{x:this.get(`x`)+this.get(`offsetX`),y:this.get(`y`)+this.get(`offsetY`)})},t.prototype.renderPoint=function(e){var t=this.getShapeAttrs().point;this.addShape(e,{type:`circle`,id:this.getElementId(`point`),name:`annotation-point`,attrs:t})},t.prototype.renderLine=function(e){var t=this.getShapeAttrs().line;this.addShape(e,{type:`path`,id:this.getElementId(`line`),name:`annotation-line`,attrs:t})},t.prototype.renderText=function(e){var t=this.getShapeAttrs().text,n=t.x,r=t.y,i=t.text,a=o(t,[`x`,`y`,`text`]),s=this.get(`text`),c=s.background,l=s.maxLength,u=s.autoEllipsis,d=s.isVertival,f=s.ellipsisPosition,p={x:n,y:r,id:this.getElementId(`text`),name:`annotation-text`,content:i,style:a,background:c,maxLength:l,autoEllipsis:u,isVertival:d,ellipsisPosition:f};df(e,p)},t.prototype.autoAdjust=function(e){var t=this.get(`direction`),n=this.get(`x`),r=this.get(`y`),i=z(this.get(`line`),`length`,0),a=this.get(`coordinateBBox`),o=e.getBBox(),s=o.minX,c=o.maxX,l=o.minY,u=o.maxY,d=e.findById(this.getElementId(`text-group`)),f=e.findById(this.getElementId(`text`)),p=e.findById(this.getElementId(`line`));if(a&&d){var m=d.attr(`x`),h=d.attr(`y`),g=f.getCanvasBBox(),_=g.width,v=g.height,y=0,b=0;if(n+s<=a.minX)if(t===`leftward`)y=1;else{var x=a.minX-(n+s);m=d.attr(`x`)+x}else if(n+c>=a.maxX)if(t===`rightward`)y=-1;else{var x=n+c-a.maxX;m=d.attr(`x`)-x}if(y&&(p&&p.attr(`path`,[[`M`,0,0],[`L`,i*y,0]]),m=(i+2+_)*y),r+l<=a.minY)if(t===`upward`)b=1;else{var x=a.minY-(r+l);h=d.attr(`y`)+x}else if(r+u>=a.maxY)if(t===`downward`)b=-1;else{var x=r+u-a.maxY;h=d.attr(`y`)-x}b&&(p&&p.attr(`path`,[[`M`,0,0],[`L`,0,i*b]]),h=(i+2+v)*b),(m!==d.attr(`x`)||h!==d.attr(`y`))&&Ad(d,m,h)}},t.prototype.getShapeAttrs=function(){var e=z(this.get(`line`),`display`),t=z(this.get(`point`),`style`,{}),n=z(this.get(`line`),`style`,{}),r=z(this.get(`text`),`style`,{}),i=this.get(`direction`),a=e?z(this.get(`line`),`length`,0):0,o=0,s=0,c=`top`,l=`start`;switch(i){case`upward`:s=-1,c=`bottom`;break;case`downward`:s=1,c=`top`;break;case`leftward`:o=-1,l=`end`;break;case`rightward`:o=1,l=`start`;break}return{point:_({x:0,y:0},t),line:_({path:[[`M`,0,0],[`L`,a*o,a*s]]},n),text:_({x:(a+2)*o,y:(a+2)*s,text:z(this.get(`text`),`content`,``),textBaseline:c,textAlign:l},r)}},t}(Zd),vf=function(e){l(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return _(_({},t),{name:`annotation`,type:`dataRegion`,locationType:`points`,points:[],lineLength:0,region:{},text:{},defaultCfg:{region:{style:{lineWidth:0,fill:H.regionColor,opacity:.4}},text:{content:``,style:{textAlign:`center`,textBaseline:`bottom`,fontSize:12,fill:H.textColor,fontFamily:H.fontFamily}}}})},t.prototype.renderInner=function(e){var t=z(this.get(`region`),`style`,{});z(this.get(`text`),`style`,{});var n=this.get(`lineLength`)||0,r=this.get(`points`);if(r.length){var i=Fd(r),a=[];a.push([`M`,r[0].x,i.minY-n]),r.forEach(function(e){a.push([`L`,e.x,e.y])}),a.push([`L`,r[r.length-1].x,r[r.length-1].y-n]),this.addShape(e,{type:`path`,id:this.getElementId(`region`),name:`annotation-region`,attrs:_({path:a},t)});var o=_({id:this.getElementId(`text`),name:`annotation-text`,x:(i.minX+i.maxX)/2,y:i.minY-n},this.get(`text`));df(e,o)}},t}(Zd),yf=function(e){l(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return _(_({},t),{name:`annotation`,type:`regionFilter`,locationType:`region`,start:null,end:null,color:null,shape:[]})},t.prototype.renderInner=function(e){var t=this,n=this.get(`start`),r=this.get(`end`),i=this.addGroup(e,{id:this.getElementId(`region-filter`),capture:!1});F(this.get(`shapes`),function(e,n){var r=e.get(`type`),a=ft(e.attr());t.adjustShapeAttrs(a),t.addShape(i,{id:t.getElementId(`shape-`+r+`-`+n),capture:!1,type:r,attrs:a})});var a=Pd({start:n,end:r});i.setClip({type:`rect`,attrs:{x:a.minX,y:a.minY,width:a.width,height:a.height}})},t.prototype.adjustShapeAttrs=function(e){var t=this.get(`color`);e.fill&&=e.fillStyle=t,e.stroke=e.strokeStyle=t},t}(Zd),bf=function(e){l(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return _(_({},t),{name:`annotation`,type:`shape`,draw:Ft})},t.prototype.renderInner=function(e){var t=this.get(`render`);j(t)&&t(e)},t}(Zd),xf=function(e){l(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return _(_({},t),{container:null,containerTpl:`<div></div>`,updateAutoRender:!0,containerClassName:``,parent:null})},t.prototype.getContainer=function(){return this.get(`container`)},t.prototype.show=function(){var e=this.get(`container`);e.style.display=``,this.set(`visible`,!0)},t.prototype.hide=function(){var e=this.get(`container`);e.style.display=`none`,this.set(`visible`,!1)},t.prototype.setCapture=function(e){var t=this.getContainer(),n=e?`auto`:`none`;t.style.pointerEvents=n,this.set(`capture`,e)},t.prototype.getBBox=function(){var e=this.getContainer(),t=parseFloat(e.style.left)||0,n=parseFloat(e.style.top)||0;return Id(t,n,e.clientWidth,e.clientHeight)},t.prototype.clear=function(){var e=this.get(`container`);Md(e)},t.prototype.destroy=function(){this.removeEvent(),this.removeDom(),e.prototype.destroy.call(this)},t.prototype.init=function(){e.prototype.init.call(this),this.initContainer(),this.initDom(),this.resetStyles(),this.applyStyles(),this.initEvent(),this.initCapture(),this.initVisible()},t.prototype.initCapture=function(){this.setCapture(this.get(`capture`))},t.prototype.initVisible=function(){this.get(`visible`)?this.show():this.hide()},t.prototype.initDom=function(){},t.prototype.initContainer=function(){var e=this.get(`container`);if(M(e)){e=this.createDom();var t=this.get(`parent`);I(t)&&(t=document.getElementById(t),this.set(`parent`,t)),t.appendChild(e),this.get(`containerId`)&&e.setAttribute(`id`,this.get(`containerId`)),this.set(`container`,e)}else I(e)&&(e=document.getElementById(e),this.set(`container`,e));this.get(`parent`)||this.set(`parent`,e.parentNode)},t.prototype.resetStyles=function(){var e=this.get(`domStyles`),t=this.get(`defaultStyles`);e=e?R({},t,e):t,this.set(`domStyles`,e)},t.prototype.applyStyles=function(){var e=this.get(`domStyles`);if(e){var t=this.getContainer();this.applyChildrenStyles(t,e);var n=this.get(`containerClassName`);if(n&&Nd(t,n)){var r=e[n];fn(t,r)}}},t.prototype.applyChildrenStyles=function(e,t){F(t,function(t,n){var r=e.getElementsByClassName(n);F(r,function(e){fn(e,t)})})},t.prototype.applyStyle=function(e,t){var n=this.get(`domStyles`);fn(t,n[e])},t.prototype.createDom=function(){var e=this.get(`containerTpl`);return on(e)},t.prototype.initEvent=function(){},t.prototype.removeDom=function(){var e=this.get(`container`);e&&e.parentNode&&e.parentNode.removeChild(e)},t.prototype.removeEvent=function(){},t.prototype.updateInner=function(e){Ge(e,`domStyles`)&&(this.resetStyles(),this.applyStyles()),this.resetPosition()},t.prototype.resetPosition=function(){},t}(qd),Sf=function(e){l(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return _(_({},t),{name:`annotation`,type:`html`,locationType:`point`,x:0,y:0,containerTpl:`<div class="g2-html-annotation" style="position:absolute"></div>`,alignX:`left`,alignY:`top`,html:``,zIndex:7})},t.prototype.render=function(){var e=this.getContainer(),t=this.get(`html`);Md(e);var n=j(t)?t(e):t;if(ot(n))e.appendChild(n);else if(I(n)||L(n)){var r=on(``+n);r&&e.appendChild(r)}this.resetPosition()},t.prototype.resetPosition=function(){var e=this.getContainer(),t=this.getLocation(),n=t.x,r=t.y,i=this.get(`alignX`),a=this.get(`alignY`),o=this.get(`offsetX`),s=this.get(`offsetY`),c=dn(e),l=ln(e),u={x:n,y:r};i===`middle`?u.x-=Math.round(c/2):i===`right`&&(u.x-=Math.round(c)),a===`middle`?u.y-=Math.round(l/2):a===`bottom`&&(u.y-=Math.round(l)),o&&(u.x+=o),s&&(u.y+=s),fn(e,{position:`absolute`,left:u.x+`px`,top:u.y+`px`,zIndex:this.get(`zIndex`)})},t}(xf),Cf=e({Arc:()=>mf,DataMarker:()=>_f,DataRegion:()=>vf,Html:()=>Sf,Image:()=>gf,Line:()=>ff,Region:()=>hf,RegionFilter:()=>yf,Shape:()=>bf,Text:()=>pf});function wf(e,t,n){var r=t+`Style`,i=null;return F(n,function(t,n){e[n]&&t[r]&&(i||={},ut(i,t[r]))}),i}var Tf=function(e){l(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return _(_({},t),{name:`axis`,ticks:[],line:{},tickLine:{},subTickLine:null,title:null,label:{},verticalFactor:1,verticalLimitLength:null,overlapOrder:[`autoRotate`,`autoEllipsis`,`autoHide`],tickStates:{},optimize:{},defaultCfg:{line:{style:{lineWidth:1,stroke:H.lineColor}},tickLine:{style:{lineWidth:1,stroke:H.lineColor},alignTick:!0,length:5,displayWithLabel:!0},subTickLine:{style:{lineWidth:1,stroke:H.lineColor},count:4,length:2},label:{autoRotate:!0,autoHide:!1,autoEllipsis:!1,style:{fontSize:12,fill:H.textColor,fontFamily:H.fontFamily,fontWeight:`normal`},offset:10,offsetX:0,offsetY:0},title:{autoRotate:!0,spacing:5,position:`center`,style:{fontSize:12,fill:H.textColor,textBaseline:`middle`,fontFamily:H.fontFamily,textAlign:`center`},iconStyle:{fill:H.descriptionIconFill,stroke:H.descriptionIconStroke},description:``},tickStates:{active:{labelStyle:{fontWeight:500},tickLineStyle:{lineWidth:2}},inactive:{labelStyle:{fill:H.uncheckedColor}}},optimize:{enable:!0,threshold:400}},theme:{}})},t.prototype.renderInner=function(e){this.get(`line`)&&this.drawLine(e),this.drawTicks(e),this.get(`title`)&&this.drawTitle(e)},t.prototype.isList=function(){return!0},t.prototype.getItems=function(){return this.get(`ticks`)},t.prototype.setItems=function(e){this.update({ticks:e})},t.prototype.updateItem=function(e,t){ut(e,t),this.clear(),this.render()},t.prototype.clearItems=function(){var e=this.getElementByLocalId(`label-group`);e&&e.clear()},t.prototype.setItemState=function(e,t,n){e[t]=n,this.updateTickStates(e)},t.prototype.hasState=function(e,t){return!!e[t]},t.prototype.getItemStates=function(e){var t=this.get(`tickStates`),n=[];return F(t,function(t,r){e[r]&&n.push(r)}),n},t.prototype.clearItemsState=function(e){var t=this,n=this.getItemsByState(e);F(n,function(n){t.setItemState(n,e,!1)})},t.prototype.getItemsByState=function(e){var t=this,n=this.getItems();return k(n,function(n){return t.hasState(n,e)})},t.prototype.getSidePoint=function(e,t){var n=this.getSideVector(t,e);return{x:e.x+n[0],y:e.y+n[1]}},t.prototype.getTextAnchor=function(e){var t;return Re(e[0],0)?t=`center`:e[0]>0?t=`start`:e[0]<0&&(t=`end`),t},t.prototype.getTextBaseline=function(e){var t;return Re(e[1],0)?t=`middle`:e[1]>0?t=`top`:e[1]<0&&(t=`bottom`),t},t.prototype.processOverlap=function(e){},t.prototype.drawLine=function(e){var t=this.getLinePath(),n=this.get(`line`);this.addShape(e,{type:`path`,id:this.getElementId(`line`),name:`axis-line`,attrs:ut({path:t},n.style)})},t.prototype.getTickLineItems=function(e){var t=this,n=[],r=this.get(`tickLine`),i=r.alignTick,a=r.length,o=1;return e.length>=2&&(o=e[1].value-e[0].value),F(e,function(e){var r=e.point;i||(r=t.getTickPoint(e.value-o/2));var s=t.getSidePoint(r,a);n.push({startPoint:r,tickValue:e.value,endPoint:s,tickId:e.id,id:`tickline-`+e.id})}),n},t.prototype.getSubTickLineItems=function(e){var t=[],n=this.get(`subTickLine`),r=n.count,i=e.length;if(i>=2)for(var a=0;a<i-1;a++)for(var o=e[a],s=e[a+1],c=0;c<r;c++){var l=(c+1)/(r+1),u=(1-l)*o.tickValue+l*s.tickValue,d=this.getTickPoint(u),f=this.getSidePoint(d,n.length);t.push({startPoint:d,endPoint:f,tickValue:u,id:`sub-`+o.id+`-`+c})}return t},t.prototype.getTickLineAttrs=function(e,t,n,r){var i=this.get(t).style,a={points:[e.startPoint,e.endPoint]},o=z(this.get(`theme`),[`tickLine`,`style`],{});i=j(i)?ut({},o,i(a,n,r)):i;var s=e.startPoint,c=e.endPoint;return _({x1:s.x,y1:s.y,x2:c.x,y2:c.y},i)},t.prototype.drawTick=function(e,t,n,r,i){this.addShape(t,{type:`line`,id:this.getElementId(e.id),name:`axis-`+n,attrs:this.getTickLineAttrs(e,n,r,i)})},t.prototype.drawTickLines=function(e){var t=this,n=this.get(`ticks`),r=this.get(`subTickLine`),i=this.getTickLineItems(n),a=this.addGroup(e,{name:`axis-tickline-group`,id:this.getElementId(`tickline-group`)}),o=this.get(`tickLine`);if(F(i,function(n,r){if(o.displayWithLabel){var s=t.getElementId(`label-`+n.tickId);e.findById(s)&&t.drawTick(n,a,`tickLine`,r,i)}else t.drawTick(n,a,`tickLine`,r,i)}),r){var s=this.getSubTickLineItems(i);F(s,function(e,n){t.drawTick(e,a,`subTickLine`,n,s)})}},t.prototype.processTicks=function(){var e=this,t=this.get(`ticks`);F(t,function(t){t.point=e.getTickPoint(t.value),M(t.id)&&(t.id=t.name)})},t.prototype.drawTicks=function(e){var t=this;this.optimizeTicks(),this.processTicks(),this.get(`label`)&&this.drawLabels(e),this.get(`tickLine`)&&this.drawTickLines(e);var n=this.get(`ticks`);F(n,function(n){t.applyTickStates(n,e)})},t.prototype.optimizeTicks=function(){var e=this.get(`optimize`),t=this.get(`ticks`);if(e&&e.enable&&e.threshold>0){var n=It(t);if(n>e.threshold){var r=Math.ceil(n/e.threshold),i=t.filter(function(e,t){return t%r===0});this.set(`ticks`,i),this.set(`originalTicks`,t)}}},t.prototype.getLabelAttrs=function(e,t,n){var r=this.get(`label`),i=r.offset,a=r.offsetX,o=r.offsetY,s=r.rotate,c=r.formatter,l=this.getSidePoint(e.point,i),u=this.getSideVector(i,l),d=c?c(e.name,e,t):e.name,f=r.style;f=j(f)?z(this.get(`theme`),[`label`,`style`],{}):f;var p=ut({x:l.x+a,y:l.y+o,text:d,textAlign:this.getTextAnchor(u),textBaseline:this.getTextBaseline(u)},f);return s&&(p.matrix=wd(l,s)),p},t.prototype.drawLabels=function(e){var t=this,n=this.get(`ticks`),r=this.addGroup(e,{name:`axis-label-group`,id:this.getElementId(`label-group`)});F(n,function(e,i){t.addShape(r,{type:`text`,name:`axis-label`,id:t.getElementId(`label-`+e.id),attrs:t.getLabelAttrs(e,i,n),delegateObject:{tick:e,item:e,index:i}})}),this.processOverlap(r);var i=r.getChildren(),a=z(this.get(`theme`),[`label`,`style`],{}),o=this.get(`label`),s=o.style,c=o.formatter;if(j(s)){var l=i.map(function(e){return z(e.get(`delegateObject`),`tick`)});F(i,function(e,t){var n=e.get(`delegateObject`).tick,r=c?c(n.name,n,t):n.name,i=ut({},a,s(r,t,l));e.attr(i)})}},t.prototype.getTitleAttrs=function(){var e=this.get(`title`),t=e.style,n=e.position,r=e.offset,i=e.spacing,a=i===void 0?0:i,o=e.autoRotate,s=t.fontSize,c=.5;n===`start`?c=0:n===`end`&&(c=1);var l=this.getTickPoint(c),u=this.getSidePoint(l,r||a+s/2),d=ut({x:u.x,y:u.y,text:e.text},t),f=e.rotate,p=f;if(M(f)&&o){var m=this.getAxisVector(l);p=Rr(m,[1,0],!0)}return p&&(d.matrix=wd(u,p)),d},t.prototype.drawTitle=function(e){var t=this.getTitleAttrs(),n=this.addShape(e,{type:`text`,id:this.getElementId(`title`),name:`axis-title`,attrs:t});this.get(`title`)?.description&&this.drawDescriptionIcon(e,n,t.matrix)},t.prototype.drawDescriptionIcon=function(e,t,n){var r=this.addGroup(e,{name:`axis-description`,id:this.getElementById(`description`)}),i=t.getBBox(),a=i.maxX,o=i.maxY,s=i.height,c=this.get(`title`).iconStyle,l=4,u=s/2,d=u/6,f=a+l,p=o-s/2,m=[f+u,p-u],h=m[0],g=m[1],v=[h+u,g+u],y=v[0],b=v[1],x=[h,b+u],S=x[0],C=x[1],w=[f,g+u],T=w[0],E=w[1],D=[f+u,p-s/4],O=D[0],k=D[1],A=[O,k+d],ee=A[0],te=A[1],j=[ee,te+d],M=j[0],N=j[1],P=[M,N+u*3/4],ne=P[0],F=P[1];this.addShape(r,{type:`path`,id:this.getElementId(`title-description-icon`),name:`axis-title-description-icon`,attrs:_({path:[[`M`,h,g],[`A`,u,u,0,0,1,y,b],[`A`,u,u,0,0,1,S,C],[`A`,u,u,0,0,1,T,E],[`A`,u,u,0,0,1,h,g],[`M`,O,k],[`L`,ee,te],[`M`,M,N],[`L`,ne,F]],lineWidth:d,matrix:n},c)}),this.addShape(r,{type:`rect`,id:this.getElementId(`title-description-rect`),name:`axis-title-description-rect`,attrs:{x:f,y:p-s/2,width:s,height:s,stroke:`#000`,fill:`#000`,opacity:0,matrix:n,cursor:`pointer`}})},t.prototype.applyTickStates=function(e,t){if(this.getItemStates(e).length){var n=this.get(`tickStates`),r=this.getElementId(`label-`+e.id),i=t.findById(r);if(i){var a=wf(e,`label`,n);a&&i.attr(a)}var o=this.getElementId(`tickline-`+e.id),s=t.findById(o);if(s){var c=wf(e,`tickLine`,n);c&&s.attr(c)}}},t.prototype.updateTickStates=function(e){var t=this.getItemStates(e),n=this.get(`tickStates`),r=this.get(`label`),i=this.getElementByLocalId(`label-`+e.id),a=this.get(`tickLine`),o=this.getElementByLocalId(`tickline-`+e.id);if(t.length){if(i){var s=wf(e,`label`,n);s&&i.attr(s)}if(o){var c=wf(e,`tickLine`,n);c&&o.attr(c)}}else i&&i.attr(r.style),o&&o.attr(a.style)},t}(Zd),Ef=e({ellipsisHead:()=>kf,ellipsisMiddle:()=>jf,ellipsisTail:()=>Af,getDefault:()=>Of});function Df(e,t,n,r){var i=t.getChildren(),a=!1;return F(i,function(t){var i=uf(e,t,n,r);a||=i}),a}function Of(){return Af}function kf(e,t,n){return Df(e,t,n,`head`)}function Af(e,t,n){return Df(e,t,n,`tail`)}function jf(e,t,n){return Df(e,t,n,`middle`)}var Mf=e({equidistance:()=>Hf,equidistanceWithReverseBoth:()=>Uf,getDefault:()=>Rf,reserveBoth:()=>Vf,reserveFirst:()=>zf,reserveLast:()=>Bf});function Nf(e){var t=e.attr(`matrix`);return t&&t[0]!==1}function Pf(e){return(Nf(e)?Ed(e.attr(`matrix`)):0)%360}function Ff(e,t,n,r){var i=!1,a=Pf(t),o=e?Math.abs(n.attr(`y`)-t.attr(`y`)):Math.abs(n.attr(`x`)-t.attr(`x`)),s=(e?n.attr(`y`)>t.attr(`y`):n.attr(`x`)>t.attr(`x`))?t.getBBox():n.getBBox();if(e){var c=Math.abs(Math.cos(a));i=Bd(c,0,Math.PI/180)?s.width+r>o:s.height/c+r>o}else{var c=Math.abs(Math.sin(a));i=Bd(c,0,Math.PI/180)?s.width+r>o:s.height/c+r>o}return i}function If(e,t,n,r){var i=r?.minGap||0,a=t.getChildren().slice().filter(function(e){return e.get(`visible`)});if(!a.length)return!1;var o=!1;n&&a.reverse();for(var s=a.length,c=a[0],l=1;l<s;l++){var u=a[l];u.getBBox(),Ff(e,c,u,i)?(u.hide(),o=!0):c=u}return o}function Lf(e,t,n){var r=n?.minGap||0,i=t.getChildren().slice();if(i.length<2)return!1;var a=!1,o=i[0],s=o.getBBox(),c=i[1],l=i.length,u=Pf(o),d=e?Math.abs(c.attr(`y`)-o.attr(`y`)):Math.abs(c.attr(`x`)-o.attr(`x`)),f=0;if(e){var p=Math.abs(Math.cos(u));if(Bd(p,0,Math.PI/180)){var m=cf(i);f=(m+r)/d}else f=(s.height/p+r)/d}else{var p=Math.abs(Math.sin(u));if(Bd(p,0,Math.PI/180)){var m=cf(i);f=(m+r)/d}else f=(s.height/p+r)/d}if(f>1){f=Math.ceil(f);for(var h=0;h<l;h++)h%f!==0&&(i[h].hide(),a=!0)}return a}function Rf(){return Hf}function zf(e,t,n,r){return If(e,t,!1,r)}function Bf(e,t,n,r){return If(e,t,!0,r)}function Vf(e,t,n,r){var i=r?.minGap||0,a=t.getChildren().slice();if(a.length<=2)return!1;for(var o=!1,s=a.length,c=a[0],l=a[s-1],u=c,d=1;d<s-1;d++){var f=a[d];f.getBBox(),Ff(e,u,f,i)?(f.hide(),o=!0):u=f}return Ff(e,u,l,i)&&(u.hide(),o=!0),o}function Hf(e,t,n,r){var i=Lf(e,t,r);return If(e,t,!1)&&(i=!0),i}function Uf(e,t,n,r){var i=t.getChildren().slice(),a=Lf(e,t,r);if(i.length>2){var o=i[0],s=i[i.length-1];o.get(`visible`)||(o.show(),If(e,t,!1,r)&&(a=!0)),s.get(`visible`)||(s.show(),If(e,t,!0,r)&&(a=!0))}return a}var Wf=e({fixedAngle:()=>Jf,getDefault:()=>qf,unfixedAngle:()=>Yf});function Gf(e,t){F(e,function(e){var n=e.attr(`x`),r=e.attr(`y`),i=wd({x:n,y:r},t);e.attr(`matrix`,i)})}function Kf(e,t,n,r){var i=t.getChildren();if(!i.length||!e&&i.length<2)return!1;var a=cf(i),o=!1;if(e)o=!!n&&a>n;else{var s=Math.abs(i[1].attr(`x`)-i[0].attr(`x`));o=a>s}if(o){var c=r(n,a);Gf(i,c)}return o}function qf(){return Jf}function Jf(e,t,n,r){return Kf(e,t,n,function(){return L(r)?r:e?H.verticalAxisRotate:H.horizontalAxisRotate})}function Yf(e,t,n){return Kf(e,t,n,function(t,n){if(!t)return e?H.verticalAxisRotate:H.horizontalAxisRotate;if(e)return-Math.acos(t/n);var r=0;return t>n?r=Math.PI/4:(r=Math.asin(t/n),r>Math.PI/4&&(r=Math.PI/4)),r})}var Xf=e({autoEllipsis:()=>Ef,autoHide:()=>Mf,autoRotate:()=>Wf}),Zf=function(e){l(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return _(_({},t),{type:`line`,locationType:`region`,start:null,end:null})},t.prototype.getLinePath=function(){var e=this.get(`start`),t=this.get(`end`),n=[];return n.push([`M`,e.x,e.y]),n.push([`L`,t.x,t.y]),n},t.prototype.getInnerLayoutBBox=function(){var t=this.get(`start`),n=this.get(`end`),r=e.prototype.getInnerLayoutBBox.call(this),i=Math.min(t.x,n.x,r.x),a=Math.min(t.y,n.y,r.y),o=Math.max(t.x,n.x,r.maxX),s=Math.max(t.y,n.y,r.maxY);return{x:i,y:a,minX:i,minY:a,maxX:o,maxY:s,width:o-i,height:s-a}},t.prototype.isVertical=function(){var e=this.get(`start`),t=this.get(`end`);return Re(e.x,t.x)},t.prototype.isHorizontal=function(){var e=this.get(`start`),t=this.get(`end`);return Re(e.y,t.y)},t.prototype.getTickPoint=function(e){var t=this,n=t.get(`start`),r=t.get(`end`),i=r.x-n.x,a=r.y-n.y;return{x:n.x+i*e,y:n.y+a*e}},t.prototype.getSideVector=function(e){var t=this.getAxisVector(),n=y([0,0],t),r=this.get(`verticalFactor`),i=[n[1],n[0]*-1];return g([0,0],i,e*r)},t.prototype.getAxisVector=function(){var e=this.get(`start`),t=this.get(`end`);return[t.x-e.x,t.y-e.y]},t.prototype.processOverlap=function(e){var t=this,n=this.isVertical(),r=this.isHorizontal();if(!(!n&&!r)){var i=this.get(`label`),a=this.get(`title`),o=this.get(`verticalLimitLength`),s=i.offset,c=o,l=0,u=0;a&&(l=a.style.fontSize,u=a.spacing),c&&=c-s-u-l;var d=this.get(`overlapOrder`);if(F(d,function(n){i[n]&&t.canProcessOverlap(n)&&t.autoProcessOverlap(n,i[n],e,c)}),a&&M(a.offset)){var f=e.getCanvasBBox(),p=n?f.width:f.height;a.offset=s+p+u+l/2}}},t.prototype.canProcessOverlap=function(e){var t=this.get(`label`);return e===`autoRotate`?M(t.rotate):!0},t.prototype.autoProcessOverlap=function(e,t,n,r){var i=this,a=this.isVertical(),o=!1,s=Xf[e];if(t===!0)this.get(`label`),o=s.getDefault()(a,n,r);else if(j(t))o=t(a,n,r);else if(P(t)){var c=t;s[c.type]&&(o=s[c.type](a,n,r,c.cfg))}else s[t]&&(o=s[t](a,n,r));if(e===`autoRotate`){if(o){var l=n.getChildren(),u=this.get(`verticalFactor`);F(l,function(e){if(e.attr(`textAlign`)===`center`){var t=u>0?`end`:`start`;e.attr(`textAlign`,t)}})}}else if(e===`autoHide`){var d=n.getChildren().slice(0);F(d,function(e){e.get(`visible`)||(i.get(`isRegister`)&&i.unregisterElement(e),e.remove())})}},t}(Tf),Qf=function(e){l(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return _(_({},t),{type:`circle`,locationType:`circle`,center:null,radius:null,startAngle:-Math.PI/2,endAngle:Math.PI*3/2})},t.prototype.getLinePath=function(){var e=this.get(`center`),t=e.x,n=e.y,r=this.get(`radius`),i=r,a=this.get(`startAngle`),o=this.get(`endAngle`),s=[];if(Math.abs(o-a)===Math.PI*2)s=[[`M`,t,n-i],[`A`,r,i,0,1,1,t,n+i],[`A`,r,i,0,1,1,t,n-i],[`Z`]];else{var c=this.getCirclePoint(a),l=this.getCirclePoint(o),u=Math.abs(o-a)>Math.PI?1:0,d=a>o?0:1;s=[[`M`,t,n],[`L`,c.x,c.y],[`A`,r,i,0,u,d,l.x,l.y],[`L`,t,n]]}return s},t.prototype.getTickPoint=function(e){var t=this.get(`startAngle`),n=this.get(`endAngle`),r=t+(n-t)*e;return this.getCirclePoint(r)},t.prototype.getSideVector=function(e,t){var n=this.get(`center`),r=[t.x-n.x,t.y-n.y],i=this.get(`verticalFactor`),a=v(r);return g(r,r,i*e/a),r},t.prototype.getAxisVector=function(e){var t=this.get(`center`),n=[e.x-t.x,e.y-t.y];return[n[1],-1*n[0]]},t.prototype.getCirclePoint=function(e,t){var n=this.get(`center`);return t||=this.get(`radius`),{x:n.x+Math.cos(e)*t,y:n.y+Math.sin(e)*t}},t.prototype.canProcessOverlap=function(e){var t=this.get(`label`);return e===`autoRotate`?M(t.rotate):!0},t.prototype.processOverlap=function(e){var t=this,n=this.get(`label`),r=this.get(`title`),i=this.get(`verticalLimitLength`),a=n.offset,o=i,s=0,c=0;r&&(s=r.style.fontSize,c=r.spacing),o&&=o-a-c-s;var l=this.get(`overlapOrder`);if(F(l,function(r){n[r]&&t.canProcessOverlap(r)&&t.autoProcessOverlap(r,n[r],e,o)}),r&&M(r.offset)){var u=e.getCanvasBBox().height;r.offset=a+u+c+s/2}},t.prototype.autoProcessOverlap=function(e,t,n,r){var i=this,a=!1,o=Xf[e];if(r>0)if(t===!0)a=o.getDefault()(!1,n,r);else if(j(t))a=t(!1,n,r);else if(P(t)){var s=t;o[s.type]&&(a=o[s.type](!1,n,r,s.cfg))}else o[t]&&(a=o[t](!1,n,r));if(e===`autoRotate`){if(a){var c=n.getChildren(),l=this.get(`verticalFactor`);F(c,function(e){if(e.attr(`textAlign`)===`center`){var t=l>0?`end`:`start`;e.attr(`textAlign`,t)}})}}else if(e===`autoHide`){var u=n.getChildren().slice(0);F(u,function(e){e.get(`visible`)||(i.get(`isRegister`)&&i.unregisterElement(e),e.remove())})}},t}(Tf),$f=function(e){l(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return _(_({},t),{name:`crosshair`,type:`base`,line:{},text:null,textBackground:{},capture:!1,defaultCfg:{line:{style:{lineWidth:1,stroke:H.lineColor}},text:{position:`start`,offset:10,autoRotate:!1,content:null,style:{fill:H.textColor,textAlign:`center`,textBaseline:`middle`,fontFamily:H.fontFamily}},textBackground:{padding:5,style:{stroke:H.lineColor}}}})},t.prototype.renderInner=function(e){this.get(`line`)&&this.renderLine(e),this.get(`text`)&&(this.renderText(e),this.renderBackground(e))},t.prototype.renderText=function(e){var t=this.get(`text`),n=t.style,r=t.autoRotate,i=t.content;if(!M(i)){var a=this.getTextPoint(),o=null;if(r){var s=this.getRotateAngle();o=wd(a,s)}this.addShape(e,{type:`text`,name:`crosshair-text`,id:this.getElementId(`text`),attrs:_(_(_({},a),{text:i,matrix:o}),n)})}},t.prototype.renderLine=function(e){var t=this.getLinePath(),n=this.get(`line`).style;this.addShape(e,{type:`path`,name:`crosshair-line`,id:this.getElementId(`line`),attrs:_({path:t},n)})},t.prototype.renderBackground=function(e){var t=this.getElementId(`text`),n=e.findById(t),r=this.get(`textBackground`);if(r&&n){var i=n.getBBox(),a=jd(r.padding),o=r.style;this.addShape(e,{type:`rect`,name:`crosshair-text-background`,id:this.getElementId(`text-background`),attrs:_({x:i.x-a[3],y:i.y-a[0],width:i.width+a[1]+a[3],height:i.height+a[0]+a[2],matrix:n.attr(`matrix`)},o)}).toBack()}},t}(Zd),ep=function(e){l(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return _(_({},t),{type:`line`,locationType:`region`,start:null,end:null})},t.prototype.getRotateAngle=function(){var e=this.getLocation(),t=e.start,n=e.end,r=this.get(`text`).position,i=Math.atan2(n.y-t.y,n.x-t.x);return r===`start`?i-Math.PI/2:i+Math.PI/2},t.prototype.getTextPoint=function(){var e=this.getLocation(),t=e.start,n=e.end,r=this.get(`text`),i=r.position,a=r.offset;return Gd(t,n,i,a)},t.prototype.getLinePath=function(){var e=this.getLocation(),t=e.start,n=e.end;return[[`M`,t.x,t.y],[`L`,n.x,n.y]]},t}($f),tp=function(e){l(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return _(_({},t),{type:`circle`,locationType:`circle`,center:null,radius:100,startAngle:-Math.PI/2,endAngle:Math.PI*3/2})},t.prototype.getRotateAngle=function(){var e=this.getLocation(),t=e.startAngle,n=e.endAngle;return this.get(`text`).position===`start`?t+Math.PI/2:n-Math.PI/2},t.prototype.getTextPoint=function(){var e=this.get(`text`),t=e.position,n=e.offset,r=this.getLocation(),i=r.center,a=r.radius,o=r.startAngle,s=r.endAngle,c=t===`start`?o:s,l=this.getRotateAngle()-Math.PI,u=Rd(i,a,c),d=Math.cos(l)*n,f=Math.sin(l)*n;return{x:u.x+d,y:u.y+f}},t.prototype.getLinePath=function(){var e=this.getLocation(),t=e.center,n=e.radius,r=e.startAngle,i=e.endAngle,a=null;if(i-r===Math.PI*2){var o=t.x,s=t.y;a=[[`M`,o,s-n],[`A`,n,n,0,1,1,o,s+n],[`A`,n,n,0,1,1,o,s-n],[`Z`]]}else{var c=Rd(t,n,r),l=Rd(t,n,i),u=Math.abs(i-r)>Math.PI?1:0,d=r>i?0:1;a=[[`M`,c.x,c.y],[`A`,n,n,0,u,d,l.x,l.y]]}return a},t}($f),np=`g2-crosshair`,rp=np+`-line`,ip=np+`-text`,ap,op=(ap={},ap[``+np]={position:`relative`},ap[``+rp]={position:`absolute`,backgroundColor:`rgba(0, 0, 0, 0.25)`},ap[``+ip]={position:`absolute`,color:H.textColor,fontFamily:H.fontFamily},ap),sp=function(e){l(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return _(_({},t),{name:`crosshair`,type:`html`,locationType:`region`,start:{x:0,y:0},end:{x:0,y:0},capture:!1,text:null,containerTpl:`<div class="`+np+`"></div>`,crosshairTpl:`<div class="`+rp+`"></div>`,textTpl:`<span class="`+ip+`">{content}</span>`,domStyles:null,containerClassName:np,defaultStyles:op,defaultCfg:{text:{position:`start`,content:null,align:`center`,offset:10}}})},t.prototype.render=function(){this.resetText(),this.resetPosition()},t.prototype.initCrossHair=function(){var e=this.getContainer(),t=this.get(`crosshairTpl`),n=on(t);e.appendChild(n),this.applyStyle(rp,n),this.set(`crosshairEl`,n)},t.prototype.getTextPoint=function(){var e=this.getLocation(),t=e.start,n=e.end,r=this.get(`text`),i=r.position,a=r.offset;return Gd(t,n,i,a)},t.prototype.resetText=function(){var e=this.get(`text`),t=this.get(`textEl`);if(e){var n=e.content;if(!t){var r=this.getContainer(),i=Xe(this.get(`textTpl`),e);t=on(i),r.appendChild(t),this.applyStyle(ip,t),this.set(`textEl`,t)}t.innerHTML=n}else t&&t.remove()},t.prototype.isVertical=function(e,t){return e.x===t.x},t.prototype.resetPosition=function(){var e=this.get(`crosshairEl`);e||=(this.initCrossHair(),this.get(`crosshairEl`));var t=this.get(`start`),n=this.get(`end`),r=Math.min(t.x,n.x),i=Math.min(t.y,n.y);this.isVertical(t,n)?fn(e,{width:`1px`,height:Wd(Math.abs(n.y-t.y))}):fn(e,{height:`1px`,width:Wd(Math.abs(n.x-t.x))}),fn(e,{top:Wd(i),left:Wd(r)}),this.alignText()},t.prototype.alignText=function(){var e=this.get(`textEl`);if(e){var t=this.get(`text`).align,n=e.clientWidth,r=this.getTextPoint();switch(t){case`center`:r.x-=n/2;break;case`right`:r.x-=n;case`left`:break}fn(e,{top:Wd(r.y),left:Wd(r.x)})}},t.prototype.updateInner=function(t){Ge(t,`text`)&&this.resetText(),e.prototype.updateInner.call(this,t)},t}(xf),cp=e({Base:()=>$f,Circle:()=>tp,Html:()=>sp,Line:()=>ep}),lp=function(e){l(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return _(_({},t),{name:`grid`,line:{},alternateColor:null,capture:!1,items:[],closed:!1,defaultCfg:{line:{type:`line`,style:{lineWidth:1,stroke:H.lineColor}}}})},t.prototype.getLineType=function(){return(this.get(`line`)||this.get(`defaultCfg`).line).type},t.prototype.renderInner=function(e){this.drawGrid(e)},t.prototype.getAlternatePath=function(e,t){var n=this.getGridPath(e),r=t.slice(0).reverse(),i=this.getGridPath(r,!0);return this.get(`closed`)?n=n.concat(i):(i[0][0]=`L`,n=n.concat(i),n.push([`Z`])),n},t.prototype.getPathStyle=function(){return this.get(`line`).style},t.prototype.drawGrid=function(e){var t=this,n=this.get(`line`),r=this.get(`items`),i=this.get(`alternateColor`),a=null;F(r,function(o,s){var c=o.id||s;if(n){var l=t.getPathStyle();l=j(l)?l(o,s,r):l;var u=t.getElementId(`line-`+c),d=t.getGridPath(o.points);t.addShape(e,{type:`path`,name:`grid-line`,id:u,attrs:ut({path:d},l)})}if(i&&s>0){var f=t.getElementId(`region-`+c),p=s%2==0;if(I(i))p&&t.drawAlternateRegion(f,e,a.points,o.points,i);else{var m=p?i[1]:i[0];t.drawAlternateRegion(f,e,a.points,o.points,m)}}a=o})},t.prototype.drawAlternateRegion=function(e,t,n,r,i){var a=this.getAlternatePath(n,r);this.addShape(t,{type:`path`,id:e,name:`grid-region`,attrs:{path:a,fill:i}})},t}(Zd);function up(e,t,n,r){var i=n-e,a=r-t;return Math.sqrt(i*i+a*a)}var dp=function(e){l(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return _(_({},t),{type:`circle`,center:null,closed:!0})},t.prototype.getGridPath=function(e,t){var n=this.getLineType(),r=this.get(`closed`),i=[];if(e.length)if(n===`circle`){var a=this.get(`center`),o=e[0],s=up(a.x,a.y,o.x,o.y),c=t?0:1;r?(i.push([`M`,a.x,a.y-s]),i.push([`A`,s,s,0,0,c,a.x,a.y+s]),i.push([`A`,s,s,0,0,c,a.x,a.y-s]),i.push([`Z`])):F(e,function(e,t){t===0?i.push([`M`,e.x,e.y]):i.push([`A`,s,s,0,0,c,e.x,e.y])})}else F(e,function(e,t){t===0?i.push([`M`,e.x,e.y]):i.push([`L`,e.x,e.y])}),r&&i.push([`Z`]);return i},t}(lp),fp=function(e){l(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return _(_({},t),{type:`line`})},t.prototype.getGridPath=function(e){var t=[];return F(e,function(e,n){n===0?t.push([`M`,e.x,e.y]):t.push([`L`,e.x,e.y])}),t},t}(lp),pp=function(e){l(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return _(_({},t),{name:`legend`,layout:`horizontal`,locationType:`point`,x:0,y:0,offsetX:0,offsetY:0,title:null,background:null})},t.prototype.getLayoutBBox=function(){var t=e.prototype.getLayoutBBox.call(this),n=this.get(`maxWidth`),r=this.get(`maxHeight`),i=t.width,a=t.height;return n&&(i=Math.min(i,n)),r&&(a=Math.min(a,r)),Id(t.minX,t.minY,i,a)},t.prototype.setLocation=function(e){this.set(`x`,e.x),this.set(`y`,e.y),this.resetLocation()},t.prototype.resetLocation=function(){var e=this.get(`x`),t=this.get(`y`),n=this.get(`offsetX`),r=this.get(`offsetY`);this.moveElementTo(this.get(`group`),{x:e+n,y:t+r})},t.prototype.applyOffset=function(){this.resetLocation()},t.prototype.getDrawPoint=function(){return this.get(`currentPoint`)},t.prototype.setDrawPoint=function(e){return this.set(`currentPoint`,e)},t.prototype.renderInner=function(e){this.resetDraw(),this.get(`title`)&&this.drawTitle(e),this.drawLegendContent(e),this.get(`background`)&&this.drawBackground(e)},t.prototype.drawBackground=function(e){var t=this.get(`background`),n=e.getBBox(),r=jd(t.padding),i=_({x:0,y:0,width:n.width+r[1]+r[3],height:n.height+r[0]+r[2]},t.style);this.addShape(e,{type:`rect`,id:this.getElementId(`background`),name:`legend-background`,attrs:i}).toBack()},t.prototype.drawTitle=function(e){var t=this.get(`currentPoint`),n=this.get(`title`),r=n.spacing,i=n.style,a=n.text,o=this.addShape(e,{type:`text`,id:this.getElementId(`title`),name:`legend-title`,attrs:_({text:a,x:t.x,y:t.y},i)}).getBBox();this.set(`currentPoint`,{x:t.x,y:o.maxY+r})},t.prototype.resetDraw=function(){var e=this.get(`background`),t={x:0,y:0};if(e){var n=jd(e.padding);t.x=n[3],t.y=n[0]}this.set(`currentPoint`,t)},t}(Zd),mp={marker:{style:{inactiveFill:`#000`,inactiveOpacity:.45,fill:`#000`,opacity:1,size:12}},text:{style:{fill:`#ccc`,fontSize:12}}},hp={fill:H.textColor,fontSize:12,textAlign:`start`,textBaseline:`middle`,fontFamily:H.fontFamily,fontWeight:`normal`,lineHeight:12},gp=`navigation-arrow-right`,_p=`navigation-arrow-left`,vp={right:90*Math.PI/180,left:270*Math.PI/180,up:0,down:180*Math.PI/180},yp=function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.currentPageIndex=1,t.totalPagesCnt=1,t.pageWidth=0,t.pageHeight=0,t.startX=0,t.startY=0,t.onNavigationBack=function(){var e=t.getElementByLocalId(`item-group`);if(t.currentPageIndex>1){--t.currentPageIndex,t.updateNavigation();var n=t.getCurrentNavigationMatrix();t.get(`animate`)?e.animate({matrix:n},100):e.attr({matrix:n})}},t.onNavigationAfter=function(){var e=t.getElementByLocalId(`item-group`);if(t.currentPageIndex<t.totalPagesCnt){t.currentPageIndex+=1,t.updateNavigation();var n=t.getCurrentNavigationMatrix();t.get(`animate`)?e.animate({matrix:n},100):e.attr({matrix:n})}},t}return t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return _(_({},t),{name:`legend`,type:`category`,itemSpacing:24,itemMarginBottom:8,maxItemWidth:null,itemWidth:null,itemHeight:null,itemName:{},itemValue:null,maxWidth:null,maxHeight:null,marker:{},radio:null,items:[],itemStates:{},itemBackground:{},pageNavigator:{},defaultCfg:{title:{spacing:5,style:{fill:H.textColor,fontSize:12,textAlign:`start`,textBaseline:`top`}},background:{padding:5,style:{stroke:H.lineColor}},itemBackground:{style:{opacity:0,fill:`#fff`}},pageNavigator:mp,itemName:{spacing:16,style:hp},marker:{spacing:8,style:{r:6,symbol:`circle`}},itemValue:{alignRight:!1,formatter:null,style:hp,spacing:6},itemStates:{active:{nameStyle:{opacity:.8}},unchecked:{nameStyle:{fill:H.uncheckedColor},markerStyle:{fill:H.uncheckedColor,stroke:H.uncheckedColor}},inactive:{nameStyle:{fill:H.uncheckedColor},markerStyle:{opacity:.2}}}}})},t.prototype.isList=function(){return!0},t.prototype.getItems=function(){return this.get(`items`)},t.prototype.setItems=function(e){this.update({items:e})},t.prototype.updateItem=function(e,t){ut(e,t),this.clear(),this.render()},t.prototype.clearItems=function(){var e=this.getElementByLocalId(`item-group`);e&&e.clear()},t.prototype.setItemState=function(e,t,n){e[t]=n;var r=this.getElementByLocalId(`item-`+e.id);if(r){var i=this.getItems().indexOf(e),a=this.createOffScreenGroup(),o=this.drawItem(e,i,this.getItemHeight(),a);this.updateElements(o,r),this.clearUpdateStatus(r)}},t.prototype.hasState=function(e,t){return!!e[t]},t.prototype.getItemStates=function(e){var t=this.get(`itemStates`),n=[];return F(t,function(t,r){e[r]&&n.push(r)}),n},t.prototype.clearItemsState=function(e){var t=this,n=this.getItemsByState(e);F(n,function(n){t.setItemState(n,e,!1)})},t.prototype.getItemsByState=function(e){var t=this,n=this.getItems();return k(n,function(n){return t.hasState(n,e)})},t.prototype.drawLegendContent=function(e){this.processItems(),this.drawItems(e)},t.prototype.processItems=function(){var e=this.get(`items`);F(e,function(e){e.id||=e.name})},t.prototype.drawItems=function(e){var t=this,n=this.addGroup(e,{id:this.getElementId(`item-container-group`),name:`legend-item-container-group`}),r=this.addGroup(n,{id:this.getElementId(`item-group`),name:`legend-item-group`}),i=this.getItemHeight(),a=this.get(`itemWidth`),o=this.get(`itemSpacing`),s=this.get(`itemMarginBottom`),c=this.get(`currentPoint`),l=c.x,u=c.y,d=this.get(`layout`),f=this.get(`items`),p=!1,m=0,h=this.get(`maxWidth`),g=this.get(`maxHeight`);F(f,function(e,n){var f=t.drawItem(e,n,i,r),_=f.getBBox(),v=a||_.width;v>m&&(m=v),d===`horizontal`?(h&&h<c.x+v-l&&(p=!0,c.x=l,c.y+=i+s),t.moveElementTo(f,c),c.x+=v+o):(g&&g<c.y+i+s-u&&(p=!0,c.x+=m+o,c.y=u,m=0),t.moveElementTo(f,c),c.y+=i+s)}),p&&this.get(`flipPage`)&&(this.pageHeight=0,this.pageWidth=0,this.totalPagesCnt=1,this.startX=l,this.startY=u,this.adjustNavigation(e,r))},t.prototype.getItemHeight=function(){var e=this.get(`itemHeight`);if(!e){var t=(this.get(`itemName`)||{}).style;if(j(t)){var n=this.getItems();n.forEach(function(r,i){var a=_(_({},hp),t(r,i,n)).fontSize;e<a&&(e=a)})}else t&&(e=t.fontSize)}return e},t.prototype.drawMarker=function(e,t,n,r){var i=_(_(_({x:0,y:r/2},t.style),{symbol:z(n.marker,`symbol`,`circle`)}),z(n.marker,`style`,{})),a=this.addShape(e,{type:`marker`,id:this.getElementId(`item-`+n.id+`-marker`),name:`legend-item-marker`,attrs:i}),o=a.getBBox();a.attr(`x`,o.width/2);var s=a.attr(),c=s.stroke,l=s.fill;return c&&a.set(`isStroke`,!0),l&&a.set(`isFill`,!0),a},t.prototype.drawItemText=function(e,t,n,r,i,a,o){var s=n.formatter,c=n.style,l=_(_({x:a,y:i/2,text:s?s(r[t],r,o):r[t]},hp),j(c)?c(r,o,this.getItems()):c);return this.addShape(e,{type:`text`,id:this.getElementId(`item-`+r.id+`-`+t),name:`legend-item-`+t,attrs:l})},t.prototype.drawRadio=function(e,t,n,r,i){var a=t.style||{},o=a.r??r/2,s=o*3.6/8,c=[i+o,r/2-o],l=c[0],u=c[1],d=[l+o,u+o],f=d[0],p=d[1],m=[l,p+o],h=m[0],g=m[1],v=[i,u+o],y=v[0],b=v[1],x=n.showRadio,S=_(_({path:[[`M`,l,u],[`A`,o,o,0,0,1,f,p],[`L`,f-s,p],[`L`,f,p],[`A`,o,o,0,0,1,h,g],[`L`,h,g-s],[`L`,h,g],[`A`,o,o,0,0,1,y,b],[`L`,y+s,b],[`L`,y,b],[`A`,o,o,0,0,1,l,u],[`L`,l,u+s]],stroke:`#000000`,fill:`#ffffff`},a),{opacity:x?a?.opacity??.45:0}),C=this.addShape(e,{type:`path`,id:this.getElementId(`item-`+n.id+`-radio`),name:`legend-item-radio`,attrs:S});return C.set(`tip`,t.tip),C},t.prototype.drawItem=function(e,t,n,r){var i=`item-`+e.id,a=this.addGroup(r,{name:`legend-item-container`,id:this.getElementId(`item-container-`+i),delegateObject:{item:e,index:t}}),o=this.addGroup(a,{name:`legend-item`,id:this.getElementId(i),delegateObject:{item:e,index:t}}),s=this.get(`marker`),c=this.get(`itemName`),l=this.get(`itemValue`),u=this.get(`itemBackground`),d=this.get(`radio`),f=this.getLimitItemWidth(),p=0;if(s){var m=this.drawMarker(o,s,e,n),h=s.spacing,g=z(e,[`marker`,`spacing`]);L(g)&&(h=g),p=m.getBBox().maxX+h}if(c){var v=this.drawItemText(o,`name`,c,e,n,p,t);f&&uf(!0,v,Fe(f-p,0,f)),p=v.getBBox().maxX+c.spacing}if(l){var y=this.drawItemText(o,`value`,l,e,n,p,t);f&&(l.alignRight?(y.attr({textAlign:`right`,x:f}),uf(!0,y,Fe(f-p,0,f),`head`)):uf(!0,y,Fe(f-p,0,f))),p=y.getBBox().maxX+l.spacing}if(d&&this.drawRadio(o,d,e,n,p),u){var b=o.getBBox();this.addShape(o,{type:`rect`,name:`legend-item-background`,id:this.getElementId(i+`-background`),attrs:_({x:0,y:0,width:b.width,height:n},u.style)}).toBack()}return this.applyItemStates(e,o),o},t.prototype.adjustNavigation=function(e,t){var n=this,r=this.startX,i=this.startY,a=this.get(`layout`),o=t.findAll(function(e){return e.get(`name`)===`legend-item`}),s=this.get(`maxWidth`),c=this.get(`maxHeight`),l=this.get(`itemWidth`),u=this.get(`itemSpacing`),d=this.getItemHeight(),f=R({},mp,this.get(`pageNavigator`)),p=this.drawNavigation(e,a,`00/00`,f),m=p.getBBox(),h={x:r,y:i},g=1,_=0,v=0,y=0,b=this.get(`itemMarginBottom`);function x(e,t){var n=e.getBBox(),r=l||n.width;return t.x+r+u+m.width>s}if(a===`horizontal`){var S=this.get(`maxRow`)||1,C=d+(S===1?0:b),w=s-u-m.width-m.minX;this.pageHeight=C*S,this.pageWidth=w,F(o,function(e){var t=e.getBBox(),i=l||t.width;(_&&_<h.x+i+u||x(e,h))&&(g===1&&(_=h.x+u,n.moveElementTo(p,{x:w,y:h.y+d/2-m.height/2-m.minY})),g+=1,h.x=r,h.y+=C),n.moveElementTo(e,h),e.getParent().setClip({type:`rect`,attrs:{x:h.x,y:h.y,width:i+u,height:d}}),h.x+=i+u})}else{F(o,function(e){var t=e.getBBox();t.width>v&&(v=t.width)}),y=v,v+=u,s&&(v=Math.min(s,v),y=Math.min(s,y)),this.pageWidth=v,this.pageHeight=c-Math.max(m.height,d+b);var T=Math.floor(this.pageHeight/(d+b));F(o,function(e,t){t!==0&&t%T===0&&(g+=1,h.x+=v,h.y=i),n.moveElementTo(e,h),e.getParent().setClip({type:`rect`,attrs:{x:h.x,y:h.y,width:v,height:d}}),h.y+=d+b}),this.totalPagesCnt=g,this.moveElementTo(p,{x:r+y/2-m.width/2-m.minX,y:c-m.height-m.minY})}this.pageHeight&&this.pageWidth&&t.getParent().setClip({type:`rect`,attrs:{x:this.startX,y:this.startY,width:this.pageWidth,height:this.pageHeight}}),a===`horizontal`&&this.get(`maxRow`)?this.totalPagesCnt=Math.ceil(g/this.get(`maxRow`)):this.totalPagesCnt=g,this.currentPageIndex>this.totalPagesCnt&&(this.currentPageIndex=1),this.updateNavigation(p),t.attr(`matrix`,this.getCurrentNavigationMatrix())},t.prototype.drawNavigation=function(e,t,n,r){var i={x:0,y:0},a=this.addGroup(e,{id:this.getElementId(`navigation-group`),name:`legend-navigation`}),s=z(r.marker,`style`,{}),c=s.size,l=c===void 0?12:c,u=o(s,[`size`]),d=this.drawArrow(a,i,_p,t===`horizontal`?`up`:`left`,l,u);d.on(`click`,this.onNavigationBack);var f=d.getBBox();i.x+=f.width+2;var p=this.addShape(a,{type:`text`,id:this.getElementId(`navigation-text`),name:`navigation-text`,attrs:_({x:i.x,y:i.y+l/2,text:n,textBaseline:`middle`},z(r.text,`style`))}).getBBox();return i.x+=p.width+2,this.drawArrow(a,i,gp,t===`horizontal`?`down`:`right`,l,u).on(`click`,this.onNavigationAfter),a},t.prototype.updateNavigation=function(e){var t=R({},mp,this.get(`pageNavigator`)).marker.style,n=t.fill,r=t.opacity,i=t.inactiveFill,a=t.inactiveOpacity,o=this.currentPageIndex+`/`+this.totalPagesCnt,s=e?e.getChildren()[1]:this.getElementByLocalId(`navigation-text`),c=e?e.findById(this.getElementId(_p)):this.getElementByLocalId(_p),l=e?e.findById(this.getElementId(gp)):this.getElementByLocalId(gp);s.attr(`text`,o),c.attr(`opacity`,this.currentPageIndex===1?a:r),c.attr(`fill`,this.currentPageIndex===1?i:n),c.attr(`cursor`,this.currentPageIndex===1?`not-allowed`:`pointer`),l.attr(`opacity`,this.currentPageIndex===this.totalPagesCnt?a:r),l.attr(`fill`,this.currentPageIndex===this.totalPagesCnt?i:n),l.attr(`cursor`,this.currentPageIndex===this.totalPagesCnt?`not-allowed`:`pointer`);var u=c.getBBox().maxX+2;s.attr(`x`,u),u+=s.getBBox().width+2,this.updateArrowPath(l,{x:u,y:0})},t.prototype.drawArrow=function(e,t,n,r,i,a){var o=t.x,s=t.y,c=this.addShape(e,{type:`path`,id:this.getElementId(n),name:n,attrs:_({size:i,direction:r,path:[[`M`,o+i/2,s],[`L`,o,s+i],[`L`,o+i,s+i],[`Z`]],cursor:`pointer`},a)});return c.attr(`matrix`,wd({x:o+i/2,y:s+i/2},vp[r])),c},t.prototype.updateArrowPath=function(e,t){var n=t.x,r=t.y,i=e.attr(),a=i.size,o=i.direction,s=wd({x:n+a/2,y:r+a/2},vp[o]);e.attr(`path`,[[`M`,n+a/2,r],[`L`,n,r+a],[`L`,n+a,r+a],[`Z`]]),e.attr(`matrix`,s)},t.prototype.getCurrentNavigationMatrix=function(){var e=this,t=e.currentPageIndex,n=e.pageWidth,r=e.pageHeight,i=this.get(`layout`)===`horizontal`?{x:0,y:r*(1-t)}:{x:n*(1-t),y:0};return Td(i)},t.prototype.applyItemStates=function(e,t){if(this.getItemStates(e).length>0){var n=t.getChildren(),r=this.get(`itemStates`);F(n,function(t){var n=t.get(`name`).split(`-`)[2],i=wf(e,n,r);i&&(t.attr(i),n===`marker`&&!(t.get(`isStroke`)&&t.get(`isFill`))&&(t.get(`isStroke`)&&t.attr(`fill`,null),t.get(`isFill`)&&t.attr(`stroke`,null)))})}},t.prototype.getLimitItemWidth=function(){var e=this.get(`itemWidth`),t=this.get(`maxItemWidth`);return t?e&&(t=e<=t?e:t):e&&(t=e),t},t}(pp),bp=1.4,xp=.4,Sp=function(e){l(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return _(_({},t),{type:`continue`,min:0,max:100,value:null,colors:[],track:{},rail:{},label:{},handler:{},slidable:!0,tip:null,step:null,maxWidth:null,maxHeight:null,defaultCfg:{label:{align:`rail`,spacing:5,formatter:null,style:{fontSize:12,fill:H.textColor,textBaseline:`middle`,fontFamily:H.fontFamily}},handler:{size:10,style:{fill:`#fff`,stroke:`#333`}},track:{},rail:{type:`color`,size:20,defaultLength:100,style:{fill:`#DCDEE2`}},title:{spacing:5,style:{fill:H.textColor,fontSize:12,textAlign:`start`,textBaseline:`top`}}}})},t.prototype.isSlider=function(){return!0},t.prototype.getValue=function(){return this.getCurrentValue()},t.prototype.getRange=function(){return{min:this.get(`min`),max:this.get(`max`)}},t.prototype.setRange=function(e,t){this.update({min:e,max:t})},t.prototype.setValue=function(e){var t=this.getValue();this.set(`value`,e);var n=this.get(`group`);this.resetTrackClip(),this.get(`slidable`)&&this.resetHandlers(n),this.delegateEmit(`valuechanged`,{originValue:t,value:e})},t.prototype.initEvent=function(){var e=this.get(`group`);this.bindSliderEvent(e),this.bindRailEvent(e),this.bindTrackEvent(e)},t.prototype.drawLegendContent=function(e){this.drawRail(e),this.drawLabels(e),this.fixedElements(e),this.resetTrack(e),this.resetTrackClip(e),this.get(`slidable`)&&this.resetHandlers(e)},t.prototype.bindSliderEvent=function(e){this.bindHandlersEvent(e)},t.prototype.bindHandlersEvent=function(e){var t=this;e.on(`legend-handler-min:drag`,function(e){var n=t.getValueByCanvasPoint(e.x,e.y),r=t.getCurrentValue()[1];r<n&&(r=n),t.setValue([n,r])}),e.on(`legend-handler-max:drag`,function(e){var n=t.getValueByCanvasPoint(e.x,e.y),r=t.getCurrentValue()[0];r>n&&(r=n),t.setValue([r,n])})},t.prototype.bindRailEvent=function(e){},t.prototype.bindTrackEvent=function(e){var t=this,n=null;e.on(`legend-track:dragstart`,function(e){n={x:e.x,y:e.y}}),e.on(`legend-track:drag`,function(e){if(n){var r=t.getValueByCanvasPoint(n.x,n.y),i=t.getValueByCanvasPoint(e.x,e.y),a=t.getCurrentValue(),o=a[1]-a[0],s=t.getRange(),c=i-r;c<0?a[0]+c>s.min?t.setValue([a[0]+c,a[1]+c]):t.setValue([s.min,s.min+o]):c>0&&(c>0&&a[1]+c<s.max?t.setValue([a[0]+c,a[1]+c]):t.setValue([s.max-o,s.max])),n={x:e.x,y:e.y}}}),e.on(`legend-track:dragend`,function(e){n=null})},t.prototype.drawLabels=function(e){this.drawLabel(`min`,e),this.drawLabel(`max`,e)},t.prototype.drawLabel=function(e,t){var n=this.get(`label`),r=n.style,i=n.align,a=n.formatter,o=this.get(e),s=this.getLabelAlignAttrs(e,i),c=`label-`+e;this.addShape(t,{type:`text`,id:this.getElementId(c),name:`legend-label-`+e,attrs:_(_({x:0,y:0,text:j(a)?a(o):o},r),s)})},t.prototype.getLabelAlignAttrs=function(e,t){var n=this.isVertical(),r=`center`,i=`middle`;return n?(r=`start`,i=t===`rail`||e===`min`?`top`:`bottom`):t===`rail`?(r=`start`,i=`middle`):(i=`top`,r=e===`min`?`start`:`end`),{textAlign:r,textBaseline:i}},t.prototype.getRailPath=function(e,t,n,r){var i=this.get(`rail`),a=i.size,o=i.defaultLength,s=i.type,c=this.isVertical(),l=o,u=n,d=r;u||=c?a:l,d||=c?l:a;var f=[];return s===`color`?(f.push([`M`,e,t]),f.push([`L`,e+u,t]),f.push([`L`,e+u,t+d]),f.push([`L`,e,t+d]),f.push([`Z`])):(f.push([`M`,e+u,t]),f.push([`L`,e+u,t+d]),f.push([`L`,e,t+d]),f.push([`Z`])),f},t.prototype.drawRail=function(e){var t=this.get(`rail`).style;this.addShape(e,{type:`path`,id:this.getElementId(`rail`),name:`legend-rail`,attrs:_({path:this.getRailPath(0,0)},t)})},t.prototype.getTrackColor=function(e){var t=e.length;if(!t)return null;if(t===1)return e[0];for(var n=this.isVertical()?`l(90)`:`l(0)`,r=0;r<t;r++){var i=r/(t-1);n+=` `+i+`:`+e[r]}return n},t.prototype.getTrackPath=function(e){var t=this.getRailShape(e).attr(`path`);return ft(t)},t.prototype.getClipTrackAttrs=function(e){var t=this.getCurrentValue(),n=t[0],r=t[1],i=this.getRailBBox(e),a=this.getPointByValue(n,e),o=this.getPointByValue(r,e),s=this.isVertical(),c,l,u,d;return s?(c=i.minX,l=a.y,u=i.width,d=o.y-a.y):(c=a.x,l=i.minY,u=o.x-a.x,d=i.height),{x:c,y:l,width:u,height:d}},t.prototype.getTrackAttrs=function(e){var t=this.get(`track`),n=this.get(`colors`),r=this.getTrackPath(e);return ut({path:r,fill:this.getTrackColor(n)},t.style)},t.prototype.resetTrackClip=function(e){var t=e||this.get(`group`),n=this.getElementId(`track`),r=t.findById(n),i=r.getClip(),a=this.getClipTrackAttrs(e);i?i.attr(a):r.setClip({type:`rect`,attrs:a})},t.prototype.resetTrack=function(e){var t=this.getElementId(`track`),n=e.findById(t),r=this.getTrackAttrs(e);n?n.attr(r):this.addShape(e,{type:`path`,id:t,draggable:this.get(`slidable`),name:`legend-track`,attrs:r})},t.prototype.getPointByValue=function(e,t){var n=this.getRange(),r=n.min,i=n.max,a=(e-r)/(i-r),o=this.getRailBBox(t),s=this.isVertical(),c={x:0,y:0};return s?(c.x=o.minX+o.width/2,c.y=Ld(o.minY,o.maxY,a)):(c.x=Ld(o.minX,o.maxX,a),c.y=o.minY+o.height/2),c},t.prototype.getRailShape=function(e){return(e||this.get(`group`)).findById(this.getElementId(`rail`))},t.prototype.getRailBBox=function(e){return this.getRailShape(e).getBBox()},t.prototype.getRailCanvasBBox=function(){return this.get(`group`).findById(this.getElementId(`rail`)).getCanvasBBox()},t.prototype.isVertical=function(){return this.get(`layout`)===`vertical`},t.prototype.getValueByCanvasPoint=function(e,t){var n=this.getRange(),r=n.min,i=n.max,a=this.getRailCanvasBBox(),o=this.isVertical(),s=this.get(`step`),c=o?(t-a.minY)/a.height:(e-a.minX)/a.width,l=Ld(r,i,c);if(s){var u=Math.round((l-r)/s);l=r+u*s}return l>i&&(l=i),l<r&&(l=r),l},t.prototype.getCurrentValue=function(){var e=this.get(`value`);if(!e){var t=this.get(`values`);return t?[Math.max(Math.min.apply(Math,d(t,[this.get(`max`)])),this.get(`min`)),Math.min(Math.max.apply(Math,d(t,[this.get(`min`)])),this.get(`max`))]:[this.get(`min`),this.get(`max`)]}return e},t.prototype.resetHandlers=function(e){var t=this.getCurrentValue(),n=t[0],r=t[1];this.resetHandler(e,`min`,n),this.resetHandler(e,`max`,r)},t.prototype.getHandlerPath=function(e,t){var n=this.isVertical(),r=[],i=e.size,a=t.x,o=t.y,s=i*bp,c=i/2,l=i/6;if(n){var u=a+s*xp;r.push([`M`,a,o]),r.push([`L`,u,o+c]),r.push([`L`,a+s,o+c]),r.push([`L`,a+s,o-c]),r.push([`L`,u,o-c]),r.push([`Z`]),r.push([`M`,u,o+l]),r.push([`L`,a+s-2,o+l]),r.push([`M`,u,o-l]),r.push([`L`,a+s-2,o-l])}else{var d=o+s*xp;r.push([`M`,a,o]),r.push([`L`,a-c,d]),r.push([`L`,a-c,o+s]),r.push([`L`,a+c,o+s]),r.push([`L`,a+c,d]),r.push([`Z`]),r.push([`M`,a-l,d]),r.push([`L`,a-l,o+s-2]),r.push([`M`,a+l,d]),r.push([`L`,a+l,o+s-2])}return r},t.prototype.resetHandler=function(e,t,n){var r=this.getPointByValue(n,e),i=this.get(`handler`),a=this.getHandlerPath(i,r),o=this.getElementId(`handler-`+t),s=e.findById(o),c=this.isVertical();s?s.attr(`path`,a):this.addShape(e,{type:`path`,name:`legend-handler-`+t,draggable:!0,id:o,attrs:_(_({path:a},i.style),{cursor:c?`ns-resize`:`ew-resize`})})},t.prototype.fixedElements=function(e){var t=e.findById(this.getElementId(`rail`)),n=e.findById(this.getElementId(`label-min`)),r=e.findById(this.getElementId(`label-max`)),i=this.getDrawPoint();this.isVertical()?this.fixedVertail(n,r,t,i):this.fixedHorizontal(n,r,t,i)},t.prototype.fitRailLength=function(e,t,n,r){var i=this.isVertical()?`height`:`width`,a=this.get(`label`),o=a.align,s=a.spacing,c=this.get(`max`+Ze(i));if(c){var l=(o===`rail`?n[i]+e[i]+t[i]+s*2:n[i])-c;l>0&&this.changeRailLength(r,i,n[i]-l)}},t.prototype.changeRailLength=function(e,t,n){var r=e.getBBox(),i=t===`height`?this.getRailPath(r.x,r.y,r.width,n):this.getRailPath(r.x,r.y,n,r.height);e.attr(`path`,i)},t.prototype.changeRailPosition=function(e,t,n){var r=e.getBBox(),i=this.getRailPath(t,n,r.width,r.height);e.attr(`path`,i)},t.prototype.fixedHorizontal=function(e,t,n,r){var i=this.get(`label`),a=i.align,o=i.spacing,s=n.getBBox(),c=e.getBBox(),l=t.getBBox(),u=s.height;this.fitRailLength(c,l,s,n),s=n.getBBox(),a===`rail`?(e.attr({x:r.x,y:r.y+u/2}),this.changeRailPosition(n,r.x+c.width+o,r.y),t.attr({x:r.x+c.width+s.width+o*2,y:r.y+u/2})):a===`top`?(e.attr({x:r.x,y:r.y}),t.attr({x:r.x+s.width,y:r.y}),this.changeRailPosition(n,r.x,r.y+c.height+o)):(this.changeRailPosition(n,r.x,r.y),e.attr({x:r.x,y:r.y+s.height+o}),t.attr({x:r.x+s.width,y:r.y+s.height+o}))},t.prototype.fixedVertail=function(e,t,n,r){var i=this.get(`label`),a=i.align,o=i.spacing,s=n.getBBox(),c=e.getBBox(),l=t.getBBox();if(this.fitRailLength(c,l,s,n),s=n.getBBox(),a===`rail`)e.attr({x:r.x,y:r.y}),this.changeRailPosition(n,r.x,r.y+c.height+o),t.attr({x:r.x,y:r.y+c.height+s.height+o*2});else if(a===`right`)e.attr({x:r.x+s.width+o,y:r.y}),this.changeRailPosition(n,r.x,r.y),t.attr({x:r.x+s.width+o,y:r.y+s.height});else{var u=Math.max(c.width,l.width);e.attr({x:r.x,y:r.y}),this.changeRailPosition(n,r.x+u+o,r.y),t.attr({x:r.x,y:r.y+s.height})}},t}(pp),Cp=e({CONTAINER_CLASS:()=>wp,CROSSHAIR_X:()=>jp,CROSSHAIR_Y:()=>Mp,LIST_CLASS:()=>Ep,LIST_ITEM_CLASS:()=>Dp,MARKER_CLASS:()=>Op,NAME_CLASS:()=>Ap,TITLE_CLASS:()=>Tp,VALUE_CLASS:()=>kp}),wp=`g2-tooltip`,Tp=`g2-tooltip-title`,Ep=`g2-tooltip-list`,Dp=`g2-tooltip-list-item`,Op=`g2-tooltip-marker`,kp=`g2-tooltip-value`,Ap=`g2-tooltip-name`,jp=`g2-tooltip-crosshair-x`,Mp=`g2-tooltip-crosshair-y`,Np,Pp=(Np={},Np[``+wp]={position:`absolute`,visibility:`visible`,zIndex:8,transition:`visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)`,backgroundColor:`rgba(255, 255, 255, 0.9)`,boxShadow:`0px 0px 10px #aeaeae`,borderRadius:`3px`,color:`rgb(87, 87, 87)`,fontSize:`12px`,fontFamily:H.fontFamily,lineHeight:`20px`,padding:`10px 10px 6px 10px`},Np[``+Tp]={marginBottom:`4px`},Np[``+Ep]={margin:`0px`,listStyleType:`none`,padding:`0px`},Np[``+Dp]={listStyleType:`none`,marginBottom:`4px`},Np[``+Op]={width:`8px`,height:`8px`,borderRadius:`50%`,display:`inline-block`,marginRight:`8px`},Np[``+kp]={display:`inline-block`,float:`right`,marginLeft:`30px`},Np[``+jp]={position:`absolute`,width:`1px`,backgroundColor:`rgba(0, 0, 0, 0.25)`},Np[``+Mp]={position:`absolute`,height:`1px`,backgroundColor:`rgba(0, 0, 0, 0.25)`},Np);function Fp(e,t,n,r,i){return{left:e<i.x,right:e+n>i.x+i.width,top:t<i.y,bottom:t+r>i.y+i.height}}function Ip(e,t,n,r,i,a){var o=e,s=t;switch(a){case`left`:o=e-r-n,s=t-i/2;break;case`right`:o=e+n,s=t-i/2;break;case`top`:o=e-r/2,s=t-i-n;break;case`bottom`:o=e-r/2,s=t+n;break;default:o=e+n,s=t-i-n;break}return{x:o,y:s}}function Lp(e,t,n,r,i,a,o){var s=Ip(e,t,n,r,i,a);if(o){var c=Fp(s.x,s.y,r,i,o);a===`auto`?(c.right&&(s.x=Math.max(0,e-r-n)),c.top&&(s.y=Math.max(0,t-i-n))):a===`top`||a===`bottom`?(c.left&&(s.x=o.x),c.right&&(s.x=o.x+o.width-r),a===`top`&&c.top&&(s.y=t+n),a===`bottom`&&c.bottom&&(s.y=t-i-n)):(c.top&&(s.y=o.y),c.bottom&&(s.y=o.y+o.height-i),a===`left`&&c.left&&(s.x=e+n),a===`right`&&c.right&&(s.x=e-r-n))}return s}function Rp(e,t){var n=!1;return F(t,function(t){if(Ge(e,t))return n=!0,!1}),n}var zp=function(e){l(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return _(_({},t),{name:`tooltip`,type:`html`,x:0,y:0,items:[],customContent:null,containerTpl:`<div class="`+wp+`"><div class="`+Tp+`"></div><ul class="`+Ep+`"></ul></div>`,itemTpl:`<li class="`+Dp+`" data-index={index}>
          <span class="`+Op+`" style="background:{color}"></span>
          <span class="`+Ap+`">{name}</span>:
          <span class="`+kp+`">{value}</span>
        </li>`,xCrosshairTpl:`<div class="`+jp+`"></div>`,yCrosshairTpl:`<div class="`+Mp+`"></div>`,title:null,showTitle:!0,region:null,crosshairsRegion:null,containerClassName:wp,crosshairs:null,offset:10,position:`right`,domStyles:null,defaultStyles:Pp})},t.prototype.render=function(){this.get(`customContent`)?this.renderCustomContent():(this.resetTitle(),this.renderItems()),this.resetPosition()},t.prototype.clear=function(){this.clearCrosshairs(),this.setTitle(``),this.clearItemDoms()},t.prototype.show=function(){var e=this.getContainer();!e||this.destroyed||(this.set(`visible`,!0),fn(e,{visibility:`visible`}),this.setCrossHairsVisible(!0))},t.prototype.hide=function(){var e=this.getContainer();!e||this.destroyed||(this.set(`visible`,!1),fn(e,{visibility:`hidden`}),this.setCrossHairsVisible(!1))},t.prototype.getLocation=function(){return{x:this.get(`x`),y:this.get(`y`)}},t.prototype.setLocation=function(e){this.set(`x`,e.x),this.set(`y`,e.y),this.resetPosition()},t.prototype.setCrossHairsVisible=function(e){var t=e?``:`none`,n=this.get(`xCrosshairDom`),r=this.get(`yCrosshairDom`);n&&fn(n,{display:t}),r&&fn(r,{display:t})},t.prototype.initContainer=function(){if(e.prototype.initContainer.call(this),this.get(`customContent`)){this.get(`container`)&&this.get(`container`).remove();var t=this.getHtmlContentNode();this.get(`parent`).appendChild(t),this.set(`container`,t),this.resetStyles(),this.applyStyles()}},t.prototype.updateInner=function(t){this.get(`customContent`)?this.renderCustomContent():(Rp(t,[`title`,`showTitle`])&&this.resetTitle(),Ge(t,`items`)&&this.renderItems()),e.prototype.updateInner.call(this,t)},t.prototype.initDom=function(){this.cacheDoms()},t.prototype.removeDom=function(){e.prototype.removeDom.call(this),this.clearCrosshairs()},t.prototype.resetPosition=function(){var e=this.get(`x`),t=this.get(`y`),n=this.get(`offset`),r=this.getOffset(),i=r.offsetX,a=r.offsetY,o=this.get(`position`),s=this.get(`region`),c=this.getContainer(),l=this.getBBox(),u=l.width,d=l.height,f;s&&(f=Pd(s));var p=Lp(e,t,n,u,d,o,f);fn(c,{left:Wd(p.x+i),top:Wd(p.y+a)}),this.resetCrosshairs()},t.prototype.renderCustomContent=function(){var e=this.getHtmlContentNode(),t=this.get(`parent`),n=this.get(`container`);n&&n.parentNode===t?t.replaceChild(e,n):t.appendChild(e),this.set(`container`,e),this.resetStyles(),this.applyStyles()},t.prototype.getHtmlContentNode=function(){var e,t=this.get(`customContent`);if(t){var n=t(this.get(`title`),this.get(`items`));e=ot(n)?n:on(n)}return e},t.prototype.cacheDoms=function(){var e=this.getContainer(),t=e.getElementsByClassName(Tp)[0],n=e.getElementsByClassName(Ep)[0];this.set(`titleDom`,t),this.set(`listDom`,n)},t.prototype.resetTitle=function(){var e=this.get(`title`);this.get(`showTitle`)&&e?this.setTitle(e):this.setTitle(``)},t.prototype.setTitle=function(e){var t=this.get(`titleDom`);t&&(t.innerText=e)},t.prototype.resetCrosshairs=function(){var e=this.get(`crosshairsRegion`),t=this.get(`crosshairs`);if(!e||!t)this.clearCrosshairs();else{var n=Pd(e),r=this.get(`xCrosshairDom`),i=this.get(`yCrosshairDom`);t===`x`?(this.resetCrosshair(`x`,n),i&&(i.remove(),this.set(`yCrosshairDom`,null))):t===`y`?(this.resetCrosshair(`y`,n),r&&(r.remove(),this.set(`xCrosshairDom`,null))):(this.resetCrosshair(`x`,n),this.resetCrosshair(`y`,n)),this.setCrossHairsVisible(this.get(`visible`))}},t.prototype.resetCrosshair=function(e,t){var n=this.checkCrosshair(e),r=this.get(e);e===`x`?fn(n,{left:Wd(r),top:Wd(t.y),height:Wd(t.height)}):fn(n,{top:Wd(r),left:Wd(t.x),width:Wd(t.width)})},t.prototype.checkCrosshair=function(e){var t=e+`CrosshairDom`,n=e+`CrosshairTpl`,r=`CROSSHAIR_`+e.toUpperCase(),i=Cp[r],a=this.get(t),o=this.get(`parent`);return a||(a=on(this.get(n)),this.applyStyle(i,a),o.appendChild(a),this.set(t,a)),a},t.prototype.renderItems=function(){this.clearItemDoms();var e=this.get(`items`),t=this.get(`itemTpl`),n=this.get(`listDom`);n&&(F(e,function(e){var r=sl.toCSSGradient(e.color),i=_(_({},e),{color:r}),a=Xe(t,i),o=on(a);n.appendChild(o)}),this.applyChildrenStyles(n,this.get(`domStyles`)))},t.prototype.clearItemDoms=function(){this.get(`listDom`)&&Md(this.get(`listDom`))},t.prototype.clearCrosshairs=function(){var e=this.get(`xCrosshairDom`),t=this.get(`yCrosshairDom`);e&&e.remove(),t&&t.remove(),this.set(`xCrosshairDom`,null),this.set(`yCrosshairDom`,null)},t}(xf),Bp={opacity:0},Vp={stroke:`#C5C5C5`,strokeOpacity:.85},Hp={fill:`#CACED4`,opacity:.85};function Up(e){return wt(e,function(e,t){var n=t===0?`M`:`L`,r=e[0],i=e[1];return[n,r,i]})}function Wp(e){return Up(e)}function Gp(e){if(e.length<=2)return Wp(e);var t=[];F(e,function(e){Ct(e,t.slice(t.length-2))||t.push(e[0],e[1])});var n=$s(t,!1),r=Ee(e),i=r[0],a=r[1];return n.unshift([`M`,i,a]),n}function Kp(e,t,n,r){r===void 0&&(r=!0);var i=new lu({values:e}),a=new _l({values:wt(e,function(e,t){return t})}),o=wt(e,function(e,r){return[a.scale(r)*t,n-i.scale(e)*n]});return r?Gp(o):Wp(o)}function qp(e,t){var n=new lu({values:e}),r=n.max<0?n.max:Math.max(0,n.min);return t-n.scale(r)*t}function Jp(e,t,n,r){var i=d(e),a=qp(r,n);return i.push([`L`,t,a]),i.push([`L`,0,a]),i.push([`Z`]),i}var Yp=function(e){l(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return _(_({},t),{name:`trend`,x:0,y:0,width:200,height:16,smooth:!0,isArea:!1,data:[],backgroundStyle:Bp,lineStyle:Vp,areaStyle:Hp})},t.prototype.renderInner=function(e){var t=this.cfg,n=t.width,r=t.height,i=t.data,a=t.smooth,o=t.isArea,s=t.backgroundStyle,c=t.lineStyle,l=t.areaStyle;this.addShape(e,{id:this.getElementId(`background`),type:`rect`,attrs:_({x:0,y:0,width:n,height:r},s)});var u=Kp(i,n,r,a);if(this.addShape(e,{id:this.getElementId(`line`),type:`path`,attrs:_({path:u},c)}),o){var d=Jp(u,n,r,i);this.addShape(e,{id:this.getElementId(`area`),type:`path`,attrs:_({path:d},l)})}},t.prototype.applyOffset=function(){var e=this.cfg,t=e.x,n=e.y;this.moveElementTo(this.get(`group`),{x:t,y:n})},t}(Zd),Xp={fill:`#F7F7F7`,stroke:`#BFBFBF`,radius:2,opacity:1,cursor:`ew-resize`,highLightFill:`#FFF`},Zp=function(e){l(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return _(_({},t),{name:`handler`,x:0,y:0,width:10,height:24,style:Xp})},t.prototype.renderInner=function(e){var t=this.cfg,n=t.width,r=t.height,i=t.style,a=i.fill,o=i.stroke,s=i.radius,c=i.opacity,l=i.cursor;this.addShape(e,{type:`rect`,id:this.getElementId(`background`),attrs:{x:0,y:0,width:n,height:r,fill:a,stroke:o,radius:s,opacity:c,cursor:l}});var u=1/3*n,d=2/3*n,f=1/4*r,p=3/4*r;this.addShape(e,{id:this.getElementId(`line-left`),type:`line`,attrs:{x1:u,y1:f,x2:u,y2:p,stroke:o,cursor:l}}),this.addShape(e,{id:this.getElementId(`line-right`),type:`line`,attrs:{x1:d,y1:f,x2:d,y2:p,stroke:o,cursor:l}})},t.prototype.applyOffset=function(){this.moveElementTo(this.get(`group`),{x:this.get(`x`),y:this.get(`y`)})},t.prototype.initEvent=function(){this.bindEvents()},t.prototype.bindEvents=function(){var e=this;this.get(`group`).on(`mouseenter`,function(){var t=e.get(`style`).highLightFill;e.getElementByLocalId(`background`).attr(`fill`,t),e.draw()}),this.get(`group`).on(`mouseleave`,function(){var t=e.get(`style`).fill;e.getElementByLocalId(`background`).attr(`fill`,t),e.draw()})},t.prototype.draw=function(){var e=this.get(`container`).get(`canvas`);e&&e.draw()},t}(Zd),Qp={fill:`#416180`,opacity:.05},$p={fill:`#5B8FF9`,opacity:.15,cursor:`move`},em={width:10,height:24},tm={textBaseline:`middle`,fill:`#000`,opacity:.45},nm=`sliderchange`,rm=function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.onMouseDown=function(e){return function(n){t.currentTarget=e;var r=n.originalEvent;r.stopPropagation(),r.preventDefault(),t.prevX=z(r,`touches.0.pageX`,r.pageX),t.prevY=z(r,`touches.0.pageY`,r.pageY);var i=t.getContainerDOM();i.addEventListener(`mousemove`,t.onMouseMove),i.addEventListener(`mouseup`,t.onMouseUp),i.addEventListener(`mouseleave`,t.onMouseUp),i.addEventListener(`touchmove`,t.onMouseMove),i.addEventListener(`touchend`,t.onMouseUp),i.addEventListener(`touchcancel`,t.onMouseUp)}},t.onMouseMove=function(e){var n=t.cfg.width,r=[t.get(`start`),t.get(`end`)];e.stopPropagation(),e.preventDefault();var i=z(e,`touches.0.pageX`,e.pageX),a=z(e,`touches.0.pageY`,e.pageY),o=i-t.prevX,s=t.adjustOffsetRange(o/n);t.updateStartEnd(s),t.updateUI(t.getElementByLocalId(`foreground`),t.getElementByLocalId(`minText`),t.getElementByLocalId(`maxText`)),t.prevX=i,t.prevY=a,t.draw(),t.emit(nm,[t.get(`start`),t.get(`end`)].sort()),t.delegateEmit(`valuechanged`,{originValue:r,value:[t.get(`start`),t.get(`end`)]})},t.onMouseUp=function(){t.currentTarget&&=void 0;var e=t.getContainerDOM();e&&(e.removeEventListener(`mousemove`,t.onMouseMove),e.removeEventListener(`mouseup`,t.onMouseUp),e.removeEventListener(`mouseleave`,t.onMouseUp),e.removeEventListener(`touchmove`,t.onMouseMove),e.removeEventListener(`touchend`,t.onMouseUp),e.removeEventListener(`touchcancel`,t.onMouseUp))},t}return t.prototype.setRange=function(e,t){this.set(`minLimit`,e),this.set(`maxLimit`,t);var n=this.get(`start`),r=this.get(`end`),i=Fe(n,e,t),a=Fe(r,e,t);!this.get(`isInit`)&&(n!==i||r!==a)&&this.setValue([i,a])},t.prototype.getRange=function(){return{min:this.get(`minLimit`)||0,max:this.get(`maxLimit`)||1}},t.prototype.setValue=function(e){var t=this.getRange();if(N(e)&&e.length===2){var n=[this.get(`start`),this.get(`end`)];this.update({start:Fe(e[0],t.min,t.max),end:Fe(e[1],t.min,t.max)}),this.get(`updateAutoRender`)||this.render(),this.delegateEmit(`valuechanged`,{originValue:n,value:e})}},t.prototype.getValue=function(){return[this.get(`start`),this.get(`end`)]},t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return _(_({},t),{name:`slider`,x:0,y:0,width:100,height:16,backgroundStyle:{},foregroundStyle:{},handlerStyle:{},textStyle:{},defaultCfg:{backgroundStyle:Qp,foregroundStyle:$p,handlerStyle:em,textStyle:tm}})},t.prototype.update=function(t){var n=t.start,r=t.end,i=_({},t);M(n)||(i.start=Fe(n,0,1)),M(r)||(i.end=Fe(r,0,1)),e.prototype.update.call(this,i),this.minHandler=this.getChildComponentById(this.getElementId(`minHandler`)),this.maxHandler=this.getChildComponentById(this.getElementId(`maxHandler`)),this.trend=this.getChildComponentById(this.getElementId(`trend`))},t.prototype.init=function(){this.set(`start`,Fe(this.get(`start`),0,1)),this.set(`end`,Fe(this.get(`end`),0,1)),e.prototype.init.call(this)},t.prototype.render=function(){e.prototype.render.call(this),this.updateUI(this.getElementByLocalId(`foreground`),this.getElementByLocalId(`minText`),this.getElementByLocalId(`maxText`))},t.prototype.renderInner=function(e){var t=this.cfg,n=t.start,r=t.end,i=t.width,a=t.height,o=t.trendCfg,s=o===void 0?{}:o,c=t.minText,l=t.maxText,u=t.backgroundStyle,d=u===void 0?{}:u,f=t.foregroundStyle,p=f===void 0?{}:f,m=t.textStyle,h=m===void 0?{}:m,g=R({},Xp,this.cfg.handlerStyle);n*i,r*i,It(z(s,`data`))&&(this.trend=this.addComponent(e,_({component:Yp,id:this.getElementId(`trend`),x:0,y:0,width:i,height:a},s))),this.addShape(e,{id:this.getElementId(`background`),type:`rect`,attrs:_({x:0,y:0,width:i,height:a},d)}),this.addShape(e,{id:this.getElementId(`minText`),type:`text`,attrs:_({y:a/2,textAlign:`right`,text:c,silent:!1},h)}),this.addShape(e,{id:this.getElementId(`maxText`),type:`text`,attrs:_({y:a/2,textAlign:`left`,text:l,silent:!1},h)}),this.addShape(e,{id:this.getElementId(`foreground`),name:`foreground`,type:`rect`,attrs:_({y:0,height:a},p)});var v=z(g,`width`,10),y=z(g,`height`,24);this.minHandler=this.addComponent(e,{component:Zp,id:this.getElementId(`minHandler`),name:`handler-min`,x:0,y:(a-y)/2,width:v,height:y,cursor:`ew-resize`,style:g}),this.maxHandler=this.addComponent(e,{component:Zp,id:this.getElementId(`maxHandler`),name:`handler-max`,x:0,y:(a-y)/2,width:v,height:y,cursor:`ew-resize`,style:g})},t.prototype.applyOffset=function(){this.moveElementTo(this.get(`group`),{x:this.get(`x`),y:this.get(`y`)})},t.prototype.initEvent=function(){this.bindEvents()},t.prototype.updateUI=function(e,t,n){var r=this.cfg,i=r.start,a=r.end,o=r.width,s=r.minText,c=r.maxText,l=r.handlerStyle,u=r.height,d=i*o,f=a*o;this.trend&&(this.trend.update({width:o,height:u}),this.get(`updateAutoRender`)||this.trend.render()),e.attr(`x`,d),e.attr(`width`,f-d);var p=z(l,`width`,10);t.attr(`text`,s),n.attr(`text`,c);var m=this._dodgeText([d,f],t,n),h=m[0],g=m[1];this.minHandler&&(this.minHandler.update({x:d-p/2}),this.get(`updateAutoRender`)||this.minHandler.render()),F(h,function(e,n){return t.attr(n,e)}),this.maxHandler&&(this.maxHandler.update({x:f-p/2}),this.get(`updateAutoRender`)||this.maxHandler.render()),F(g,function(e,t){return n.attr(t,e)})},t.prototype.bindEvents=function(){var e=this.get(`group`);e.on(`handler-min:mousedown`,this.onMouseDown(`minHandler`)),e.on(`handler-min:touchstart`,this.onMouseDown(`minHandler`)),e.on(`handler-max:mousedown`,this.onMouseDown(`maxHandler`)),e.on(`handler-max:touchstart`,this.onMouseDown(`maxHandler`));var t=e.findById(this.getElementId(`foreground`));t.on(`mousedown`,this.onMouseDown(`foreground`)),t.on(`touchstart`,this.onMouseDown(`foreground`))},t.prototype.adjustOffsetRange=function(e){var t=this.cfg,n=t.start,r=t.end;switch(this.currentTarget){case`minHandler`:var i=0-n,a=1-n;return Math.min(a,Math.max(i,e));case`maxHandler`:var i=0-r,a=1-r;return Math.min(a,Math.max(i,e));case`foreground`:var i=0-n,a=1-r;return Math.min(a,Math.max(i,e))}},t.prototype.updateStartEnd=function(e){var t=this.cfg,n=t.start,r=t.end;switch(this.currentTarget){case`minHandler`:n+=e;break;case`maxHandler`:r+=e;break;case`foreground`:n+=e,r+=e;break}this.set(`start`,n),this.set(`end`,r)},t.prototype._dodgeText=function(e,t,n){var r,i,a=this.cfg,o=a.handlerStyle,s=a.width,c=2,l=z(o,`width`,10),u=e[0],d=e[1],f=!1;u>d&&(r=[d,u],u=r[0],d=r[1],i=[n,t],t=i[0],n=i[1],f=!0);var p=t.getBBox(),m=n.getBBox(),h=p.width>u-c?{x:u+l/2+c,textAlign:`left`}:{x:u-l/2-c,textAlign:`right`},g=m.width>s-d-c?{x:d-l/2-c,textAlign:`right`}:{x:d+l/2+c,textAlign:`left`};return f?[g,h]:[h,g]},t.prototype.draw=function(){var e=this.get(`container`),t=e&&e.get(`canvas`);t&&t.draw()},t.prototype.getContainerDOM=function(){var e=this.get(`container`),t=e&&e.get(`canvas`);return t&&t.get(`container`)},t}(Zd),im={default:{trackColor:`rgba(0,0,0,0)`,thumbColor:`rgba(0,0,0,0.15)`,size:8,lineCap:`round`},hover:{thumbColor:`rgba(0,0,0,0.2)`}},am=function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.clearEvents=Ft,t.onStartEvent=function(e){return function(n){t.isMobile=e,n.originalEvent.preventDefault();var r=e?z(n.originalEvent,`touches.0.clientX`):n.clientX,i=e?z(n.originalEvent,`touches.0.clientY`):n.clientY;t.startPos=t.cfg.isHorizontal?r:i,t.bindLaterEvent()}},t.bindLaterEvent=function(){var e=t.getContainerDOM(),n=[];n=t.isMobile?[$t(e,`touchmove`,t.onMouseMove),$t(e,`touchend`,t.onMouseUp),$t(e,`touchcancel`,t.onMouseUp)]:[$t(e,`mousemove`,t.onMouseMove),$t(e,`mouseup`,t.onMouseUp),$t(e,`mouseleave`,t.onMouseUp)],t.clearEvents=function(){n.forEach(function(e){e.remove()})}},t.onMouseMove=function(e){var n=t.cfg,r=n.isHorizontal,i=n.thumbOffset;e.preventDefault();var a=t.isMobile?z(e,`touches.0.clientX`):e.clientX,o=t.isMobile?z(e,`touches.0.clientY`):e.clientY,s=r?a:o,c=s-t.startPos;t.startPos=s,t.updateThumbOffset(i+c)},t.onMouseUp=function(e){e.preventDefault(),t.clearEvents()},t.onTrackClick=function(e){var n=t.cfg,r=n.isHorizontal,i=n.x,a=n.y,o=n.thumbLen,s=t.getContainerDOM().getBoundingClientRect(),c=e.clientX,l=e.clientY,u=r?c-s.left-i-o/2:l-s.top-a-o/2,d=t.validateRange(u);t.updateThumbOffset(d)},t.onThumbMouseOver=function(){var e=t.cfg.theme.hover.thumbColor;t.getElementByLocalId(`thumb`).attr(`stroke`,e),t.draw()},t.onThumbMouseOut=function(){var e=t.cfg.theme.default.thumbColor;t.getElementByLocalId(`thumb`).attr(`stroke`,e),t.draw()},t}return t.prototype.setRange=function(e,t){this.set(`minLimit`,e),this.set(`maxLimit`,t);var n=this.getValue(),r=Fe(n,e,t);n!==r&&!this.get(`isInit`)&&this.setValue(r)},t.prototype.getRange=function(){var e=this.get(`minLimit`)||0,t=this.get(`maxLimit`)||1;return{min:e,max:t}},t.prototype.setValue=function(e){var t=this.getRange(),n=this.getValue();this.update({thumbOffset:(this.get(`trackLen`)-this.get(`thumbLen`))*Fe(e,t.min,t.max)}),this.delegateEmit(`valuechange`,{originalValue:n,value:this.getValue()})},t.prototype.getValue=function(){return Fe(this.get(`thumbOffset`)/(this.get(`trackLen`)-this.get(`thumbLen`)),0,1)},t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return _(_({},t),{name:`scrollbar`,isHorizontal:!0,minThumbLen:20,thumbOffset:0,theme:im})},t.prototype.renderInner=function(e){this.renderTrackShape(e),this.renderThumbShape(e)},t.prototype.applyOffset=function(){this.moveElementTo(this.get(`group`),{x:this.get(`x`),y:this.get(`y`)})},t.prototype.initEvent=function(){this.bindEvents()},t.prototype.renderTrackShape=function(e){var t=this.cfg,n=t.trackLen,r=t.theme,i=R({},im,r===void 0?{default:{}}:r).default,a=i.lineCap,o=i.trackColor,s=i.size,c=z(this.cfg,`size`,s),l=this.get(`isHorizontal`)?{x1:0+c/2,y1:c/2,x2:n-c/2,y2:c/2,lineWidth:c,stroke:o,lineCap:a}:{x1:c/2,y1:0+c/2,x2:c/2,y2:n-c/2,lineWidth:c,stroke:o,lineCap:a};return this.addShape(e,{id:this.getElementId(`track`),name:`track`,type:`line`,attrs:l})},t.prototype.renderThumbShape=function(e){var t=this.cfg,n=t.thumbOffset,r=t.thumbLen,i=t.theme,a=R({},im,i).default,o=a.size,s=a.lineCap,c=a.thumbColor,l=z(this.cfg,`size`,o),u=this.get(`isHorizontal`)?{x1:n+l/2,y1:l/2,x2:n+r-l/2,y2:l/2,lineWidth:l,stroke:c,lineCap:s,cursor:`default`}:{x1:l/2,y1:n+l/2,x2:l/2,y2:n+r-l/2,lineWidth:l,stroke:c,lineCap:s,cursor:`default`};return this.addShape(e,{id:this.getElementId(`thumb`),name:`thumb`,type:`line`,attrs:u})},t.prototype.bindEvents=function(){var e=this.get(`group`);e.on(`mousedown`,this.onStartEvent(!1)),e.on(`mouseup`,this.onMouseUp),e.on(`touchstart`,this.onStartEvent(!0)),e.on(`touchend`,this.onMouseUp),e.findById(this.getElementId(`track`)).on(`click`,this.onTrackClick);var t=e.findById(this.getElementId(`thumb`));t.on(`mouseover`,this.onThumbMouseOver),t.on(`mouseout`,this.onThumbMouseOut)},t.prototype.getContainerDOM=function(){var e=this.get(`container`),t=e&&e.get(`canvas`);return t&&t.get(`container`)},t.prototype.validateRange=function(e){var t=this.cfg,n=t.thumbLen,r=t.trackLen,i=e;return e+n>r?i=r-n:e+n<n&&(i=0),i},t.prototype.draw=function(){var e=this.get(`container`),t=e&&e.get(`canvas`);t&&t.draw()},t.prototype.updateThumbOffset=function(e){var t=this.cfg,n=t.thumbOffset,r=t.isHorizontal,i=t.thumbLen,a=t.size,o=this.validateRange(e);if(o!==n){var s=this.getElementByLocalId(`thumb`);r?s.attr({x1:o+a/2,x2:o+i-a/2}):s.attr({y1:o+a/2,y2:o+i-a/2}),this.emitOffsetChange(o)}},t.prototype.emitOffsetChange=function(e){var t=this.cfg,n=t.thumbOffset,r=t.trackLen,i=t.thumbLen;this.cfg.thumbOffset=e,this.emit(`scrollchange`,{thumbOffset:e,ratio:Fe(e/(r-i),0,1)}),this.delegateEmit(`valuechange`,{originalValue:n,value:e})},t}(Zd),om=Zf,sm=Qf,cm=fp,lm=dp,um=yp,dm=Sp,fm=zp;function pm(e){if(xt(e))return null;var t=e[0].x,n=e[0].x,r=e[0].y,i=e[0].y;return F(e,function(e){t=t>e.x?e.x:t,n=n<e.x?e.x:n,r=r>e.y?e.y:r,i=i<e.y?e.y:i}),{minX:t,maxX:n,minY:r,maxY:i,centerX:(t+n)/2,centerY:(r+i)/2}}function mm(e){return Array.from(new Set(e)).length===1}function hm(e){return(he(e)+me(e))/2}function gm(e,t,n,r){return{x:e+n*Math.cos(r),y:t+n*Math.sin(r)}}function _m(e,t,n,r,i,a){a===void 0&&(a=0);var o=gm(e,t,n,r),s=gm(e,t,n,i),c=gm(e,t,a,r),l=gm(e,t,a,i);if(i-r===Math.PI*2){var u=gm(e,t,n,r+Math.PI),d=gm(e,t,a,r+Math.PI),f=[[`M`,o.x,o.y],[`A`,n,n,0,1,1,u.x,u.y],[`A`,n,n,0,1,1,s.x,s.y],[`M`,c.x,c.y]];return a&&(f.push([`A`,a,a,0,1,0,d.x,d.y]),f.push([`A`,a,a,0,1,0,l.x,l.y])),f.push([`M`,o.x,o.y]),f.push([`Z`]),f}var p=i-r<=Math.PI?0:1,m=[[`M`,o.x,o.y],[`A`,n,n,0,p,1,s.x,s.y],[`L`,l.x,l.y]];return a&&m.push([`A`,a,a,0,p,0,c.x,c.y]),m.push([`L`,o.x,o.y]),m.push([`Z`]),m}function vm(e,t,n,r,i){var a=gm(e,t,n,r),o=gm(e,t,n,i);if(Re(i-r,Math.PI*2)){var s=gm(e,t,n,r+Math.PI);return[[`M`,a.x,a.y],[`A`,n,n,0,1,1,s.x,s.y],[`A`,n,n,0,1,1,a.x,a.y],[`A`,n,n,0,1,0,s.x,s.y],[`A`,n,n,0,1,0,a.x,a.y],[`Z`]]}var c=i-r<=Math.PI?0:1;return[[`M`,a.x,a.y],[`A`,n,n,0,c,1,o.x,o.y]]}function ym(e,t){var n=e.points,r=pm(n),i,a,o=t.startAngle,s=t.endAngle-o;return t.isTransposed?(i=r.maxY*s,a=r.minY*s):(i=r.maxX*s,a=r.minX*s),i+=o,a+=o,{startAngle:a,endAngle:i}}function bm(e,t){if(L(e)&&L(t))return[e,t];if(e=e,t=t,mm(e)||mm(t))return[hm(e),hm(t)];for(var n=-1,r=0,i=0,a,o=e.length-1,s,c=0;++n<e.length;)a=o,o=n,c+=s=e[a]*t[o]-e[o]*t[a],r+=(e[a]+e[o])*s,i+=(t[a]+t[o])*s;return c*=3,[r/c,i/c]}function xm(e,t){var n=e.attr(),r=t.attr();return F(n,function(e,t){r[t]===void 0&&(r[t]=void 0)}),r}function Sm(e,t,n){return e>=Math.min(t,n)&&e<=Math.max(t,n)}function Cm(e,t,n){if(I(e))return e.padEnd(t,n);if(N(e)){var r=e.length;if(r<t)for(var i=t-r,a=0;a<i;a++)e.push(n)}return e}function wm(e,t){return typeof e==`object`&&t.forEach(function(t){delete e[t]}),e}function Tm(e,t,n){var r,i;t===void 0&&(t=[]),n===void 0&&(n=new Map);try{for(var a=E(e),o=a.next();!o.done;o=a.next()){var s=o.value;n.has(s)||(t.push(s),n.set(s,!0))}}catch(e){r={error:e}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return t}var Em=function(){function e(e,t,n,r){e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0),r===void 0&&(r=0),this.x=e,this.y=t,this.height=r,this.width=n}return e.fromRange=function(t,n,r,i){return new e(t,n,r-t,i-n)},e.fromObject=function(t){return new e(t.minX,t.minY,t.width,t.height)},Object.defineProperty(e.prototype,`minX`,{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,`maxX`,{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,`minY`,{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,`maxY`,{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,`tl`,{get:function(){return{x:this.x,y:this.y}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,`tr`,{get:function(){return{x:this.maxX,y:this.y}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,`bl`,{get:function(){return{x:this.x,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,`br`,{get:function(){return{x:this.maxX,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,`top`,{get:function(){return{x:this.x+this.width/2,y:this.minY}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,`right`,{get:function(){return{x:this.maxX,y:this.y+this.height/2}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,`bottom`,{get:function(){return{x:this.x+this.width/2,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,`left`,{get:function(){return{x:this.minX,y:this.y+this.height/2}},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(e){return this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height},e.prototype.contains=function(e){return e.minX>=this.minX&&e.maxX<=this.maxX&&e.minY>=this.minY&&e.maxY<=this.maxY},e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.add=function(){var e=[...arguments],t=this.clone();return F(e,function(e){t.x=Math.min(e.x,t.x),t.y=Math.min(e.y,t.y),t.width=Math.max(e.maxX,t.maxX)-t.x,t.height=Math.max(e.maxY,t.maxY)-t.y}),t},e.prototype.merge=function(){var e=[...arguments],t=this.clone();return F(e,function(e){t.x=Math.max(e.x,t.x),t.y=Math.max(e.y,t.y),t.width=Math.min(e.maxX,t.maxX)-t.x,t.height=Math.min(e.maxY,t.maxY)-t.y}),t},e.prototype.cut=function(t,n){var r=t.width,i=t.height;switch(n){case B.TOP:case B.TOP_LEFT:case B.TOP_RIGHT:return e.fromRange(this.minX,this.minY+i,this.maxX,this.maxY);case B.RIGHT:case B.RIGHT_TOP:case B.RIGHT_BOTTOM:return e.fromRange(this.minX,this.minY,this.maxX-r,this.maxY);case B.BOTTOM:case B.BOTTOM_LEFT:case B.BOTTOM_RIGHT:return e.fromRange(this.minX,this.minY,this.maxX,this.maxY-i);case B.LEFT:case B.LEFT_TOP:case B.LEFT_BOTTOM:return e.fromRange(this.minX+r,this.minY,this.maxX,this.maxY);default:return this}},e.prototype.shrink=function(t){var n=a(t,4),r=n[0],i=n[1],o=n[2],s=n[3];return new e(this.x+s,this.y+r,this.width-s-i,this.height-r-o)},e.prototype.expand=function(t){var n=a(t,4),r=n[0],i=n[1],o=n[2],s=n[3];return new e(this.x-s,this.y-r,this.width+s+i,this.height+r+o)},e.prototype.exceed=function(e){return[Math.max(-this.minY+e.minY,0),Math.max(this.maxX-e.maxX,0),Math.max(this.maxY-e.maxY,0),Math.max(-this.minX+e.minX,0)]},e.prototype.collide=function(e){return this.minX<e.maxX&&this.maxX>e.minX&&this.minY<e.maxY&&this.maxY>e.minY},e.prototype.size=function(){return this.width*this.height},e.prototype.isPointIn=function(e){return e.x>=this.minX&&e.x<=this.maxX&&e.y>=this.minY&&e.y<=this.maxY},e}();function Dm(e){return[[e.minX,e.minY],[e.maxX,e.minY],[e.maxX,e.maxY],[e.minX,e.maxY]]}function Om(e){if(e.isPolar&&!e.isTransposed)return(e.endAngle-e.startAngle)*e.getRadius();var t=e.convert({x:0,y:0}),n=e.convert({x:1,y:0});return Math.sqrt((n.x-t.x)**2+(n.y-t.y)**2)}function km(e){if(e.isPolar){var t=e.startAngle;return e.endAngle-t===Math.PI*2}return!1}function Am(e,t){var n=e.getCenter();return Math.sqrt((t.x-n.x)**2+(t.y-n.y)**2)}function jm(e,t){var n=!1;if(e)if(e.type===`theta`){var r=e.start,i=e.end;n=Sm(t.x,r.x,i.x)&&Sm(t.y,r.y,i.y)}else{var a=e.invert(t);n=Sm(a.x,0,1)&&Sm(a.y,0,1)}return n}function Mm(e,t){var n=e.getCenter();return Math.atan2(t.y-n.y,t.x-n.x)}function Nm(e,t){t===void 0&&(t=0);var n=e.start,r=e.end,i=e.getWidth(),a=e.getHeight();if(e.isPolar){var o=e.startAngle,s=e.endAngle,c=e.getCenter(),l=e.getRadius();return{type:`path`,startState:{path:_m(c.x,c.y,l+t,o,o)},endState:function(e){var n=(s-o)*e+o;return{path:_m(c.x,c.y,l+t,o,n)}},attrs:{path:_m(c.x,c.y,l+t,o,s)}}}var u=e.isTransposed?{height:a+t*2}:{width:i+t*2};return{type:`rect`,startState:{x:n.x-t,y:r.y-t,width:e.isTransposed?i+t*2:0,height:e.isTransposed?0:a+t*2},endState:u,attrs:{x:n.x-t,y:r.y-t,width:i+t*2,height:a+t*2}}}function Pm(e,t){t===void 0&&(t=0);var n=e.start,r=e.end,i=e.getWidth(),a=e.getHeight(),o=Math.min(n.x,r.x),s=Math.min(n.y,r.y);return Em.fromRange(o-t,s-t,o+i+t,s+a+t)}var Fm=/^(?:(?!0000)[0-9]{4}([-/.]+)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-/.]+)0?2\2(?:29))(\s+([01]|([01][0-9]|2[0-3])):([0-9]|[0-5][0-9]):([0-9]|[0-5][0-9]))?$/;function Im(e){var t=`linear`;return Fm.test(e)?t=`timeCat`:I(e)&&(t=`cat`),t}function Lm(e,t,n,r){return t===void 0&&(t={}),t.type?t.type:e.type!==`identity`&&qt.includes(n)&&[`interval`].includes(r)||e.isCategory?`cat`:e.type}function Rm(e,t,n){var r=t||[];if(L(e)||M(fe(r,e))&&xt(n))return new(yu(`identity`))({field:e.toString(),values:[e]});var i=Te(r,e),a=z(n,`type`,Im(i[0]));return new(yu(a))(_({field:e,values:i},n))}function zm(e,t){if(e.type!==`identity`&&t.type!==`identity`){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);e.change(n)}}function Bm(e){return e.alias||e.field}function Vm(e,t,n){var r=e.values.length,i;if(r===1)i=[.5,1];else{var a=1,o=0;km(t)?t.isTransposed?(a=z(n,`widthRatio.multiplePie`,1/1.3),o=1/r*a,i=[o/2,1-o/2]):i=[0,1-1/r]:(o=1/r/2,i=[o,1-o])}return i}function Hm(e){var t=e.values.filter(function(e){return!M(e)&&!isNaN(e)});return Math.max.apply(Math,s(s([],a(t),!1),[M(e.max)?-1/0:e.max],!1))}function Um(e){var t,n;switch(e){case B.TOP:t={x:0,y:1},n={x:1,y:1};break;case B.RIGHT:t={x:1,y:0},n={x:1,y:1};break;case B.BOTTOM:t={x:0,y:0},n={x:1,y:0};break;case B.LEFT:t={x:0,y:0},n={x:0,y:1};break;default:t=n={x:0,y:0}}return{start:t,end:n}}function Wm(e){var t,n;return e.isTransposed?(t={x:0,y:0},n={x:1,y:0}):(t={x:0,y:0},n={x:0,y:1}),{start:t,end:n}}function Gm(e,t){var n={start:{x:0,y:0},end:{x:0,y:0}};e.isRect?n=Um(t):e.isPolar&&(n=Wm(e));var r=n.start,i=n.end;return{start:e.convert(r),end:e.convert(i)}}function Km(e){var t=e.start,n=e.end;return t.x===n.x}function qm(e,t){var n=e.start,r=e.end;return Km(e)?(n.y-r.y)*(t.x-n.x)>0?1:-1:(r.x-n.x)*(n.y-t.y)>0?-1:1}function Jm(e,t){var n=z(e,[`components`,`axis`],{});return R({},z(n,[`common`],{}),R({},z(n,[t],{})))}function Ym(e,t,n){var r=z(e,[`components`,`axis`],{});return R({},z(r,[`common`,`title`],{}),R({},z(r,[t,`title`],{})),n)}function Xm(e){var t=e.x,n=e.y,r=e.circleCenter,i=n.start>n.end,a=e.isTransposed?e.convert({x:i?0:1,y:0}):e.convert({x:0,y:i?0:1}),o=[a.x-r.x,a.y-r.y],s=[1,0],c=a.y>r.y?b(o,s):b(o,s)*-1,l=c+(t.end-t.start),u=Math.sqrt((a.x-r.x)**2+(a.y-r.y)**2);return{center:r,radius:u,startAngle:c,endAngle:l}}function Zm(e,t){return et(e)?e===!1?!1:{}:z(e,[t])}function Qm(e,t){return z(e,`position`,t)}function $m(e,t){return z(t,[`title`,`text`],Bm(e))}var eh=function(){function e(e,t){this.destroyed=!1,this.facets=[],this.view=e,this.cfg=R({},this.getDefaultCfg(),t)}return e.prototype.init=function(){this.container||=this.createContainer();var e=this.view.getData();this.facets=this.generateFacets(e)},e.prototype.render=function(){this.renderViews()},e.prototype.update=function(){},e.prototype.clear=function(){this.clearFacetViews()},e.prototype.destroy=function(){this.clear(),this.container&&=(this.container.remove(!0),void 0),this.destroyed=!0,this.view=void 0,this.facets=[]},e.prototype.facetToView=function(e){var t=e.region,n=e.data,r=e.padding,i=r===void 0?this.cfg.padding:r,a=this.view.createView({region:t,padding:i});a.data(n||[]),e.view=a,this.beforeEachView(a,e);var o=this.cfg.eachView;return o&&o(a,e),this.afterEachView(a,e),a},e.prototype.createContainer=function(){return this.view.getLayer(Vt.FORE).addGroup()},e.prototype.renderViews=function(){this.createFacetViews()},e.prototype.createFacetViews=function(){var e=this;return this.facets.map(function(t){return e.facetToView(t)})},e.prototype.clearFacetViews=function(){var e=this;F(this.facets,function(t){t.view&&=(e.view.removeView(t.view),void 0)})},e.prototype.parseSpacing=function(){var e=this.view.viewBBox,t=e.width,n=e.height;return this.cfg.spacing.map(function(e,r){return L(e)?e/(r===0?t:n):parseFloat(e)/100})},e.prototype.getFieldValues=function(e,t){var n=[],r={};return F(e,function(e){var i=e[t];!M(i)&&!r[i]&&(n.push(i),r[i]=!0)}),n},e.prototype.getRegion=function(e,t,n,r){var i=a(this.parseSpacing(),2),o=i[0],s=i[1],c=(1+o)/(t===0?1:t)-o,l=(1+s)/(e===0?1:e)-s,u={x:(c+o)*n,y:(l+s)*r},d={x:u.x+c,y:u.y+l};return{start:u,end:d}},e.prototype.getDefaultCfg=function(){return{eachView:void 0,showTitle:!0,spacing:[0,0],padding:10,fields:[]}},e.prototype.getDefaultTitleCfg=function(){return{style:{fontSize:14,fill:`#666`,fontFamily:this.view.getTheme().fontFamily}}},e.prototype.processAxis=function(e,t){var n=e.getOptions(),r=n.coordinate,i=e.geometries;if(z(r,`type`,`rect`)===`rect`&&i.length){M(n.axes)&&(n.axes={});var o=n.axes,s=a(i[0].getXYFields(),2),c=s[0],l=s[1],u=Zm(o,c),d=Zm(o,l);u!==!1&&(n.axes[c]=this.getXAxisOption(c,o,u,t)),d!==!1&&(n.axes[l]=this.getYAxisOption(l,o,d,t))}},e.prototype.getFacetDataFilter=function(e){return function(t){return Oe(e,function(e){var n=e.field,r=e.value;return!M(r)&&n?t[n]===r:!0})}},e}(),th={},nh=function(e){return th[Je(e)]},rh=function(e,t){th[Je(e)]=t},ih=function(){function e(e,t){this.context=e,this.cfg=t,e.addAction(this)}return e.prototype.applyCfg=function(e){ut(this,e)},e.prototype.init=function(){this.applyCfg(this.cfg)},e.prototype.destroy=function(){this.context.removeAction(this),this.context=null},e}(),ah=function(e){l(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.execute=function(){this.callback&&this.callback(this.context)},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.callback=null},t}(ih),oh={};function sh(e,t){var n=oh[e],r=null;if(n){var i=n.ActionClass,a=n.cfg;r=new i(t,a),r.name=e,r.init()}return r}function ch(e){var t=oh[e];return z(t,`ActionClass`)}function U(e,t,n){oh[e]={ActionClass:t,cfg:n}}function lh(e,t){var n=new ah(t);return n.callback=e,n.name=`callback`,n}function uh(e,t){var n=[];if(e.length){n.push([`M`,e[0].x,e[0].y]);for(var r=1,i=e.length;r<i;r+=1){var a=e[r];n.push([`L`,a.x,a.y])}t&&n.push([`Z`])}return n}function dh(e,t){for(var n=[e[0]],r=1,i=e.length;r<i;r+=2){var a=t.convert({x:e[r],y:e[r+1]});n.push(a.x,a.y)}return n}function fh(e,t){var n=t.isTransposed,r=e[1],i=e[6],a=e[7],o=t.convert({x:i,y:a});return[`A`,r,r,0,0,n?0:1,o.x,o.y]}function ph(e,t,n){var r=n.isTransposed,i=n.startAngle,a=n.endAngle,o=e[0].toLowerCase()===`a`?{x:e[6],y:e[7]}:{x:e[1],y:e[2]},s={x:t[1],y:t[2]},c=[],l=r?`y`:`x`,u=Math.abs(s[l]-o[l])*(a-i),d=s[l]>=o[l]?1:0,f=u>Math.PI?1:0,p=n.convert(s),m=Am(n,p);if(m>=.5)if(u===Math.PI*2){var h={x:(s.x+o.x)/2,y:(s.y+o.y)/2},g=n.convert(h);c.push([`A`,m,m,0,f,d,g.x,g.y]),c.push([`A`,m,m,0,f,d,p.x,p.y])}else c.push([`A`,m,m,0,f,d,p.x,p.y]);return c}function mh(e){F(e,function(t,n){if(t[0].toLowerCase()===`a`){var r=e[n-1],i=e[n+1];i&&i[0].toLowerCase()===`a`?r&&r[0].toLowerCase()===`l`&&(r[0]=`M`):r&&r[0].toLowerCase()===`a`&&i&&i[0].toLowerCase()===`l`&&(i[0]=`M`)}})}var hh=function(e,t,n,r){var i,o=[],s=!!r,c,l,u,d,_,v,y;if(s){i=a(r,2),u=i[0],d=i[1];for(var b=0,x=e.length;b<x;b++){var S=e[b];u=h([0,0],u,S),d=m([0,0],d,S)}}for(var b=0,w=e.length;b<w;b++){var S=e[b];if(b===0&&!n)y=S;else if(b===w-1&&!n)v=S,o.push(y),o.push(v);else{c=e[n?b?b-1:w-1:b-1],l=e[n?(b+1)%w:b+1];var T=[0,0];T=f(T,l,c),T=g(T,T,t);var E=p(S,c),D=p(S,l),O=E+D;O!==0&&(E/=O,D/=O);var k=g([0,0],T,-E),A=g([0,0],T,D);v=C([0,0],S,k),_=C([0,0],S,A),_=h([0,0],_,m([0,0],l,S)),_=m([0,0],_,h([0,0],l,S)),k=f([0,0],_,S),k=g([0,0],k,-E/D),v=C([0,0],S,k),v=h([0,0],v,m([0,0],c,S)),v=m([0,0],v,h([0,0],c,S)),A=f([0,0],S,v),A=g([0,0],A,D/E),_=C([0,0],S,A),s&&(v=m([0,0],v,u),v=h([0,0],v,d),_=m([0,0],_,u),_=h([0,0],_,d)),o.push(y),o.push(v),y=_}}return n&&o.push(o.shift()),o};function gh(e,t,n){for(var r=!!t,i=[],a=0,o=e.length;a<o;a+=2)i.push([e[a],e[a+1]]);for(var s=hh(i,.4,r,n),c=i.length,l=[],u,d,f,a=0;a<c-1;a++)u=s[a*2],d=s[a*2+1],f=i[a+1],l.push([`C`,u[0],u[1],d[0],d[1],f[0],f[1]]);return r&&(u=s[c],d=s[c+1],f=i[0],l.push([`C`,u[0],u[1],d[0],d[1],f[0],f[1]])),l}function _h(e,t){return uh(e,t)}function vh(e,t,n){var r=[],i=e[0],a=null;if(e.length<=2)return _h(e,t);for(var o=0,s=e.length;o<s;o++){var c=e[o];(!a||!(a.x===c.x&&a.y===c.y))&&(r.push(c.x),r.push(c.y),a=c)}var l=gh(r,t,n||[[0,0],[1,1]]);return l.unshift([`M`,i.x,i.y]),l}function yh(e,t){var n=[];return F(t,function(t){switch(t[0].toLowerCase()){case`m`:case`l`:case`c`:n.push(dh(t,e));break;case`a`:n.push(fh(t,e));break;case`z`:default:n.push(t);break}}),n}function bh(e,t){var n=[],r,i,a,o;return F(t,function(s,c){switch(s[0].toLowerCase()){case`m`:case`c`:case`q`:n.push(dh(s,e));break;case`l`:r=t[c-1],i=s,a=e.isTransposed,o=a?r[r.length-2]===i[1]:r[r.length-1]===i[2],o?n=n.concat(ph(r,i,e)):n.push(dh(s,e));break;case`a`:n.push(fh(s,e));break;case`z`:default:n.push(s);break}}),mh(n),n}function xh(e,t){var n=e.event.target;return Ch(n,t)}function Sh(e,t){var n=e.getCanvasBBox(),r=n.width,i=n.height;return r>0&&i>0&&(r>=t||i>=t)}function Ch(e,t){var n=e.getCanvasBBox();return Sh(e,t)?n:null}function wh(e,t){return e.event.maskShapes.map(function(e){return Ch(e,t)}).filter(function(e){return!!e})}function Th(e,t){var n=e.event.target;return Eh(n,t)}function Eh(e,t){return Sh(e,t)?e.attr(`path`):null}function Dh(e,t){return e.event.maskShapes.map(function(e){return Eh(e,t)})}function Oh(e){var t=e.event,n,r=t.target;return r&&(n=r.get(`element`)),n}function kh(e){var t=e.event.target,n;return t&&(n=t.get(`delegateObject`)),n}function Ah(e){var t=e.event.gEvent;return!(t&&t.fromShape&&t.toShape&&t.fromShape.get(`element`)===t.toShape.get(`element`))}function jh(e){return e&&e.component&&e.component.isList()}function Mh(e){return e&&e.component&&e.component.isSlider()}function Nh(e){var t=e.event.target;return t&&t?.get(`name`)===`mask`||Ph(e)}function Ph(e){return e.event.target?.get(`name`)===`multi-mask`}function Fh(e,t){var n=e.event.target;if(Ph(e))return Ih(e,t);if(n.get(`type`)===`path`){var r=Th(e,t);return r?qh(e.view,r):void 0}var i=xh(e,t);return i?Gh(e.view,i):null}function Ih(e,t){if(e.event.target.get(`type`)===`path`){var n=Dh(e,t);return n.length>0?n.flatMap(function(t){return qh(e.view,t)}):null}var r=wh(e,t);return r.length>0?r.flatMap(function(t){return Gh(e.view,t)}):null}function Lh(e,t,n){if(Ph(e))return zh(e,t,n);var r=xh(e,n);return r?Rh(r,e,t):null}function Rh(e,t,n){var r=t.view,i=eg(r,n,{x:e.x,y:e.y}),a=eg(r,n,{x:e.maxX,y:e.maxY}),o={minX:i.x,minY:i.y,maxX:a.x,maxY:a.y};return Gh(n,o)}function zh(e,t,n){var r=wh(e,n);return r.length>0?r.flatMap(function(n){return Rh(n,e,t)}):null}function Bh(e){var t=e.geometries,n=[];return F(t,function(e){var t=e.elements;n=n.concat(t)}),e.views&&e.views.length&&F(e.views,function(e){n=n.concat(Bh(e))}),n}function Vh(e,t,n){return Bh(e).filter(function(e){return Uh(e,t)===n})}function Hh(e,t){var n=e.geometries,r=[];return F(n,function(e){var n=e.getElementsBy(function(e){return e.hasState(t)});r=r.concat(n)}),e.views&&e.views.length&&F(e.views,function(e){r.push.apply(r,s([],a(Hh(e,t)),!1))}),r}function Uh(e,t){var n=e.getModel().data;return N(n)?n[0][t]:n[t]}function Wh(e,t){return!(t.minX>e.maxX||t.maxX<e.minX||t.minY>e.maxY||t.maxY<e.minY)}function Gh(e,t){var n=Bh(e),r=[];return F(n,function(e){var n=e.shape.getCanvasBBox();Wh(t,n)&&r.push(e)}),r}function Kh(e){var t=[];return F(e,function(e){if(e[0]!==`A`)for(var n=1;n<e.length;n+=2)t.push([e[n],e[n+1]]);else{var r=e.length;t.push([e[r-2],e[r-1]])}}),t}function qh(e,t){var n=Bh(e),r=Kh(t);return n.filter(function(e){var t=e.shape,n;if(t.get(`type`)===`path`)n=Kh(t.attr(`path`));else{var i=t.getCanvasBBox();n=Dm(i)}return wc(r,n)})}function Jh(e){return e.getComponents().map(function(e){return e.component})}function Yh(e,t){var n=t.x-e.x,r=t.y-e.y;return Math.sqrt(n*n+r*r)}function Xh(e,t){if(e.length<=2)return _h(e,!1);var n=e[0],r=[];F(e,function(e){r.push(e.x),r.push(e.y)});var i=gh(r,t,null);return i.unshift([`M`,n.x,n.y]),i}function Zh(e,t){return e.x<=t.x&&e.maxX>=t.x&&e.y<=t.y&&e.maxY>t.y}function Qh(e){var t=e.parent,n=null;return t&&(n=t.views.filter(function(t){return t!==e})),n}function $h(e,t){return e.getCoordinate().invert(t)}function eg(e,t,n){var r=$h(e,n);return t.getCoordinate().convert(r)}function tg(e,t,n,r){var i=!1;return F(e,function(e){if(e[n]===t[n]&&e[r]===t[r])return i=!0,!1}),i}function ng(e,t){var n=e.getScaleByField(t);return!n&&e.views&&F(e.views,function(e){if(n=ng(e,t),n)return!1}),n}var rg=function(){function e(e){this.actions=[],this.event=null,this.cacheMap={},this.view=e}return e.prototype.cache=function(){var e=[...arguments];if(e.length===1)return this.cacheMap[e[0]];e.length===2&&(this.cacheMap[e[0]]=e[1])},e.prototype.getAction=function(e){return this.actions.find(function(t){return t.name===e})},e.prototype.addAction=function(e){this.actions.push(e)},e.prototype.removeAction=function(e){var t=this.actions,n=this.actions.indexOf(e);n>=0&&t.splice(n,1)},e.prototype.getCurrentPoint=function(){var e=this.event;return e?e.target instanceof HTMLElement?this.view.getCanvas().getPointByClient(e.clientX,e.clientY):{x:e.x,y:e.y}:null},e.prototype.getCurrentShape=function(){return z(this.event,[`gEvent`,`shape`])},e.prototype.isInPlot=function(){var e=this.getCurrentPoint();return e?this.view.isPointInPlot(e):!1},e.prototype.isInShape=function(e){var t=this.getCurrentShape();return t?t.get(`name`)===e:!1},e.prototype.isInComponent=function(e){var t=Jh(this.view),n=this.getCurrentPoint();return n?!!t.find(function(t){var r=t.getBBox();return e?t.get(`name`)===e&&Zh(r,n):Zh(r,n)}):!1},e.prototype.destroy=function(){F(this.actions.slice(),function(e){e.destroy()}),this.view=null,this.event=null,this.actions=null,this.cacheMap=null},e}(),ig=function(){function e(e,t){this.view=e,this.cfg=t}return e.prototype.init=function(){this.initEvents()},e.prototype.initEvents=function(){},e.prototype.clearEvents=function(){},e.prototype.destroy=function(){this.clearEvents()},e}();function ag(e,t,n){var r=e.split(`:`),i=r[0],a=t.getAction(i)||sh(i,t);if(!a)throw Error(`There is no action named ${i}`);var o=r[1];return{action:a,methodName:o,arg:n}}function og(e){var t=e.action,n=e.methodName,r=e.arg;if(t[n])t[n](r);else throw Error(`Action(${t.name}) doesn't have a method called ${n}`)}var sg={START:`start`,SHOW_ENABLE:`showEnable`,END:`end`,ROLLBACK:`rollback`,PROCESSING:`processing`},cg=function(e){l(t,e);function t(t,n){var r=e.call(this,t,n)||this;return r.callbackCaches={},r.emitCaches={},r.steps=n,r}return t.prototype.init=function(){this.initContext(),e.prototype.init.call(this)},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.steps=null,this.context&&=(this.context.destroy(),null),this.callbackCaches=null,this.view=null},t.prototype.initEvents=function(){var e=this;F(this.steps,function(t,n){F(t,function(t){var r=e.getActionCallback(n,t);r&&e.bindEvent(t.trigger,r)})})},t.prototype.clearEvents=function(){var e=this;F(this.steps,function(t,n){F(t,function(t){var r=e.getActionCallback(n,t);r&&e.offEvent(t.trigger,r)})})},t.prototype.initContext=function(){var e=this.view,t=new rg(e);this.context=t;var n=this.steps;F(n,function(e){F(e,function(e){if(j(e.action))e.actionObject={action:lh(e.action,t),methodName:`execute`};else if(I(e.action))e.actionObject=ag(e.action,t,e.arg);else if(N(e.action)){var n=e.action,r=N(e.arg)?e.arg:[e.arg];e.actionObject=[],F(n,function(n,i){e.actionObject.push(ag(n,t,r[i]))})}})})},t.prototype.isAllowStep=function(e){var t=this.currentStepName,n=this.steps;if(t===e||e===sg.SHOW_ENABLE)return!0;if(e===sg.PROCESSING)return t===sg.START;if(e===sg.START)return t!==sg.PROCESSING;if(e===sg.END)return t===sg.PROCESSING||t===sg.START;if(e===sg.ROLLBACK){if(n[sg.END])return t===sg.END;if(t===sg.START)return!0}return!1},t.prototype.isAllowExecute=function(e,t){if(this.isAllowStep(e)){var n=this.getKey(e,t);return t.once&&this.emitCaches[n]?!1:t.isEnable?t.isEnable(this.context):!0}return!1},t.prototype.enterStep=function(e){this.currentStepName=e,this.emitCaches={}},t.prototype.afterExecute=function(e,t){e!==sg.SHOW_ENABLE&&this.currentStepName!==e&&this.enterStep(e);var n=this.getKey(e,t);this.emitCaches[n]=!0},t.prototype.getKey=function(e,t){return e+t.trigger+t.action},t.prototype.getActionCallback=function(e,t){var n=this,r=this.context,i=this.callbackCaches,a=t.actionObject;if(t.action&&a){var o=this.getKey(e,t);if(!i[o]){var s=function(i){r.event=i,n.isAllowExecute(e,t)?(N(a)?F(a,function(e){r.event=i,og(e)}):(r.event=i,og(a)),n.afterExecute(e,t),t.callback&&(r.event=i,t.callback(r))):r.event=null};t.debounce?i[o]=mt(s,t.debounce.wait,t.debounce.immediate):t.throttle?i[o]=jt(s,t.throttle.wait,{leading:t.throttle.leading,trailing:t.throttle.trailing}):i[o]=s}return i[o]}return null},t.prototype.bindEvent=function(e,t){var n=e.split(`:`);n[0]===`window`?window.addEventListener(n[1],t):n[0]===`document`?document.addEventListener(n[1],t):this.view.on(e,t)},t.prototype.offEvent=function(e,t){var n=e.split(`:`);n[0]===`window`?window.removeEventListener(n[1],t):n[0]===`document`?document.removeEventListener(n[1],t):this.view.off(e,t)},t}(ig),lg={};function ug(e){return lg[Je(e)]}function W(e,t){lg[Je(e)]=t}function dg(e,t,n){var r=ug(e);if(!r)return null;if(se(r)){var i=ut(ft(r),n);return new cg(t,i)}else return new r(t,n)}function fg(e){return{title:{autoRotate:!0,position:`center`,spacing:e.axisTitleSpacing,style:{fill:e.axisTitleTextFillColor,fontSize:e.axisTitleTextFontSize,lineHeight:e.axisTitleTextLineHeight,textBaseline:`middle`,fontFamily:e.fontFamily},iconStyle:{fill:e.axisDescriptionIconFillColor}},label:{autoRotate:!1,autoEllipsis:!1,autoHide:{type:`equidistance`,cfg:{minGap:6}},offset:e.axisLabelOffset,style:{fill:e.axisLabelFillColor,fontSize:e.axisLabelFontSize,lineHeight:e.axisLabelLineHeight,fontFamily:e.fontFamily}},line:{style:{lineWidth:e.axisLineBorder,stroke:e.axisLineBorderColor}},grid:{line:{type:`line`,style:{stroke:e.axisGridBorderColor,lineWidth:e.axisGridBorder,lineDash:e.axisGridLineDash}},alignTick:!0,animate:!0},tickLine:{style:{lineWidth:e.axisTickLineBorder,stroke:e.axisTickLineBorderColor},alignTick:!0,length:e.axisTickLineLength},subTickLine:null,animate:!0}}function pg(e){return{title:null,marker:{symbol:`circle`,spacing:e.legendMarkerSpacing,style:{r:e.legendCircleMarkerSize,fill:e.legendMarkerColor}},itemName:{spacing:5,style:{fill:e.legendItemNameFillColor,fontFamily:e.fontFamily,fontSize:e.legendItemNameFontSize,lineHeight:e.legendItemNameLineHeight,fontWeight:e.legendItemNameFontWeight,textAlign:`start`,textBaseline:`middle`}},itemStates:{active:{nameStyle:{opacity:.8}},unchecked:{nameStyle:{fill:`#D8D8D8`},markerStyle:{fill:`#D8D8D8`,stroke:`#D8D8D8`}},inactive:{nameStyle:{fill:`#D8D8D8`},markerStyle:{opacity:.2}}},flipPage:!0,pageNavigator:{marker:{style:{size:e.legendPageNavigatorMarkerSize,inactiveFill:e.legendPageNavigatorMarkerInactiveFillColor,inactiveOpacity:e.legendPageNavigatorMarkerInactiveFillOpacity,fill:e.legendPageNavigatorMarkerFillColor,opacity:e.legendPageNavigatorMarkerFillOpacity}},text:{style:{fill:e.legendPageNavigatorTextFillColor,fontSize:e.legendPageNavigatorTextFontSize}}},animate:!1,maxItemWidth:200,itemSpacing:e.legendItemSpacing,itemMarginBottom:e.legendItemMarginBottom,padding:e.legendPadding}}function mg(e){var t,n={point:{default:{fill:e.pointFillColor,r:e.pointSize,stroke:e.pointBorderColor,lineWidth:e.pointBorder,fillOpacity:e.pointFillOpacity},active:{stroke:e.pointActiveBorderColor,lineWidth:e.pointActiveBorder},selected:{stroke:e.pointSelectedBorderColor,lineWidth:e.pointSelectedBorder},inactive:{fillOpacity:e.pointInactiveFillOpacity,strokeOpacity:e.pointInactiveBorderOpacity}},hollowPoint:{default:{fill:e.hollowPointFillColor,lineWidth:e.hollowPointBorder,stroke:e.hollowPointBorderColor,strokeOpacity:e.hollowPointBorderOpacity,r:e.hollowPointSize},active:{stroke:e.hollowPointActiveBorderColor,strokeOpacity:e.hollowPointActiveBorderOpacity},selected:{lineWidth:e.hollowPointSelectedBorder,stroke:e.hollowPointSelectedBorderColor,strokeOpacity:e.hollowPointSelectedBorderOpacity},inactive:{strokeOpacity:e.hollowPointInactiveBorderOpacity}},area:{default:{fill:e.areaFillColor,fillOpacity:e.areaFillOpacity,stroke:null},active:{fillOpacity:e.areaActiveFillOpacity},selected:{fillOpacity:e.areaSelectedFillOpacity},inactive:{fillOpacity:e.areaInactiveFillOpacity}},hollowArea:{default:{fill:null,stroke:e.hollowAreaBorderColor,lineWidth:e.hollowAreaBorder,strokeOpacity:e.hollowAreaBorderOpacity},active:{fill:null,lineWidth:e.hollowAreaActiveBorder},selected:{fill:null,lineWidth:e.hollowAreaSelectedBorder},inactive:{strokeOpacity:e.hollowAreaInactiveBorderOpacity}},interval:{default:{fill:e.intervalFillColor,fillOpacity:e.intervalFillOpacity},active:{stroke:e.intervalActiveBorderColor,lineWidth:e.intervalActiveBorder},selected:{stroke:e.intervalSelectedBorderColor,lineWidth:e.intervalSelectedBorder},inactive:{fillOpacity:e.intervalInactiveFillOpacity,strokeOpacity:e.intervalInactiveBorderOpacity}},hollowInterval:{default:{fill:e.hollowIntervalFillColor,stroke:e.hollowIntervalBorderColor,lineWidth:e.hollowIntervalBorder,strokeOpacity:e.hollowIntervalBorderOpacity},active:{stroke:e.hollowIntervalActiveBorderColor,lineWidth:e.hollowIntervalActiveBorder,strokeOpacity:e.hollowIntervalActiveBorderOpacity},selected:{stroke:e.hollowIntervalSelectedBorderColor,lineWidth:e.hollowIntervalSelectedBorder,strokeOpacity:e.hollowIntervalSelectedBorderOpacity},inactive:{stroke:e.hollowIntervalInactiveBorderColor,lineWidth:e.hollowIntervalInactiveBorder,strokeOpacity:e.hollowIntervalInactiveBorderOpacity}},line:{default:{stroke:e.lineBorderColor,lineWidth:e.lineBorder,strokeOpacity:e.lineBorderOpacity,fill:null,lineAppendWidth:10,lineCap:`round`,lineJoin:`round`},active:{lineWidth:e.lineActiveBorder},selected:{lineWidth:e.lineSelectedBorder},inactive:{strokeOpacity:e.lineInactiveBorderOpacity}}},r=fg(e),i=pg(e);return{background:e.backgroundColor,defaultColor:e.brandColor,subColor:e.subColor,semanticRed:e.paletteSemanticRed,semanticGreen:e.paletteSemanticGreen,padding:`auto`,fontFamily:e.fontFamily,columnWidthRatio:1/2,maxColumnWidth:null,minColumnWidth:null,roseWidthRatio:.9999999,multiplePieWidthRatio:1/1.3,colors10:e.paletteQualitative10,colors20:e.paletteQualitative20,sequenceColors:e.paletteSequence,shapes:{point:[`hollow-circle`,`hollow-square`,`hollow-bowtie`,`hollow-diamond`,`hollow-hexagon`,`hollow-triangle`,`hollow-triangle-down`,`circle`,`square`,`bowtie`,`diamond`,`hexagon`,`triangle`,`triangle-down`,`cross`,`tick`,`plus`,`hyphen`,`line`],line:[`line`,`dash`,`dot`,`smooth`],area:[`area`,`smooth`,`line`,`smooth-line`],interval:[`rect`,`hollow-rect`,`line`,`tick`]},sizes:[1,10],geometries:{interval:{rect:{default:{style:n.interval.default},active:{style:n.interval.active},inactive:{style:n.interval.inactive},selected:{style:function(e){var t=e.geometry.coordinate;if(t.isPolar&&t.isTransposed){var r=ym(e.getModel(),t),i=r.startAngle,a=r.endAngle,o=(i+a)/2,s=7.5,c=s*Math.cos(o),l=s*Math.sin(o);return{matrix:Ir(null,[[`t`,c,l]])}}return n.interval.selected}}},"hollow-rect":{default:{style:n.hollowInterval.default},active:{style:n.hollowInterval.active},inactive:{style:n.hollowInterval.inactive},selected:{style:n.hollowInterval.selected}},line:{default:{style:n.hollowInterval.default},active:{style:n.hollowInterval.active},inactive:{style:n.hollowInterval.inactive},selected:{style:n.hollowInterval.selected}},tick:{default:{style:n.hollowInterval.default},active:{style:n.hollowInterval.active},inactive:{style:n.hollowInterval.inactive},selected:{style:n.hollowInterval.selected}},funnel:{default:{style:n.interval.default},active:{style:n.interval.active},inactive:{style:n.interval.inactive},selected:{style:n.interval.selected}},pyramid:{default:{style:n.interval.default},active:{style:n.interval.active},inactive:{style:n.interval.inactive},selected:{style:n.interval.selected}}},line:{line:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}},dot:{default:{style:_(_({},n.line.default),{lineCap:null,lineDash:[1,1]})},active:{style:_(_({},n.line.active),{lineCap:null,lineDash:[1,1]})},inactive:{style:_(_({},n.line.inactive),{lineCap:null,lineDash:[1,1]})},selected:{style:_(_({},n.line.selected),{lineCap:null,lineDash:[1,1]})}},dash:{default:{style:_(_({},n.line.default),{lineCap:null,lineDash:[5.5,1]})},active:{style:_(_({},n.line.active),{lineCap:null,lineDash:[5.5,1]})},inactive:{style:_(_({},n.line.inactive),{lineCap:null,lineDash:[5.5,1]})},selected:{style:_(_({},n.line.selected),{lineCap:null,lineDash:[5.5,1]})}},smooth:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}},hv:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}},vh:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}},hvh:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}},vhv:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}}},polygon:{polygon:{default:{style:n.interval.default},active:{style:n.interval.active},inactive:{style:n.interval.inactive},selected:{style:n.interval.selected}}},point:{circle:{default:{style:n.point.default},active:{style:n.point.active},inactive:{style:n.point.inactive},selected:{style:n.point.selected}},square:{default:{style:n.point.default},active:{style:n.point.active},inactive:{style:n.point.inactive},selected:{style:n.point.selected}},bowtie:{default:{style:n.point.default},active:{style:n.point.active},inactive:{style:n.point.inactive},selected:{style:n.point.selected}},diamond:{default:{style:n.point.default},active:{style:n.point.active},inactive:{style:n.point.inactive},selected:{style:n.point.selected}},hexagon:{default:{style:n.point.default},active:{style:n.point.active},inactive:{style:n.point.inactive},selected:{style:n.point.selected}},triangle:{default:{style:n.point.default},active:{style:n.point.active},inactive:{style:n.point.inactive},selected:{style:n.point.selected}},"triangle-down":{default:{style:n.point.default},active:{style:n.point.active},inactive:{style:n.point.inactive},selected:{style:n.point.selected}},"hollow-circle":{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}},"hollow-square":{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}},"hollow-bowtie":{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}},"hollow-diamond":{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}},"hollow-hexagon":{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}},"hollow-triangle":{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}},"hollow-triangle-down":{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}},cross:{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}},tick:{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}},plus:{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}},hyphen:{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}},line:{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}}},area:{area:{default:{style:n.area.default},active:{style:n.area.active},inactive:{style:n.area.inactive},selected:{style:n.area.selected}},smooth:{default:{style:n.area.default},active:{style:n.area.active},inactive:{style:n.area.inactive},selected:{style:n.area.selected}},line:{default:{style:n.hollowArea.default},active:{style:n.hollowArea.active},inactive:{style:n.hollowArea.inactive},selected:{style:n.hollowArea.selected}},"smooth-line":{default:{style:n.hollowArea.default},active:{style:n.hollowArea.active},inactive:{style:n.hollowArea.inactive},selected:{style:n.hollowArea.selected}}},schema:{candle:{default:{style:n.hollowInterval.default},active:{style:n.hollowInterval.active},inactive:{style:n.hollowInterval.inactive},selected:{style:n.hollowInterval.selected}},box:{default:{style:n.hollowInterval.default},active:{style:n.hollowInterval.active},inactive:{style:n.hollowInterval.inactive},selected:{style:n.hollowInterval.selected}}},edge:{line:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}},vhv:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}},smooth:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}},arc:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}}},violin:{violin:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}},smooth:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}},hollow:{default:{style:n.hollowArea.default},active:{style:n.hollowArea.active},inactive:{style:n.hollowArea.inactive},selected:{style:n.hollowArea.selected}},"hollow-smooth":{default:{style:n.hollowArea.default},active:{style:n.hollowArea.active},inactive:{style:n.hollowArea.inactive},selected:{style:n.hollowArea.selected}}}},components:{axis:{common:r,top:{position:`top`,grid:null,title:null,verticalLimitLength:1/2},bottom:{position:`bottom`,grid:null,title:null,verticalLimitLength:1/2},left:{position:`left`,title:null,line:null,tickLine:null,verticalLimitLength:1/3},right:{position:`right`,title:null,line:null,tickLine:null,verticalLimitLength:1/3},circle:{title:null,grid:R({},r.grid,{line:{type:`line`}})},radius:{title:null,grid:R({},r.grid,{line:{type:`circle`}})}},legend:{common:i,right:{layout:`vertical`,padding:e.legendVerticalPadding},left:{layout:`vertical`,padding:e.legendVerticalPadding},top:{layout:`horizontal`,padding:e.legendHorizontalPadding},bottom:{layout:`horizontal`,padding:e.legendHorizontalPadding},continuous:{title:null,background:null,track:{},rail:{type:`color`,size:e.sliderRailHeight,defaultLength:e.sliderRailWidth,style:{fill:e.sliderRailFillColor,stroke:e.sliderRailBorderColor,lineWidth:e.sliderRailBorder}},label:{align:`rail`,spacing:4,formatter:null,style:{fill:e.sliderLabelTextFillColor,fontSize:e.sliderLabelTextFontSize,lineHeight:e.sliderLabelTextLineHeight,textBaseline:`middle`,fontFamily:e.fontFamily}},handler:{size:e.sliderHandlerWidth,style:{fill:e.sliderHandlerFillColor,stroke:e.sliderHandlerBorderColor}},slidable:!0,padding:i.padding}},tooltip:{showContent:!0,follow:!0,showCrosshairs:!1,showMarkers:!0,shared:!1,enterable:!1,position:`auto`,marker:{symbol:`circle`,stroke:`#fff`,shadowBlur:10,shadowOffsetX:0,shadowOffsetY:0,shadowColor:`rgba(0,0,0,0.09)`,lineWidth:2,r:4},crosshairs:{line:{style:{stroke:e.tooltipCrosshairsBorderColor,lineWidth:e.tooltipCrosshairsBorder}},text:null,textBackground:{padding:2,style:{fill:`rgba(0, 0, 0, 0.25)`,lineWidth:0,stroke:null}},follow:!1},domStyles:(t={},t[`${wp}`]={position:`absolute`,visibility:`hidden`,zIndex:8,transition:`left 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s, top 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s`,backgroundColor:e.tooltipContainerFillColor,opacity:e.tooltipContainerFillOpacity,boxShadow:e.tooltipContainerShadow,borderRadius:`${e.tooltipContainerBorderRadius}px`,color:e.tooltipTextFillColor,fontSize:`${e.tooltipTextFontSize}px`,fontFamily:e.fontFamily,lineHeight:`${e.tooltipTextLineHeight}px`,padding:`0 12px 0 12px`},t[`${Tp}`]={marginBottom:`12px`,marginTop:`12px`},t[`${Ep}`]={margin:0,listStyleType:`none`,padding:0},t[`${Dp}`]={listStyleType:`none`,padding:0,marginBottom:`12px`,marginTop:`12px`,marginLeft:0,marginRight:0},t[`${Op}`]={width:`8px`,height:`8px`,borderRadius:`50%`,display:`inline-block`,marginRight:`8px`},t[`${kp}`]={display:`inline-block`,float:`right`,marginLeft:`30px`},t)},annotation:{arc:{style:{stroke:e.annotationArcBorderColor,lineWidth:e.annotationArcBorder},animate:!0},line:{style:{stroke:e.annotationLineBorderColor,lineDash:e.annotationLineDash,lineWidth:e.annotationLineBorder},text:{position:`start`,autoRotate:!0,style:{fill:e.annotationTextFillColor,stroke:e.annotationTextBorderColor,lineWidth:e.annotationTextBorder,fontSize:e.annotationTextFontSize,textAlign:`start`,fontFamily:e.fontFamily,textBaseline:`bottom`}},animate:!0},text:{style:{fill:e.annotationTextFillColor,stroke:e.annotationTextBorderColor,lineWidth:e.annotationTextBorder,fontSize:e.annotationTextFontSize,textBaseline:`middle`,textAlign:`start`,fontFamily:e.fontFamily},animate:!0},region:{top:!1,style:{lineWidth:e.annotationRegionBorder,stroke:e.annotationRegionBorderColor,fill:e.annotationRegionFillColor,fillOpacity:e.annotationRegionFillOpacity},animate:!0},image:{top:!1,animate:!0},dataMarker:{top:!0,point:{style:{r:3,stroke:e.brandColor,lineWidth:2}},line:{style:{stroke:e.annotationLineBorderColor,lineWidth:e.annotationLineBorder},length:e.annotationDataMarkerLineLength},text:{style:{textAlign:`start`,fill:e.annotationTextFillColor,stroke:e.annotationTextBorderColor,lineWidth:e.annotationTextBorder,fontSize:e.annotationTextFontSize,fontFamily:e.fontFamily}},direction:`upward`,autoAdjust:!0,animate:!0},dataRegion:{style:{region:{fill:e.annotationRegionFillColor,fillOpacity:e.annotationRegionFillOpacity},text:{textAlign:`center`,textBaseline:`bottom`,fill:e.annotationTextFillColor,stroke:e.annotationTextBorderColor,lineWidth:e.annotationTextBorder,fontSize:e.annotationTextFontSize,fontFamily:e.fontFamily}},animate:!0}},slider:{common:{padding:[8,8,8,8],backgroundStyle:{fill:e.cSliderBackgroundFillColor,opacity:e.cSliderBackgroundFillOpacity},foregroundStyle:{fill:e.cSliderForegroundFillColor,opacity:e.cSliderForegroundFillOpacity},handlerStyle:{width:e.cSliderHandlerWidth,height:e.cSliderHandlerHeight,fill:e.cSliderHandlerFillColor,opacity:e.cSliderHandlerFillOpacity,stroke:e.cSliderHandlerBorderColor,lineWidth:e.cSliderHandlerBorder,radius:e.cSliderHandlerBorderRadius,highLightFill:e.cSliderHandlerHighlightFillColor},textStyle:{fill:e.cSliderTextFillColor,opacity:e.cSliderTextFillOpacity,fontSize:e.cSliderTextFontSize,lineHeight:e.cSliderTextLineHeight,fontWeight:e.cSliderTextFontWeight,stroke:e.cSliderTextBorderColor,lineWidth:e.cSliderTextBorder}}},scrollbar:{common:{padding:[8,8,8,8]},default:{style:{trackColor:e.scrollbarTrackFillColor,thumbColor:e.scrollbarThumbFillColor}},hover:{style:{thumbColor:e.scrollbarThumbHighlightFillColor}}}},labels:{offset:12,style:{fill:e.labelFillColor,fontSize:e.labelFontSize,fontFamily:e.fontFamily,stroke:e.labelBorderColor,lineWidth:e.labelBorder},fillColorDark:e.labelFillColorDark,fillColorLight:e.labelFillColorLight,autoRotate:!0},innerLabels:{style:{fill:e.innerLabelFillColor,fontSize:e.innerLabelFontSize,fontFamily:e.fontFamily,stroke:e.innerLabelBorderColor,lineWidth:e.innerLabelBorder},autoRotate:!0},overflowLabels:{style:{fill:e.overflowLabelFillColor,fontSize:e.overflowLabelFontSize,fontFamily:e.fontFamily,stroke:e.overflowLabelBorderColor,lineWidth:e.overflowLabelBorder}},pieLabels:{labelHeight:14,offset:10,labelLine:{style:{lineWidth:e.labelLineBorder}},autoRotate:!0}}}var G={100:`#000`,95:`#0D0D0D`,85:`#262626`,65:`#595959`,45:`#8C8C8C`,25:`#BFBFBF`,15:`#D9D9D9`,6:`#F0F0F0`},hg={100:`#FFFFFF`,95:`#F2F2F2`,85:`#D9D9D9`,65:`#A6A6A6`,45:`#737373`,25:`#404040`,15:`#262626`,6:`#0F0F0F`},gg=[`#5B8FF9`,`#5AD8A6`,`#5D7092`,`#F6BD16`,`#6F5EF9`,`#6DC8EC`,`#945FB9`,`#FF9845`,`#1E9493`,`#FF99C3`],_g=[`#5B8FF9`,`#CDDDFD`,`#5AD8A6`,`#CDF3E4`,`#5D7092`,`#CED4DE`,`#F6BD16`,`#FCEBB9`,`#6F5EF9`,`#D3CEFD`,`#6DC8EC`,`#D3EEF9`,`#945FB9`,`#DECFEA`,`#FF9845`,`#FFE0C7`,`#1E9493`,`#BBDEDE`,`#FF99C3`,`#FFE0ED`],vg=[`#B8E1FF`,`#9AC5FF`,`#7DAAFF`,`#5B8FF9`,`#3D76DD`,`#085EC0`,`#0047A5`,`#00318A`,`#001D70`],yg=function(e){e===void 0&&(e={});var t=e.paletteQualitative10,n=t===void 0?gg:t,r=e.paletteQualitative20,i=r===void 0?_g:r,a=e.brandColor,o=a===void 0?n[0]:a,s={backgroundColor:`transparent`,brandColor:o,subColor:`rgba(0,0,0,0.05)`,paletteQualitative10:n,paletteQualitative20:i,paletteSemanticRed:`#F4664A`,paletteSemanticGreen:`#30BF78`,paletteSemanticYellow:`#FAAD14`,paletteSequence:vg,fontFamily:`"Segoe UI", Roboto, "Helvetica Neue", Arial,
    "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol",
    "Noto Color Emoji"`,axisLineBorderColor:G[25],axisLineBorder:1,axisLineDash:null,axisTitleTextFillColor:G[65],axisTitleTextFontSize:12,axisTitleTextLineHeight:12,axisTitleTextFontWeight:`normal`,axisTitleSpacing:12,axisDescriptionIconFillColor:hg[85],axisTickLineBorderColor:G[25],axisTickLineLength:4,axisTickLineBorder:1,axisSubTickLineBorderColor:G[15],axisSubTickLineLength:2,axisSubTickLineBorder:1,axisLabelFillColor:G[45],axisLabelFontSize:12,axisLabelLineHeight:12,axisLabelFontWeight:`normal`,axisLabelOffset:8,axisGridBorderColor:G[15],axisGridBorder:1,axisGridLineDash:null,legendTitleTextFillColor:G[45],legendTitleTextFontSize:12,legendTitleTextLineHeight:21,legendTitleTextFontWeight:`normal`,legendMarkerColor:o,legendMarkerSpacing:8,legendMarkerSize:4,legendCircleMarkerSize:4,legendSquareMarkerSize:4,legendLineMarkerSize:5,legendItemNameFillColor:G[65],legendItemNameFontSize:12,legendItemNameLineHeight:12,legendItemNameFontWeight:`normal`,legendItemSpacing:24,legendItemMarginBottom:12,legendPadding:[8,8,8,8],legendHorizontalPadding:[8,0,8,0],legendVerticalPadding:[0,8,0,8],legendPageNavigatorMarkerSize:12,legendPageNavigatorMarkerInactiveFillColor:G[100],legendPageNavigatorMarkerInactiveFillOpacity:.45,legendPageNavigatorMarkerFillColor:G[100],legendPageNavigatorMarkerFillOpacity:1,legendPageNavigatorTextFillColor:G[45],legendPageNavigatorTextFontSize:12,sliderRailFillColor:G[15],sliderRailBorder:0,sliderRailBorderColor:null,sliderRailWidth:100,sliderRailHeight:12,sliderLabelTextFillColor:G[45],sliderLabelTextFontSize:12,sliderLabelTextLineHeight:12,sliderLabelTextFontWeight:`normal`,sliderHandlerFillColor:G[6],sliderHandlerWidth:10,sliderHandlerHeight:14,sliderHandlerBorder:1,sliderHandlerBorderColor:G[25],annotationArcBorderColor:G[15],annotationArcBorder:1,annotationLineBorderColor:G[25],annotationLineBorder:1,annotationLineDash:null,annotationTextFillColor:G[65],annotationTextFontSize:12,annotationTextLineHeight:12,annotationTextFontWeight:`normal`,annotationTextBorderColor:null,annotationTextBorder:0,annotationRegionFillColor:G[100],annotationRegionFillOpacity:.06,annotationRegionBorder:0,annotationRegionBorderColor:null,annotationDataMarkerLineLength:16,tooltipCrosshairsBorderColor:G[25],tooltipCrosshairsBorder:1,tooltipCrosshairsLineDash:null,tooltipContainerFillColor:`rgb(255, 255, 255)`,tooltipContainerFillOpacity:.95,tooltipContainerShadow:`0px 0px 10px #aeaeae`,tooltipContainerBorderRadius:3,tooltipTextFillColor:G[65],tooltipTextFontSize:12,tooltipTextLineHeight:12,tooltipTextFontWeight:`bold`,labelFillColor:G[65],labelFillColorDark:`#2c3542`,labelFillColorLight:`#ffffff`,labelFontSize:12,labelLineHeight:12,labelFontWeight:`normal`,labelBorderColor:null,labelBorder:0,innerLabelFillColor:hg[100],innerLabelFontSize:12,innerLabelLineHeight:12,innerLabelFontWeight:`normal`,innerLabelBorderColor:null,innerLabelBorder:0,overflowLabelFillColor:G[65],overflowLabelFontSize:12,overflowLabelLineHeight:12,overflowLabelFontWeight:`normal`,overflowLabelBorderColor:hg[100],overflowLabelBorder:1,labelLineBorder:1,labelLineBorderColor:G[25],cSliderRailHieght:16,cSliderBackgroundFillColor:`#416180`,cSliderBackgroundFillOpacity:.05,cSliderForegroundFillColor:`#5B8FF9`,cSliderForegroundFillOpacity:.15,cSliderHandlerHeight:24,cSliderHandlerWidth:10,cSliderHandlerFillColor:`#F7F7F7`,cSliderHandlerFillOpacity:1,cSliderHandlerHighlightFillColor:`#FFF`,cSliderHandlerBorderColor:`#BFBFBF`,cSliderHandlerBorder:1,cSliderHandlerBorderRadius:2,cSliderTextFillColor:`#000`,cSliderTextFillOpacity:.45,cSliderTextFontSize:12,cSliderTextLineHeight:12,cSliderTextFontWeight:`normal`,cSliderTextBorderColor:null,cSliderTextBorder:0,scrollbarTrackFillColor:`rgba(0,0,0,0)`,scrollbarThumbFillColor:`rgba(0,0,0,0.15)`,scrollbarThumbHighlightFillColor:`rgba(0,0,0,0.2)`,pointFillColor:o,pointFillOpacity:.95,pointSize:4,pointBorder:1,pointBorderColor:hg[100],pointBorderOpacity:1,pointActiveBorderColor:G[100],pointSelectedBorder:2,pointSelectedBorderColor:G[100],pointInactiveFillOpacity:.3,pointInactiveBorderOpacity:.3,hollowPointSize:4,hollowPointBorder:1,hollowPointBorderColor:o,hollowPointBorderOpacity:.95,hollowPointFillColor:hg[100],hollowPointActiveBorder:1,hollowPointActiveBorderColor:G[100],hollowPointActiveBorderOpacity:1,hollowPointSelectedBorder:2,hollowPointSelectedBorderColor:G[100],hollowPointSelectedBorderOpacity:1,hollowPointInactiveBorderOpacity:.3,lineBorder:2,lineBorderColor:o,lineBorderOpacity:1,lineActiveBorder:3,lineSelectedBorder:3,lineInactiveBorderOpacity:.3,areaFillColor:o,areaFillOpacity:.25,areaActiveFillColor:o,areaActiveFillOpacity:.5,areaSelectedFillColor:o,areaSelectedFillOpacity:.5,areaInactiveFillOpacity:.3,hollowAreaBorderColor:o,hollowAreaBorder:2,hollowAreaBorderOpacity:1,hollowAreaActiveBorder:3,hollowAreaActiveBorderColor:G[100],hollowAreaSelectedBorder:3,hollowAreaSelectedBorderColor:G[100],hollowAreaInactiveBorderOpacity:.3,intervalFillColor:o,intervalFillOpacity:.95,intervalActiveBorder:1,intervalActiveBorderColor:G[100],intervalActiveBorderOpacity:1,intervalSelectedBorder:2,intervalSelectedBorderColor:G[100],intervalSelectedBorderOpacity:1,intervalInactiveBorderOpacity:.3,intervalInactiveFillOpacity:.3,hollowIntervalBorder:2,hollowIntervalBorderColor:o,hollowIntervalBorderOpacity:1,hollowIntervalFillColor:hg[100],hollowIntervalActiveBorder:2,hollowIntervalActiveBorderColor:G[100],hollowIntervalSelectedBorder:3,hollowIntervalSelectedBorderColor:G[100],hollowIntervalSelectedBorderOpacity:1,hollowIntervalInactiveBorderOpacity:.3};return _(_({},s),e)};yg();function bg(e){var t=e.styleSheet,n=t===void 0?{}:t,r=o(e,[`styleSheet`]),i=yg(n);return R({},mg(i),r)}var xg={default:bg({})};function Sg(e){return z(xg,Je(e),xg.default)}function Cg(e,t){xg[Je(e)]=bg(t)}function wg(e,t,n){var r=n.translate(e),i=n.translate(t);return Re(r,i)}function Tg(e,t){var n=t.coordinate,r=t.getXScale(),i=r.range,a=i[i.length-1],o=i[0],s=n.invert(e).x;return n.isPolar&&s>(1+a)/2&&(s=o),r.translate(r.invert(s))}function Eg(e,t,n){var r=n.coordinate,i=n.getYScale(),a=i.field,o=r.invert(t),s=i.invert(o.y);return le(e,function(e){var t=e._origin;return t[a][0]<=s&&t[a][1]>=s})||e[e.length-1]}var Dg=ht(function(e){if(e.isCategory)return 1;for(var t=e.values,n=t.length,r=e.translate(t[0]),i=r,a=0;a<n;a++){var o=t[a],s=e.translate(o);s<r&&(r=s),s>i&&(i=s)}return(i-r)/(n-1)});function Og(e,t,n){var r=t.getAttribute(`position`).getFields(),i=t.scales,a=j(n)||!n?r[0]:n,o=i[a],s=o?o.getText(e[a]):e[a]||a;return j(n)?n(s,e):s}function kg(e){var t=Ke(e.attributes);return k(t,function(e){return O(qt,e.type)})}function Ag(e){var t,n,r=kg(e),i;try{for(var a=E(r),o=a.next();!o.done;o=a.next()){var s=o.value,c=s.getScale(s.type);if(c&&c.isLinear){var l=z(e.scaleDefs,c.field);if(Lm(c,l,s.type,e.type)!==`cat`){i=c;break}}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}var u=e.getXScale(),d=e.getYScale();return i||d||u}function jg(e,t){var n=t.field,r=e[n];return N(r)?r.map(function(e){return t.getText(e)}).join(`-`):t.getText(r)}function Mg(e,t){var n,r=t.getGroupScales();if(r.length&&(n=r[0]),n){var i=n.field;return n.getText(e[i])}var a=Ag(t);return Bm(a)}function Ng(e,t,n){if(t.length===0)return null;var r=n.type,i=n.getXScale(),a=n.getYScale(),o=i.field,s=a.field,c=null;if(r===`heatmap`||r===`point`){for(var l=n.coordinate.invert(e),u=i.invert(l.x),d=a.invert(l.y),f=1/0,p=0;p<t.length;p++){var m=t[p],h=m[Jt],g=(h[o]-u)**2+(h[s]-d)**2;g<f&&(f=g,c=m)}return c}var _=t[0],v=t[t.length-1],y=Tg(e,n),b=_[Jt][o],x=_[Jt][s],S=v[Jt][o],C=a.isLinear&&N(x);if(N(b)){for(var p=0;p<t.length;p++){var w=t[p],h=w[Jt];if(i.translate(h[o][0])<=y&&i.translate(h[o][1])>=y)if(C)N(c)||(c=[]),c.push(w);else{c=w;break}}N(c)&&(c=Eg(c,e,n))}else{var T=void 0;if(!i.isLinear&&i.type!==`timeCat`){for(var p=0;p<t.length;p++){var w=t[p],h=w[Jt];if(wg(h[o],y,i))if(C)N(c)||(c=[]),c.push(w);else{c=w;break}else i.translate(h[o])<=y&&(v=w,T=t[p+1])}N(c)&&(c=Eg(c,e,n))}else{if((y>i.translate(S)||y<i.translate(b))&&(y>i.max||y<i.min))return null;for(var E=0,D=t.length-1,O=void 0;E<=D;){O=Math.floor((E+D)/2);var k=t[O][Jt][o];if(wg(k,y,i))return t[O];i.translate(k)<=i.translate(y)?(E=O+1,v=t[O],T=t[O+1]):(D===0&&(v=t[0]),D=O-1)}}v&&T&&Math.abs(i.translate(v._origin[o])-y)>Math.abs(i.translate(T._origin[o])-y)&&(v=T)}var A=Dg(n.getXScale());return!c&&Math.abs(i.translate(v._origin[o])-y)<=A/2&&(c=v),c}function Pg(e,t,n,r){var i,o;n===void 0&&(n=``),r===void 0&&(r=!1);var c=e[Jt],l=Og(c,t,n),u=t.tooltipOption,d=t.theme.defaultColor,f=[],p,m;function h(t,n){if(r||!M(n)&&n!==``){var i={title:l,data:c,mappingData:e,name:t,value:n,color:e.color||d,marker:!0};f.push(i)}}if(P(u)){var g=u.fields,v=u.callback;if(v){var y=g.map(function(t){return e[Jt][t]}),b=v.apply(void 0,s([],a(y),!1)),x=_({data:e[Jt],mappingData:e,title:l,color:e.color||d,marker:!0},b);f.push(x)}else{var S=t.scales;try{for(var C=E(g),w=C.next();!w.done;w=C.next()){var T=w.value;if(!M(c[T])){var D=S[T];p=Bm(D),m=D.getText(c[T]),h(p,m)}}}catch(e){i={error:e}}finally{try{w&&!w.done&&(o=C.return)&&o.call(C)}finally{if(i)throw i.error}}}}else{var O=Ag(t);m=jg(c,O),p=Mg(c,t),h(p,m)}return f}function Fg(e,t,n,r){var i,a,o=r.showNil,s=[],c=e.dataArray;if(!xt(c)){e.sort(c);try{for(var l=E(c),u=l.next();!u.done;u=l.next()){var d=u.value,f=Ng(t,d,e);if(f){var p=e.getElementId(f),m=e.elementsMap[p];if(e.type===`heatmap`||m.visible){var h=Pg(f,e,n,o);h.length&&s.push(h)}}}}catch(e){i={error:e}}finally{try{u&&!u.done&&(a=l.return)&&a.call(l)}finally{if(i)throw i.error}}}return s}function Ig(e,t,n,r){var i=r.showNil,a=[],o=e.container.getShape(t.x,t.y);if(o&&o.get(`visible`)&&o.get(`origin`)){var s=o.get(`origin`).mappingData,c=Pg(s,e,n,i);c.length&&a.push(c)}return a}function Lg(e,t,n){var r,i,a=[],o=e.geometries,s=n.shared,c=n.title,l=n.reversed;try{for(var u=E(o),d=u.next();!d.done;d=u.next()){var f=d.value;if(f.visible&&f.tooltipOption!==!1){var p=f.type,m=void 0;m=[`point`,`edge`,`polygon`].includes(p)?Ig(f,t,c,n):[`area`,`line`,`path`,`heatmap`].includes(p)?Fg(f,t,c,n):s===!1?Ig(f,t,c,n):Fg(f,t,c,n),m.length&&(l&&m.reverse(),a.push(m))}}}catch(e){r={error:e}}finally{try{d&&!d.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}return a}function Rg(e,t,n){var r,i,a=Lg(e,t,n);try{for(var o=E(e.views),s=o.next();!s.done;s=o.next()){var c=s.value;a=a.concat(Lg(c,t,n))}}catch(e){r={error:e}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return a}function zg(e){return!L(e)&&!N(e)}function Bg(e){e===void 0&&(e=0);var t=N(e)?e:[e];switch(t.length){case 0:t=[0,0,0,0];break;case 1:t=[,,,,].fill(t[0]);break;case 2:t=s(s([],a(t),!1),a(t),!1);break;case 3:t=s(s([],a(t),!1),[t[1]],!1);break;default:t=t.slice(0,4);break}return t}var Vg={};function Hg(e,t){Vg[e]=t}function Ug(){return Object.keys(Vg)}function Wg(e){return Vg[e]}var Gg=function(){function e(e){this.option=this.wrapperOption(e)}return e.prototype.update=function(e){return this.option=this.wrapperOption(e),this},e.prototype.hasAction=function(e){var t=this.option.actions;return ke(t,function(t){return t[0]===e})},e.prototype.create=function(e,t){var n=this.option,r=n.type,i=n.cfg,a=r===`theta`,o=_({start:e,end:t},i);return this.coordinate=new(bd(a?`polar`:r))(o),this.coordinate.type=r,a&&(this.hasAction(`transpose`)||this.transpose()),this.execActions(),this.coordinate},e.prototype.adjust=function(e,t){return this.coordinate.update({start:e,end:t}),this.coordinate.resetMatrix(),this.execActions([`scale`,`rotate`,`translate`]),this.coordinate},e.prototype.rotate=function(e){return this.option.actions.push([`rotate`,e]),this},e.prototype.reflect=function(e){return this.option.actions.push([`reflect`,e]),this},e.prototype.scale=function(e,t){return this.option.actions.push([`scale`,e,t]),this},e.prototype.transpose=function(){return this.option.actions.push([`transpose`]),this},e.prototype.getOption=function(){return this.option},e.prototype.getCoordinate=function(){return this.coordinate},e.prototype.wrapperOption=function(e){return _({type:`rect`,actions:[],cfg:{}},e)},e.prototype.execActions=function(e){var t=this,n=this.option.actions;F(n,function(n){var r,i=a(n),o=i[0],c=i.slice(1);(M(e)||e.includes(o))&&(r=t.coordinate)[o].apply(r,s([],a(c),!1))})},e}(),Kg=function(){function e(e,t,n){this.view=e,this.gEvent=t,this.data=n,this.type=t.type}return e.fromData=function(t,n,r){return new e(t,new ir(n,{}),r)},Object.defineProperty(e.prototype,`target`,{get:function(){return this.gEvent.target},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,`event`,{get:function(){return this.gEvent.originalEvent},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,`x`,{get:function(){return this.gEvent.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,`y`,{get:function(){return this.gEvent.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,`clientX`,{get:function(){return this.gEvent.clientX},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,`clientY`,{get:function(){return this.gEvent.clientY},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return`[Event (type=${this.type})]`},e.prototype.clone=function(){return new e(this.view,this.gEvent,this.data)},e}();function qg(e){var t=e.getController(`axis`),n=e.getController(`legend`),r=e.getController(`annotation`),i=e.getController(`slider`),a=e.getController(`scrollbar`);[t,i,a,n,r].forEach(function(e){e&&e.layout()})}var Jg=function(){function e(){this.scales=new Map,this.syncScales=new Map}return e.prototype.createScale=function(e,t,n,r){var i=n,a=this.getScaleMeta(r);if(t.length===0&&a){var o=a.scale,s={type:o.type};o.isCategory&&(s.values=o.values),i=R(s,a.scaleDef,n)}var c=Rm(e,t,i);return this.cacheScale(c,n,r),c},e.prototype.sync=function(e,t){var n=this;this.syncScales.forEach(function(r,i){var a=2**53-1,o=-(2**53-1),s=[];F(r,function(e){var t=n.getScale(e);o=L(t.max)?Math.max(o,t.max):o,a=L(t.min)?Math.min(a,t.min):a,F(t.values,function(e){s.includes(e)||s.push(e)})}),F(r,function(r){var i=n.getScale(r);if(i.isContinuous)i.change({min:a,max:o,values:s});else if(i.isCategory){var c=i.range,l=n.getScaleMeta(r);s&&!z(l,[`scaleDef`,`range`])&&(c=Vm(R({},i,{values:s}),e,t)),i.change({values:s,range:c})}})})},e.prototype.cacheScale=function(e,t,n){var r=this.getScaleMeta(n);r&&r.scale.type===e.type?(zm(r.scale,e),r.scaleDef=t):(r={key:n,scale:e,scaleDef:t},this.scales.set(n,r));var i=this.getSyncKey(r);if(r.syncKey=i,this.removeFromSyncScales(n),i){var a=this.syncScales.get(i);a||(a=[],this.syncScales.set(i,a)),a.push(n)}},e.prototype.getScale=function(e){var t=this.getScaleMeta(e);if(!t){var n=De(e.split(`-`)),r=this.syncScales.get(n);r&&r.length&&(t=this.getScaleMeta(r[0]))}return t&&t.scale},e.prototype.deleteScale=function(e){var t=this.getScaleMeta(e);if(t){var n=t.syncKey,r=this.syncScales.get(n);if(r&&r.length){var i=r.indexOf(e);i!==-1&&r.splice(i,1)}}this.scales.delete(e)},e.prototype.clear=function(){this.scales.clear(),this.syncScales.clear()},e.prototype.removeFromSyncScales=function(e){var t=this;this.syncScales.forEach(function(n,r){var i=n.indexOf(e);if(i!==-1)return n.splice(i,1),n.length===0&&t.syncScales.delete(r),!1})},e.prototype.getSyncKey=function(e){var t=e.scale,n=e.scaleDef,r=t.field,i=z(n,[`sync`]);return i===!0?r:i===!1?void 0:i},e.prototype.getScaleMeta=function(e){return this.scales.get(e)},e}(),Yg=function(){function e(e,t,n,r){e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0),r===void 0&&(r=0),this.top=e,this.right=t,this.bottom=n,this.left=r}return e.instance=function(t,n,r,i){return t===void 0&&(t=0),n===void 0&&(n=0),r===void 0&&(r=0),i===void 0&&(i=0),new e(t,n,r,i)},e.prototype.max=function(e){var t=a(e,4),n=t[0],r=t[1],i=t[2],o=t[3];return this.top=Math.max(this.top,n),this.right=Math.max(this.right,r),this.bottom=Math.max(this.bottom,i),this.left=Math.max(this.left,o),this},e.prototype.shrink=function(e){var t=a(e,4),n=t[0],r=t[1],i=t[2],o=t[3];return this.top+=n,this.right+=r,this.bottom+=i,this.left+=o,this},e.prototype.inc=function(e,t){var n=e.width,r=e.height;switch(t){case B.TOP:case B.TOP_LEFT:case B.TOP_RIGHT:this.top+=r;break;case B.RIGHT:case B.RIGHT_TOP:case B.RIGHT_BOTTOM:this.right+=n;break;case B.BOTTOM:case B.BOTTOM_LEFT:case B.BOTTOM_RIGHT:this.bottom+=r;break;case B.LEFT:case B.LEFT_TOP:case B.LEFT_BOTTOM:this.left+=n;break;default:break}return this},e.prototype.getPadding=function(){return[this.top,this.right,this.bottom,this.left]},e.prototype.clone=function(){return new(e.bind.apply(e,s([void 0],a(this.getPadding()),!1)))},e}();function Xg(e){var t=e.padding;if(!zg(t))return new(Yg.bind.apply(Yg,s([void 0],a(Bg(t)),!1)));var n=e.viewBBox,r=new Yg,i=[],o=[],c=[];return F(e.getComponents(),function(e){var t=e.type;t===Ht.AXIS?i.push(e):[Ht.LEGEND,Ht.SLIDER,Ht.SCROLLBAR].includes(t)?o.push(e):t!==Ht.GRID&&t!==Ht.TOOLTIP&&c.push(e)}),F(i,function(e){var t=e.component.getLayoutBBox(),i=new Em(t.x,t.y,t.width,t.height).exceed(n);r.max(i)}),F(o,function(e){var t=e.component,n=e.direction,i=t.getLayoutBBox(),a=t.get(`padding`),o=new Em(i.x,i.y,i.width,i.height).expand(a);r.inc(o,n)}),F(c,function(e){var t=e.component,n=e.direction,i=t.getLayoutBBox(),a=new Em(i.x,i.y,i.width,i.height);r.inc(a,n)}),r}function Zg(e,t,n){var r=n.instance();t.forEach(function(e){e.autoPadding=r.max(e.autoPadding.getPadding())})}var Qg=function(e){l(t,e);function t(t){var n=e.call(this,{visible:t.visible})||this;n.views=[],n.geometries=[],n.controllers=[],n.interactions={},n.limitInPlot=!1,n.options={data:[],animate:!0},n.usedControllers=Ug(),n.scalePool=new Jg,n.layoutFunc=qg,n.isPreMouseInPlot=!1,n.isDataChanged=!1,n.isCoordinateChanged=!1,n.createdScaleKeys=new Map,n.onCanvasEvent=function(e){var t=e.name;if(!t.includes(`:`)){var r=n.createViewEvent(e);n.doPlotEvent(r),n.emit(t,r)}},n.onDelegateEvents=function(e){var t=e.name;if(t.includes(`:`)){var r=n.createViewEvent(e);n.emit(t,r)}};var r=t.id,i=r===void 0?Pt(`view`):r,a=t.parent,o=t.canvas,s=t.backgroundGroup,c=t.middleGroup,l=t.foregroundGroup,u=t.region,d=u===void 0?{start:{x:0,y:0},end:{x:1,y:1}}:u,f=t.padding,p=t.appendPadding,m=t.theme,h=t.options,g=t.limitInPlot,v=t.syncViewPadding;return n.parent=a,n.canvas=o,n.backgroundGroup=s,n.middleGroup=c,n.foregroundGroup=l,n.region=d,n.padding=f,n.appendPadding=p,n.options=_(_({},n.options),h),n.limitInPlot=g,n.id=i,n.syncViewPadding=v,n.themeObject=P(m)?R({},Sg(`default`),bg(m)):Sg(m),n.init(),n}return t.prototype.setLayout=function(e){this.layoutFunc=e},t.prototype.init=function(){this.calculateViewBBox(),this.initEvents(),this.initComponentController(),this.initOptions()},t.prototype.render=function(e,t){e===void 0&&(e=!1),this.emit(V.BEFORE_RENDER,Kg.fromData(this,V.BEFORE_RENDER,t)),this.paint(e),this.emit(V.AFTER_RENDER,Kg.fromData(this,V.AFTER_RENDER,t)),this.visible===!1&&this.changeVisible(!1)},t.prototype.clear=function(){var e=this;this.emit(V.BEFORE_CLEAR),this.filteredData=[],this.coordinateInstance=void 0,this.isDataChanged=!1,this.isCoordinateChanged=!1;for(var t=this.geometries,n=0;n<t.length;n++)t[n].clear(),t[n].container.remove(!0),t[n].labelsContainer.remove(!0);this.geometries=[];for(var r=this.controllers,n=0;n<r.length;n++)r[n].name===`annotation`?r[n].clear(!0):r[n].clear();this.createdScaleKeys.forEach(function(t,n){e.getRootView().scalePool.deleteScale(n)}),this.createdScaleKeys.clear();for(var i=this.views,n=0;n<i.length;n++)i[n].clear();this.emit(V.AFTER_CLEAR)},t.prototype.destroy=function(){this.emit(V.BEFORE_DESTROY);var t=this.interactions;F(t,function(e){e&&e.destroy()}),this.clear();for(var n=this.controllers,r=0,i=n.length;r<i;r++)n[r].destroy();this.backgroundGroup.remove(!0),this.middleGroup.remove(!0),this.foregroundGroup.remove(!0),e.prototype.destroy.call(this)},t.prototype.changeVisible=function(t){e.prototype.changeVisible.call(this,t);for(var n=this.geometries,r=0,i=n.length;r<i;r++)n[r].changeVisible(t);for(var a=this.controllers,r=0,i=a.length;r<i;r++)a[r].changeVisible(t);return this.foregroundGroup.set(`visible`,t),this.middleGroup.set(`visible`,t),this.backgroundGroup.set(`visible`,t),this.getCanvas().draw(),this},t.prototype.data=function(e){return Dt(this.options,`data`,e),this.isDataChanged=!0,this},t.prototype.source=function(e){return console.warn(`This method will be removed at G2 V4.1. Please use chart.data() instead.`),this.data(e)},t.prototype.filter=function(e,t){return j(t)?(Dt(this.options,[`filters`,e],t),this):(!t&&z(this.options,[`filters`,e])&&delete this.options.filters[e],this)},t.prototype.axis=function(e,t){return et(e)?Dt(this.options,[`axes`],e):Dt(this.options,[`axes`,e],t),this},t.prototype.legend=function(e,t){return et(e)?Dt(this.options,[`legends`],e):I(e)?(Dt(this.options,[`legends`,e],t),se(t)&&t?.selected&&Dt(this.options,[`filters`,e],function(e){return t?.selected[e]??!0})):Dt(this.options,[`legends`],e),this},t.prototype.scale=function(e,t){var n=this;return I(e)?Dt(this.options,[`scales`,e],t):P(e)&&F(e,function(e,t){Dt(n.options,[`scales`,t],e)}),this},t.prototype.tooltip=function(e){return Dt(this.options,`tooltip`,e),this},t.prototype.annotation=function(){return this.getController(`annotation`)},t.prototype.guide=function(){return console.warn(`This method will be removed at G2 V4.1. Please use chart.annotation() instead.`),this.annotation()},t.prototype.coordinate=function(e,t){return I(e)?Dt(this.options,`coordinate`,{type:e,cfg:t}):Dt(this.options,`coordinate`,e),this.coordinateController.update(this.options.coordinate),this.coordinateController},t.prototype.coord=function(e,t){return console.warn(`This method will be removed at G2 V4.1. Please use chart.coordinate() instead.`),this.coordinate(e,t)},t.prototype.facet=function(e,t){this.facetInstance&&this.facetInstance.destroy();var n=nh(e);if(!n)throw Error(`facet '${e}' is not exist!`);return this.facetInstance=new n(this,_(_({},t),{type:e})),this},t.prototype.animate=function(e){return Dt(this.options,`animate`,e),this},t.prototype.updateOptions=function(e){return this.clear(),ut(this.options,e),this.views.forEach(function(e){return e.destroy()}),this.views=[],this.initOptions(),this.coordinateBBox=this.viewBBox,this},t.prototype.option=function(e,n){if(t.prototype[e])throw Error(`Can't use built in variable name "${e}", please change another one.`);return Dt(this.options,e,n),this},t.prototype.theme=function(e){return this.themeObject=P(e)?R({},this.themeObject,bg(e)):Sg(e),this},t.prototype.interaction=function(e,t){var n=this.interactions[e];n&&n.destroy();var r=dg(e,this,t);return r&&(r.init(),this.interactions[e]=r),this},t.prototype.removeInteraction=function(e){var t=this.interactions[e];t&&(t.destroy(),this.interactions[e]=void 0)},t.prototype.changeData=function(e){this.isDataChanged=!0,this.emit(V.BEFORE_CHANGE_DATA,Kg.fromData(this,V.BEFORE_CHANGE_DATA,null)),this.data(e),this.paint(!0);for(var t=this.views,n=0,r=t.length;n<r;n++)t[n].changeData(e);this.emit(V.AFTER_CHANGE_DATA,Kg.fromData(this,V.AFTER_CHANGE_DATA,null))},t.prototype.createView=function(e){this.parent&&this.parent.parent&&console.warn(`The view nesting recursive feature will be removed at G2 V4.1. Please avoid to use it.`);var n={data:this.options.data,scales:ft(this.options.scales),axes:ft(this.options.axes),coordinate:ft(this.coordinateController.getOption()),tooltip:ft(this.options.tooltip),legends:ft(this.options.legends),animate:this.options.animate,visible:this.visible},r=new t(_(_({parent:this,canvas:this.canvas,backgroundGroup:this.backgroundGroup.addGroup({zIndex:Ut.BG}),middleGroup:this.middleGroup.addGroup({zIndex:Ut.MID}),foregroundGroup:this.foregroundGroup.addGroup({zIndex:Ut.FORE}),theme:this.themeObject,padding:this.padding},e),{options:_(_({},n),z(e,`options`,{}))}));return this.views.push(r),r},t.prototype.view=function(e){return console.warn(`This method will be removed at G2 V4.1. Please use chart.createView() instead.`),this.createView(e)},t.prototype.removeView=function(e){var t=xe(this.views,function(t){return t===e})[0];return t&&t.destroy(),t},t.prototype.getCoordinate=function(){return this.coordinateInstance},t.prototype.getTheme=function(){return this.themeObject},t.prototype.getXScale=function(){var e=this.geometries[0];return e?e.getXScale():null},t.prototype.getYScales=function(){var e={},t=[];return this.geometries.forEach(function(n){var r=n.getYScale(),i=r.field;e[i]||(e[i]=!0,t.push(r))}),t},t.prototype.getScalesByDim=function(e){for(var t=this.geometries,n={},r=0,i=t.length;r<i;r++){var a=t[r],o=e===`x`?a.getXScale():a.getYScale();o&&!n[o.field]&&(n[o.field]=o)}return n},t.prototype.getScale=function(e,t){var n=t||this.getScaleKey(e);return this.getRootView().scalePool.getScale(n)},t.prototype.getScaleByField=function(e,t){return this.getScale(e,t)},t.prototype.getOptions=function(){return this.options},t.prototype.getData=function(){return this.filteredData},t.prototype.getOriginalData=function(){return this.options.data},t.prototype.getPadding=function(){return this.autoPadding.getPadding()},t.prototype.getGeometries=function(){return this.geometries},t.prototype.getElements=function(){return be(this.geometries,function(e,t){return e.concat(t.getElements())},[])},t.prototype.getElementsBy=function(e){return this.getElements().filter(function(t){return e(t)})},t.prototype.getLayer=function(e){return e===Vt.BG?this.backgroundGroup:e===Vt.MID?this.middleGroup:(Vt.FORE,this.foregroundGroup)},t.prototype.isPointInPlot=function(e){return jm(this.getCoordinate(),e)},t.prototype.getLegendAttributes=function(){return pe(this.geometries.map(function(e){return e.getGroupAttributes()}))},t.prototype.getGroupScales=function(){var e=this.geometries.map(function(e){return e.getGroupScales()});return Tm(pe(e))},t.prototype.getCanvas=function(){return this.getRootView().canvas},t.prototype.getRootView=function(){for(var e=this;;){if(e.parent){e=e.parent;continue}break}return e},t.prototype.getXY=function(e){var t=this.getCoordinate(),n=this.getScalesByDim(`x`),r=this.getScalesByDim(`y`),i,a;if(F(e,function(e,t){n[t]&&(i=n[t].scale(e)),r[t]&&(a=r[t].scale(e))}),!M(i)&&!M(a))return t.convert({x:i,y:a})},t.prototype.getController=function(e){return le(this.controllers,function(t){return t.name===e})},t.prototype.showTooltip=function(e){var t=this.getController(`tooltip`);return t&&t.showTooltip(e),this},t.prototype.hideTooltip=function(){var e=this.getController(`tooltip`);return e&&e.hideTooltip(),this},t.prototype.lockTooltip=function(){var e=this.getController(`tooltip`);return e&&e.lockTooltip(),this},t.prototype.unlockTooltip=function(){var e=this.getController(`tooltip`);return e&&e.unlockTooltip(),this},t.prototype.isTooltipLocked=function(){var e=this.getController(`tooltip`);return e&&e.isTooltipLocked()},t.prototype.getTooltipItems=function(e){var t=this.getController(`tooltip`);return t?t.getTooltipItems(e):[]},t.prototype.getSnapRecords=function(e){for(var t=this.geometries,n=[],r=0,i=t.length;r<i;r++){var a=t[r],o=a.dataArray;a.sort(o);for(var s=void 0,c=0,l=o.length;c<l;c++){var u=o[c];s=Ng(e,u,a),s&&n.push(s)}}for(var d=this.views,r=0,i=d.length;r<i;r++){var f=d[r].getSnapRecords(e);n=n.concat(f)}return n},t.prototype.getComponents=function(){for(var e=[],t=this.controllers,n=0,r=t.length;n<r;n++){var i=t[n];e=e.concat(i.getComponents())}return e},t.prototype.filterData=function(e){var t=this.options.filters;return It(t)===0?e:k(e,function(e,n){return Object.keys(t).every(function(r){var i=t[r];return i(e[r],e,n)})})},t.prototype.filterFieldData=function(e,t){var n=this.options.filters,r=z(n,e);return at(r)?t:t.filter(function(t,n){return r(t[e],t,n)})},t.prototype.adjustCoordinate=function(){var e=this.getCoordinate(),t=e.start,n=e.end,r=this.coordinateBBox.bl,i=this.coordinateBBox.tr;if(Ct(t,r)&&Ct(n,i)){this.isCoordinateChanged=!1;return}this.isCoordinateChanged=!0,this.coordinateInstance=this.coordinateController.adjust(r,i)},t.prototype.paint=function(e){this.renderDataRecursive(e),this.syncScale(),this.emit(V.BEFORE_PAINT),this.renderPaddingRecursive(e),this.renderLayoutRecursive(e),this.renderBackgroundStyleShape(),this.renderPaintRecursive(e),this.emit(V.AFTER_PAINT),this.isDataChanged=!1},t.prototype.renderBackgroundStyleShape=function(){if(!this.parent){var e=z(this.themeObject,`background`);if(e){this.backgroundStyleRectShape||(this.backgroundStyleRectShape=this.backgroundGroup.addShape(`rect`,{attrs:{},zIndex:-1,capture:!1}),this.backgroundStyleRectShape.toBack());var t=this.viewBBox,n=t.x,r=t.y,i=t.width,a=t.height;this.backgroundStyleRectShape.attr({fill:e,x:n,y:r,width:i,height:a})}else this.backgroundStyleRectShape&&=(this.backgroundStyleRectShape.remove(!0),void 0)}},t.prototype.renderPaddingRecursive=function(e){this.calculateViewBBox(),this.adjustCoordinate(),this.initComponents(e),this.autoPadding=Xg(this).shrink(Bg(this.appendPadding)),this.coordinateBBox=this.viewBBox.shrink(this.autoPadding.getPadding()),this.adjustCoordinate(),this.controllers.find(function(e){return e.name===`tooltip`}).update();for(var t=this.views,n=0,r=t.length;n<r;n++)t[n].renderPaddingRecursive(e)},t.prototype.renderLayoutRecursive=function(e){var t=this.syncViewPadding===!0?Zg:j(this.syncViewPadding)?this.syncViewPadding:void 0;t&&(t(this,this.views,Yg),this.views.forEach(function(e){e.coordinateBBox=e.viewBBox.shrink(e.autoPadding.getPadding()),e.adjustCoordinate()})),this.doLayout();for(var n=this.views,r=0,i=n.length;r<i;r++)n[r].renderLayoutRecursive(e)},t.prototype.renderPaintRecursive=function(e){var t=this.middleGroup;if(this.limitInPlot){var n=Nm(this.coordinateInstance),r=n.type,i=n.attrs;t.setClip({type:r,attrs:i})}else t.setClip(void 0);this.paintGeometries(e),this.renderComponents(e);for(var a=this.views,o=0,s=a.length;o<s;o++)a[o].renderPaintRecursive(e)},t.prototype.createScale=function(e,t,n,r){var i=z(this.options.scales,[e]),a=_(_({},i),n);return this.parent?this.parent.createScale(e,t,a,r):this.scalePool.createScale(e,t,a,r)},t.prototype.renderDataRecursive=function(e){this.doFilterData(),this.createCoordinate(),this.initGeometries(e),this.renderFacet(e);for(var t=this.views,n=0,r=t.length;n<r;n++)t[n].renderDataRecursive(e)},t.prototype.calculateViewBBox=function(){var e,t,n,r;if(this.parent){var i=this.parent.coordinateBBox;e=i.x,t=i.y,n=i.width,r=i.height}else e=0,t=0,n=this.canvas.get(`width`),r=this.canvas.get(`height`);var a=this.region,o=a.start,s=a.end,c=new Em(e+n*o.x,t+r*o.y,n*(s.x-o.x),r*(s.y-o.y));(!this.viewBBox||!this.viewBBox.isEqual(c))&&(this.viewBBox=new Em(e+n*o.x,t+r*o.y,n*(s.x-o.x),r*(s.y-o.y))),this.coordinateBBox=this.viewBBox},t.prototype.initEvents=function(){this.foregroundGroup.on(`*`,this.onDelegateEvents),this.middleGroup.on(`*`,this.onDelegateEvents),this.backgroundGroup.on(`*`,this.onDelegateEvents),this.canvas.on(`*`,this.onCanvasEvent)},t.prototype.initComponentController=function(){for(var e=this.usedControllers,t=0,n=e.length;t<n;t++){var r=e[t],i=Wg(r);i&&this.controllers.push(new i(this))}},t.prototype.createViewEvent=function(e){var t=e.shape,n=e.name,r=t?t.get(`origin`):null,i=new Kg(this,e,r);return i.type=n,i},t.prototype.doPlotEvent=function(e){var t=e.type,n=e.x,r=e.y,i={x:n,y:r};if([`mousedown`,`mouseup`,`mousemove`,`mouseleave`,`mousewheel`,`touchstart`,`touchmove`,`touchend`,`touchcancel`,`click`,`dblclick`,`contextmenu`].includes(t)){var a=this.isPointInPlot(i),o=e.clone();if(a){var s=`plot:${t}`;o.type=s,this.emit(s,o),(t===`mouseleave`||t===`touchend`)&&(this.isPreMouseInPlot=!1)}t===`mousemove`||t===`touchmove`?(this.isPreMouseInPlot&&!a?(t===`mousemove`&&(o.type=Gt.MOUSE_LEAVE,this.emit(Gt.MOUSE_LEAVE,o)),o.type=Gt.LEAVE,this.emit(Gt.LEAVE,o)):!this.isPreMouseInPlot&&a&&(t===`mousemove`&&(o.type=Gt.MOUSE_ENTER,this.emit(Gt.MOUSE_ENTER,o)),o.type=Gt.ENTER,this.emit(Gt.ENTER,o)),this.isPreMouseInPlot=a):(t===`mouseleave`||t===`touchend`)&&(this.isPreMouseInPlot&&=(t===`mouseleave`&&(o.type=Gt.MOUSE_LEAVE,this.emit(Gt.MOUSE_LEAVE,o)),o.type=Gt.LEAVE,this.emit(Gt.LEAVE,o),!1))}},t.prototype.doFilterData=function(){var e=this.options.data;this.filteredData=this.filterData(e)},t.prototype.initGeometries=function(e){this.createOrUpdateScales();for(var t=this.getCoordinate(),n=z(this.options,`scales`,{}),r=this.geometries,i=0,a=r.length;i<a;i++){var o=r[i];o.scales=this.getGeometryScales();var s={coordinate:t,scaleDefs:n,data:this.filteredData,theme:this.themeObject,isDataChanged:this.isDataChanged,isCoordinateChanged:this.isCoordinateChanged};e?o.update(s):o.init(s)}this.adjustScales()},t.prototype.createOrUpdateScales=function(){for(var e=this.getScaleFields(),t=this.getGroupedFields(),n=this.getOptions(),r=n.data,i=n.scales,a=i===void 0?{}:i,o=this.filteredData,s=0,c=e.length;s<c;s++){var l=e[s],u=a[l],d=this.getScaleKey(l);this.createScale(l,t.includes(l)?r:o,u,d),this.createdScaleKeys.set(d,!0)}},t.prototype.syncScale=function(){this.getRootView().scalePool.sync(this.getCoordinate(),this.theme)},t.prototype.getGeometryScales=function(){for(var e=this.getScaleFields(),t={},n=0;n<e.length;n++){var r=e[n];t[r]=this.getScaleByField(r)}return t},t.prototype.getScaleFields=function(){for(var e=[],t=new Map,n=this.geometries,r=0;r<n.length;r++){var i=n[r].getScaleFields();Tm(i,e,t)}return e},t.prototype.getGroupedFields=function(){for(var e=[],t=new Map,n=this.geometries,r=0;r<n.length;r++){var i=n[r].getGroupFields();Tm(i,e,t)}return e},t.prototype.adjustScales=function(){this.adjustCategoryScaleRange()},t.prototype.adjustCategoryScaleRange=function(){var e=this,t=s([this.getXScale()],a(this.getYScales()),!1).filter(function(e){return!!e}),n=this.getCoordinate(),r=this.options.scales;F(t,function(t){var i=t.field,a=t.values,o=t.isCategory,s=t.isIdentity;(o||s)&&a&&!z(r,[i,`range`])&&(t.range=Vm(t,n,e.theme))})},t.prototype.initComponents=function(e){for(var t=this.controllers,n=0;n<t.length;n++){var r=t[n];e?r.update():(r.clear(),r.render())}},t.prototype.doLayout=function(){this.layoutFunc(this)},t.prototype.createCoordinate=function(){var e=this.coordinateBBox.bl,t=this.coordinateBBox.tr;this.coordinateInstance=this.coordinateController.create(e,t)},t.prototype.paintGeometries=function(e){for(var t=this.options.animate,n=this.getCoordinate(),r={x:this.viewBBox.x,y:this.viewBBox.y,minX:this.viewBBox.minX,minY:this.viewBBox.minY,maxX:this.viewBBox.maxX,maxY:this.viewBBox.maxY,width:this.viewBBox.width,height:this.viewBBox.height},i=this.geometries,a=0;a<i.length;a++){var o=i[a];o.coordinate=n,o.canvasRegion=r,t||o.animate(!1),o.paint(e)}},t.prototype.renderComponents=function(e){for(var t=this.getComponents(),n=0;n<t.length;n++)t[n].component.render()},t.prototype.renderFacet=function(e){this.facetInstance&&(e?this.facetInstance.update():(this.facetInstance.clear(),this.facetInstance.init(),this.facetInstance.render()))},t.prototype.initOptions=function(){var e=this,t=this.options,n=t.geometries,r=n===void 0?[]:n,i=t.interactions,a=i===void 0?[]:i,s=t.views,c=s===void 0?[]:s,l=t.annotations,u=l===void 0?[]:l,d=t.coordinate,f=t.events,p=t.facets;this.coordinateController?d&&this.coordinateController.update(d):this.coordinateController=new Gg(d);for(var m=0;m<r.length;m++){var h=r[m];this.createGeometry(h)}for(var g=0;g<a.length;g++){var _=a[g],v=_.type,y=_.cfg;this.interaction(v,y)}for(var b=0;b<c.length;b++){var x=c[b];this.createView(x)}for(var S=this.getController(`annotation`),C=0;C<u.length;C++){var w=u[C];S.annotation(w)}f&&F(f,function(t,n){e.on(n,t)}),p&&F(p,function(t){var n=t.type,r=o(t,[`type`]);e.facet(n,r)})},t.prototype.createGeometry=function(e){var t=e.type,n=e.cfg,r=n===void 0?{}:n;if(this[t]){var i=this[t](r);F(e,function(e,t){j(i[t])&&i[t](e)})}},t.prototype.getScaleKey=function(e){return`${this.id}-${e}`},t}(yn);function $g(e,t){Qg.prototype[e.toLowerCase()]=function(e){e===void 0&&(e={});var n=_({container:this.middleGroup.addGroup(),labelsContainer:this.foregroundGroup.addGroup()},e),r=new t(n);return this.geometries.push(r),r}}var e_=function(e){l(t,e);function t(t){var n=this,r=t.container,i=t.width,a=t.height,o=t.autoFit,s=o===void 0?!1:o,c=t.padding,l=t.appendPadding,u=t.renderer,d=u===void 0?`canvas`:u,f=t.pixelRatio,p=t.localRefresh,m=p===void 0?!0:p,h=t.visible,g=h===void 0?!0:h,v=t.supportCSSTransform,y=v===void 0?!1:v,b=t.defaultInteractions,x=b===void 0?[`tooltip`,`legend-filter`,`legend-active`,`continuous-filter`,`ellipsis-text`,`axis-description`]:b,S=t.options,C=t.limitInPlot,w=t.theme,T=t.syncViewPadding,E=I(r)?document.getElementById(r):r,D=on(`<div style="position:relative;"></div>`);E.appendChild(D);var O=hn(E,s,i,a),k=new(Zt(d)).Canvas(_({container:D,pixelRatio:f,localRefresh:m,supportCSSTransform:y},O));return n=e.call(this,{parent:null,canvas:k,backgroundGroup:k.addGroup({zIndex:Ut.BG}),middleGroup:k.addGroup({zIndex:Ut.MID}),foregroundGroup:k.addGroup({zIndex:Ut.FORE}),padding:c,appendPadding:l,visible:g,options:S,limitInPlot:C,theme:w,syncViewPadding:T})||this,n.onResize=mt(function(){n.forceFit()},300),n.ele=E,n.canvas=k,n.width=O.width,n.height=O.height,n.autoFit=s,n.localRefresh=m,n.renderer=d,n.wrapperElement=D,n.updateCanvasStyle(),n.bindAutoFit(),n.initDefaultInteractions(x),n}return t.prototype.initDefaultInteractions=function(e){var t=this;F(e,function(e){t.interaction(e)})},t.prototype.aria=function(e){var t=`aria-label`;e===!1?this.ele.removeAttribute(t):this.ele.setAttribute(t,e.label)},t.prototype.changeSize=function(e,t){return this.width===e&&this.height===t?this:(this.emit(V.BEFORE_CHANGE_SIZE),this.width=e,this.height=t,this.canvas.changeSize(e,t),this.render(!0),this.emit(V.AFTER_CHANGE_SIZE),this)},t.prototype.clear=function(){e.prototype.clear.call(this),this.aria(!1)},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.unbindAutoFit(),this.canvas.destroy(),gn(this.wrapperElement),this.wrapperElement=null},t.prototype.changeVisible=function(t){return e.prototype.changeVisible.call(this,t),this.wrapperElement.style.display=t?``:`none`,this},t.prototype.forceFit=function(){if(!this.destroyed){var e=hn(this.ele,!0,this.width,this.height),t=e.width,n=e.height;this.changeSize(t,n)}},t.prototype.updateCanvasStyle=function(){fn(this.canvas.get(`el`),{display:`inline-block`,verticalAlign:`middle`})},t.prototype.bindAutoFit=function(){this.autoFit&&window.addEventListener(`resize`,this.onResize)},t.prototype.unbindAutoFit=function(){this.autoFit&&window.removeEventListener(`resize`,this.onResize)},t}(Qg),t_=function(){function e(e){this.visible=!0,this.components=[],this.view=e}return e.prototype.clear=function(e){F(this.components,function(e){e.component.destroy()}),this.components=[]},e.prototype.destroy=function(){this.clear()},e.prototype.getComponents=function(){return this.components},e.prototype.changeVisible=function(e){this.visible!==e&&(this.components.forEach(function(t){e?t.component.show():t.component.hide()}),this.visible=e)},e}();function n_(e){for(var t=[],n=function(n){var r=e[n];le(t,function(e){return e.color===r.color&&e.name===r.name&&e.value===r.value&&e.title===r.title})||t.push(r)},r=0;r<e.length;r++)n(r);return t}var r_=function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.isLocked=!1,t}return Object.defineProperty(t.prototype,`name`,{get:function(){return`tooltip`},enumerable:!1,configurable:!0}),t.prototype.init=function(){},t.prototype.isVisible=function(){return this.view.getOptions().tooltip!==!1},t.prototype.render=function(){},t.prototype.showTooltip=function(e){if(this.point=e,this.isVisible()){var t=this.view,n=this.getTooltipItems(e);if(!n.length){this.hideTooltip();return}var r=this.getTitle(n),i={x:n[0].x,y:n[0].y};t.emit(`tooltip:show`,Kg.fromData(t,`tooltip:show`,_({items:n,title:r},e)));var a=this.getTooltipCfg(),o=a.follow,s=a.showMarkers,c=a.showCrosshairs,l=a.showContent,u=a.marker,d=this.items,f=this.title;if(!Ct(f,r)||!Ct(d,n)?(t.emit(`tooltip:change`,Kg.fromData(t,`tooltip:change`,_({items:n,title:r},e))),(j(l)?l(n):l)&&(this.tooltip||this.renderTooltip(),this.tooltip.update(ut({},a,{items:this.getItemsAfterProcess(n),title:r},o?e:{})),this.tooltip.show()),s&&this.renderTooltipMarkers(n,u)):(this.tooltip&&o&&(this.tooltip.update(e),this.tooltip.show()),this.tooltipMarkersGroup&&this.tooltipMarkersGroup.show()),this.items=n,this.title=r,c){var p=z(a,[`crosshairs`,`follow`],!1);this.renderCrosshairs(p?e:i,a)}}},t.prototype.hideTooltip=function(){if(!this.getTooltipCfg().follow){this.point=null;return}var e=this.tooltipMarkersGroup;e&&e.hide();var t=this.xCrosshair,n=this.yCrosshair;t&&t.hide(),n&&n.hide();var r=this.tooltip;r&&r.hide(),this.view.emit(`tooltip:hide`,Kg.fromData(this.view,`tooltip:hide`,{})),this.point=null},t.prototype.lockTooltip=function(){this.isLocked=!0,this.tooltip&&this.tooltip.setCapture(!0)},t.prototype.unlockTooltip=function(){this.isLocked=!1;var e=this.getTooltipCfg();this.tooltip&&this.tooltip.setCapture(e.capture)},t.prototype.isTooltipLocked=function(){return this.isLocked},t.prototype.clear=function(){var e=this,t=e.tooltip,n=e.xCrosshair,r=e.yCrosshair,i=e.tooltipMarkersGroup;t&&(t.hide(),t.clear()),n&&n.clear(),r&&r.clear(),i&&i.clear(),t?.get(`customContent`)&&(this.tooltip.destroy(),this.tooltip=null),this.title=null,this.items=null},t.prototype.destroy=function(){this.tooltip&&this.tooltip.destroy(),this.xCrosshair&&this.xCrosshair.destroy(),this.yCrosshair&&this.yCrosshair.destroy(),this.guideGroup&&this.guideGroup.remove(!0),this.reset()},t.prototype.reset=function(){this.items=null,this.title=null,this.tooltipMarkersGroup=null,this.tooltipCrosshairsGroup=null,this.xCrosshair=null,this.yCrosshair=null,this.tooltip=null,this.guideGroup=null,this.isLocked=!1,this.point=null},t.prototype.changeVisible=function(e){if(this.visible!==e){var t=this,n=t.tooltip,r=t.tooltipMarkersGroup,i=t.xCrosshair,a=t.yCrosshair;e?(n&&n.show(),r&&r.show(),i&&i.show(),a&&a.show()):(n&&n.hide(),r&&r.hide(),i&&i.hide(),a&&a.hide()),this.visible=e}},t.prototype.getTooltipItems=function(e){var t,n,r,i,a,o,s=this.findItemsFromView(this.view,e);if(s.length){s=pe(s);try{for(var c=E(s),l=c.next();!l.done;l=c.next()){var u=l.value;try{for(var d=(r=void 0,E(u)),f=d.next();!f.done;f=d.next()){var p=f.value,m=p.mappingData,h=m.x,g=m.y;p.x=N(h)?h[h.length-1]:h,p.y=N(g)?g[g.length-1]:g}}catch(e){r={error:e}}finally{try{f&&!f.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}}}catch(e){t={error:e}}finally{try{l&&!l.done&&(n=c.return)&&n.call(c)}finally{if(t)throw t.error}}if(this.getTooltipCfg().shared===!1&&s.length>1){var _=s[0],v=Math.abs(e.y-_[0].y);try{for(var y=E(s),b=y.next();!b.done;b=y.next()){var x=b.value,S=Math.abs(e.y-x[0].y);S<=v&&(_=x,v=S)}}catch(e){a={error:e}}finally{try{b&&!b.done&&(o=y.return)&&o.call(y)}finally{if(a)throw a.error}}s=[_]}return n_(pe(s))}return[]},t.prototype.layout=function(){},t.prototype.update=function(){if(this.point&&this.showTooltip(this.point),this.tooltip){var e=this.view.getCanvas();this.tooltip.set(`region`,{start:{x:0,y:0},end:{x:e.get(`width`),y:e.get(`height`)}})}},t.prototype.isCursorEntered=function(e){if(this.tooltip){var t=this.tooltip.getContainer(),n=this.tooltip.get(`capture`);if(t&&n){var r=t.getBoundingClientRect(),i=r.x,a=r.y,o=r.width,s=r.height;return new Em(i,a,o,s).isPointIn(e)}}return!1},t.prototype.getTooltipCfg=function(){var e=this.view,t=e.getOptions().tooltip,n=this.processCustomContent(t),r=e.getTheme(),i=z(r,[`components`,`tooltip`],{}),a=z(n,`enterable`,i.enterable);return R({},i,n,{capture:!!(a||this.isLocked)})},t.prototype.processCustomContent=function(e){if(et(e)||!z(e,`customContent`))return e;var t=e.customContent;return _(_({},e),{customContent:function(e,n){var r=t(e,n)||``;return I(r)?`<div class="g2-tooltip">`+r+`</div>`:r}})},t.prototype.getTitle=function(e){var t=e[0].title||e[0].name;return this.title=t,t},t.prototype.renderTooltip=function(){var e=this.view.getCanvas(),t={start:{x:0,y:0},end:{x:e.get(`width`),y:e.get(`height`)}},n=this.getTooltipCfg(),r=new fm(_(_({parent:e.get(`el`).parentNode,region:t},n),{visible:!1,crosshairs:null}));r.init(),this.tooltip=r},t.prototype.renderTooltipMarkers=function(e,t){var n,r,i=this.getTooltipMarkersGroup(),a=this.view.getRootView(),o=a.limitInPlot;try{for(var s=E(e),c=s.next();!c.done;c=s.next()){var l=c.value,u=l.x,d=l.y;if(o||i?.getClip()){var f=Nm(a.getCoordinate()),p=f.type,m=f.attrs;i?.setClip({type:p,attrs:m})}else i?.setClip(void 0);var h=this.view.getTheme(),g=z(h,[`components`,`tooltip`,`marker`],{}),v=_(_({fill:l.color,symbol:`circle`,shadowColor:l.color},j(t)?_(_({},g),t(l)):t),{x:u,y:d});i.addShape(`marker`,{attrs:v})}}catch(e){n={error:e}}finally{try{c&&!c.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}},t.prototype.renderCrosshairs=function(e,t){var n=z(t,[`crosshairs`,`type`],`x`);n===`x`?(this.yCrosshair&&this.yCrosshair.hide(),this.renderXCrosshairs(e,t)):n===`y`?(this.xCrosshair&&this.xCrosshair.hide(),this.renderYCrosshairs(e,t)):n===`xy`&&(this.renderXCrosshairs(e,t),this.renderYCrosshairs(e,t))},t.prototype.renderXCrosshairs=function(e,t){var n=this.getViewWithGeometry(this.view).getCoordinate(),r,i;if(n.isRect)n.isTransposed?(r={x:n.start.x,y:e.y},i={x:n.end.x,y:e.y}):(r={x:e.x,y:n.end.y},i={x:e.x,y:n.start.y});else{var a=Mm(n,e),o=n.getCenter(),s=n.getRadius();i=gm(o.x,o.y,s,a),r=o}var c=R({start:r,end:i,container:this.getTooltipCrosshairsGroup()},z(t,`crosshairs`,{}),this.getCrosshairsText(`x`,e,t));delete c.type;var l=this.xCrosshair;l?l.update(c):(l=new ep(c),l.init()),l.render(),l.show(),this.xCrosshair=l},t.prototype.renderYCrosshairs=function(e,t){var n=this.getViewWithGeometry(this.view).getCoordinate(),r,i;if(n.isRect){var a=void 0,o=void 0;n.isTransposed?(a={x:e.x,y:n.end.y},o={x:e.x,y:n.start.y}):(a={x:n.start.x,y:e.y},o={x:n.end.x,y:e.y}),r={start:a,end:o},i=`Line`}else r={center:n.getCenter(),radius:Am(n,e),startAngle:n.startAngle,endAngle:n.endAngle},i=`Circle`;r=R({container:this.getTooltipCrosshairsGroup()},r,z(t,`crosshairs`,{}),this.getCrosshairsText(`y`,e,t)),delete r.type;var s=this.yCrosshair;s?n.isRect&&s.get(`type`)===`circle`||!n.isRect&&s.get(`type`)===`line`?(s=new cp[i](r),s.init()):s.update(r):(s=new cp[i](r),s.init()),s.render(),s.show(),this.yCrosshair=s},t.prototype.getCrosshairsText=function(e,t,n){var r=z(n,[`crosshairs`,`text`]),i=z(n,[`crosshairs`,`follow`]),a=this.items;if(r){var o=this.getViewWithGeometry(this.view),s=a[0],c=o.getXScale(),l=o.getYScales()[0],u=void 0,d=void 0;if(i){var f=this.view.getCoordinate().invert(t);u=c.invert(f.x),d=l.invert(f.y)}else u=s.data[c.field],d=s.data[l.field];var p=e===`x`?u:d;return j(r)?r=r(e,p,a,t):r.content=p,{text:r}}},t.prototype.getGuideGroup=function(){return this.guideGroup||=this.view.foregroundGroup.addGroup({name:`tooltipGuide`,capture:!1}),this.guideGroup},t.prototype.getTooltipMarkersGroup=function(){var e=this.tooltipMarkersGroup;return e&&!e.destroyed?(e.clear(),e.show()):(e=this.getGuideGroup().addGroup({name:`tooltipMarkersGroup`}),e.toFront(),this.tooltipMarkersGroup=e),e},t.prototype.getTooltipCrosshairsGroup=function(){var e=this.tooltipCrosshairsGroup;return e||(e=this.getGuideGroup().addGroup({name:`tooltipCrosshairsGroup`,capture:!1}),e.toBack(),this.tooltipCrosshairsGroup=e),e},t.prototype.findItemsFromView=function(e,t){var n,r;if(e.getOptions().tooltip===!1)return[];var i=this.getTooltipCfg(),a=Lg(e,t,i);try{for(var o=E(e.views),s=o.next();!s.done;s=o.next()){var c=s.value;a=a.concat(this.findItemsFromView(c,t))}}catch(e){n={error:e}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return a},t.prototype.getViewWithGeometry=function(e){var t=this;return e.geometries.length?e:le(e.views,function(e){return t.getViewWithGeometry(e)})},t.prototype.getItemsAfterProcess=function(e){return(this.getTooltipCfg().customItems||function(e){return e})(e)},t}(t_),i_={};function a_(e){return i_[e.toLowerCase()]}function o_(e,t){i_[e.toLowerCase()]=t}var s_={appear:{duration:450,easing:`easeQuadOut`},update:{duration:400,easing:`easeQuadInOut`},enter:{duration:400,easing:`easeQuadInOut`},leave:{duration:350,easing:`easeQuadIn`}},c_={interval:function(e){return{enter:{animation:e.isRect?e.isTransposed?`scale-in-x`:`scale-in-y`:`fade-in`},update:{animation:e.isPolar&&e.isTransposed?`sector-path-update`:null},leave:{animation:`fade-out`}}},line:{enter:{animation:`fade-in`},leave:{animation:`fade-out`}},path:{enter:{animation:`fade-in`},leave:{animation:`fade-out`}},point:{appear:{animation:`zoom-in`},enter:{animation:`zoom-in`},leave:{animation:`zoom-out`}},area:{enter:{animation:`fade-in`},leave:{animation:`fade-out`}},polygon:{enter:{animation:`fade-in`},leave:{animation:`fade-out`}},schema:{enter:{animation:`fade-in`},leave:{animation:`fade-out`}},edge:{enter:{animation:`fade-in`},leave:{animation:`fade-out`}},label:{appear:{animation:`fade-in`,delay:450},enter:{animation:`fade-in`},update:{animation:`position-update`},leave:{animation:`fade-out`}}},l_={line:function(){return{animation:`wave-in`}},area:function(){return{animation:`wave-in`}},path:function(){return{animation:`fade-in`}},interval:function(e){var t;return e.isRect?t=e.isTransposed?`grow-in-x`:`grow-in-y`:(t=`grow-in-xy`,e.isPolar&&e.isTransposed&&(t=`wave-in`)),{animation:t}},schema:function(e){return{animation:e.isRect?e.isTransposed?`grow-in-x`:`grow-in-y`:`grow-in-xy`}},polygon:function(){return{animation:`fade-in`,duration:500}},edge:function(){return{animation:`fade-in`}}};function u_(e,t){return{delay:j(e.delay)?e.delay(t):e.delay,easing:j(e.easing)?e.easing(t):e.easing,duration:j(e.duration)?e.duration(t):e.duration,callback:e.callback,repeat:e.repeat}}function d_(e,t,n){var r=c_[e];return r&&(j(r)&&(r=r(t)),r=R({},s_,r),n)?r[n]:r}function f_(e,t,n){var r=z(e.get(`origin`),`data`,Jt),i=t.animation,a=u_(t,r);if(i){var o=a_(i);o&&o(e,a,n)}else e.animate(n.toAttrs,a)}function p_(e,t,n,r,i){if(l_[n]){var a=l_[n](r),o=a_(z(a,`animation`,``));if(o){var s=_(_(_({},s_.appear),a),t);e.stopAnimate(),o(e,s,{coordinate:r,minYPoint:i,toAttrs:null})}}}var m_=`element-background`,h_=function(e){l(t,e);function t(t){var n=e.call(this,t)||this;n.labelShape=[],n.states=[];var r=t.shapeFactory,i=t.container,a=t.offscreenGroup,o=t.elementIndex,s=t.visible,c=s===void 0?!0:s;return n.shapeFactory=r,n.container=i,n.offscreenGroup=a,n.visible=c,n.elementIndex=o,n}return t.prototype.draw=function(e,t){t===void 0&&(t=!1),this.model=e,this.data=e.data,this.shapeType=this.getShapeType(e),this.drawShape(e,t),this.visible===!1&&this.changeVisible(!1)},t.prototype.update=function(e){var t=this,n=t.shapeFactory,r=t.shape;if(r){this.model=e,this.data=e.data,this.shapeType=this.getShapeType(e),this.setShapeInfo(r,e);var i=this.getOffscreenGroup(),a=n.drawShape(this.shapeType,e,i);a.cfg.data=this.data,a.cfg.origin=e,a.cfg.element=this,this.syncShapeStyle(r,a,this.getStates(),this.getAnimateCfg(`update`))}},t.prototype.destroy=function(){var t=this,n=t.shapeFactory,r=t.shape;if(r){var i=this.getAnimateCfg(`leave`);i?f_(r,i,{coordinate:n.coordinate,toAttrs:_({},r.attr())}):r.remove(!0)}this.states=[],this.shapeFactory=void 0,this.container=void 0,this.shape=void 0,this.animate=void 0,this.geometry=void 0,this.labelShape=[],this.model=void 0,this.data=void 0,this.offscreenGroup=void 0,this.statesStyle=void 0,e.prototype.destroy.call(this)},t.prototype.changeVisible=function(t){e.prototype.changeVisible.call(this,t),t?(this.shape&&this.shape.show(),this.labelShape&&this.labelShape.forEach(function(e){e.show()})):(this.shape&&this.shape.hide(),this.labelShape&&this.labelShape.forEach(function(e){e.hide()}))},t.prototype.setState=function(e,t){var n=this,r=n.states,i=n.shapeFactory,a=n.model,o=n.shape,s=n.shapeType,c=r.indexOf(e);if(t){if(c>-1)return;r.push(e),(e===`active`||e===`selected`)&&o?.toFront()}else{if(c===-1)return;if(r.splice(c,1),e===`active`||e===`selected`){var l=this.geometry,u=l.sortZIndex,d=l.zIndexReversed?this.geometry.elements.length-this.elementIndex:this.elementIndex;u?o.setZIndex(d):o.set(`zIndex`,d)}}var f=i.drawShape(s,a,this.getOffscreenGroup());r.length?this.syncShapeStyle(o,f,r,null):this.syncShapeStyle(o,f,[`reset`],null),f.remove(!0);var p={state:e,stateStatus:t,element:this,target:this.container};this.container.emit(`statechange`,p),Sd(this.shape,`statechange`,p)},t.prototype.clearStates=function(){var e=this,t=this.states;F(t,function(t){e.setState(t,!1)}),this.states=[]},t.prototype.hasState=function(e){return this.states.includes(e)},t.prototype.getStates=function(){return this.states},t.prototype.getData=function(){return this.data},t.prototype.getModel=function(){return this.model},t.prototype.getBBox=function(){var e=this,t=e.shape,n=e.labelShape,r={x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0};return t&&(r=t.getCanvasBBox()),n&&n.forEach(function(e){var t=e.getCanvasBBox();r.x=Math.min(t.x,r.x),r.y=Math.min(t.y,r.y),r.minX=Math.min(t.minX,r.minX),r.minY=Math.min(t.minY,r.minY),r.maxX=Math.max(t.maxX,r.maxX),r.maxY=Math.max(t.maxY,r.maxY)}),r.width=r.maxX-r.minX,r.height=r.maxY-r.minY,r},t.prototype.getStatesStyle=function(){if(!this.statesStyle){var e=this,t=e.shapeType,n=e.geometry,r=e.shapeFactory,i=n.stateOption,a=r.defaultShapeType,o=r.theme[t]||r.theme[a];this.statesStyle=R({},o,i)}return this.statesStyle},t.prototype.getStateStyle=function(e,t){var n=this.getStatesStyle(),r=z(n,[e,`style`],{}),i=r[t]||r;return j(i)?i(this):i},t.prototype.getAnimateCfg=function(e){var t=this,n=this.animate;if(n){var r=n[e];return r&&_(_({},r),{callback:function(){var e;j(r.callback)&&r.callback(),(e=t.geometry)==null||e.emit(Wt.AFTER_DRAW_ANIMATE)}})}return null},t.prototype.drawShape=function(e,t){var n;t===void 0&&(t=!1);var r=this,i=r.shapeFactory,a=r.container,o=r.shapeType;if(this.shape=i.drawShape(o,e,a),this.shape){this.setShapeInfo(this.shape,e);var s=this.shape.cfg.name;s?I(s)&&(this.shape.cfg.name=[`element`,s]):this.shape.cfg.name=[`element`,this.shapeFactory.geometryType];var c=t?`enter`:`appear`,l=this.getAnimateCfg(c);l&&((n=this.geometry)==null||n.emit(Wt.BEFORE_DRAW_ANIMATE),f_(this.shape,l,{coordinate:i.coordinate,toAttrs:_({},this.shape.attr())}))}},t.prototype.getOffscreenGroup=function(){return this.offscreenGroup||=new(this.container.getGroupBase())({}),this.offscreenGroup},t.prototype.setShapeInfo=function(e,t){var n=this;e.cfg.origin=t,e.cfg.element=this,e.isGroup()&&e.get(`children`).forEach(function(e){n.setShapeInfo(e,t)})},t.prototype.syncShapeStyle=function(e,t,n,r,i){var a=this,o;if(n===void 0&&(n=[]),i===void 0&&(i=0),!(!e||!t)){var s=e.get(`clipShape`),c=t.get(`clipShape`);if(this.syncShapeStyle(s,c,n,r),e.isGroup())for(var l=e.get(`children`),u=t.get(`children`),d=0;d<l.length;d++)this.syncShapeStyle(l[d],u[d],n,r,i+d);else{if(!xt(n)&&!Ct(n,[`reset`])){var f=e.get(`name`);N(f)&&(f=f[1]),F(n,function(e){if(t.get(`name`)!==`element-background`){var n=a.getStateStyle(e,f||i);t.attr(n)}})}var p=xm(e,t);this.animate?r?((o=this.geometry)==null||o.emit(Wt.BEFORE_DRAW_ANIMATE),f_(e,r,{coordinate:this.shapeFactory.coordinate,toAttrs:p,shapeModel:this.model})):xt(n)?e.attr(p):(e.stopAnimate(),e.animate(p,{duration:300})):e.attr(p)}}},t.prototype.getShapeType=function(e){var t=z(e,`shape`);return N(t)?t[0]:t},t}(yn),g_={},__={};function v_(e){return g_[e.toLowerCase()]}function y_(e,t){g_[e.toLowerCase()]=t}function b_(e){return __[e.toLowerCase()]}function x_(e,t){__[e.toLowerCase()]=t}var S_={coordinate:null,defaultShapeType:null,theme:null,getShapePoints:function(e,t){var n=this.getShape(e);return n.getPoints?n.getPoints(t):this.getDefaultPoints(t)},getShape:function(e){var t=this[e]||this[this.defaultShapeType];return t.coordinate=this.coordinate,t},getDefaultPoints:function(){return[]},getDefaultStyle:function(e){return z(e,[this.defaultShapeType,`default`,`style`],{})},getMarker:function(e,t){var n=this.getShape(e);if(!n.getMarker){var r=this.defaultShapeType;n=this.getShape(r)}var i=this.theme,a=z(i,[e,`default`],{}),o=n.getMarker(t);return R({},a,o)},drawShape:function(e,t,n){return this.getShape(e).draw(t,n)}},C_={coordinate:null,parsePath:function(e){var t=this.coordinate,n=rc(e);return n=t.isPolar?bh(t,n):yh(t,n),n},parsePoint:function(e){return this.coordinate.convert(e)},parsePoints:function(e){var t=this.coordinate;return e.map(function(e){return t.convert(e)})},draw:function(e,t){}},w_={};function T_(e,t){var n=Ze(e),r=_(_(_({},S_),t),{geometryType:e});return w_[n]=r,r}function K(e,t,n){var r=Ze(e),i=w_[r],a=_(_({},C_),n);return i[t]=a,a}function E_(e){var t=Ze(e);return w_[t]}function D_(e,t,n){var r,i;if(n===void 0&&(n={}),!t)return[e];var a=Ne(e,t),o=[];if(t.length===1&&n[t[0]]){var s=n[t[0]];try{for(var c=E(s),l=c.next();!l.done;l=c.next()){var u=l.value,d=a[`_${u}`];d&&o.push(d)}}catch(e){r={error:e}}finally{try{l&&!l.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}}else for(var f in a)if(a.hasOwnProperty(f)){var p=a[f];o.push(p)}return o}function O_(e,t){return ke([`color`,`shape`,`size`,`x`,`y`,`isInCircle`,`data`,`style`,`defaultStyle`,`points`,`mappingData`],function(n){return!Ct(e[n],t[n])})}function k_(e){return N(e)?e:e.split(`*`)}function A_(e,t){for(var n=[],r=[],i=[],a=new Map,o=0;o<t.length;o++){var s=t[o];e[s]?r.push(s):n.push(s),a.set(s,!0)}return Object.keys(e).forEach(function(e){a.has(e)||i.push(e)}),{added:n,updated:r,removed:i}}var j_=function(e){l(t,e);function t(t){var n=e.call(this,t)||this;n.type=`base`,n.attributes={},n.elements=[],n.elementsMap={},n.animateOption=!0,n.attributeOption={},n.lastElementsMap={},n.generatePoints=!1,n.beforeMappingData=null,n.adjusts={},n.idFields=[],n.hasSorted=!1,n.isCoordinateChanged=!1;var r=t.container,i=t.labelsContainer,a=t.coordinate,o=t.data,s=t.sortable,c=s===void 0?!1:s,l=t.visible,u=l===void 0?!0:l,d=t.theme,f=t.scales,p=f===void 0?{}:f,m=t.scaleDefs,h=m===void 0?{}:m,g=t.intervalPadding,_=t.dodgePadding,v=t.maxColumnWidth,y=t.minColumnWidth,b=t.columnWidthRatio,x=t.roseWidthRatio,S=t.multiplePieWidthRatio,C=t.zIndexReversed,w=t.sortZIndex,T=t.useDeferredLabel;return n.container=r,n.labelsContainer=i,n.coordinate=a,n.data=o,n.sortable=c,n.visible=u,n.userTheme=d,n.scales=p,n.scaleDefs=h,n.intervalPadding=g,n.dodgePadding=_,n.maxColumnWidth=v,n.minColumnWidth=y,n.columnWidthRatio=b,n.roseWidthRatio=x,n.multiplePieWidthRatio=S,n.zIndexReversed=C,n.sortZIndex=w,n.useDeferredLabel=T?typeof T==`number`?T:1/0:null,n}return t.prototype.position=function(e){var t=e;se(e)||(t={fields:k_(e)});var n=z(t,`fields`);return n.length===1&&(n.unshift(`1`),Dt(t,`fields`,n)),Dt(this.attributeOption,`position`,t),this},t.prototype.color=function(e,t){return this.createAttrOption(`color`,e,t),this},t.prototype.shape=function(e,t){return this.createAttrOption(`shape`,e,t),this},t.prototype.size=function(e,t){return this.createAttrOption(`size`,e,t),this},t.prototype.adjust=function(e){var t=e;return(I(e)||se(e))&&(t=[e]),F(t,function(e,n){P(e)||(t[n]={type:e})}),this.adjustOption=t,this},t.prototype.style=function(e,t){if(I(e)){var n=k_(e);this.styleOption={fields:n,callback:t}}else{var r=e,n=r.fields,i=r.callback,a=r.cfg;n||i||a?this.styleOption=e:this.styleOption={cfg:e}}return this},t.prototype.tooltip=function(e,t){return I(e)?this.tooltipOption={fields:k_(e),callback:t}:this.tooltipOption=e,this},t.prototype.animate=function(e){return this.animateOption=e,this},t.prototype.label=function(e,t,n){if(I(e)){var r={};r.fields=k_(e),j(t)?r.callback=t:se(t)&&(r.cfg=t),n&&(r.cfg=n),this.labelOption=r}else this.labelOption=e;return this},t.prototype.state=function(e){return this.stateOption=e,this},t.prototype.customInfo=function(e){return this.customOption=e,this},t.prototype.init=function(e){e===void 0&&(e={}),this.setCfg(e),this.initAttributes(),this.processData(this.data),this.adjustScale()},t.prototype.update=function(e){e===void 0&&(e={});var t=e.data,n=e.isDataChanged,r=e.isCoordinateChanged,i=this,a=i.attributeOption,o=i.lastAttributeOption;Ct(a,o)?t&&(n||!Ct(t,this.data))?(this.setCfg(e),this.initAttributes(),this.processData(t)):this.setCfg(e):this.init(e),this.adjustScale(),this.isCoordinateChanged=r},t.prototype.paint=function(e){var t=this;e===void 0&&(e=!1),this.animateOption&&=R({},d_(this.type,this.coordinate),this.animateOption),this.defaultSize=void 0,this.elementsMap={},this.elements=[],this.getOffscreenGroup().clear();var n=this.beforeMappingData,r=this.beforeMapping(n);this.dataArray=Array(r.length);for(var i=0;i<r.length;i++){var a=r[i];this.dataArray[i]=this.mapping(a)}if(this.updateElements(this.dataArray,e),this.lastElementsMap=this.elementsMap,this.canDoGroupAnimation(e)){var o=this.container,s=this.type,c=this.coordinate,l=z(this.animateOption,`appear`),u=this.getYScale(),d=c.convert({x:0,y:u.scale(this.getYMinValue())});p_(o,l,s,c,d)}if(this.labelOption){var f=this.useDeferredLabel,p=(function(){return t.renderLabels(pe(t.dataArray),e)}).bind(this);if(typeof f==`number`){var m=typeof f==`number`&&f!==1/0?f:0;if(!window.requestIdleCallback)setTimeout(p,m);else{var h=m&&m!==1/0?{timeout:m}:void 0;window.requestIdleCallback(p,h)}}else p()}this.lastAttributeOption=_({},this.attributeOption),this.visible===!1&&this.changeVisible(!1)},t.prototype.clear=function(){var e=this,t=e.container,n=e.geometryLabel,r=e.offscreenGroup;t&&t.clear(),n&&n.clear(),r&&r.clear(),this.scaleDefs=void 0,this.attributes={},this.scales={},this.elementsMap={},this.lastElementsMap={},this.elements=[],this.adjusts={},this.dataArray=null,this.beforeMappingData=null,this.lastAttributeOption=void 0,this.defaultSize=void 0,this.idFields=[],this.groupScales=void 0,this.hasSorted=!1,this.isCoordinateChanged=!1},t.prototype.destroy=function(){this.clear(),this.container.remove(!0),this.offscreenGroup&&=(this.offscreenGroup.remove(!0),null),this.geometryLabel&&=(this.geometryLabel.destroy(),null),this.theme=void 0,this.shapeFactory=void 0,e.prototype.destroy.call(this)},t.prototype.getGroupScales=function(){return this.groupScales},t.prototype.getAttribute=function(e){return this.attributes[e]},t.prototype.getXScale=function(){return this.getAttribute(`position`).scales[0]},t.prototype.getYScale=function(){return this.getAttribute(`position`).scales[1]},t.prototype.getGroupAttributes=function(){var e=[];return F(this.attributes,function(t){qt.includes(t.type)&&e.push(t)}),e},t.prototype.getDefaultValue=function(e){var t,n=this.getAttribute(e);return n&&xt(n.scales)&&(t=n.values[0]),t},t.prototype.getAttributeValues=function(e,t){for(var n=[],r=e.scales,i=0,o=r.length;i<o;i++){var c=r[i],l=c.field;c.isIdentity?n.push(c.values):n.push(t[l])}return e.mapping.apply(e,s([],a(n),!1))},t.prototype.getAdjust=function(e){return this.adjusts[e]},t.prototype.getCoordinate=function(){return this.coordinate},t.prototype.getData=function(){return this.data},t.prototype.getShapeMarker=function(e,t){return this.getShapeFactory().getMarker(e,t)},t.prototype.getElementsBy=function(e){return this.elements.filter(function(t){return e(t)})},t.prototype.getElements=function(){return this.elements},t.prototype.getElementId=function(e){e=N(e)?e[0]:e;var t=e[Jt];if(this.idFields.length){for(var n=t[this.idFields[0]],r=1;r<this.idFields.length;r++)n+=`-`+t[this.idFields[r]];return n}for(var i=this.type,a=this.getXScale(),o=this.getYScale(),s=a.field||`x`,c=o.field||`y`,l=t[c],u=a.type===`identity`?a.values[0]:t[s],d=i===`interval`||i===`schema`?`${u}`:i===`line`||i===`area`||i===`path`?i:`${u}-${l}`,f=this.groupScales,r=0,p=f.length;r<p;r++){var m=f[r].field;d=`${d}-${t[m]}`}var h=this.getAdjust(`dodge`);if(h){var g=h.dodgeBy;g&&(d=`${d}-${t[g]}`)}return this.getAdjust(`jitter`)&&(d=`${d}-${e.x}-${e.y}`),d},t.prototype.getScaleFields=function(){var e=[],t=new Map,n=this,r=n.attributeOption,i=n.labelOption,a=n.tooltipOption;for(var o in r)if(r.hasOwnProperty(o)){var s=r[o];s.fields?Tm(s.fields,e,t):s.values&&Tm(s.values,e,t)}return i&&i.fields&&Tm(i.fields,e,t),P(a)&&a.fields&&Tm(a.fields,e,t),e},t.prototype.changeVisible=function(t){e.prototype.changeVisible.call(this,t);for(var n=this.elements,r=0,i=n.length;r<i;r++)n[r].changeVisible(t);t?(this.container&&this.container.show(),this.labelsContainer&&this.labelsContainer.show()):(this.container&&this.container.hide(),this.labelsContainer&&this.labelsContainer.hide())},t.prototype.getFields=function(){var e=new Map,t=[];return Object.values(this.attributeOption).forEach(function(n){(n?.fields||[]).forEach(function(n){e.has(n)||t.push(n),e.set(n,!0)})},[]),t},t.prototype.getGroupFields=function(){for(var e=[],t=new Map,n=0,r=qt.length;n<r;n++){var i=qt[n],a=this.attributeOption[i];a&&a.fields&&Tm(a.fields,e,t)}return e},t.prototype.getXYFields=function(){var e=a(this.attributeOption.position.fields,2),t=e[0],n=e[1];return[t,n]},t.prototype.getXField=function(){return z(this.getXYFields(),[0])},t.prototype.getYField=function(){return z(this.getXYFields(),[1])},t.prototype.getShapes=function(){return this.elements.map(function(e){return e.shape})},t.prototype.getOffscreenGroup=function(){return this.offscreenGroup||=new(this.container.getGroupBase())({}),this.offscreenGroup},t.prototype.sort=function(e){if(!this.hasSorted)for(var t=this.getXScale(),n=t.field,r=0;r<e.length;r++)e[r].sort(function(e,r){return t.translate(e[Jt][n])-t.translate(r[Jt][n])});this.hasSorted=!0},t.prototype.adjustScale=function(){var e=this.getYScale();e&&this.getAdjust(`stack`)&&this.updateStackRange(e,this.beforeMappingData)},t.prototype.getShapeFactory=function(){var e=this.shapeType;if(E_(e))return this.shapeFactory||=ft(E_(e)),this.shapeFactory.coordinate=this.coordinate,this.shapeFactory.theme=this.theme.geometries[e]||{},this.shapeFactory},t.prototype.createShapePointsCfg=function(e){var t=this.getXScale(),n=this.getYScale(),r=this.normalizeValues(e[t.field],t),i=n?this.normalizeValues(e[n.field],n):e.y?e.y:.1;return{x:r,y:i,y0:n?n.scale(this.getYMinValue()):void 0}},t.prototype.createElement=function(e,t,n){n===void 0&&(n=!1);var r=this.container,i=this.getDrawCfg(e),a=this.getShapeFactory(),o=new h_({shapeFactory:a,container:r,offscreenGroup:this.getOffscreenGroup(),elementIndex:t});return o.animate=this.animateOption,o.geometry=this,o.draw(i,n),o},t.prototype.getDrawCfg=function(e){var t=e[Jt],n={mappingData:e,data:t,x:e.x,y:e.y,color:e.color,size:e.size,isInCircle:this.coordinate.isPolar,customInfo:this.customOption},r=e.shape;!r&&this.getShapeFactory()&&(r=this.getShapeFactory().defaultShapeType),n.shape=r;var i=this.theme.geometries[this.shapeType];n.defaultStyle=z(i,[r,`default`],{}).style,!n.defaultStyle&&this.getShapeFactory()&&(n.defaultStyle=this.getShapeFactory().getDefaultStyle(i));var a=this.styleOption;return a&&(n.style=this.getStyleCfg(a,t)),this.generatePoints&&(n.points=e.points,n.nextPoints=e.nextPoints),n},t.prototype.updateElements=function(e,t){var n,r,i,a,o,s;t===void 0&&(t=!1);for(var c=new Map,l=[],u=new Map,d=0,f=0;f<e.length;f++)for(var p=e[f],m=0;m<p.length;m++){var h=p[m],g=this.getElementId(h),_=c.has(g)?`${g}-${f}-${m}`:g;l.push(_),c.set(_,h),u.set(_,d),d++}this.elements=Array(d);var v=A_(this.lastElementsMap,l),y=v.added,b=v.updated,x=v.removed;try{for(var S=E(y),C=S.next();!C.done;C=S.next()){var g=C.value,h=c.get(g),f=u.get(g),w=this.createElement(h,f,t);this.elements[f]=w,this.elementsMap[g]=w,w.shape&&w.shape.set(`zIndex`,this.zIndexReversed?this.elements.length-f:f)}}catch(e){n={error:e}}finally{try{C&&!C.done&&(r=S.return)&&r.call(S)}finally{if(n)throw n.error}}try{for(var T=E(b),D=T.next();!D.done;D=T.next()){var g=D.value,w=this.lastElementsMap[g],h=c.get(g),O=this.getDrawCfg(h),k=w.getModel(),f=u.get(g);(this.isCoordinateChanged||O_(O,k))&&(w.animate=this.animateOption,w.update(O)),this.elements[f]=w,this.elementsMap[g]=w,w.shape&&w.shape.set(`zIndex`,this.zIndexReversed?this.elements.length-f:f)}}catch(e){i={error:e}}finally{try{D&&!D.done&&(a=T.return)&&a.call(T)}finally{if(i)throw i.error}}this.container&&this.container.sort();try{for(var A=E(x),ee=A.next();!ee.done;ee=A.next()){var g=ee.value,w=this.lastElementsMap[g];w.animate=this.animateOption,w.destroy()}}catch(e){o={error:e}}finally{try{ee&&!ee.done&&(s=A.return)&&s.call(A)}finally{if(o)throw o.error}}},t.prototype.getLabelType=function(){var e=this,t=e.labelOption,n=e.coordinate,r=e.type,i=n.type,a=n.isTransposed,o=z(t,[`cfg`,`type`]);return o||=i===`polar`?a?`pie`:`polar`:i===`theta`?`pie`:r===`interval`||r===`polygon`?`interval`:`base`,o},t.prototype.getYMinValue=function(){var e=this.getYScale(),t=e.min,n=e.max;return t>=0?t:n<=0?n:0},t.prototype.createAttrOption=function(e,t,n){if(M(t)||P(t))P(t)&&Ct(Object.keys(t),[`values`])?Dt(this.attributeOption,e,{fields:t.values}):Dt(this.attributeOption,e,t);else{var r={};L(t)?r.values=[t]:r.fields=k_(t),n&&(j(n)?r.callback=n:r.values=n),Dt(this.attributeOption,e,r)}},t.prototype.initAttributes=function(){var e=this,t=this,n=t.attributes,r=t.attributeOption,i=t.theme,a=t.shapeType;this.groupScales=[];var o={},s=function(t){if(r.hasOwnProperty(t)){var s=r[t];if(!s)return{value:void 0};var c=_({},s),l=c.callback,u=c.values,d=c.fields,f=(d===void 0?[]:d).map(function(n){var r=e.scales[n];return!o[n]&&qt.includes(t)&&Lm(r,z(e.scaleDefs,n),t,e.type)===`cat`&&(e.groupScales.push(r),o[n]=!0),r});c.scales=f,t!==`position`&&f.length===1&&f[0].type===`identity`?c.values=f[0].values:!l&&!u&&(t===`size`?c.values=i.sizes:t===`shape`?c.values=i.shapes[a]||[]:t===`color`&&(f.length?c.values=f[0].values.length<=10?i.colors10:i.colors20:c.values=i.colors10)),n[t]=new(pd(t))(c)}};for(var c in r){var l=s(c);if(typeof l==`object`)return l.value}},t.prototype.processData=function(e){var t,n;this.hasSorted=!1;for(var r=this.getAttribute(`position`).scales.filter(function(e){return e.isCategory}),i=this.groupData(e),a=[],o=0,s=i.length;o<s;o++){for(var c=i[o],l=[],u=0,d=c.length;u<d;u++){var f=c[u],p={};for(var m in f)p[m]=f[m];p[Jt]=f;try{for(var h=(t=void 0,E(r)),g=h.next();!g.done;g=h.next()){var _=g.value,v=_.field;p[v]=_.translate(p[v])}}catch(e){t={error:e}}finally{try{g&&!g.done&&(n=h.return)&&n.call(h)}finally{if(t)throw t.error}}l.push(p)}a.push(l)}var y=this.adjustData(a);return this.beforeMappingData=y,y},t.prototype.adjustData=function(e){var t=this.adjustOption,n=this,r=n.intervalPadding,i=n.dodgePadding,a=n.theme,o=this.maxColumnWidth||a.maxColumnWidth,s=this.minColumnWidth||a.minColumnWidth,c=this.columnWidthRatio||a.columnWidthRatio,l=e;if(t){var u=this.getXScale(),d=this.getYScale(),f=u.field,p=d?d.field:null,m=Om(this.coordinate),h=u.values.length,g=this.getAttribute(`size`),v=void 0;g&&(v=g.values[0]);for(var y=0,b=t.length;y<b;y++){var x=t[y],S=_({xField:f,yField:p,intervalPadding:r,dodgePadding:i,xDimensionLength:m,groupNum:h,defaultSize:v,maxColumnWidth:o,minColumnWidth:s,columnWidthRatio:c},x),C=x.type;if(C===`dodge`){var w=[];if(u.isCategory||u.type===`identity`)w.push(`x`);else if(!d)w.push(`y`);else throw Error(`dodge is not support linear attribute, please use category attribute!`);S.adjustNames=w,S.dodgeRatio=c}else if(C===`stack`){var T=this.coordinate;d||(S.height=T.getHeight(),S.size=this.getDefaultValue(`size`)||3),!T.isTransposed&&M(S.reverseOrder)&&(S.reverseOrder=!0)}var E=Fc(C);S.dimValuesMap={},u&&u.values&&(S.dimValuesMap[u.field]=u.values.map(function(e){return u.translate(e)}));var D=new E(S);l=D.process(l),this.adjusts[C]=D}}return l},t.prototype.groupData=function(e){for(var t=this.getGroupScales(),n=this.scaleDefs,r={},i=[],a=0;a<t.length;a++){var o=t[a].field;i.push(o),z(n,[o,`values`])&&(r[o]=n[o].values)}return D_(e,i,r)},t.prototype.updateStackRange=function(e,t){for(var n=pe(t),r=e.field,i=e.min,a=e.max,o=0;o<n.length;o++){var s=n[o],c=Math.min.apply(null,s[r]),l=Math.max.apply(null,s[r]);c<i&&(i=c),l>a&&(a=l)}var u=this.scaleDefs,d={};i<e.min&&!z(u,[r,`min`])&&(d.min=i),a>e.max&&!z(u,[r,`max`])&&(d.max=a),e.change(d)},t.prototype.beforeMapping=function(e){var t=e;if(this.sortable&&this.sort(t),this.generatePoints)for(var n=0,r=t.length;n<r;n++){var i=t[n];this.generateShapePoints(i);var a=t[n+1];a&&(this.generateShapePoints(a),i[0].nextPoints=a[0].points)}return t},t.prototype.generateShapePoints=function(e){for(var t=this.getShapeFactory(),n=this.getAttribute(`shape`),r=0;r<e.length;r++){var i=e[r],a=this.createShapePointsCfg(i),o=n?this.getAttributeValues(n,i):null;i.points=t.getShapePoints(o,a)}},t.prototype.normalizeValues=function(e,t){var n=[];if(N(e))for(var r=0;r<e.length;r++){var i=e[r];n.push(t.scale(i))}else n=t.scale(e);return n},t.prototype.mapping=function(e){for(var t=this.attributes,n=[],r=0;r<e.length;r++){var i=e[r],a={_origin:i[Jt],points:i.points,nextPoints:i.nextPoints};for(var o in t)if(t.hasOwnProperty(o)){var s=t[o],c=s.names,l=this.getAttributeValues(s,i);if(c.length>1)for(var u=0;u<l.length;u+=1){var d=l[u],f=c[u];a[f]=N(d)&&d.length===1?d[0]:d}else a[c[0]]=l.length===1?l[0]:l}this.convertPoint(a),n.push(a)}return n},t.prototype.convertPoint=function(e){var t=e.x,n=e.y,r,i,a,o=this.coordinate;if(N(t)&&N(n)){r=[],i=[];for(var s=0,c=0,l=t.length,u=n.length;s<l&&c<u;s+=1,c+=1)a=o.convert({x:t[s],y:n[c]}),r.push(a.x),i.push(a.y)}else if(N(n)){i=[];for(var d=0;d<n.length;d++){var f=n[d];a=o.convert({x:t,y:f}),r&&r!==a.x?(N(r)||(r=[r]),r.push(a.x)):r=a.x,i.push(a.y)}}else if(N(t)){r=[];for(var d=0;d<t.length;d++){var p=t[d];a=o.convert({x:p,y:n}),i&&i!==a.y?(N(i)||(i=[i]),i.push(a.y)):i=a.y,r.push(a.x)}}else{var m=o.convert({x:t,y:n});r=m.x,i=m.y}e.x=r,e.y=i},t.prototype.getStyleCfg=function(e,t){var n=e.fields,r=n===void 0?[]:n,i=e.callback,o=e.cfg;if(o)return o;var c=r.map(function(e){return t[e]});return i.apply(void 0,s([],a(c),!1))},t.prototype.setCfg=function(e){var t=this,n=e.coordinate,r=e.data,i=e.theme,a=e.scaleDefs;n&&(this.coordinate=n),r&&(this.data=r),a&&(this.scaleDefs=a,this.idFields=[],F(a,function(e,n){e&&e.key&&t.idFields.push(n)})),i&&(this.theme=this.userTheme?R({},i,this.userTheme):i)},t.prototype.renderLabels=function(e,t){return t===void 0&&(t=!1),c(this,void 0,void 0,function(){var n,r,i,o,c,l,d,f,p,m,h,g,_=this;return u(this,function(u){switch(u.label){case 0:return n=this.geometryLabel,this.emit(Wt.BEFORE_RENDER_LABEL),n||(r=this.getLabelType(),i=v_(r),n=new i(this),this.geometryLabel=n),[4,n.render(e,t)];case 1:u.sent(),o=n.labelsRenderer.shapesMap,c=new Map,F(o,function(e,t){for(var n=e.getChildren()||[],r=0;r<n.length;r++){var i=n[r],a=_.elementsMap[i.get(`elementId`)||t.split(` `)[0]];if(a){i.cfg.name=[`element`,`label`],i.cfg.element=a;var o=c.get(a)||new Set;o.add(e),c.set(a,o)}}});try{for(l=E(c.entries()),d=l.next();!d.done;d=l.next())f=a(d.value,2),p=f[0],m=f[1],p.labelShape=s([],a(m),!1)}catch(e){h={error:e}}finally{try{d&&!d.done&&(g=l.return)&&g.call(l)}finally{if(h)throw h.error}}return this.emit(Wt.AFTER_RENDER_LABEL),[2]}})})},t.prototype.canDoGroupAnimation=function(e){return!e&&this.animateOption&&(z(this.animateOption,`appear`)===void 0||z(this.animateOption,`appear`)&&z(this.animateOption,[`appear`,`animation`])===void 0)},t}(yn),M_=Ir;function N_(e,t,n){var r=M_(e.getMatrix(),[[`t`,t,n]]);e.setMatrix(r)}function P_(e,t){var n=e.attr(),r=n.x,i=n.y;return M_(e.getMatrix(),[[`t`,-r,-i],[`r`,t],[`t`,r,i]])}function F_(e,t){var n=P_(e,t);e.setMatrix(n)}function I_(e,t){var n=e.getBBox(),r=(n.minX+n.maxX)/2,i=(n.minY+n.maxY)/2;e.applyToMatrix([r,i,1]);var a=M_(e.getMatrix(),[[`t`,-r,-i],[`s`,t,t],[`t`,r,i]]);e.setMatrix(a)}function L_(e){return e.find(function(e){return e.get(`type`)===`text`})}function R_(e,t,n){n===void 0&&(n=[0,0,0,0]);var r=e&&e.getChildren()[0];if(r){var i=r.clone();t?.rotate&&F_(i,-t.rotate);var a=i.getCanvasBBox(),o=a.x,s=a.y,c=a.width,l=a.height;i.destroy();var u=n;return M(u)?u=[2,2,2,2]:L(u)&&(u=[,,,,].fill(u)),{x:o-u[3],y:s-u[0],width:c+u[1]+u[3],height:l+u[0]+u[2],rotation:t?.rotate||0}}return{x:0,y:0,width:0,height:0,rotation:0}}function z_(e,t,n){n===void 0&&(n=0);var r=Math.max(0,Math.min(e.x+e.width+n,t.x+t.width+n)-Math.max(e.x-n,t.x-n)),i=Math.max(0,Math.min(e.y+e.height+n,t.y+t.height+n)-Math.max(e.y-n,t.y-n));return r*i}function B_(e,t){var n=e.getBBox();return ke(t,function(e){var t=e.getBBox();return z_(n,t,2)>0})}function V_(e,t,n){var r=n.data,i=n.origin,a=n.animateCfg,o=n.coordinate,s=z(a,`update`);e.set(`data`,r),e.set(`origin`,i),e.set(`animateCfg`,a),e.set(`coordinate`,o),e.set(`visible`,t.get(`visible`)),(e.getChildren()||[]).forEach(function(c,l){var u=t.getChildByIndex(l);if(!u)e.removeChild(c),c.remove(!0);else{c.set(`data`,r),c.set(`origin`,i),c.set(`animateCfg`,a),c.set(`coordinate`,o);var d=xm(c,u);s?f_(c,s,{toAttrs:d,coordinate:o}):c.attr(d),u.isGroup()&&V_(c,u,n)}}),F(t.getChildren(),function(t,n){N(e.getChildren())&&n>=e.getCount()&&(t.destroyed||e.add(t))})}var H_=function(){function e(e){this.shapesMap={};var t=e.layout,n=e.container;this.layout=t,this.container=n}return e.prototype.render=function(e,t,n){return n===void 0&&(n=!1),c(this,void 0,void 0,function(){var r,i,a,o,s,c,l,d,f=this;return u(this,function(u){switch(u.label){case 0:if(r={},i=this.createOffscreenGroup(),!e.length)return[3,2];try{for(a=E(e),o=a.next();!o.done;o=a.next())s=o.value,s&&(r[s.id]=this.renderLabel(s,i))}catch(e){l={error:e}}finally{try{o&&!o.done&&(d=a.return)&&d.call(a)}finally{if(l)throw l.error}}return[4,this.doLayout(e,t,r)];case 1:u.sent(),this.renderLabelLine(e,r),this.renderLabelBackground(e,r),this.adjustLabel(e,r),u.label=2;case 2:return c=this.shapesMap,F(r,function(e,t){if(e.destroyed)delete r[t];else{if(c[t]){var i=e.get(`data`),a=e.get(`origin`),o=e.get(`coordinate`),s=e.get(`animateCfg`),l=c[t];V_(l,r[t],{data:i,origin:a,animateCfg:s,coordinate:o}),r[t]=l}else{if(f.container.destroyed)return;f.container.add(e);var u=z(e.get(`animateCfg`),n?`enter`:`appear`);u&&f_(e,u,{toAttrs:_({},e.attr()),coordinate:e.get(`coordinate`)})}delete c[t]}}),F(c,function(e){var t=z(e.get(`animateCfg`),`leave`);t?f_(e,t,{toAttrs:null,coordinate:e.get(`coordinate`)}):e.remove(!0)}),this.shapesMap=r,i.destroy(),[2]}})})},e.prototype.clear=function(){this.container.clear(),this.shapesMap={}},e.prototype.destroy=function(){this.container.destroy(),this.shapesMap=null},e.prototype.renderLabel=function(e,t){var n=e.id,r=e.elementId,i=e.data,a=e.mappingData,o=e.coordinate,s=e.animate,c=e.content,l=e.capture,u={id:n,elementId:r,capture:l,data:i,origin:_(_({},a),{data:a[Jt]}),coordinate:o},d=t.addGroup(_({name:`label`,animateCfg:this.animate===!1||s===null||s===!1?!1:R({},this.animate,s)},u)),f;if(c.isGroup&&c.isGroup()||c.isShape&&c.isShape()){var p=c.getCanvasBBox(),m=p.width,h=p.height,g=z(e,`textAlign`,`left`),v=e.x,y=e.y-h/2;g===`center`?v-=m/2:(g===`right`||g===`end`)&&(v-=m),N_(c,v,y),f=c,d.add(c)}else{var b=z(e,[`style`,`fill`]);f=d.addShape(`text`,_({attrs:_(_({x:e.x,y:e.y,textAlign:e.textAlign,textBaseline:z(e,`textBaseline`,`middle`),text:e.content},e.style),{fill:nt(b)?e.color:b})},u))}return e.rotate&&F_(f,e.rotate),d},e.prototype.doLayout=function(e,t,n){return c(this,void 0,void 0,function(){var r,i=this;return u(this,function(a){switch(a.label){case 0:return this.layout?(r=N(this.layout)?this.layout:[this.layout],[4,Promise.all(r.map(function(r){var a=b_(z(r,`type`,``));if(a){var o=[],s=[];return F(n,function(e,n){o.push(e),s.push(t[e.get(`elementId`)])}),a(e,o,s,i.region,r.cfg)}}))]):[3,2];case 1:a.sent(),a.label=2;case 2:return[2]}})})},e.prototype.renderLabelLine=function(e,t){F(e,function(e){var n=z(e,`coordinate`);if(!(!e||!n)){var r=n.getCenter(),i=n.getRadius();if(e.labelLine){var a=z(e,`labelLine`,{}),o=e.id,s=a.path;if(!s){var c=gm(r.x,r.y,i,e.angle);s=[[`M`,c.x,c.y],[`L`,e.x,e.y]]}var l=t[o];l.destroyed||l.addShape(`path`,{capture:!1,attrs:_({path:s,stroke:e.color?e.color:z(e,[`style`,`fill`],`#000`),fill:null},a.style),id:o,origin:e.mappingData,data:e.data,coordinate:e.coordinate})}}})},e.prototype.renderLabelBackground=function(e,t){F(e,function(e){var n=z(e,`coordinate`),r=z(e,`background`);if(!(!r||!n)){var i=e.id,a=t[i];if(!a.destroyed){var s=a.getChildren()[0];if(s){var c=R_(a,e,r.padding),l=c.rotation,u=o(c,[`rotation`]),d=a.addShape(`rect`,{attrs:_(_({},u),r.style||{}),id:i,origin:e.mappingData,data:e.data,coordinate:e.coordinate});if(d.setZIndex(-1),l){var f=s.getMatrix();d.setMatrix(f)}}}}})},e.prototype.createOffscreenGroup=function(){return new(this.container.getGroupBase())({})},e.prototype.adjustLabel=function(e,t){F(e,function(e){if(e){var n=e.id,r=t[n];if(!r.destroyed){var i=r.findAll(function(e){return e.get(`type`)!==`path`});F(i,function(t){t&&(e.offsetX&&t.attr(`x`,t.attr(`x`)+e.offsetX),e.offsetY&&t.attr(`y`,t.attr(`y`)+e.offsetY))})}}})},e}();function U_(e){var t=0;return F(e,function(e){t+=e}),t/e.length}var W_=function(){function e(e){this.geometry=e}return e.prototype.getLabelItems=function(e){var t=this,n=[],r=this.getLabelCfgs(e);return F(e,function(e,i){var a=r[i];if(!a||M(e.x)||M(e.y)){n.push(null);return}var o=N(a.content)?a.content:[a.content];a.content=o;var s=o.length;F(o,function(r,i){if(M(r)||r===``){n.push(null);return}var o=_(_({},a),t.getLabelPoint(a,e,i));o.textAlign||=t.getLabelAlign(o,i,s),o.offset<=0&&(o.labelLine=null),n.push(o)})}),n},e.prototype.render=function(e,t){return t===void 0&&(t=!1),c(this,void 0,void 0,function(){var n,r,i;return u(this,function(a){switch(a.label){case 0:return n=this.getLabelItems(e),r=this.getLabelsRenderer(),i=this.getGeometryShapes(),[4,r.render(n,i,t)];case 1:return a.sent(),[2]}})})},e.prototype.clear=function(){var e=this.labelsRenderer;e&&e.clear()},e.prototype.destroy=function(){var e=this.labelsRenderer;e&&e.destroy(),this.labelsRenderer=null},e.prototype.getCoordinate=function(){return this.geometry.coordinate},e.prototype.getDefaultLabelCfg=function(e,t){var n=this.geometry,r=n.type,i=n.theme;return r===`polygon`||r===`interval`&&t===`middle`||e<0&&![`line`,`point`,`path`].includes(r)?z(i,`innerLabels`,{}):z(i,`labels`,{})},e.prototype.getThemedLabelCfg=function(e){var t=this.geometry,n=this.getDefaultLabelCfg(),r=t.type,i=t.theme;return r===`polygon`||e.offset<0&&![`line`,`point`,`path`].includes(r)?R({},n,i.innerLabels,e):R({},n,i.labels,e)},e.prototype.setLabelPosition=function(e,t,n,r){},e.prototype.getLabelOffset=function(e){var t=this.getCoordinate(),n=this.getOffsetVector(e);return t.isTransposed?n[0]:n[1]},e.prototype.getLabelOffsetPoint=function(e,t,n){var r=e.offset,i=this.getCoordinate().isTransposed,a=i?`x`:`y`,o=i?1:-1,s={x:0,y:0};return t>0||n===1?s[a]=r*o:s[a]=r*o*-1,s},e.prototype.getLabelPoint=function(e,t,n){var r=this.getCoordinate(),i=e.content.length;function a(t,n,r){r===void 0&&(r=!1);var i=t;return N(i)&&(i=e.content.length===1?r?U_(i):i.length<=2?i[t.length-1]:U_(i):i[n]),i}var o={content:e.content[n],x:0,y:0,start:{x:0,y:0},color:`#fff`},s=N(t.shape)?t.shape[0]:t.shape,c=s===`funnel`||s===`pyramid`;if(this.geometry.type===`polygon`){var l=bm(t.x,t.y);o.x=l[0],o.y=l[1]}else this.geometry.type===`interval`&&!c?(o.x=a(t.x,n,!0),o.y=a(t.y,n)):(o.x=a(t.x,n),o.y=a(t.y,n));if(c){var u=z(t,`nextPoints`),d=z(t,`points`);if(u){var f=r.convert(d[1]),p=r.convert(u[1]);o.x=(f.x+p.x)/2,o.y=(f.y+p.y)/2}else if(s===`pyramid`){var f=r.convert(d[1]),p=r.convert(d[2]);o.x=(f.x+p.x)/2,o.y=(f.y+p.y)/2}}e.position&&this.setLabelPosition(o,t,n,e.position);var m=this.getLabelOffsetPoint(e,n,i);return o.start={x:o.x,y:o.y},o.x+=m.x,o.y+=m.y,o.color=t.color,o},e.prototype.getLabelAlign=function(e,t,n){var r=`center`;if(this.getCoordinate().isTransposed){var i=e.offset;r=i<0?`right`:i===0?`center`:`left`,n>1&&t===0&&(r===`right`?r=`left`:r===`left`&&(r=`right`))}return r},e.prototype.getLabelId=function(e){var t=this.geometry,n=t.type,r=t.getXScale(),i=t.getYScale(),a=e[Jt],o=t.getElementId(e);return n===`line`||n===`area`?o+=` ${a[r.field]}`:n===`path`&&(o+=` ${a[r.field]}-${a[i.field]}`),o},e.prototype.getLabelsRenderer=function(){var e=this.geometry,t=e.labelsContainer,n=e.labelOption,r=e.canvasRegion,i=e.animateOption,a=this.geometry.coordinate,o=this.labelsRenderer;return o||(o=new H_({container:t,layout:z(n,[`cfg`,`layout`],{type:this.defaultLayout})}),this.labelsRenderer=o),o.region=r,o.animate=i?d_(`label`,a):!1,o},e.prototype.getLabelCfgs=function(e){var t=this,n=this.geometry,r=n.labelOption,i=n.scales,o=n.coordinate,c=r,l=c.fields,u=c.callback,d=c.cfg,f=l.map(function(e){return i[e]}),p=[];return F(e,function(e,n){var r=e[Jt],i=t.getLabelText(r,f),c;if(u){var m=l.map(function(e){return r[e]});if(c=u.apply(void 0,s([],a(m),!1)),M(c)){p.push(null);return}}var h=_(_({id:t.getLabelId(e),elementId:t.geometry.getElementId(e),data:r,mappingData:e,coordinate:o},d),c);j(h.position)&&(h.position=h.position(r,e,n));var g=t.getLabelOffset(h.offset||0),v=t.getDefaultLabelCfg(g,h.position);h=R({},v,h),h.offset=t.getLabelOffset(h.offset||0);var y=h.content;j(y)?h.content=y(r,e,n):at(y)&&(h.content=i[0]),p.push(h)}),p},e.prototype.getLabelText=function(e,t){var n=[];return F(t,function(t){var r=e[t.field];r=N(r)?r.map(function(e){return t.getText(e)}):t.getText(r),M(r)||r===``?n.push(null):n.push(r)}),n},e.prototype.getOffsetVector=function(e){e===void 0&&(e=0);var t=this.getCoordinate(),n=0;return L(e)&&(n=e),t.isTransposed?t.applyMatrix(n,0):t.applyMatrix(0,n)},e.prototype.getGeometryShapes=function(){var e=this.geometry,t={};return F(e.elementsMap,function(e,n){t[n]=e.shape}),F(e.getOffscreenGroup().getChildren(),function(n){var r=e.getElementId(n.get(`origin`).mappingData);t[r]=n}),t},e}();function G_(e,t,n){if(!e)return n;var r;if(e.callback&&e.callback.length>1){var i=Array(e.callback.length-1).fill(``);r=e.mapping.apply(e,s([t],a(i),!1)).join(``)}else r=e.mapping(t).join(``);return r||n}var K_={hexagon:function(e,t,n){var r=n/2*Math.sqrt(3);return[[`M`,e,t-n],[`L`,e+r,t-n/2],[`L`,e+r,t+n/2],[`L`,e,t+n],[`L`,e-r,t+n/2],[`L`,e-r,t-n/2],[`Z`]]},bowtie:function(e,t,n){var r=n-1.5;return[[`M`,e-n,t-r],[`L`,e+n,t+r],[`L`,e+n,t-r],[`L`,e-n,t+r],[`Z`]]},cross:function(e,t,n){return[[`M`,e-n,t-n],[`L`,e+n,t+n],[`M`,e+n,t-n],[`L`,e-n,t+n]]},tick:function(e,t,n){return[[`M`,e-n/2,t-n],[`L`,e+n/2,t-n],[`M`,e,t-n],[`L`,e,t+n],[`M`,e-n/2,t+n],[`L`,e+n/2,t+n]]},plus:function(e,t,n){return[[`M`,e-n,t],[`L`,e+n,t],[`M`,e,t-n],[`L`,e,t+n]]},hyphen:function(e,t,n){return[[`M`,e-n,t],[`L`,e+n,t]]},line:function(e,t,n){return[[`M`,e,t-n],[`L`,e,t+n]]}},q_=[`line`,`cross`,`tick`,`plus`,`hyphen`];function J_(e,t){return j(t)?t(e):R({},e,t)}function Y_(e,t){var n=e.symbol;if(I(n)&&q_.indexOf(n)!==-1){var r=z(e,`style`,{}),i=z(r,`lineWidth`,1),a=r.stroke||r.fill||t;e.style=R({},e.style,{lineWidth:i,stroke:a,fill:null})}}function X_(e){var t=e.symbol;I(t)&&K_[t]&&(e.symbol=K_[t])}function Z_(e){return e.startsWith(B.LEFT)||e.startsWith(B.RIGHT)?`vertical`:`horizontal`}function Q_(e,t,n,r,i){var a=n.getScale(n.type);if(a.isCategory){var o=a.field,s=t.getAttribute(`color`),c=t.getAttribute(`shape`),l=e.getTheme().defaultColor,u=t.coordinate.isPolar;return a.getTicks().map(function(n,d){var f,p=n.text,m=n.value,h=p,g=a.invert(m),v=e.filterFieldData(o,[(f={},f[o]=g,f)]).length===0;F(e.views,function(e){var t;e.filterFieldData(o,[(t={},t[o]=g,t)]).length||(v=!0)});var y=G_(s,g,l),b=G_(c,g,`point`),x=t.getShapeMarker(b,{color:y,isInPolar:u}),S=i;return j(S)&&(S=S(h,d,_({name:h,value:g},R({},r,x)))),x=R({},r,x,wm(_({},S),[`style`])),Y_(x,y),S&&S.style&&(x.style=J_(x.style,S.style)),X_(x),{id:g,name:h,value:g,marker:x,unchecked:v}})}return[]}function $_(e,t,n){return n.map(function(n,r){var i=t;j(i)&&(i=i(n.name,r,R({},e,n)));var a=j(n.marker)?n.marker(n.name,r,R({},e,n)):n.marker,o=R({},e,i,a);return X_(o),n.marker=o,n})}function ev(e,t){var n=z(e,[`components`,`legend`],{});return R({},z(n,[`common`],{}),R({},z(n,[t],{})))}function tv(e){return e?!1:e==null||isNaN(e)}function nv(e){if(N(e))return tv(e[1].y);var t=e.y;return N(t)?tv(t[0]):tv(t)}function rv(e,t,n){if(t===void 0&&(t=!1),n===void 0&&(n=!0),!e.length||e.length===1&&!n)return[];if(t){for(var r=[],i=0,a=e.length;i<a;i++){var o=e[i];nv(o)||r.push(o)}return[r]}for(var s=[],c=[],i=0,a=e.length;i<a;i++){var o=e[i];nv(o)?c.length&&(c.length===1&&!n||s.push(c),c=[]):c.push(o)}return c.length&&s.push(c),s}function iv(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];if(r){var i=n===0?`M`:`L`;t.push([i,r.x,r.y])}}var a=e[0];return a&&(t.push([`L`,a.x,a.y]),t.push([`z`])),t}function av(e){for(var t=e.length/2,n=[],r=[],i=0;i<e.length;i++)i<t?n.push(e[i]):r.push(e[i]);var a=vh(n,!1),o=vh(r,!1);r.length&&a.push([`L`,r[0].x,r[0].y]),o.shift();var s=a.concat(o);return n.length&&s.push([`L`,n[0].x,n[0].y]),s.push([`z`]),s}function ov(e,t,n,r){r===void 0&&(r=``);var i=e.style,a=i===void 0?{}:i,o=e.defaultStyle,s=e.color,c=e.size,l=_(_({},o),a);return s&&(t&&(a.stroke||(l.stroke=s)),n&&(a.fill||(l.fill=s))),r&&M(a[r])&&!M(c)&&(l[r]=c),l}function sv(e){return R({},{fill:`#CCD6EC`,fillOpacity:.3},z(e,[`background`,`style`]))}function cv(e){var t=e.x;return(N(e.y)?e.y:[e.y]).map(function(e,n){return{x:N(t)?t[n]:t,y:e}})}var lv={line:function(e,t,n){return[[`M`,e-n,t],[`L`,e+n,t]]},dot:function(e,t,n){return[[`M`,e-n,t],[`L`,e+n,t]]},dash:function(e,t,n){return[[`M`,e-n,t],[`L`,e+n,t]]},smooth:function(e,t,n){return[[`M`,e-n,t],[`A`,n/2,n/2,0,1,1,e,t],[`A`,n/2,n/2,0,1,0,e+n,t]]},hv:function(e,t,n){return[[`M`,e-n-1,t-2.5],[`L`,e,t-2.5],[`L`,e,t+2.5],[`L`,e+n+1,t+2.5]]},vh:function(e,t,n){return[[`M`,e-n-1,t+2.5],[`L`,e,t+2.5],[`L`,e,t-2.5],[`L`,e+n+1,t-2.5]]},hvh:function(e,t,n){return[[`M`,e-(n+1),t+2.5],[`L`,e-n/2,t+2.5],[`L`,e-n/2,t-2.5],[`L`,e+n/2,t-2.5],[`L`,e+n/2,t+2.5],[`L`,e+n+1,t+2.5]]},vhv:function(e,t){return[[`M`,e-5,t+2.5],[`L`,e-5,t],[`L`,e,t],[`L`,e,t-3],[`L`,e,t+3],[`L`,e+6.5,t+3]]}};function uv(e,t){var n=e.color;return{symbol:lv[t],style:{lineWidth:2,r:6,stroke:n}}}function dv(e,t,n){for(var r=e.isStack,i=e.connectNulls,a=e.isInCircle,o=e.showSinglePoint,s=ov(e,!0,!1,`lineWidth`),c=rv(e.points,i,o),l=[],u=0,d=c.length;u<d;u++){var f=c[u];l=l.concat(mv(f,a,r,t,n,s))}return s.path=l,s}function fv(e,t,n,r,i){if(e.length===1)return[[`M`,e[0].x,e[0].y-i.lineWidth/2],[`L`,e[0].x,e[0].y],[`L`,e[0].x,e[0].y+i.lineWidth/2]];var a;return n?(t&&e.length&&e.push({x:e[0].x,y:e[0].y}),a=vh(e,!1,r)):(a=_h(e,!1),t&&a.push([`Z`])),a}function pv(e,t,n,r,i,a){var o=[],s=[];F(e,function(e){var t=cv(e);o.push(t[1]),s.push(t[0])});var c=fv(o,t,r,i,a),l=fv(s,t,r,i,a);return n?c:c.concat(l)}function mv(e,t,n,r,i,a){if(e.length){var o=e[0];return N(o.y)?pv(e,t,n,r,i,a):fv(e,t,r,i,a)}return[]}T_(`line`,{defaultShapeType:`line`}),F([`line`,`dot`,`dash`,`smooth`],function(e){K(`line`,e,{draw:function(t,n){var r=e===`smooth`,i;if(r){var a=this.coordinate,o=a.start,s=a.end;i=[[o.x,s.y],[s.x,o.y]]}var c=dv(t,r,i);return n.addShape({type:`path`,attrs:c,name:`line`,capture:!r})},getMarker:function(t){return uv(t,e)}})});var hv={getLegendItems:Q_,translate:N_,rotate:F_,zoom:I_,transform:M_,getAngle:ym,getSectorPath:_m,polarToCartesian:gm,getDelegationObject:kh,getTooltipItems:Pg,getMappingValue:G_,getPath:mv,getPathPoints:rv},gv={100:`#000`,95:`#0D0D0D`,85:`#262626`,65:`#595959`,45:`#8C8C8C`,25:`#BFBFBF`,15:`#D9D9D9`,6:`#F0F0F0`},_v={100:`#FFFFFF`,95:`#F2F2F2`,85:`#D9D9D9`,65:`#A6A6A6`,45:`#737373`,25:`#404040`,15:`#262626`,6:`#0F0F0F`},vv=[`#5B8FF9`,`#5AD8A6`,`#5D7092`,`#F6BD16`,`#E86452`,`#6DC8EC`,`#945FB9`,`#FF9845`,`#1E9493`,`#FF99C3`],yv=[`#5B8FF9`,`#CDDDFD`,`#5AD8A6`,`#CDF3E4`,`#5D7092`,`#CED4DE`,`#F6BD16`,`#FCEBB9`,`#E86452`,`#F8D0CB`,`#6DC8EC`,`#D3EEF9`,`#945FB9`,`#DECFEA`,`#FF9845`,`#FFE0C7`,`#1E9493`,`#BBDEDE`,`#FF99C3`,`#FFE0ED`],bv=[`#B8E1FF`,`#9AC5FF`,`#7DAAFF`,`#5B8FF9`,`#3D76DD`,`#085EC0`,`#0047A5`,`#00318A`,`#001D70`],xv=function(e){e===void 0&&(e={});var t=e.paletteQualitative10,n=t===void 0?vv:t,r=e.paletteQualitative20,i=r===void 0?yv:r,a=e.brandColor,o={backgroundColor:`#141414`,brandColor:a===void 0?n[0]:a,subColor:`rgba(255,255,255,0.05)`,paletteQualitative10:n,paletteQualitative20:i,paletteSemanticRed:`#F4664A`,paletteSemanticGreen:`#30BF78`,paletteSemanticYellow:`#FAAD14`,paletteSequence:bv,fontFamily:`"Segoe UI", Roboto, "Helvetica Neue", Arial,
    "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol",
    "Noto Color Emoji"`,axisLineBorderColor:_v[25],axisLineBorder:1,axisLineDash:null,axisTitleTextFillColor:_v[65],axisTitleTextFontSize:12,axisTitleTextLineHeight:12,axisTitleTextFontWeight:`normal`,axisTitleSpacing:12,axisDescriptionIconFillColor:gv[85],axisTickLineBorderColor:_v[25],axisTickLineLength:4,axisTickLineBorder:1,axisSubTickLineBorderColor:_v[15],axisSubTickLineLength:2,axisSubTickLineBorder:1,axisLabelFillColor:_v[45],axisLabelFontSize:12,axisLabelLineHeight:12,axisLabelFontWeight:`normal`,axisLabelOffset:8,axisGridBorderColor:_v[15],axisGridBorder:1,axisGridLineDash:null,legendTitleTextFillColor:_v[45],legendTitleTextFontSize:12,legendTitleTextLineHeight:21,legendTitleTextFontWeight:`normal`,legendMarkerColor:vv[0],legendMarkerSpacing:8,legendMarkerSize:4,legendCircleMarkerSize:4,legendSquareMarkerSize:4,legendLineMarkerSize:5,legendItemNameFillColor:_v[65],legendItemNameFontSize:12,legendItemNameLineHeight:12,legendItemNameFontWeight:`normal`,legendItemSpacing:24,legendItemMarginBottom:12,legendSpacing:16,legendPadding:[8,8,8,8],legendHorizontalPadding:[8,0,8,0],legendVerticalPadding:[0,8,0,8],legendPageNavigatorMarkerSize:12,legendPageNavigatorMarkerInactiveFillColor:_v[45],legendPageNavigatorMarkerInactiveFillOpacity:.45,legendPageNavigatorMarkerFillColor:_v[45],legendPageNavigatorMarkerFillOpacity:1,legendPageNavigatorTextFillColor:_v[65],legendPageNavigatorTextFontSize:12,sliderRailFillColor:_v[15],sliderRailBorder:0,sliderRailBorderColor:null,sliderRailWidth:100,sliderRailHeight:12,sliderLabelTextFillColor:_v[45],sliderLabelTextFontSize:12,sliderLabelTextLineHeight:12,sliderLabelTextFontWeight:`normal`,sliderHandlerFillColor:gv[6],sliderHandlerWidth:10,sliderHandlerHeight:14,sliderHandlerBorder:1,sliderHandlerBorderColor:gv[25],annotationArcBorderColor:_v[15],annotationArcBorder:1,annotationLineBorderColor:_v[25],annotationLineBorder:1,annotationLineDash:null,annotationTextFillColor:_v[65],annotationTextFontSize:12,annotationTextLineHeight:12,annotationTextFontWeight:`normal`,annotationTextBorderColor:null,annotationTextBorder:0,annotationRegionFillColor:_v[100],annotationRegionFillOpacity:.06,annotationRegionBorder:0,annotationRegionBorderColor:null,annotationDataMarkerLineLength:16,tooltipCrosshairsBorderColor:_v[25],tooltipCrosshairsBorder:1,tooltipCrosshairsLineDash:null,tooltipContainerFillColor:`#1f1f1f`,tooltipContainerFillOpacity:.95,tooltipContainerShadow:`0px 2px 4px rgba(0,0,0,.5)`,tooltipContainerBorderRadius:3,tooltipTextFillColor:_v[65],tooltipTextFontSize:12,tooltipTextLineHeight:12,tooltipTextFontWeight:`bold`,labelFillColor:_v[65],labelFillColorDark:`#2c3542`,labelFillColorLight:`#ffffff`,labelFontSize:12,labelLineHeight:12,labelFontWeight:`normal`,labelBorderColor:null,labelBorder:0,innerLabelFillColor:gv[100],innerLabelFontSize:12,innerLabelLineHeight:12,innerLabelFontWeight:`normal`,innerLabelBorderColor:null,innerLabelBorder:0,overflowLabelFillColor:_v[65],overflowLabelFillColorDark:`#2c3542`,overflowLabelFillColorLight:`#ffffff`,overflowLabelFontSize:12,overflowLabelLineHeight:12,overflowLabelFontWeight:`normal`,overflowLabelBorderColor:gv[100],overflowLabelBorder:1,labelLineBorder:1,labelLineBorderColor:_v[25],cSliderRailHieght:16,cSliderBackgroundFillColor:`#416180`,cSliderBackgroundFillOpacity:.05,cSliderForegroundFillColor:`#5B8FF9`,cSliderForegroundFillOpacity:.15,cSliderHandlerHeight:24,cSliderHandlerWidth:10,cSliderHandlerFillColor:`#F7F7F7`,cSliderHandlerFillOpacity:1,cSliderHandlerHighlightFillColor:`#FFF`,cSliderHandlerBorderColor:`#BFBFBF`,cSliderHandlerBorder:1,cSliderHandlerBorderRadius:2,cSliderTextFillColor:`#fff`,cSliderTextFillOpacity:.45,cSliderTextFontSize:12,cSliderTextLineHeight:12,cSliderTextFontWeight:`normal`,cSliderTextBorderColor:null,cSliderTextBorder:0,scrollbarTrackFillColor:`rgba(255,255,255,0.65)`,scrollbarThumbFillColor:`rgba(0,0,0,0.35)`,scrollbarThumbHighlightFillColor:`rgba(0,0,0,0.45)`,pointFillColor:vv[0],pointFillOpacity:.95,pointSize:4,pointBorder:1,pointBorderColor:gv[100],pointBorderOpacity:1,pointActiveBorderColor:_v[100],pointSelectedBorder:2,pointSelectedBorderColor:_v[100],pointInactiveFillOpacity:.3,pointInactiveBorderOpacity:.3,hollowPointSize:4,hollowPointBorder:1,hollowPointBorderColor:vv[0],hollowPointBorderOpacity:.95,hollowPointFillColor:gv[100],hollowPointActiveBorder:1,hollowPointActiveBorderColor:_v[100],hollowPointActiveBorderOpacity:1,hollowPointSelectedBorder:2,hollowPointSelectedBorderColor:_v[100],hollowPointSelectedBorderOpacity:1,hollowPointInactiveBorderOpacity:.3,lineBorder:2,lineBorderColor:vv[0],lineBorderOpacity:1,lineActiveBorder:3,lineSelectedBorder:3,lineInactiveBorderOpacity:.3,areaFillColor:vv[0],areaFillOpacity:.25,areaActiveFillColor:vv[0],areaActiveFillOpacity:.5,areaSelectedFillColor:vv[0],areaSelectedFillOpacity:.5,areaInactiveFillOpacity:.3,hollowAreaBorderColor:vv[0],hollowAreaBorder:2,hollowAreaBorderOpacity:1,hollowAreaActiveBorder:3,hollowAreaActiveBorderColor:_v[100],hollowAreaSelectedBorder:3,hollowAreaSelectedBorderColor:_v[100],hollowAreaInactiveBorderOpacity:.3,intervalFillColor:vv[0],intervalFillOpacity:.95,intervalActiveBorder:1,intervalActiveBorderColor:_v[100],intervalActiveBorderOpacity:1,intervalSelectedBorder:2,intervalSelectedBorderColor:_v[100],intervalSelectedBorderOpacity:1,intervalInactiveBorderOpacity:.3,intervalInactiveFillOpacity:.3,hollowIntervalBorder:2,hollowIntervalBorderColor:vv[0],hollowIntervalBorderOpacity:1,hollowIntervalFillColor:gv[100],hollowIntervalActiveBorder:2,hollowIntervalActiveBorderColor:_v[100],hollowIntervalSelectedBorder:3,hollowIntervalSelectedBorderColor:_v[100],hollowIntervalSelectedBorderOpacity:1,hollowIntervalInactiveBorderOpacity:.3};return _(_({},o),e)}();function Sv(){return window?window.devicePixelRatio:1}function Cv(e,t,n,r){var i=e-n,a=t-r;return Math.sqrt(i*i+a*a)}function wv(e,t,n,r,i,a){return i>=e&&i<=e+n&&a>=t&&a<=t+r}function Tv(e,t){return!(t.minX>e.maxX||t.maxX<e.minX||t.minY>e.maxY||t.maxY<e.minY)}function Ev(e,t){return!e||!t?e||t:{minX:Math.min(e.minX,t.minX),minY:Math.min(e.minY,t.minY),maxX:Math.max(e.maxX,t.maxX),maxY:Math.max(e.maxY,t.maxY)}}function Dv(e,t){return e[0]===t[0]&&e[1]===t[1]}var Ov=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,kv=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,Av=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,jv=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function Mv(e,t){var n=e.match(jv);F(n,function(e){var n=e.split(`:`);t.addColorStop(n[0],n[1])})}function Nv(e,t,n){var r=Ov.exec(n),i=parseFloat(r[1])%360*(Math.PI/180),a=r[2],o=t.getBBox(),s,c;i>=0&&i<1/2*Math.PI?(s={x:o.minX,y:o.minY},c={x:o.maxX,y:o.maxY}):1/2*Math.PI<=i&&i<Math.PI?(s={x:o.maxX,y:o.minY},c={x:o.minX,y:o.maxY}):Math.PI<=i&&i<3/2*Math.PI?(s={x:o.maxX,y:o.maxY},c={x:o.minX,y:o.minY}):(s={x:o.minX,y:o.maxY},c={x:o.maxX,y:o.minY});var l=Math.tan(i),u=l*l,d=(c.x-s.x+l*(c.y-s.y))/(u+1)+s.x,f=l*(c.x-s.x+l*(c.y-s.y))/(u+1)+s.y,p=e.createLinearGradient(s.x,s.y,d,f);return Mv(a,p),p}function Pv(e,t,n){var r=kv.exec(n),i=parseFloat(r[1]),a=parseFloat(r[2]),o=parseFloat(r[3]),s=r[4];if(o===0){var c=s.match(jv);return c[c.length-1].split(`:`)[1]}var l=t.getBBox(),u=l.maxX-l.minX,d=l.maxY-l.minY,f=Math.sqrt(u*u+d*d)/2,p=e.createRadialGradient(l.minX+u*i,l.minY+d*a,0,l.minX+u/2,l.minY+d/2,o*f);return Mv(s,p),p}function Fv(e,t,n){if(t.get(`patternSource`)&&t.get(`patternSource`)===n)return t.get(`pattern`);var r,i,a=Av.exec(n),o=a[1],s=a[2];function c(){r=e.createPattern(i,o),t.set(`pattern`,r),t.set(`patternSource`,n)}switch(o){case`a`:o=`repeat`;break;case`x`:o=`repeat-x`;break;case`y`:o=`repeat-y`;break;case`n`:o=`no-repeat`;break;default:o=`no-repeat`}return i=new Image,s.match(/^data:/i)||(i.crossOrigin=`Anonymous`),i.src=s,i.complete?c():(i.onload=c,i.src=i.src),r}function Iv(e,t,n){var r=t.getBBox();if(isNaN(r.x)||isNaN(r.y)||isNaN(r.width)||isNaN(r.height))return n;if(I(n)){if(n[1]===`(`||n[2]===`(`){if(n[0]===`l`)return Nv(e,t,n);if(n[0]===`r`)return Pv(e,t,n);if(n[0]===`p`)return Fv(e,t,n)}return n}if(n instanceof CanvasPattern)return n}function Lv(e){var t=0,n=0,r=0,i=0;return N(e)?e.length===1?t=n=r=i=e[0]:e.length===2?(t=r=e[0],n=i=e[1]):e.length===3?(t=e[0],n=i=e[1],r=e[2]):(t=e[0],n=e[1],r=e[2],i=e[3]):t=n=r=i=e,[t,n,r,i]}function Rv(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function zv(e,t){return Rv(e)*Rv(t)?(e[0]*t[0]+e[1]*t[1])/(Rv(e)*Rv(t)):1}function Bv(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(zv(e,t))}function Vv(e,t){var n=t[1],r=t[2],i=Ve(Ue(t[3]),Math.PI*2),a=t[4],o=t[5],s=e[0],c=e[1],l=t[6],u=t[7],d=Math.cos(i)*(s-l)/2+Math.sin(i)*(c-u)/2,f=-1*Math.sin(i)*(s-l)/2+Math.cos(i)*(c-u)/2,p=d*d/(n*n)+f*f/(r*r);p>1&&(n*=Math.sqrt(p),r*=Math.sqrt(p));var m=n*n*(f*f)+r*r*(d*d),h=m?Math.sqrt((n*n*(r*r)-m)/m):1;a===o&&(h*=-1),isNaN(h)&&(h=0);var g=r?h*n*f/r:0,_=n?h*-r*d/n:0,v=(s+l)/2+Math.cos(i)*g-Math.sin(i)*_,y=(c+u)/2+Math.sin(i)*g+Math.cos(i)*_,b=[(d-g)/n,(f-_)/r],x=[(-1*d-g)/n,(-1*f-_)/r],S=Bv([1,0],b),C=Bv(b,x);return zv(b,x)<=-1&&(C=Math.PI),zv(b,x)>=1&&(C=0),o===0&&C>0&&(C-=2*Math.PI),o===1&&C<0&&(C+=2*Math.PI),{cx:v,cy:y,rx:Dv(e,[l,u])?0:n,ry:Dv(e,[l,u])?0:r,startAngle:S,endAngle:S+C,xRotation:i,arcFlag:a,sweepFlag:o}}var Hv=Math.sin,Uv=Math.cos,Wv=Math.atan2,Gv=Math.PI;function Kv(e,t,n,r,i,a,o){var s=t.stroke,c=t.lineWidth,l=n-i,u=r-a,d=Wv(u,l),f=new Ny({type:`path`,canvas:e.get(`canvas`),isArrowShape:!0,attrs:{path:`M`+10*Uv(Gv/6)+`,`+10*Hv(Gv/6)+` L0,0 L`+10*Uv(Gv/6)+`,-`+10*Hv(Gv/6),stroke:s,lineWidth:c}});f.translate(i,a),f.rotateAtPoint(i,a,d),e.set(o?`startArrowShape`:`endArrowShape`,f)}function qv(e,t,n,r,i,a,s){var c=t.startArrow,l=t.endArrow,u=t.stroke,d=t.lineWidth,f=s?c:l,p=f.d,m=f.fill,h=f.stroke,g=f.lineWidth,v=o(f,[`d`,`fill`,`stroke`,`lineWidth`]),y=n-i,b=r-a,x=Wv(b,y);p&&(i-=Uv(x)*p,a-=Hv(x)*p);var S=new Ny({type:`path`,canvas:e.get(`canvas`),isArrowShape:!0,attrs:_(_({},v),{stroke:h||u,lineWidth:g||d,fill:m})});S.translate(i,a),S.rotateAtPoint(i,a,x),e.set(s?`startArrowShape`:`endArrowShape`,S)}function Jv(e,t,n,r,i){var a=Wv(r-t,n-e);return{dx:Uv(a)*i,dy:Hv(a)*i}}function Yv(e,t,n,r,i,a){typeof t.startArrow==`object`?qv(e,t,n,r,i,a,!0):t.startArrow?Kv(e,t,n,r,i,a,!0):e.set(`startArrowShape`,null)}function Xv(e,t,n,r,i,a){typeof t.endArrow==`object`?qv(e,t,n,r,i,a,!1):t.endArrow?Kv(e,t,n,r,i,a,!1):e.set(`startArrowShape`,null)}var Zv={fill:`fillStyle`,stroke:`strokeStyle`,opacity:`globalAlpha`};function Qv(e,t){var n=t.attr();for(var r in n){var i=n[r],a=Zv[r]?Zv[r]:r;a===`matrix`&&i?e.transform(i[0],i[1],i[3],i[4],i[6],i[7]):a===`lineDash`&&e.setLineDash?N(i)&&e.setLineDash(i):(a===`strokeStyle`||a===`fillStyle`?i=Iv(e,t,i):a===`globalAlpha`&&(i*=e.globalAlpha),e[a]=i)}}function $v(e,t,n){for(var r=0;r<t.length;r++){var i=t[r];i.cfg.visible?i.draw(e,n):i.skipDraw()}}function ey(e,t,n){var r=e.get(`refreshElements`);F(r,function(t){if(t!==e)for(var n=t.cfg.parent;n&&n!==e&&!n.cfg.refresh;)n.cfg.refresh=!0,n=n.cfg.parent}),r[0]===e?ry(t,n):ty(t,n)}function ty(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.cfg.visible)if(r.cfg.hasChanged)r.cfg.refresh=!0,r.isGroup()&&ry(r.cfg.children,t);else if(r.cfg.refresh)r.isGroup()&&ty(r.cfg.children,t);else{var i=iy(r,t);r.cfg.refresh=i,i&&r.isGroup()&&ty(r.cfg.children,t)}}}function ny(e){for(var t=0;t<e.length;t++){var n=e[t];n.cfg.hasChanged=!1,n.isGroup()&&!n.destroyed&&ny(n.cfg.children)}}function ry(e,t){for(var n=0;n<e.length;n++){var r=e[n];r.cfg.visible&&(r.cfg.refresh=!0,r.isGroup()&&ry(r.get(`children`),t))}}function iy(e,t){var n=e.cfg.cacheCanvasBBox;return e.cfg.isInView&&n&&Tv(n,t)}function ay(e,t,n,r){var i=n.path,a=n.startArrow,o=n.endArrow;if(i){var s=[0,0],c=[0,0],l={dx:0,dy:0};t.beginPath();for(var u=0;u<i.length;u++){var d=i[u],f=d[0];if(u===0&&a&&a.d){var p=e.getStartTangent();l=Jv(p[0][0],p[0][1],p[1][0],p[1][1],a.d)}else if(u===i.length-2&&i[u+1][0]===`Z`&&o&&o.d){if(i[u+1][0]===`Z`){var p=e.getEndTangent();l=Jv(p[0][0],p[0][1],p[1][0],p[1][1],o.d)}}else if(u===i.length-1&&o&&o.d&&i[0]!==`Z`){var p=e.getEndTangent();l=Jv(p[0][0],p[0][1],p[1][0],p[1][1],o.d)}var m=l.dx,h=l.dy;switch(f){case`M`:t.moveTo(d[1]-m,d[2]-h),c=[d[1],d[2]];break;case`L`:t.lineTo(d[1]-m,d[2]-h);break;case`Q`:t.quadraticCurveTo(d[1],d[2],d[3]-m,d[4]-h);break;case`C`:t.bezierCurveTo(d[1],d[2],d[3],d[4],d[5]-m,d[6]-h);break;case`A`:var g=void 0;r?(g=r[u],g||(g=Vv(s,d),r[u]=g)):g=Vv(s,d);var _=g.cx,v=g.cy,y=g.rx,b=g.ry,x=g.startAngle,S=g.endAngle,C=g.xRotation,w=g.sweepFlag;if(t.ellipse)t.ellipse(_,v,y,b,C,x,S,1-w);else{var T=y>b?y:b,E=y>b?1:y/b,D=y>b?b/y:1;t.translate(_,v),t.rotate(C),t.scale(E,D),t.arc(0,0,T,x,S,1-w),t.scale(1/E,1/D),t.rotate(-C),t.translate(-_,-v)}break;case`Z`:t.closePath();break;default:break}if(f===`Z`)s=c;else{var O=d.length;s=[d[O-2],d[O-1]]}}}}function oy(e,t){var n=e.get(`canvas`);n&&(t===`remove`&&(e._cacheCanvasBBox=e.get(`cacheCanvasBBox`)),e.get(`hasChanged`)||(e.set(`hasChanged`,!0),e.cfg.parent&&e.cfg.parent.get(`hasChanged`)||(n.refreshElement(e,t,n),n.get(`autoDraw`)&&n.draw())))}function sy(e){var t;if(e.destroyed)t=e._cacheCanvasBBox;else{var n=e.get(`cacheCanvasBBox`),r=n&&!!(n.width&&n.height),i=e.getCanvasBBox(),a=i&&!!(i.width&&i.height);r&&a?t=Ev(n,i):r?t=n:a&&(t=i)}return t}function cy(e){if(!e.length)return null;var t=[],n=[],r=[],i=[];return F(e,function(e){var a=sy(e);a&&(t.push(a.minX),n.push(a.minY),r.push(a.maxX),i.push(a.maxY))}),{minX:he(t),minY:he(n),maxX:me(r),maxY:me(i)}}function ly(e,t){return!e||!t||!Tv(e,t)?null:{minX:Math.max(e.minX,t.minX),minY:Math.max(e.minY,t.minY),maxX:Math.min(e.maxX,t.maxX),maxY:Math.min(e.maxY,t.maxY)}}var uy=function(e){l(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.onCanvasChange=function(e){oy(this,e)},t.prototype.getShapeBase=function(){return Vy},t.prototype.getGroupBase=function(){return t},t.prototype._applyClip=function(e,t){t&&(e.save(),Qv(e,t),t.createPath(e),e.restore(),e.clip(),t._afterDraw())},t.prototype.cacheCanvasBBox=function(){var e=this.cfg.children,t=[],n=[];F(e,function(e){var r=e.cfg.cacheCanvasBBox;r&&e.cfg.isInView&&(t.push(r.minX,r.maxX),n.push(r.minY,r.maxY))});var r=null;if(t.length){var i=he(t),a=me(t),o=he(n),s=me(n);r={minX:i,minY:o,x:i,y:o,maxX:a,maxY:s,width:a-i,height:s-o};var c=this.cfg.canvas;if(c){var l=c.getViewRange();this.set(`isInView`,Tv(r,l))}}else this.set(`isInView`,!1);this.set(`cacheCanvasBBox`,r)},t.prototype.draw=function(e,t){var n=this.cfg.children,r=t?this.cfg.refresh:!0;n.length&&r&&(e.save(),Qv(e,this),this._applyClip(e,this.getClip()),$v(e,n,t),e.restore(),this.cacheCanvasBBox()),this.cfg.refresh=null,this.set(`hasChanged`,!1)},t.prototype.skipDraw=function(){this.set(`cacheCanvasBBox`,null),this.set(`hasChanged`,!1)},t}(Uo),dy=function(e){l(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return _(_({},t),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},t.prototype.getShapeBase=function(){return Vy},t.prototype.getGroupBase=function(){return uy},t.prototype.onCanvasChange=function(e){oy(this,e)},t.prototype.calculateBBox=function(){var e=this.get(`type`),t=this.getHitLineWidth(),n=qo(e)(this),r=t/2,i=n.x-r,a=n.y-r,o=n.x+n.width+r,s=n.y+n.height+r;return{x:i,minX:i,y:a,minY:a,width:n.width+t,height:n.height+t,maxX:o,maxY:s}},t.prototype.isFill=function(){return!!this.attrs.fill||this.isClipShape()},t.prototype.isStroke=function(){return!!this.attrs.stroke},t.prototype._applyClip=function(e,t){t&&(e.save(),Qv(e,t),t.createPath(e),e.restore(),e.clip(),t._afterDraw())},t.prototype.draw=function(e,t){var n=this.cfg.clipShape;if(t){if(this.cfg.refresh===!1){this.set(`hasChanged`,!1);return}var r=this.getCanvasBBox();if(!Tv(t,r)){this.set(`hasChanged`,!1),this.cfg.isInView&&this._afterDraw();return}}e.save(),Qv(e,this),this._applyClip(e,n),this.drawPath(e),e.restore(),this._afterDraw()},t.prototype.getCanvasViewBox=function(){var e=this.cfg.canvas;return e?e.getViewRange():null},t.prototype.cacheCanvasBBox=function(){var e=this.getCanvasViewBox();if(e){var t=this.getCanvasBBox(),n=Tv(t,e);this.set(`isInView`,n),n?this.set(`cacheCanvasBBox`,t):this.set(`cacheCanvasBBox`,null)}},t.prototype._afterDraw=function(){this.cacheCanvasBBox(),this.set(`hasChanged`,!1),this.set(`refresh`,null)},t.prototype.skipDraw=function(){this.set(`cacheCanvasBBox`,null),this.set(`isInView`,null),this.set(`hasChanged`,!1)},t.prototype.drawPath=function(e){this.createPath(e),this.strokeAndFill(e),this.afterDrawPath(e)},t.prototype.fill=function(e){e.fill()},t.prototype.stroke=function(e){e.stroke()},t.prototype.strokeAndFill=function(e){var t=this.attrs,n=t.lineWidth,r=t.opacity,i=t.strokeOpacity,a=t.fillOpacity;this.isFill()&&(!M(a)&&a!==1?(e.globalAlpha=a,this.fill(e),e.globalAlpha=r):this.fill(e)),this.isStroke()&&n>0&&(!M(i)&&i!==1&&(e.globalAlpha=i),this.stroke(e)),this.afterDrawPath(e)},t.prototype.createPath=function(e){},t.prototype.afterDrawPath=function(e){},t.prototype.isInShape=function(e,t){var n=this.isStroke(),r=this.isFill(),i=this.getHitLineWidth();return this.isInStrokeOrPath(e,t,n,r,i)},t.prototype.isInStrokeOrPath=function(e,t,n,r,i){return!1},t.prototype.getHitLineWidth=function(){if(!this.isStroke())return 0;var e=this.attrs;return e.lineWidth+e.lineAppendWidth},t}(Wo),fy=function(e){l(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return _(_({},t),{x:0,y:0,r:0})},t.prototype.isInStrokeOrPath=function(e,t,n,r,i){var a=this.attr(),o=a.x,s=a.y,c=a.r,l=i/2,u=Cv(o,s,e,t);return r&&n?u<=c+l:r?u<=c:n?u>=c-l&&u<=c+l:!1},t.prototype.createPath=function(e){var t=this.attr(),n=t.x,r=t.y,i=t.r;e.beginPath(),e.arc(n,r,i,0,Math.PI*2,!1),e.closePath()},t}(dy);function py(e,t,n,r){return e/(n*n)+t/(r*r)}var my=function(e){l(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return _(_({},t),{x:0,y:0,rx:0,ry:0})},t.prototype.isInStrokeOrPath=function(e,t,n,r,i){var a=this.attr(),o=i/2,s=a.x,c=a.y,l=a.rx,u=a.ry,d=(e-s)*(e-s),f=(t-c)*(t-c);return r&&n?py(d,f,l+o,u+o)<=1:r?py(d,f,l,u)<=1:n?py(d,f,l-o,u-o)>=1&&py(d,f,l+o,u+o)<=1:!1},t.prototype.createPath=function(e){var t=this.attr(),n=t.x,r=t.y,i=t.rx,a=t.ry;if(e.beginPath(),e.ellipse)e.ellipse(n,r,i,a,0,0,Math.PI*2,!1);else{var o=i>a?i:a,s=i>a?1:i/a,c=i>a?a/i:1;e.save(),e.translate(n,r),e.scale(s,c),e.arc(0,0,o,0,Math.PI*2),e.restore(),e.closePath()}},t}(dy);function hy(e){return e instanceof HTMLElement&&I(e.nodeName)&&e.nodeName.toUpperCase()===`CANVAS`}var gy=function(e){l(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return _(_({},t),{x:0,y:0,width:0,height:0})},t.prototype.initAttrs=function(e){this._setImage(e.img)},t.prototype.isStroke=function(){return!1},t.prototype.isOnlyHitBox=function(){return!0},t.prototype._afterLoading=function(){if(this.get(`toDraw`)===!0){var e=this.get(`canvas`);e?e.draw():this.createPath(this.get(`context`))}},t.prototype._setImage=function(e){var t=this,n=this.attrs;if(I(e)){var r=new Image;r.onload=function(){if(t.destroyed)return!1;t.attr(`img`,r),t.set(`loading`,!1),t._afterLoading();var e=t.get(`callback`);e&&e.call(t)},r.crossOrigin=`Anonymous`,r.src=e,this.set(`loading`,!0)}else e instanceof Image?(n.width||=e.width,n.height||=e.height):hy(e)&&(n.width||=Number(e.getAttribute(`width`)),n.height||(n.height,Number(e.getAttribute(`height`))))},t.prototype.onAttrChange=function(t,n,r){e.prototype.onAttrChange.call(this,t,n,r),t===`img`&&this._setImage(n)},t.prototype.createPath=function(e){if(this.get(`loading`)){this.set(`toDraw`,!0),this.set(`context`,e);return}var t=this.attr(),n=t.x,r=t.y,i=t.width,a=t.height,o=t.sx,s=t.sy,c=t.swidth,l=t.sheight,u=t.img;(u instanceof Image||hy(u))&&(!M(o)&&!M(s)&&!M(c)&&!M(l)?e.drawImage(u,o,s,c,l,n,r,i,a):e.drawImage(u,n,r,i,a))},t}(dy);function _y(e,t,n,r,i,a,o){var s=Math.min(e,n),c=Math.max(e,n),l=Math.min(t,r),u=Math.max(t,r),d=i/2;return a>=s-d&&a<=c+d&&o>=l-d&&o<=u+d?es.pointToLine(e,t,n,r,a,o)<=i/2:!1}var vy=function(e){l(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return _(_({},t),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},t.prototype.initAttrs=function(e){this.setArrow()},t.prototype.onAttrChange=function(t,n,r){e.prototype.onAttrChange.call(this,t,n,r),this.setArrow()},t.prototype.setArrow=function(){var e=this.attr(),t=e.x1,n=e.y1,r=e.x2,i=e.y2,a=e.startArrow,o=e.endArrow;a&&Yv(this,e,r,i,t,n),o&&Xv(this,e,t,n,r,i)},t.prototype.isInStrokeOrPath=function(e,t,n,r,i){if(!n||!i)return!1;var a=this.attr(),o=a.x1,s=a.y1,c=a.x2,l=a.y2;return _y(o,s,c,l,i,e,t)},t.prototype.createPath=function(e){var t=this.attr(),n=t.x1,r=t.y1,i=t.x2,a=t.y2,o=t.startArrow,s=t.endArrow,c={dx:0,dy:0},l={dx:0,dy:0};o&&o.d&&(c=Jv(n,r,i,a,t.startArrow.d)),s&&s.d&&(l=Jv(n,r,i,a,t.endArrow.d)),e.beginPath(),e.moveTo(n+c.dx,r+c.dy),e.lineTo(i-l.dx,a-l.dy)},t.prototype.afterDrawPath=function(e){var t=this.get(`startArrowShape`),n=this.get(`endArrowShape`);t&&t.draw(e),n&&n.draw(e)},t.prototype.getTotalLength=function(){var e=this.attr(),t=e.x1,n=e.y1,r=e.x2,i=e.y2;return es.length(t,n,r,i)},t.prototype.getPoint=function(e){var t=this.attr(),n=t.x1,r=t.y1,i=t.x2,a=t.y2;return es.pointAt(n,r,i,a,e)},t}(dy),yy={circle:function(e,t,n){return[[`M`,e-n,t],[`A`,n,n,0,1,0,e+n,t],[`A`,n,n,0,1,0,e-n,t]]},square:function(e,t,n){return[[`M`,e-n,t-n],[`L`,e+n,t-n],[`L`,e+n,t+n],[`L`,e-n,t+n],[`Z`]]},diamond:function(e,t,n){return[[`M`,e-n,t],[`L`,e,t-n],[`L`,e+n,t],[`L`,e,t+n],[`Z`]]},triangle:function(e,t,n){var r=n*Math.sin(1/3*Math.PI);return[[`M`,e-n,t+r],[`L`,e,t-r],[`L`,e+n,t+r],[`Z`]]},"triangle-down":function(e,t,n){var r=n*Math.sin(1/3*Math.PI);return[[`M`,e-n,t-r],[`L`,e+n,t-r],[`L`,e,t+r],[`Z`]]}},by=function(e){l(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.initAttrs=function(e){this._resetParamsCache()},t.prototype._resetParamsCache=function(){this.set(`paramsCache`,{})},t.prototype.onAttrChange=function(t,n,r){e.prototype.onAttrChange.call(this,t,n,r),[`symbol`,`x`,`y`,`r`,`radius`].indexOf(t)!==-1&&this._resetParamsCache()},t.prototype.isOnlyHitBox=function(){return!0},t.prototype._getR=function(e){return M(e.r)?e.radius:e.r},t.prototype._getPath=function(){var e=this.attr(),n=e.x,r=e.y,i=e.symbol||`circle`,a=this._getR(e),o,s;if(j(i))o=i,s=o(n,r,a),s=oc(s);else{if(o=t.Symbols[i],!o)return console.warn(i+` marker is not supported.`),null;s=o(n,r,a)}return s},t.prototype.createPath=function(e){var t=this._getPath(),n=this.get(`paramsCache`);ay(this,e,{path:t},n)},t.Symbols=yy,t}(dy);function xy(e,t,n){var r=Vs();return e.createPath(r),r.isPointInPath(t,n)}var Sy=1e-6;function Cy(e){return Math.abs(e)<Sy?0:e<0?-1:1}function wy(e,t,n){return(n[0]-e[0])*(t[1]-e[1])===(t[0]-e[0])*(n[1]-e[1])&&Math.min(e[0],t[0])<=n[0]&&n[0]<=Math.max(e[0],t[0])&&Math.min(e[1],t[1])<=n[1]&&n[1]<=Math.max(e[1],t[1])}function Ty(e,t,n){var r=!1,i=e.length;if(i<=2)return!1;for(var a=0;a<i;a++){var o=e[a],s=e[(a+1)%i];if(wy(o,s,[t,n]))return!0;Cy(o[1]-n)>0!=Cy(s[1]-n)>0&&Cy(t-(n-o[1])*(o[0]-s[0])/(o[1]-s[1])-o[0])<0&&(r=!r)}return r}function Ey(e,t,n,r,i,a,o,s){var c=(Math.atan2(s-t,o-e)+Math.PI*2)%(Math.PI*2);if(c<r||c>i)return!1;var l={x:e+n*Math.cos(c),y:t+n*Math.sin(c)};return Cv(l.x,l.y,o,s)<=a/2}var Dy=Ir;function Oy(e){for(var t=!1,n=e.length,r=0;r<n;r++){var i=e[r][0];if(i===`C`||i===`A`||i===`Q`){t=!0;break}}return t}function ky(e,t,n,r,a){for(var o=!1,s=t/2,c=0;c<e.length;c++){var l=e[c],u=l.currentPoint,d=l.params,f=l.prePoint,p=l.box;if(!(p&&!wv(p.x-s,p.y-s,p.width+t,p.height+t,n,r))){switch(l.command){case`L`:case`Z`:o=_y(f[0],f[1],u[0],u[1],t,n,r);break;case`Q`:o=ds.pointDistance(f[0],f[1],d[1],d[2],d[3],d[4],n,r)<=t/2;break;case`C`:o=_s.pointDistance(f[0],f[1],d[1],d[2],d[3],d[4],d[5],d[6],n,r,a)<=t/2;break;case`A`:var m=l.arcParams,h=m.cx,g=m.cy,_=m.rx,v=m.ry,y=m.startAngle,b=m.endAngle,x=m.xRotation,S=[n,r,1],C=_>v?_:v,w=_>v?1:_/v,T=_>v?v/_:1,E=Dy(null,[[`t`,-h,-g],[`r`,-x],[`s`,1/w,1/T]]);i(S,S,E),o=Ey(0,0,C,y,b,t,S[0],S[1]);break;default:break}if(o)break}}return o}function Ay(e){for(var t=e.length,n=[],r=[],i=[],a=0;a<t;a++){var o=e[a],s=o[0];s===`M`?(i.length&&(r.push(i),i=[]),i.push([o[1],o[2]])):s===`Z`?i.length&&(n.push(i),i=[]):i.push([o[1],o[2]])}return i.length>0&&r.push(i),{polygons:n,polylines:r}}var jy=_({hasArc:Oy,extractPolygons:Ay,isPointInStroke:ky},bn);function My(e,t,n){for(var r=!1,i=0;i<e.length;i++){var a=e[i];if(r=Ty(a,t,n),r)break}return r}var Ny=function(e){l(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return _(_({},t),{startArrow:!1,endArrow:!1})},t.prototype.initAttrs=function(e){this._setPathArr(e.path),this.setArrow()},t.prototype.onAttrChange=function(t,n,r){e.prototype.onAttrChange.call(this,t,n,r),t===`path`&&this._setPathArr(n),this.setArrow()},t.prototype._setPathArr=function(e){this.attrs.path=oc(e);var t=jy.hasArc(e);this.set(`hasArc`,t),this.set(`paramsCache`,{}),this.set(`segments`,null),this.set(`curve`,null),this.set(`tCache`,null),this.set(`totalLength`,null)},t.prototype.getSegments=function(){var e=this.get(`segements`);return e||(e=pc(this.attr(`path`)),this.set(`segments`,e)),e},t.prototype.setArrow=function(){var e=this.attr(),t=e.startArrow,n=e.endArrow;if(t){var r=this.getStartTangent();Yv(this,e,r[0][0],r[0][1],r[1][0],r[1][1])}if(n){var r=this.getEndTangent();Xv(this,e,r[0][0],r[0][1],r[1][0],r[1][1])}},t.prototype.isInStrokeOrPath=function(e,t,n,r,i){var a=this.getSegments(),o=this.get(`hasArc`),s=!1;if(n){var c=this.getTotalLength();s=jy.isPointInStroke(a,i,e,t,c)}if(!s&&r)if(o)s=xy(this,e,t);else{var l=this.attr(`path`),u=jy.extractPolygons(l);s=My(u.polygons,e,t)||My(u.polylines,e,t)}return s},t.prototype.createPath=function(e){var t=this.attr(),n=this.get(`paramsCache`);ay(this,e,t,n)},t.prototype.afterDrawPath=function(e){var t=this.get(`startArrowShape`),n=this.get(`endArrowShape`);t&&t.draw(e),n&&n.draw(e)},t.prototype.getTotalLength=function(){var e=this.get(`totalLength`);return M(e)?(this._calculateCurve(),this._setTcache(),this.get(`totalLength`)):e},t.prototype.getPoint=function(e){var t=this.get(`tCache`);t||=(this._calculateCurve(),this._setTcache(),this.get(`tCache`));var n,r,i=this.get(`curve`);if(!t||t.length===0)return i?{x:i[0][1],y:i[0][2]}:null;F(t,function(t,i){e>=t[0]&&e<=t[1]&&(n=(e-t[0])/(t[1]-t[0]),r=i)});var a=i[r];if(M(a)||M(r))return null;var o=a.length,s=i[r+1];return _s.pointAt(a[o-2],a[o-1],s[1],s[2],s[3],s[4],s[5],s[6],n)},t.prototype._calculateCurve=function(){var e=this.attr().path;this.set(`curve`,jy.pathToCurve(e))},t.prototype._setTcache=function(){var e=0,t=0,n=[],r,i,a,o,s=this.get(`curve`);if(s){if(F(s,function(t,n){a=s[n+1],o=t.length,a&&(e+=_s.length(t[o-2],t[o-1],a[1],a[2],a[3],a[4],a[5],a[6])||0)}),this.set(`totalLength`,e),e===0){this.set(`tCache`,[]);return}F(s,function(c,l){a=s[l+1],o=c.length,a&&(r=[],r[0]=t/e,i=_s.length(c[o-2],c[o-1],a[1],a[2],a[3],a[4],a[5],a[6]),t+=i||0,r[1]=t/e,n.push(r))}),this.set(`tCache`,n)}},t.prototype.getStartTangent=function(){var e=this.getSegments(),t;if(e.length>1){var n=e[0].currentPoint,r=e[1].currentPoint,i=e[1].startTangent;t=[],i?(t.push([n[0]-i[0],n[1]-i[1]]),t.push([n[0],n[1]])):(t.push([r[0],r[1]]),t.push([n[0],n[1]]))}return t},t.prototype.getEndTangent=function(){var e=this.getSegments(),t=e.length,n;if(t>1){var r=e[t-2].currentPoint,i=e[t-1].currentPoint,a=e[t-1].endTangent;n=[],a?(n.push([i[0]-a[0],i[1]-a[1]]),n.push([i[0],i[1]])):(n.push([r[0],r[1]]),n.push([i[0],i[1]]))}return n},t}(dy);function Py(e,t,n,r,i){var a=e.length;if(a<2)return!1;for(var o=0;o<a-1;o++){var s=e[o][0],c=e[o][1],l=e[o+1][0],u=e[o+1][1];if(_y(s,c,l,u,t,n,r))return!0}if(i){var d=e[0],f=e[a-1];if(_y(d[0],d[1],f[0],f[1],t,n,r))return!0}return!1}var Fy=function(e){l(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.isInStrokeOrPath=function(e,t,n,r,i){var a=this.attr().points,o=!1;return n&&(o=Py(a,i,e,t,!0)),!o&&r&&(o=Ty(a,e,t)),o},t.prototype.createPath=function(e){var t=this.attr().points;if(!(t.length<2)){e.beginPath();for(var n=0;n<t.length;n++){var r=t[n];n===0?e.moveTo(r[0],r[1]):e.lineTo(r[0],r[1])}e.closePath()}},t}(dy),Iy=function(e){l(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return _(_({},t),{startArrow:!1,endArrow:!1})},t.prototype.initAttrs=function(e){this.setArrow()},t.prototype.onAttrChange=function(t,n,r){e.prototype.onAttrChange.call(this,t,n,r),this.setArrow(),[`points`].indexOf(t)!==-1&&this._resetCache()},t.prototype._resetCache=function(){this.set(`totalLength`,null),this.set(`tCache`,null)},t.prototype.setArrow=function(){var e=this.attr(),t=this.attrs,n=t.points,r=t.startArrow,i=t.endArrow,a=n.length,o=n[0][0],s=n[0][1],c=n[a-1][0],l=n[a-1][1];r&&Yv(this,e,n[1][0],n[1][1],o,s),i&&Xv(this,e,n[a-2][0],n[a-2][1],c,l)},t.prototype.isFill=function(){return!1},t.prototype.isInStrokeOrPath=function(e,t,n,r,i){if(!n||!i)return!1;var a=this.attr().points;return Py(a,i,e,t,!1)},t.prototype.isStroke=function(){return!0},t.prototype.createPath=function(e){var t=this.attr(),n=t.points,r=t.startArrow,i=t.endArrow,a=n.length;if(!(n.length<2)){var o=n[0][0],s=n[0][1],c=n[a-1][0],l=n[a-1][1];if(r&&r.d){var u=Jv(o,s,n[1][0],n[1][1],r.d);o+=u.dx,s+=u.dy}if(i&&i.d){var u=Jv(n[a-2][0],n[a-2][1],c,l,i.d);c-=u.dx,l-=u.dy}e.beginPath(),e.moveTo(o,s);for(var d=0;d<a-1;d++){var f=n[d];e.lineTo(f[0],f[1])}e.lineTo(c,l)}},t.prototype.afterDrawPath=function(e){var t=this.get(`startArrowShape`),n=this.get(`endArrowShape`);t&&t.draw(e),n&&n.draw(e)},t.prototype.getTotalLength=function(){var e=this.attr().points,t=this.get(`totalLength`);return M(t)?(this.set(`totalLength`,Fs.length(e)),this.get(`totalLength`)):t},t.prototype.getPoint=function(e){var t=this.attr().points,n=this.get(`tCache`);n||=(this._setTcache(),this.get(`tCache`));var r,i;return F(n,function(t,n){e>=t[0]&&e<=t[1]&&(r=(e-t[0])/(t[1]-t[0]),i=n)}),es.pointAt(t[i][0],t[i][1],t[i+1][0],t[i+1][1],r)},t.prototype._setTcache=function(){var e=this.attr().points;if(!(!e||e.length===0)){var t=this.getTotalLength();if(!(t<=0)){var n=0,r=[],i,a;F(e,function(o,s){e[s+1]&&(i=[],i[0]=n/t,a=es.length(o[0],o[1],e[s+1][0],e[s+1][1]),n+=a,i[1]=n/t,r.push(i))}),this.set(`tCache`,r)}}},t.prototype.getStartTangent=function(){var e=this.attr().points,t=[];return t.push([e[1][0],e[1][1]]),t.push([e[0][0],e[0][1]]),t},t.prototype.getEndTangent=function(){var e=this.attr().points,t=e.length-1,n=[];return n.push([e[t-1][0],e[t-1][1]]),n.push([e[t][0],e[t][1]]),n},t}(dy);function Ly(e,t,n,r,i,a,o){var s=i/2;return wv(e-s,t-s,n,i,a,o)||wv(e+n-s,t-s,i,r,a,o)||wv(e+s,t+r-s,n,i,a,o)||wv(e-s,t+s,i,r,a,o)}function Ry(e,t,n,r,i,a,o,s){return a/2,_y(e+i,t,e+n-i,t,a,o,s)||_y(e+n,t+i,e+n,t+r-i,a,o,s)||_y(e+n-i,t+r,e+i,t+r,a,o,s)||_y(e,t+r-i,e,t+i,a,o,s)||Ey(e+n-i,t+i,i,1.5*Math.PI,2*Math.PI,a,o,s)||Ey(e+n-i,t+r-i,i,0,.5*Math.PI,a,o,s)||Ey(e+i,t+r-i,i,.5*Math.PI,Math.PI,a,o,s)||Ey(e+i,t+i,i,Math.PI,1.5*Math.PI,a,o,s)}var zy=function(e){l(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return _(_({},t),{x:0,y:0,width:0,height:0,radius:0})},t.prototype.isInStrokeOrPath=function(e,t,n,r,i){var a=this.attr(),o=a.x,s=a.y,c=a.width,l=a.height,u=a.radius;if(u){var d=!1;return n&&(d=Ry(o,s,c,l,u,i,e,t)),!d&&r&&(d=xy(this,e,t)),d}else{var f=i/2;if(r&&n)return wv(o-f,s-f,c+f,l+f,e,t);if(r)return wv(o,s,c,l,e,t);if(n)return Ly(o,s,c,l,i,e,t)}},t.prototype.createPath=function(e){var t=this.attr(),n=t.x,r=t.y,i=t.width,a=t.height,o=t.radius;if(e.beginPath(),o===0)e.rect(n,r,i,a);else{var s=Lv(o),c=s[0],l=s[1],u=s[2],d=s[3];e.moveTo(n+c,r),e.lineTo(n+i-l,r),l!==0&&e.arc(n+i-l,r+l,l,-Math.PI/2,0),e.lineTo(n+i,r+a-u),u!==0&&e.arc(n+i-u,r+a-u,u,0,Math.PI/2),e.lineTo(n+d,r+a),d!==0&&e.arc(n+d,r+a-d,d,Math.PI/2,Math.PI),e.lineTo(n,r+c),c!==0&&e.arc(n+c,r+c,c,Math.PI,Math.PI*1.5),e.closePath()}},t}(dy),By=function(e){l(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return _(_({},t),{x:0,y:0,text:null,fontSize:12,fontFamily:`sans-serif`,fontStyle:`normal`,fontWeight:`normal`,fontVariant:`normal`,textAlign:`start`,textBaseline:`bottom`})},t.prototype.isOnlyHitBox=function(){return!0},t.prototype.initAttrs=function(e){this._assembleFont(),e.text&&this._setText(e.text)},t.prototype._assembleFont=function(){var e=this.attrs;e.font=Gs(e)},t.prototype._setText=function(e){var t=null;I(e)&&e.indexOf(`
`)!==-1&&(t=e.split(`
`)),this.set(`textArr`,t)},t.prototype.onAttrChange=function(t,n,r){e.prototype.onAttrChange.call(this,t,n,r),t.startsWith(`font`)&&this._assembleFont(),t===`text`&&this._setText(n)},t.prototype._getSpaceingY=function(){var e=this.attrs,t=e.lineHeight,n=e.fontSize*1;return t?t-n:n*.14},t.prototype._drawTextArr=function(e,t,n){var r=this.attrs,i=r.textBaseline,a=r.x,o=r.y,s=r.fontSize*1,c=this._getSpaceingY(),l=Hs(r.text,r.fontSize,r.lineHeight),u;F(t,function(t,r){u=o+r*(c+s)-l+s,i===`middle`&&(u+=l-s-(l-s)/2),i===`top`&&(u+=l-s),M(t)||(n?e.fillText(t,a,u):e.strokeText(t,a,u))})},t.prototype._drawText=function(e,t){var n=this.attr(),r=n.x,i=n.y,a=this.get(`textArr`);if(a)this._drawTextArr(e,a,t);else{var o=n.text;M(o)||(t?e.fillText(o,r,i):e.strokeText(o,r,i))}},t.prototype.strokeAndFill=function(e){var t=this.attrs,n=t.lineWidth,r=t.opacity,i=t.strokeOpacity,a=t.fillOpacity;this.isStroke()&&n>0&&(!M(i)&&i!==1&&(e.globalAlpha=r),this.stroke(e)),this.isFill()&&(!M(a)&&a!==1?(e.globalAlpha=a,this.fill(e),e.globalAlpha=r):this.fill(e)),this.afterDrawPath(e)},t.prototype.fill=function(e){this._drawText(e,!0)},t.prototype.stroke=function(e){this._drawText(e,!1)},t}(dy),Vy=e({Base:()=>dy,Circle:()=>fy,Ellipse:()=>my,Image:()=>gy,Line:()=>vy,Marker:()=>by,Path:()=>Ny,Polygon:()=>Fy,Polyline:()=>Iy,Rect:()=>zy,Text:()=>By});function Hy(e,t){if(t){var n=Vr(t);return Br(n,e)}return e}function Uy(e,t,n){var r=e.getTotalMatrix();if(r){var i=Hy([t,n,1],r),a=i[0],o=i[1];return[a,o]}return[t,n]}function Wy(e,t,n){if(e.isCanvas&&e.isCanvas())return!0;if(!cr(e)||e.cfg.isInView===!1)return!1;if(e.cfg.clipShape){var r=Uy(e,t,n),i=r[0],a=r[1];if(e.isClipped(i,a))return!1}var o=e.cfg.cacheCanvasBBox||e.getCanvasBBox();return t>=o.minX&&t<=o.maxX&&n>=o.minY&&n<=o.maxY}function Gy(e,t,n){if(!Wy(e,t,n))return null;for(var r=null,i=e.getChildren(),a=i.length-1;a>=0;a--){var o=i[a];if(o.isGroup())r=Gy(o,t,n);else if(Wy(o,t,n)){var s=o,c=Uy(o,t,n),l=c[0],u=c[1];s.isInShape(l,u)&&(r=o)}if(r)break}return r}var Ky=function(e){l(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return t.renderer=`canvas`,t.autoDraw=!0,t.localRefresh=!0,t.refreshElements=[],t.clipView=!0,t.quickHit=!1,t},t.prototype.onCanvasChange=function(e){(e===`attr`||e===`sort`||e===`changeSize`)&&(this.set(`refreshElements`,[this]),this.draw())},t.prototype.getShapeBase=function(){return Vy},t.prototype.getGroupBase=function(){return uy},t.prototype.getPixelRatio=function(){var e=this.get(`pixelRatio`)||Sv();return e>=1?Math.ceil(e):1},t.prototype.getViewRange=function(){return{minX:0,minY:0,maxX:this.cfg.width,maxY:this.cfg.height}},t.prototype.createDom=function(){var e=document.createElement(`canvas`),t=e.getContext(`2d`);return this.set(`context`,t),e},t.prototype.setDOMSize=function(t,n){e.prototype.setDOMSize.call(this,t,n);var r=this.get(`context`),i=this.get(`el`),a=this.getPixelRatio();i.width=a*t,i.height=a*n,a>1&&r.scale(a,a)},t.prototype.clear=function(){e.prototype.clear.call(this),this._clearFrame();var t=this.get(`context`),n=this.get(`el`);t.clearRect(0,0,n.width,n.height)},t.prototype.getShape=function(t,n){return this.get(`quickHit`)?Gy(this,t,n):e.prototype.getShape.call(this,t,n,null)},t.prototype._getRefreshRegion=function(){var e=this.get(`refreshElements`),t=this.getViewRange(),n;return e.length&&e[0]===this?n=t:(n=cy(e),n&&(n.minX=Math.floor(n.minX),n.minY=Math.floor(n.minY),n.maxX=Math.ceil(n.maxX),n.maxY=Math.ceil(n.maxY),n.maxY+=1,this.get(`clipView`)&&(n=ly(n,t)))),n},t.prototype.refreshElement=function(e){this.get(`refreshElements`).push(e)},t.prototype._clearFrame=function(){var e=this.get(`drawFrame`);e&&(ct(e),this.set(`drawFrame`,null),this.set(`refreshElements`,[]))},t.prototype.draw=function(){var e=this.get(`drawFrame`);this.get(`autoDraw`)&&e||this._startDraw()},t.prototype._drawAll=function(){var e=this.get(`context`),t=this.get(`el`),n=this.getChildren();e.clearRect(0,0,t.width,t.height),Qv(e,this),$v(e,n),this.set(`refreshElements`,[])},t.prototype._drawRegion=function(){var e=this.get(`context`),t=this.get(`refreshElements`),n=this.getChildren(),r=this._getRefreshRegion();r?(e.clearRect(r.minX,r.minY,r.maxX-r.minX,r.maxY-r.minY),e.save(),e.beginPath(),e.rect(r.minX,r.minY,r.maxX-r.minX,r.maxY-r.minY),e.clip(),Qv(e,this),ey(this,n,r),$v(e,n,r),e.restore()):t.length&&ny(t),F(t,function(e){e.get(`hasChanged`)&&e.set(`hasChanged`,!1)}),this.set(`refreshElements`,[])},t.prototype._startDraw=function(){var e=this,t=this.get(`drawFrame`),n=this.get(`drawFrameCallback`);t||(t=st(function(){e.get(`localRefresh`)?e._drawRegion():e._drawAll(),e.set(`drawFrame`,null),n&&n()}),this.set(`drawFrame`,t))},t.prototype.skipDraw=function(){},t.prototype.removeDom=function(){var e=this.get(`el`);e.width=0,e.height=0,e.parentNode.removeChild(e)},t}(Ho),qy=e({AbstractCanvas:()=>Ho,AbstractGroup:()=>Uo,AbstractShape:()=>Wo,Base:()=>lr,Canvas:()=>Ky,Event:()=>ir,Group:()=>uy,PathUtil:()=>bn,Shape:()=>Vy,assembleFont:()=>Gs,getArcParams:()=>Vv,getBBoxMethod:()=>qo,getOffScreenContext:()=>Vs,getTextHeight:()=>Hs,invert:()=>Vr,isAllowCapture:()=>cr,multiplyVec2:()=>Br,registerBBox:()=>Ko,registerEasing:()=>Eo,version:()=>Jy}),Jy=`0.5.12`,Yy={rect:`path`,circle:`circle`,line:`line`,path:`path`,marker:`path`,text:`text`,polyline:`polyline`,polygon:`polygon`,image:`image`,ellipse:`ellipse`,dom:`foreignObject`},q={opacity:`opacity`,fillStyle:`fill`,fill:`fill`,fillOpacity:`fill-opacity`,strokeStyle:`stroke`,strokeOpacity:`stroke-opacity`,stroke:`stroke`,x:`x`,y:`y`,r:`r`,rx:`rx`,ry:`ry`,width:`width`,height:`height`,x1:`x1`,x2:`x2`,y1:`y1`,y2:`y2`,lineCap:`stroke-linecap`,lineJoin:`stroke-linejoin`,lineWidth:`stroke-width`,lineDash:`stroke-dasharray`,lineDashOffset:`stroke-dashoffset`,miterLimit:`stroke-miterlimit`,font:`font`,fontSize:`font-size`,fontStyle:`font-style`,fontVariant:`font-variant`,fontWeight:`font-weight`,fontFamily:`font-family`,startArrow:`marker-start`,endArrow:`marker-end`,path:`d`,class:`class`,id:`id`,style:`style`,preserveAspectRatio:`preserveAspectRatio`};function Xy(e){return document.createElementNS(`http://www.w3.org/2000/svg`,e)}function Zy(e){var t=Yy[e.type],n=e.getParent();if(!t)throw Error(`the type `+e.type+` is not supported by svg`);var r=Xy(t);if(e.get(`id`)&&(r.id=e.get(`id`)),e.set(`el`,r),e.set(`attrs`,{}),n){var i=n.get(`el`);i?i.appendChild(r):(i=n.createDom(),n.set(`el`,i),i.appendChild(r))}return r}function Qy(e,t){var n=e.get(`el`),r=Mt(n.children).sort(t),i=document.createDocumentFragment();r.forEach(function(e){i.appendChild(e)}),n.appendChild(i)}function $y(e,t){var n=e.parentNode,r=Array.from(n.childNodes).filter(function(e){return e.nodeType===1&&e.nodeName.toLowerCase()!==`defs`}),i=r[t],a=r.indexOf(e);if(i){if(a>t)n.insertBefore(e,i);else if(a<t){var o=r[t+1];o?n.insertBefore(e,o):n.appendChild(e)}}else n.appendChild(e)}function eb(e,t){var n=e.cfg.el,r=e.attr(),i={dx:r.shadowOffsetX,dy:r.shadowOffsetY,blur:r.shadowBlur,color:r.shadowColor};if(!i.dx&&!i.dy&&!i.blur&&!i.color)n.removeAttribute(`filter`);else{var a=t.find(`filter`,i);a||=t.addShadow(i),n.setAttribute(`filter`,`url(#`+a+`)`)}}function tb(e){var t=e.attr().matrix;if(t){for(var n=e.cfg.el,r=[],i=0;i<9;i+=3)r.push(t[i]+`,`+t[i+1]);r=r.join(`,`),r.indexOf(`NaN`)===-1?n.setAttribute(`transform`,`matrix(`+r+`)`):console.warn(`invalid matrix:`,t)}}function nb(e,t){var n=e.getClip(),r=e.get(`el`);if(!n)r.removeAttribute(`clip-path`);else if(n&&!r.hasAttribute(`clip-path`)){Zy(n),n.createPath(t);var i=t.addClip(n);r.setAttribute(`clip-path`,`url(#`+i+`)`)}}function rb(e,t){t.forEach(function(t){t.draw(e)})}function ib(e,t){var n=e.get(`canvas`);if(n&&n.get(`autoDraw`)){var r=n.get(`context`),i=e.getParent(),a=i?i.getChildren():[n],o=e.get(`el`);if(t===`remove`)if(e.get(`isClipShape`)){var s=o&&o.parentNode,c=s&&s.parentNode;s&&c&&c.removeChild(s)}else o&&o.parentNode&&o.parentNode.removeChild(o);else if(t===`show`)o.setAttribute(`visibility`,`visible`);else if(t===`hide`)o.setAttribute(`visibility`,`hidden`);else if(t===`zIndex`)$y(o,a.indexOf(e));else if(t===`sort`){var l=e.get(`children`);l&&l.length&&Qy(e,function(e,t){return l.indexOf(e)-l.indexOf(t)?1:0})}else t===`clear`?o&&(o.innerHTML=``):t===`matrix`?tb(e):t===`clip`?nb(e,r):t===`attr`||t===`add`&&e.draw(r)}}var ab=function(e){l(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.isEntityGroup=function(){return!0},t.prototype.createDom=function(){var e=Xy(`g`);this.set(`el`,e);var t=this.getParent();if(t){var n=t.get(`el`);n?n.appendChild(e):(n=t.createDom(),t.set(`el`,n),n.appendChild(e))}return e},t.prototype.afterAttrsChange=function(t){e.prototype.afterAttrsChange.call(this,t);var n=this.get(`canvas`);if(n&&n.get(`autoDraw`)){var r=n.get(`context`);this.createPath(r,t)}},t.prototype.onCanvasChange=function(e){ib(this,e)},t.prototype.getShapeBase=function(){return Tb},t.prototype.getGroupBase=function(){return t},t.prototype.draw=function(e){var t=this.getChildren(),n=this.get(`el`);this.get(`destroyed`)?n&&n.parentNode.removeChild(n):(n||this.createDom(),nb(this,e),this.createPath(e),t.length&&rb(e,t))},t.prototype.createPath=function(e,t){var n=this.attr(),r=this.get(`el`);F(t||n,function(e,t){q[t]&&r.setAttribute(q[t],e)}),tb(this)},t}(Uo),ob=function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=`svg`,t.canFill=!1,t.canStroke=!1,t}return t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return _(_({},t),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},t.prototype.afterAttrsChange=function(t){e.prototype.afterAttrsChange.call(this,t);var n=this.get(`canvas`);if(n&&n.get(`autoDraw`)){var r=n.get(`context`);this.draw(r,t)}},t.prototype.getShapeBase=function(){return Tb},t.prototype.getGroupBase=function(){return ab},t.prototype.onCanvasChange=function(e){ib(this,e)},t.prototype.calculateBBox=function(){var e=this.get(`el`),t=null;if(e)t=e.getBBox();else{var n=qo(this.get(`type`));n&&(t=n(this))}if(t){var r=t.x,i=t.y,a=t.width,o=t.height,s=this.getHitLineWidth(),c=s/2,l=r-c,u=i-c,d=r+a+c,f=i+o+c;return{x:l,y:u,minX:l,minY:u,maxX:d,maxY:f,width:a+s,height:o+s}}return{x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0}},t.prototype.isFill=function(){var e=this.attr(),t=e.fill,n=e.fillStyle;return(t||n||this.isClipShape())&&this.canFill},t.prototype.isStroke=function(){var e=this.attr(),t=e.stroke,n=e.strokeStyle;return(t||n)&&this.canStroke},t.prototype.draw=function(e,t){var n=this.get(`el`);this.get(`destroyed`)?n&&n.parentNode.removeChild(n):(n||Zy(this),nb(this,e),this.createPath(e,t),this.shadow(e,t),this.strokeAndFill(e,t),this.transform(t))},t.prototype.createPath=function(e,t){},t.prototype.strokeAndFill=function(e,t){var n=t||this.attr(),r=n.fill,i=n.fillStyle,a=n.stroke,o=n.strokeStyle,s=n.fillOpacity,c=n.strokeOpacity,l=n.lineWidth,u=this.get(`el`);this.canFill&&(t?`fill`in n?this._setColor(e,`fill`,r):`fillStyle`in n&&this._setColor(e,`fill`,i):this._setColor(e,`fill`,r||i),s&&u.setAttribute(q.fillOpacity,s)),this.canStroke&&l>0&&(t?`stroke`in n?this._setColor(e,`stroke`,a):`strokeStyle`in n&&this._setColor(e,`stroke`,o):this._setColor(e,`stroke`,a||o),c&&u.setAttribute(q.strokeOpacity,c),l&&u.setAttribute(q.lineWidth,l))},t.prototype._setColor=function(e,t,n){var r=this.get(`el`);if(!n){r.setAttribute(q[t],`none`);return}if(n=n.trim(),/^[r,R,L,l]{1}[\s]*\(/.test(n)){var i=e.find(`gradient`,n);i||=e.addGradient(n),r.setAttribute(q[t],`url(#`+i+`)`)}else if(/^[p,P]{1}[\s]*\(/.test(n)){var i=e.find(`pattern`,n);i||=e.addPattern(n),r.setAttribute(q[t],`url(#`+i+`)`)}else r.setAttribute(q[t],n)},t.prototype.shadow=function(e,t){var n=this.attr(),r=t||n,i=r.shadowOffsetX,a=r.shadowOffsetY,o=r.shadowBlur,s=r.shadowColor;(i||a||o||s)&&eb(this,e)},t.prototype.transform=function(e){var t=this.attr();(e||t).matrix&&tb(this)},t.prototype.isInShape=function(e,t){return this.isPointInPath(e,t)},t.prototype.isPointInPath=function(e,t){var n=this.get(`el`),r=this.get(`canvas`).get(`el`).getBoundingClientRect(),i=e+r.left,a=t+r.top,o=document.elementFromPoint(i,a);return!!(o&&o.isEqualNode(n))},t.prototype.getHitLineWidth=function(){var e=this.attrs,t=e.lineWidth,n=e.lineAppendWidth;return this.isStroke()?t+n:0},t}(Wo),sb=function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=`circle`,t.canFill=!0,t.canStroke=!0,t}return t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return _(_({},t),{x:0,y:0,r:0})},t.prototype.createPath=function(e,t){var n=this.attr(),r=this.get(`el`);F(t||n,function(e,t){t===`x`||t===`y`?r.setAttribute(`c`+t,e):q[t]&&r.setAttribute(q[t],e)})},t}(ob),cb=function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=`dom`,t.canFill=!1,t.canStroke=!1,t}return t.prototype.createPath=function(e,t){var n=this.attr(),r=this.get(`el`);if(F(t||n,function(e,t){q[t]&&r.setAttribute(q[t],e)}),typeof n.html==`function`){var i=n.html.call(this,n);if(i instanceof Element||i instanceof HTMLDocument){for(var a=r.childNodes,o=a.length-1;o>=0;o--)r.removeChild(a[o]);r.appendChild(i)}else r.innerHTML=i}else r.innerHTML=n.html},t}(ob),lb=function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=`ellipse`,t.canFill=!0,t.canStroke=!0,t}return t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return _(_({},t),{x:0,y:0,rx:0,ry:0})},t.prototype.createPath=function(e,t){var n=this.attr(),r=this.get(`el`);F(t||n,function(e,t){t===`x`||t===`y`?r.setAttribute(`c`+t,e):q[t]&&r.setAttribute(q[t],e)})},t}(ob),ub=function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=`image`,t.canFill=!1,t.canStroke=!1,t}return t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return _(_({},t),{x:0,y:0,width:0,height:0})},t.prototype.createPath=function(e,t){var n=this,r=this.attr(),i=this.get(`el`);F(t||r,function(e,t){t===`img`?n._setImage(r.img):q[t]&&i.setAttribute(q[t],e)})},t.prototype.setAttr=function(e,t){this.attrs[e]=t,e===`img`&&this._setImage(t)},t.prototype._setImage=function(e){var t=this.attr(),n=this.get(`el`);if(I(e))n.setAttribute(`href`,e);else if(e instanceof window.Image)t.width||(n.setAttribute(`width`,e.width),this.attr(`width`,e.width)),t.height||(n.setAttribute(`height`,e.height),this.attr(`height`,e.height)),n.setAttribute(`href`,e.src);else if(e instanceof HTMLElement&&I(e.nodeName)&&e.nodeName.toUpperCase()===`CANVAS`)n.setAttribute(`href`,e.toDataURL());else if(e instanceof ImageData){var r=document.createElement(`canvas`);r.setAttribute(`width`,``+e.width),r.setAttribute(`height`,``+e.height),r.getContext(`2d`).putImageData(e,0,0),t.width||(n.setAttribute(`width`,``+e.width),this.attr(`width`,e.width)),t.height||(n.setAttribute(`height`,``+e.height),this.attr(`height`,e.height)),n.setAttribute(`href`,r.toDataURL())}},t}(ob),db=function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=`line`,t.canFill=!1,t.canStroke=!0,t}return t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return _(_({},t),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},t.prototype.createPath=function(e,t){var n=this.attr(),r=this.get(`el`);F(t||n,function(t,i){if(i===`startArrow`||i===`endArrow`)if(t){var a=P(t)?e.addArrow(n,q[i]):e.getDefaultArrow(n,q[i]);r.setAttribute(q[i],`url(#`+a+`)`)}else r.removeAttribute(q[i]);else q[i]&&r.setAttribute(q[i],t)})},t.prototype.getTotalLength=function(){var e=this.attr(),t=e.x1,n=e.y1,r=e.x2,i=e.y2;return es.length(t,n,r,i)},t.prototype.getPoint=function(e){var t=this.attr(),n=t.x1,r=t.y1,i=t.x2,a=t.y2;return es.pointAt(n,r,i,a,e)},t}(ob),fb={circle:function(e,t,n){return[[`M`,e,t],[`m`,-n,0],[`a`,n,n,0,1,0,n*2,0],[`a`,n,n,0,1,0,-n*2,0]]},square:function(e,t,n){return[[`M`,e-n,t-n],[`L`,e+n,t-n],[`L`,e+n,t+n],[`L`,e-n,t+n],[`Z`]]},diamond:function(e,t,n){return[[`M`,e-n,t],[`L`,e,t-n],[`L`,e+n,t],[`L`,e,t+n],[`Z`]]},triangle:function(e,t,n){var r=n*Math.sin(1/3*Math.PI);return[[`M`,e-n,t+r],[`L`,e,t-r],[`L`,e+n,t+r],[`z`]]},triangleDown:function(e,t,n){var r=n*Math.sin(1/3*Math.PI);return[[`M`,e-n,t-r],[`L`,e+n,t-r],[`L`,e,t+r],[`Z`]]}},pb={get:function(e){return fb[e]},register:function(e,t){fb[e]=t},remove:function(e){delete fb[e]},getAll:function(){return fb}},mb=function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=`marker`,t.canFill=!0,t.canStroke=!0,t}return t.prototype.createPath=function(e){this.get(`el`).setAttribute(`d`,this._assembleMarker())},t.prototype._assembleMarker=function(){var e=this._getPath();return N(e)?e.map(function(e){return e.join(` `)}).join(``):e},t.prototype._getPath=function(){var e=this.attr(),t=e.x,n=e.y,r=e.r||e.radius,i=e.symbol||`circle`,a=j(i)?i:pb.get(i);return a?a(t,n,r):(console.warn(a+` symbol is not exist.`),null)},t.symbolsFactory=pb,t}(ob),hb=function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=`path`,t.canFill=!0,t.canStroke=!0,t}return t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return _(_({},t),{startArrow:!1,endArrow:!1})},t.prototype.createPath=function(e,t){var n=this,r=this.attr(),i=this.get(`el`);F(t||r,function(t,a){if(a===`path`&&N(t))i.setAttribute(`d`,n._formatPath(t));else if(a===`startArrow`||a===`endArrow`)if(t){var o=P(t)?e.addArrow(r,q[a]):e.getDefaultArrow(r,q[a]);i.setAttribute(q[a],`url(#`+o+`)`)}else i.removeAttribute(q[a]);else q[a]&&i.setAttribute(q[a],t)})},t.prototype._formatPath=function(e){var t=e.map(function(e){return e.join(` `)}).join(``);return~t.indexOf(`NaN`)?``:t},t.prototype.getTotalLength=function(){var e=this.get(`el`);return e?e.getTotalLength():null},t.prototype.getPoint=function(e){var t=this.get(`el`),n=this.getTotalLength();if(n===0)return null;var r=t?t.getPointAtLength(e*n):null;return r?{x:r.x,y:r.y}:null},t}(ob),gb=function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=`polygon`,t.canFill=!0,t.canStroke=!0,t}return t.prototype.createPath=function(e,t){var n=this.attr(),r=this.get(`el`);F(t||n,function(e,t){t===`points`&&N(e)&&e.length>=2?r.setAttribute(`points`,e.map(function(e){return e[0]+`,`+e[1]}).join(` `)):q[t]&&r.setAttribute(q[t],e)})},t}(ob),_b=function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=`polyline`,t.canFill=!0,t.canStroke=!0,t}return t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return _(_({},t),{startArrow:!1,endArrow:!1})},t.prototype.onAttrChange=function(t,n,r){e.prototype.onAttrChange.call(this,t,n,r),[`points`].indexOf(t)!==-1&&this._resetCache()},t.prototype._resetCache=function(){this.set(`totalLength`,null),this.set(`tCache`,null)},t.prototype.createPath=function(e,t){var n=this.attr(),r=this.get(`el`);F(t||n,function(e,t){t===`points`&&N(e)&&e.length>=2?r.setAttribute(`points`,e.map(function(e){return e[0]+`,`+e[1]}).join(` `)):q[t]&&r.setAttribute(q[t],e)})},t.prototype.getTotalLength=function(){var e=this.attr().points,t=this.get(`totalLength`);return M(t)?(this.set(`totalLength`,Fs.length(e)),this.get(`totalLength`)):t},t.prototype.getPoint=function(e){var t=this.attr().points,n=this.get(`tCache`);n||=(this._setTcache(),this.get(`tCache`));var r,i;return F(n,function(t,n){e>=t[0]&&e<=t[1]&&(r=(e-t[0])/(t[1]-t[0]),i=n)}),es.pointAt(t[i][0],t[i][1],t[i+1][0],t[i+1][1],r)},t.prototype._setTcache=function(){var e=this.attr().points;if(!(!e||e.length===0)){var t=this.getTotalLength();if(!(t<=0)){var n=0,r=[],i,a;F(e,function(o,s){e[s+1]&&(i=[],i[0]=n/t,a=es.length(o[0],o[1],e[s+1][0],e[s+1][1]),n+=a,i[1]=n/t,r.push(i))}),this.set(`tCache`,r)}}},t.prototype.getStartTangent=function(){var e=this.attr().points,t=[];return t.push([e[1][0],e[1][1]]),t.push([e[0][0],e[0][1]]),t},t.prototype.getEndTangent=function(){var e=this.attr().points,t=e.length-1,n=[];return n.push([e[t-1][0],e[t-1][1]]),n.push([e[t][0],e[t][1]]),n},t}(ob);function vb(e){var t=0,n=0,r=0,i=0;return N(e)?e.length===1?t=n=r=i=e[0]:e.length===2?(t=r=e[0],n=i=e[1]):e.length===3?(t=e[0],n=i=e[1],r=e[2]):(t=e[0],n=e[1],r=e[2],i=e[3]):t=n=r=i=e,{r1:t,r2:n,r3:r,r4:i}}var yb=function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=`rect`,t.canFill=!0,t.canStroke=!0,t}return t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return _(_({},t),{x:0,y:0,width:0,height:0,radius:0})},t.prototype.createPath=function(e,t){var n=this,r=this.attr(),i=this.get(`el`),a=!1,o=[`x`,`y`,`width`,`height`,`radius`];F(t||r,function(e,t){o.indexOf(t)!==-1&&!a?(i.setAttribute(`d`,n._assembleRect(r)),a=!0):o.indexOf(t)===-1&&q[t]&&i.setAttribute(q[t],e)})},t.prototype._assembleRect=function(e){var t=e.x,n=e.y,r=e.width,i=e.height,a=e.radius;if(!a)return`M `+t+`,`+n+` l `+r+`,0 l 0,`+i+` l`+-r+` 0 z`;var o=vb(a);return N(a)?a.length===1?o.r1=o.r2=o.r3=o.r4=a[0]:a.length===2?(o.r1=o.r3=a[0],o.r2=o.r4=a[1]):a.length===3?(o.r1=a[0],o.r2=o.r4=a[1],o.r3=a[2]):(o.r1=a[0],o.r2=a[1],o.r3=a[2],o.r4=a[3]):o.r1=o.r2=o.r3=o.r4=a,[[`M `+(t+o.r1)+`,`+n],[`l `+(r-o.r1-o.r2)+`,0`],[`a `+o.r2+`,`+o.r2+`,0,0,1,`+o.r2+`,`+o.r2],[`l 0,`+(i-o.r2-o.r3)],[`a `+o.r3+`,`+o.r3+`,0,0,1,`+-o.r3+`,`+o.r3],[`l `+(o.r3+o.r4-r)+`,0`],[`a `+o.r4+`,`+o.r4+`,0,0,1,`+-o.r4+`,`+-o.r4],[`l 0,`+(o.r4+o.r1-i)],[`a `+o.r1+`,`+o.r1+`,0,0,1,`+o.r1+`,`+-o.r1],[`z`]].join(` `)},t}(ob),bb=.3,xb={top:`before-edge`,middle:`central`,bottom:`after-edge`,alphabetic:`baseline`,hanging:`hanging`},Sb={top:`text-before-edge`,middle:`central`,bottom:`text-after-edge`,alphabetic:`alphabetic`,hanging:`hanging`},Cb={left:`left`,start:`left`,center:`middle`,right:`end`,end:`end`},wb=function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=`text`,t.canFill=!0,t.canStroke=!0,t}return t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return _(_({},t),{x:0,y:0,text:null,fontSize:12,fontFamily:`sans-serif`,fontStyle:`normal`,fontWeight:`normal`,fontVariant:`normal`,textAlign:`start`,textBaseline:`bottom`})},t.prototype.createPath=function(e,t){var n=this,r=this.attr(),i=this.get(`el`);this._setFont(),F(t||r,function(e,t){t===`text`?n._setText(``+e):t===`matrix`&&e?tb(n):q[t]&&i.setAttribute(q[t],e)}),i.setAttribute(`paint-order`,`stroke`),i.setAttribute(`style`,`stroke-linecap:butt; stroke-linejoin:miter;`)},t.prototype._setFont=function(){var e=this.get(`el`),t=this.attr(),n=t.textBaseline,r=t.textAlign,i=xr();i&&i.name===`firefox`?e.setAttribute(`dominant-baseline`,Sb[n]||`alphabetic`):e.setAttribute(`alignment-baseline`,xb[n]||`baseline`),e.setAttribute(`text-anchor`,Cb[r]||`left`)},t.prototype._setText=function(e){var t=this.get(`el`),n=this.attr(),r=n.x,i=n.textBaseline,a=i===void 0?`bottom`:i;if(!e)t.innerHTML=``;else if(~e.indexOf(`
`)){var o=e.split(`
`),s=o.length-1,c=``;F(o,function(e,t){t===0?a===`alphabetic`?c+=`<tspan x="`+r+`" dy="`+-s+`em">`+e+`</tspan>`:a===`top`?c+=`<tspan x="`+r+`" dy="0.9em">`+e+`</tspan>`:a===`middle`?c+=`<tspan x="`+r+`" dy="`+-(s-1)/2+`em">`+e+`</tspan>`:a===`bottom`?c+=`<tspan x="`+r+`" dy="-`+(s+bb)+`em">`+e+`</tspan>`:a===`hanging`&&(c+=`<tspan x="`+r+`" dy="`+(-(s-1)-bb)+`em">`+e+`</tspan>`):c+=`<tspan x="`+r+`" dy="1em">`+e+`</tspan>`}),t.innerHTML=c}else t.innerHTML=e},t}(ob),Tb=e({Base:()=>ob,Circle:()=>sb,Dom:()=>cb,Ellipse:()=>lb,Image:()=>ub,Line:()=>db,Marker:()=>mb,Path:()=>hb,Polygon:()=>gb,Polyline:()=>_b,Rect:()=>yb,Text:()=>wb}),Eb=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,Db=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,Ob=/[\d.]+:(#[^\s]+|[^)]+\))/gi;function kb(e){var t=e.match(Ob);if(!t)return``;var n=``;return t.sort(function(e,t){return e=e.split(`:`),t=t.split(`:`),Number(e[0])-Number(t[0])}),F(t,function(e){e=e.split(`:`),n+=`<stop offset="`+e[0]+`" stop-color="`+e[1]+`"></stop>`}),n}function Ab(e,t){var n=Eb.exec(e),r=Ve(Ue(parseFloat(n[1])),Math.PI*2),i=n[2],a,o;r>=0&&r<.5*Math.PI?(a={x:0,y:0},o={x:1,y:1}):.5*Math.PI<=r&&r<Math.PI?(a={x:1,y:0},o={x:0,y:1}):Math.PI<=r&&r<1.5*Math.PI?(a={x:1,y:1},o={x:0,y:0}):(a={x:0,y:1},o={x:1,y:0});var s=Math.tan(r),c=s*s,l=(o.x-a.x+s*(o.y-a.y))/(c+1)+a.x,u=s*(o.x-a.x+s*(o.y-a.y))/(c+1)+a.y;t.setAttribute(`x1`,a.x),t.setAttribute(`y1`,a.y),t.setAttribute(`x2`,l),t.setAttribute(`y2`,u),t.innerHTML=kb(i)}function jb(e,t){var n=Db.exec(e),r=parseFloat(n[1]),i=parseFloat(n[2]),a=parseFloat(n[3]),o=n[4];t.setAttribute(`cx`,r),t.setAttribute(`cy`,i),t.setAttribute(`r`,a),t.innerHTML=kb(o)}var Mb=function(){function e(e){this.cfg={};var t=null,n=Pt(`gradient_`);return e.toLowerCase()[0]===`l`?(t=Xy(`linearGradient`),Ab(e,t)):(t=Xy(`radialGradient`),jb(e,t)),t.setAttribute(`id`,n),this.el=t,this.id=n,this.cfg=e,this}return e.prototype.match=function(e,t){return this.cfg===t},e}(),Nb={shadowColor:`color`,shadowOpacity:`opacity`,shadowBlur:`blur`,shadowOffsetX:`dx`,shadowOffsetY:`dy`},Pb={x:`-40%`,y:`-40%`,width:`200%`,height:`200%`},Fb=function(){function e(e){this.type=`filter`,this.cfg={},this.type=`filter`;var t=Xy(`filter`);return F(Pb,function(e,n){t.setAttribute(n,e)}),this.el=t,this.id=Pt(`filter_`),this.el.id=this.id,this.cfg=e,this._parseShadow(e,t),this}return e.prototype.match=function(e,t){if(this.type!==e)return!1;var n=!0,r=this.cfg;return F(Object.keys(r),function(e){if(r[e]!==t[e])return n=!1,!1}),n},e.prototype.update=function(e,t){var n=this.cfg;return n[Nb[e]]=t,this._parseShadow(n,this.el),this},e.prototype._parseShadow=function(e,t){t.innerHTML=`<feDropShadow
      dx="`+(e.dx||0)+`"
      dy="`+(e.dy||0)+`"
      stdDeviation="`+(e.blur?e.blur/10:0)+`"
      flood-color="`+(e.color?e.color:`#000`)+`"
      flood-opacity="`+(e.opacity?e.opacity:1)+`"
      />`},e}(),Ib=function(){function e(e,t){this.cfg={};var n=Xy(`marker`),r=Pt(`marker_`);n.setAttribute(`id`,r);var i=Xy(`path`);i.setAttribute(`stroke`,e.stroke||`none`),i.setAttribute(`fill`,e.fill||`none`),n.appendChild(i),n.setAttribute(`overflow`,`visible`),n.setAttribute(`orient`,`auto-start-reverse`),this.el=n,this.child=i,this.id=r;var a=e[t===`marker-start`?`startArrow`:`endArrow`];return this.stroke=e.stroke||`#000`,a===!0?this._setDefaultPath(t,i):(this.cfg=a,this._setMarker(e.lineWidth,i)),this}return e.prototype.match=function(){return!1},e.prototype._setDefaultPath=function(e,t){var n=this.el;t.setAttribute(`d`,`M0,0 L`+10*Math.cos(Math.PI/6)+`,5 L0,10`),n.setAttribute(`refX`,``+10*Math.cos(Math.PI/6)),n.setAttribute(`refY`,`5`)},e.prototype._setMarker=function(e,t){var n=this.el,r=this.cfg.path,i=this.cfg.d;N(r)&&(r=r.map(function(e){return e.join(` `)}).join(``)),t.setAttribute(`d`,r),n.appendChild(t),i&&n.setAttribute(`refX`,``+i/e)},e.prototype.update=function(e){var t=this.child;t.attr?t.attr(`fill`,e):t.setAttribute(`fill`,e)},e}(),Lb=function(){function e(e){this.type=`clip`,this.cfg={};var t=Xy(`clipPath`);this.el=t,this.id=Pt(`clip_`),t.id=this.id;var n=e.cfg.el;return t.appendChild(n),this.cfg=e,this}return e.prototype.match=function(){return!1},e.prototype.remove=function(){var e=this.el;e.parentNode.removeChild(e)},e}(),Rb=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,zb=function(){function e(e){this.cfg={};var t=Xy(`pattern`);t.setAttribute(`patternUnits`,`userSpaceOnUse`);var n=Xy(`image`);t.appendChild(n);var r=Pt(`pattern_`);t.id=r,this.el=t,this.id=r,this.cfg=e;var i=Rb.exec(e)[2];n.setAttribute(`href`,i);var a=new Image;i.match(/^data:/i)||(a.crossOrigin=`Anonymous`),a.src=i;function o(){t.setAttribute(`width`,``+a.width),t.setAttribute(`height`,``+a.height)}return a.complete?o():(a.onload=o,a.src=a.src),this}return e.prototype.match=function(e,t){return this.cfg===t},e}(),Bb=function(){function e(e){var t=Xy(`defs`);t.id=Pt(`defs_`),e.appendChild(t),this.children=[],this.defaultArrow={},this.el=t,this.canvas=e}return e.prototype.find=function(e,t){for(var n=this.children,r=null,i=0;i<n.length;i++)if(n[i].match(e,t)){r=n[i].id;break}return r},e.prototype.findById=function(e){for(var t=this.children,n=null,r=0;r<t.length;r++)if(t[r].id===e){n=t[r];break}return n},e.prototype.add=function(e){this.children.push(e),e.canvas=this.canvas,e.parent=this},e.prototype.getDefaultArrow=function(e,t){var n=e.stroke||e.strokeStyle;if(this.defaultArrow[n])return this.defaultArrow[n].id;var r=new Ib(e,t);return this.defaultArrow[n]=r,this.el.appendChild(r.el),this.add(r),r.id},e.prototype.addGradient=function(e){var t=new Mb(e);return this.el.appendChild(t.el),this.add(t),t.id},e.prototype.addArrow=function(e,t){var n=new Ib(e,t);return this.el.appendChild(n.el),this.add(n),n.id},e.prototype.addShadow=function(e){var t=new Fb(e);return this.el.appendChild(t.el),this.add(t),t.id},e.prototype.addPattern=function(e){var t=new zb(e);return this.el.appendChild(t.el),this.add(t),t.id},e.prototype.addClip=function(e){var t=new Lb(e);return this.el.appendChild(t.el),this.add(t),t.id},e}(),Vb=function(e){l(t,e);function t(t){return e.call(this,_(_({},t),{autoDraw:!0,renderer:`svg`}))||this}return t.prototype.getShapeBase=function(){return Tb},t.prototype.getGroupBase=function(){return ab},t.prototype.getShape=function(e,t,n){var r=n.target||n.srcElement;if(!Yy[r.tagName]){for(var i=r.parentNode;i&&!Yy[i.tagName];)i=i.parentNode;r=i}return this.find(function(e){return e.get(`el`)===r})},t.prototype.createDom=function(){var e=Xy(`svg`),t=new Bb(e);return e.setAttribute(`width`,``+this.get(`width`)),e.setAttribute(`height`,``+this.get(`height`)),this.set(`context`,t),e},t.prototype.onCanvasChange=function(e){var t=this.get(`context`),n=this.get(`el`);if(e===`sort`){var r=this.get(`children`);r&&r.length&&Qy(this,function(e,t){return r.indexOf(e)-r.indexOf(t)?1:0})}else if(e===`clear`){if(n){n.innerHTML=``;var i=t.el;i.innerHTML=``,n.appendChild(i)}}else e===`matrix`?tb(this):e===`clip`?nb(this,t):e===`changeSize`&&(n.setAttribute(`width`,``+this.get(`width`)),n.setAttribute(`height`,``+this.get(`height`)))},t.prototype.draw=function(){var e=this.get(`context`),t=this.getChildren();nb(this,e),t.length&&rb(e,t)},t}(Ho),Hb=e({AbstractCanvas:()=>Ho,AbstractGroup:()=>Uo,AbstractShape:()=>Wo,Base:()=>lr,Canvas:()=>Vb,Event:()=>ir,Group:()=>ab,PathUtil:()=>bn,Shape:()=>Tb,assembleFont:()=>Gs,getBBoxMethod:()=>qo,getOffScreenContext:()=>Vs,getTextHeight:()=>Hs,invert:()=>Vr,isAllowCapture:()=>cr,multiplyVec2:()=>Br,registerBBox:()=>Ko,registerEasing:()=>Eo,version:()=>Ub}),Ub=`0.5.6`,Wb=function(e){l(t,e);function t(t){var n=e.call(this,t)||this;n.type=`path`,n.shapeType=`line`;var r=t.connectNulls,i=r===void 0?!1:r,a=t.showSinglePoint,o=a===void 0?!0:a;return n.connectNulls=i,n.showSinglePoint=o,n}return t.prototype.updateElements=function(e,t){var n,r,i,a,o,s;t===void 0&&(t=!1);for(var c=new Map,l=new Map,u=[],d=0,f=0;f<e.length;f++){var p=e[f],m=this.getElementId(p);u.push(m),c.set(m,p),l.set(m,d),d++}this.elements=Array(d);var h=A_(this.lastElementsMap,u),g=h.added,_=h.updated,v=h.removed;try{for(var y=E(g),b=y.next();!b.done;b=y.next()){var m=b.value,p=c.get(m),x=this.getShapeFactory(),S=this.getShapeInfo(p),f=l.get(m),C=new h_({shapeFactory:x,container:this.container,offscreenGroup:this.getOffscreenGroup(),elementIndex:f});C.geometry=this,C.animate=this.animateOption,C.draw(S,t),this.elementsMap[m]=C,this.elements[f]=C}}catch(e){n={error:e}}finally{try{b&&!b.done&&(r=y.return)&&r.call(y)}finally{if(n)throw n.error}}try{for(var w=E(_),T=w.next();!T.done;T=w.next()){var m=T.value,p=c.get(m),C=this.lastElementsMap[m],f=l.get(m),S=this.getShapeInfo(p),D=C.getModel();(this.isCoordinateChanged||O_(D,S))&&(C.animate=this.animateOption,C.update(S)),this.elementsMap[m]=C,this.elements[f]=C}}catch(e){i={error:e}}finally{try{T&&!T.done&&(a=w.return)&&a.call(w)}finally{if(i)throw i.error}}try{for(var O=E(v),k=O.next();!k.done;k=O.next()){var m=k.value,C=this.lastElementsMap[m];C.animate=this.animateOption,C.destroy()}}catch(e){o={error:e}}finally{try{k&&!k.done&&(s=O.return)&&s.call(O)}finally{if(o)throw o.error}}},t.prototype.getPointsAndData=function(e){for(var t=[],n=[],r=0,i=e.length;r<i;r++){var a=e[r];t.push({x:a.x,y:a.y}),n.push(a[Jt])}return{points:t,data:n}},t.prototype.getShapeInfo=function(e){var t=this.getDrawCfg(e[0]),n=this.getPointsAndData(e),r=n.points,i=n.data;return t.mappingData=e,t.data=i,t.isStack=!!this.getAdjust(`stack`),t.points=r,t.connectNulls=this.connectNulls,t.showSinglePoint=this.showSinglePoint,t},t}(j_);function Gb(e,t,n,r,i){var a=[];if(e.length){for(var o=[],s=[],c=0,l=e.length;c<l;c++){var u=e[c];o.push(u[1]),s.push(u[0])}s=s.reverse(),F([o,s],function(e,c){var l=[],u=r.parsePoints(e),d=u[0];o.length===1&&s.length===1?l=c===0?[[`M`,d.x-.5,d.y],[`L`,d.x+.5,d.y]]:[[`L`,d.x+.5,d.y],[`L`,d.x-.5,d.y]]:(t&&u.push({x:d.x,y:d.y}),l=n?vh(u,!1,i):_h(u,!1),c>0&&(l[0][0]=`L`)),a=a.concat(l)}),a.push([`Z`])}return a}function Kb(e,t,n,r,i){for(var a=ov(e,t,!t,`lineWidth`),o=e.connectNulls,s=e.isInCircle,c=e.points,l=e.showSinglePoint,u=rv(c,o,l),d=[],f=0,p=u.length;f<p;f++){var m=u[f];d=d.concat(Gb(m,s,n,r,i))}return a.path=d,a}function qb(e){var t=e.start,n=e.end;return[[t.x,n.y],[n.x,t.y]]}T_(`area`,{defaultShapeType:`area`,getDefaultPoints:function(e){var t=e.x,n=e.y0;return(N(e.y)?e.y:[n,e.y]).map(function(e){return{x:t,y:e}})}}),K(`area`,`area`,{draw:function(e,t){var n=Kb(e,!1,!1,this);return t.addShape({type:`path`,attrs:n,name:`area`})},getMarker:function(e){return{symbol:function(e,t,n){return n===void 0&&(n=5.5),[[`M`,e-n,t-4],[`L`,e+n,t-4],[`L`,e+n,t+4],[`L`,e-n,t+4],[`Z`]]},style:{r:5,fill:e.color,fillOpacity:1}}}});var Jb=function(e){l(t,e);function t(t){var n=e.call(this,t)||this;n.type=`area`,n.shapeType=`area`,n.generatePoints=!0,n.startOnZero=!0;var r=t.startOnZero,i=r===void 0?!0:r,a=t.sortable,o=a===void 0?!1:a,s=t.showSinglePoint,c=s===void 0?!1:s;return n.startOnZero=i,n.sortable=o,n.showSinglePoint=c,n}return t.prototype.getPointsAndData=function(e){for(var t=[],n=[],r=0,i=e.length;r<i;r++){var a=e[r];t.push(a.points),n.push(a[Jt])}return{points:t,data:n}},t.prototype.getYMinValue=function(){return this.startOnZero?e.prototype.getYMinValue.call(this):this.getYScale().min},t}(Wb);T_(`edge`,{defaultShapeType:`line`,getDefaultPoints:function(e){return cv(e)}}),K(`edge`,`line`,{draw:function(e,t){var n=ov(e,!0,!1,`lineWidth`),r=_h(this.parsePoints(e.points),this.coordinate.isPolar);return t.addShape(`path`,{attrs:_(_({},n),{path:r})})},getMarker:function(e){return{symbol:`circle`,style:{r:4.5,fill:e.color}}}});var Yb=function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=`edge`,t.shapeType=`edge`,t.generatePoints=!0,t}return t}(j_),Xb=function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=`heatmap`,t.paletteCache={},t}return t.prototype.updateElements=function(e,t){t===void 0&&(t=!1);for(var n=0;n<e.length;n++){var r=e[n],i=this.prepareRange(r),a=this.prepareSize(),o=z(this.styleOption,[`cfg`,`shadowBlur`]);L(o)||(o=a/2),this.prepareGreyScaleBlurredCircle(a,o),this.drawWithRange(r,i,a,o)}},t.prototype.color=function(e,t){return this.createAttrOption(`color`,e,typeof t==`function`?``:t),this},t.prototype.clear=function(){e.prototype.clear.call(this),this.clearShadowCanvasCtx(),this.paletteCache={}},t.prototype.prepareRange=function(e){var t=this.getAttribute(`color`).getFields()[0],n=1/0,r=-1/0;return e.forEach(function(e){var i=e[Jt][t];i>r&&(r=i),i<n&&(n=i)}),n===r&&(n=r-1),[n,r]},t.prototype.prepareSize=function(){var e=this.getDefaultValue(`size`);return L(e)||(e=this.getDefaultSize()),e},t.prototype.prepareGreyScaleBlurredCircle=function(e,t){var n=this.getGrayScaleBlurredCanvas(),r=e+t,i=n.getContext(`2d`);n.width=n.height=r*2,i.clearRect(0,0,n.width,n.height),i.shadowOffsetX=i.shadowOffsetY=r*2,i.shadowBlur=t,i.shadowColor=`black`,i.beginPath(),i.arc(-r,-r,e,0,Math.PI*2,!0),i.closePath(),i.fill()},t.prototype.drawWithRange=function(e,t,n,r){var i,a,o=this.coordinate,s=o.start,c=o.end,l=this.coordinate.getWidth(),u=this.coordinate.getHeight(),d=this.getAttribute(`color`).getFields()[0];this.clearShadowCanvasCtx();var f=this.getShadowCanvasCtx();t&&(e=e.filter(function(e){return e._origin[d]<=t[1]&&e._origin[d]>=t[0]}));var p=this.scales[d];try{for(var m=E(e),h=m.next();!h.done;h=m.next()){var g=h.value,_=this.getDrawCfg(g),v=_.x,y=_.y,b=p.scale(g[Jt][d]);this.drawGrayScaleBlurredCircle(v-s.x,y-c.y,n+r,b,f)}}catch(e){i={error:e}}finally{try{h&&!h.done&&(a=m.return)&&a.call(m)}finally{if(i)throw i.error}}var x=f.getImageData(0,0,l,u);this.clearShadowCanvasCtx(),this.colorize(x),f.putImageData(x,0,0);var S=this.getImageShape();S.attr(`x`,s.x),S.attr(`y`,c.y),S.attr(`width`,l),S.attr(`height`,u),S.attr(`img`,f.canvas),S.set(`origin`,this.getShapeInfo(e))},t.prototype.getDefaultSize=function(){var e=this.getAttribute(`position`),t=this.coordinate;return Math.min(t.getWidth()/(e.scales[0].ticks.length*4),t.getHeight()/(e.scales[1].ticks.length*4))},t.prototype.clearShadowCanvasCtx=function(){var e=this.getShadowCanvasCtx();e.clearRect(0,0,e.canvas.width,e.canvas.height)},t.prototype.getShadowCanvasCtx=function(){var e=this.shadowCanvas;return e||(e=document.createElement(`canvas`),this.shadowCanvas=e),e.width=this.coordinate.getWidth(),e.height=this.coordinate.getHeight(),e.getContext(`2d`)},t.prototype.getGrayScaleBlurredCanvas=function(){return this.grayScaleBlurredCanvas||=document.createElement(`canvas`),this.grayScaleBlurredCanvas},t.prototype.drawGrayScaleBlurredCircle=function(e,t,n,r,i){var a=this.getGrayScaleBlurredCanvas();i.globalAlpha=r,i.drawImage(a,e-n,t-n)},t.prototype.colorize=function(e){for(var t=this.getAttribute(`color`),n=e.data,r=this.paletteCache,i=3;i<n.length;i+=4){var a=n[i];if(L(a)){var o=r[a]?r[a]:sl.rgb2arr(t.gradient(a/256));n[i-3]=o[0],n[i-2]=o[1],n[i-1]=o[2],n[i]=a}}},t.prototype.getImageShape=function(){var e=this.imageShape;return e||(e=this.container.addShape({type:`image`,attrs:{}}),this.imageShape=e,e)},t.prototype.getShapeInfo=function(e){var t=this.getDrawCfg(e[0]),n=e.map(function(e){return e[Jt]});return _(_({},t),{mappingData:e,data:n})},t}(j_);function Zb(e){var t,n,r=e.x,i=e.y,o=e.y0,s=e.size,c,l;N(i)?(t=a(i,2),c=t[0],l=t[1]):(c=o,l=i);var u,d;N(r)?(n=a(r,2),u=n[0],d=n[1]):(u=r-s/2,d=r+s/2);var f=[{x:u,y:c},{x:u,y:l}];return f.push({x:d,y:l},{x:d,y:c}),f}function Qb(e,t){t===void 0&&(t=!0);var n=[],r=e[0];n.push([`M`,r.x,r.y]);for(var i=1,a=e.length;i<a;i++)n.push([`L`,e[i].x,e[i].y]);return t&&(n.push([`L`,r.x,r.y]),n.push([`z`])),n}function $b(e,t){var n=0,r=0,i=0,a=0;return N(e)?e.length===1?n=r=i=a=e[0]:e.length===2?(n=i=e[0],r=a=e[1]):e.length===3?(n=e[0],r=a=e[1],i=e[2]):(n=e[0],r=e[1],i=e[2],a=e[3]):n=r=i=a=e,n+r>t&&(n=n?t/(1+r/n):0,r=t-n),i+a>t&&(i=i?t/(1+a/i):0,a=t-i),[n||0,r||0,i||0,a||0]}function ex(e,t,n){var r=[];if(n.isRect){var i=n.isTransposed?{x:n.start.x,y:t[0].y}:{x:t[0].x,y:n.start.y},o=n.isTransposed?{x:n.end.x,y:t[2].y}:{x:t[3].x,y:n.end.y},s=z(e,[`background`,`style`,`radius`]);if(s){var c=n.isTransposed?Math.abs(t[0].y-t[2].y):t[2].x-t[1].x,l=n.isTransposed?n.getWidth():n.getHeight(),u=a($b(s,Math.min(c,l)),4),d=u[0],f=u[1],p=u[2],m=u[3],h=n.isTransposed&&n.isReflect(`y`),g=h?0:1,_=function(e){return h?-e:e};r.push([`M`,i.x,o.y+_(d)]),d!==0&&r.push([`A`,d,d,0,0,g,i.x+d,o.y]),r.push([`L`,o.x-f,o.y]),f!==0&&r.push([`A`,f,f,0,0,g,o.x,o.y+_(f)]),r.push([`L`,o.x,i.y-_(p)]),p!==0&&r.push([`A`,p,p,0,0,g,o.x-p,i.y]),r.push([`L`,i.x+m,i.y]),m!==0&&r.push([`A`,m,m,0,0,g,i.x,i.y-_(m)])}else r.push([`M`,i.x,i.y]),r.push([`L`,o.x,i.y]),r.push([`L`,o.x,o.y]),r.push([`L`,i.x,o.y]),r.push([`L`,i.x,i.y]);r.push([`z`])}if(n.isPolar){var v=n.getCenter(),y=ym(e,n),b=y.startAngle,x=y.endAngle;if(n.type!==`theta`&&!n.isTransposed)r=_m(v.x,v.y,n.getRadius(),b,x);else{var S=function(e){return e**2},d=Math.sqrt(S(v.x-t[0].x)+S(v.y-t[0].y)),f=Math.sqrt(S(v.x-t[2].x)+S(v.y-t[2].y));r=_m(v.x,v.y,d,n.startAngle,n.endAngle,f)}}return r}function tx(e,t,n){var r=n.getWidth(),i=n.getHeight(),a=n.type===`rect`,o=[],s=(e[2].x-e[1].x)/2,c=n.isTransposed?s*i/r:s*r/i;return t===`round`?(a?(o.push([`M`,e[0].x,e[0].y+c]),o.push([`L`,e[1].x,e[1].y-c]),o.push([`A`,s,s,0,0,1,e[2].x,e[2].y-c]),o.push([`L`,e[3].x,e[3].y+c]),o.push([`A`,s,s,0,0,1,e[0].x,e[0].y+c])):(o.push([`M`,e[0].x,e[0].y]),o.push([`L`,e[1].x,e[1].y]),o.push([`A`,s,s,0,0,1,e[2].x,e[2].y]),o.push([`L`,e[3].x,e[3].y]),o.push([`A`,s,s,0,0,1,e[0].x,e[0].y])),o.push([`z`])):o=Qb(e),o}function nx(e,t,n){var r=[];return M(t)?n?r.push([`M`,e[0].x,e[0].y],[`L`,e[1].x,e[1].y],[`L`,(e[2].x+e[3].x)/2,(e[2].y+e[3].y)/2],[`Z`]):r.push([`M`,e[0].x,e[0].y],[`L`,e[1].x,e[1].y],[`L`,e[2].x,e[2].y],[`L`,e[3].x,e[3].y],[`Z`]):r.push([`M`,e[0].x,e[0].y],[`L`,e[1].x,e[1].y],[`L`,t[1].x,t[1].y],[`L`,t[0].x,t[0].y],[`Z`]),r}function rx(e,t){return[t,e]}function ix(e,t,n){var r,i,o,c,l,u,d,f=a(s([],a(e),!1),4),p=f[0],m=f[1],h=f[2],g=f[3],_=a(typeof n==`number`?[,,,,].fill(n):n,4),v=_[0],y=_[1],b=_[2],x=_[3];t.isTransposed&&(r=a(rx(m,g),2),m=r[0],g=r[1]),t.isReflect(`y`)&&(i=a(rx(p,m),2),p=i[0],m=i[1],o=a(rx(h,g),2),h=o[0],g=o[1]),t.isReflect(`x`)&&(c=a(rx(p,g),2),p=c[0],g=c[1],l=a(rx(m,h),2),m=l[0],h=l[1]);var S=[],C=function(e){return Math.abs(e)};return u=a($b([v,y,b,x],Math.min(C(g.x-p.x),C(m.y-p.y))).map(function(e){return C(e)}),4),v=u[0],y=u[1],b=u[2],x=u[3],t.isTransposed&&(d=a([x,v,y,b],4),v=d[0],y=d[1],b=d[2],x=d[3]),p.y<m.y?(S.push([`M`,g.x,g.y+b]),b!==0&&S.push([`A`,b,b,0,0,0,g.x-b,g.y]),S.push([`L`,p.x+x,p.y]),x!==0&&S.push([`A`,x,x,0,0,0,p.x,p.y+x]),S.push([`L`,m.x,m.y-v]),v!==0&&S.push([`A`,v,v,0,0,0,m.x+v,m.y]),S.push([`L`,h.x-y,h.y]),y!==0&&S.push([`A`,y,y,0,0,0,h.x,h.y-y]),S.push([`L`,g.x,g.y+b]),S.push([`z`])):g.x<p.x?(S.push([`M`,h.x+y,h.y]),y!==0&&S.push([`A`,y,y,0,0,0,h.x,h.y+y]),S.push([`L`,g.x,g.y-b]),b!==0&&S.push([`A`,b,b,0,0,0,g.x+b,g.y]),S.push([`L`,p.x-x,p.y]),x!==0&&S.push([`A`,x,x,0,0,0,p.x,p.y-x]),S.push([`L`,m.x,m.y+v]),v!==0&&S.push([`A`,v,v,0,0,0,m.x-v,m.y]),S.push([`L`,h.x+y,h.y]),S.push([`z`])):(S.push([`M`,m.x,m.y+v]),v!==0&&S.push([`A`,v,v,0,0,1,m.x+v,m.y]),S.push([`L`,h.x-y,h.y]),y!==0&&S.push([`A`,y,y,0,0,1,h.x,h.y+y]),S.push([`L`,g.x,g.y-b]),b!==0&&S.push([`A`,b,b,0,0,1,g.x-b,g.y]),S.push([`L`,p.x+x,p.y]),x!==0&&S.push([`A`,x,x,0,0,1,p.x,p.y-x]),S.push([`L`,m.x,m.y+v]),S.push([`z`])),S}T_(`interval`,{defaultShapeType:`rect`,getDefaultPoints:function(e){return Zb(e)}}),K(`interval`,`rect`,{draw:function(e,t){var n=ov(e,!1,!0),r=t,i=e?.background;if(i){r=t.addGroup({name:`interval-group`});var a=sv(e),o=ex(e,this.parsePoints(e.points),this.coordinate);r.addShape(`path`,{attrs:_(_({},a),{path:o}),capture:!1,zIndex:-1,name:m_})}var s=n.radius&&this.coordinate.isRect?ix(this.parsePoints(e.points),this.coordinate,n.radius):this.parsePath(tx(e.points,n.lineCap,this.coordinate)),c=r.addShape(`path`,{attrs:_(_({},n),{path:s}),name:`interval`});return i?r:c},getMarker:function(e){var t=e.color;return e.isInPolar?{symbol:`circle`,style:{r:4.5,fill:t}}:{symbol:`square`,style:{r:4,fill:t}}}});function ax(e,t){var n=e.length,r=e;I(r[0])&&(r=e.map(function(e){return t.translate(e)}));for(var i=r[1]-r[0],a=2;a<n;a++){var o=r[a]-r[a-1];i>o&&(i=o)}return i}function ox(e,t){if(t){var n=pe(e);return Te(n,t).length}return e.length}function sx(e){var t=e.theme,n=e.coordinate,r=e.getXScale(),i=r.values,a=e.beforeMappingData,o=i.length,s=Om(e.coordinate),c=e.intervalPadding,l=e.dodgePadding,u=e.maxColumnWidth||t.maxColumnWidth,d=e.minColumnWidth||t.minColumnWidth,f=e.columnWidthRatio||t.columnWidthRatio,p=e.multiplePieWidthRatio||t.multiplePieWidthRatio,m=e.roseWidthRatio||t.roseWidthRatio;if(r.isLinear&&i.length>1){i.sort();var h=ax(i,r);o=(r.max-r.min)/h,i.length>o&&(o=i.length)}var g=r.range,_=1/o,v=1;if(n.isPolar?v=n.isTransposed&&o>1?p:m:(r.isLinear&&(_*=g[1]-g[0]),v=f),!M(c)&&c>=0){var y=c/s;_=(1-(o-1)*y)/o}else _*=v;if(e.getAdjust(`dodge`)){var b=e.getAdjust(`dodge`).dodgeBy,x=ox(a,b);if(!M(l)&&l>=0){var S=l/s;_=(_-S*(x-1))/x}else !M(c)&&c>=0&&(_*=v),_/=x;_=_>=0?_:0}if(!M(u)&&u>=0){var C=u/s;_>C&&(_=C)}if(!M(d)&&d>=0){var w=d/s;_<w&&(_=w)}return _}var cx=function(e){l(t,e);function t(t){var n=e.call(this,t)||this;return n.type=`interval`,n.shapeType=`interval`,n.generatePoints=!0,n.background=t.background,n}return t.prototype.createShapePointsCfg=function(t){var n=e.prototype.createShapePointsCfg.call(this,t),r,i=this.getAttribute(`size`);if(i){r=this.getAttributeValues(i,t)[0];var a=this.coordinate,o=Om(a);r/=o}else this.defaultSize||=sx(this),r=this.defaultSize;return n.size=r,n},t.prototype.adjustScale=function(){e.prototype.adjustScale.call(this);var t=this.getYScale();if(this.coordinate.type===`theta`)t.change({nice:!1,min:0,max:Hm(t)});else{var n=this.scaleDefs,r=t.field,i=t.min,a=t.max;t.type!==`time`&&(i>0&&!z(n,[r,`min`])&&t.change({min:0}),a<=0&&!z(n,[r,`max`])&&t.change({max:0}))}},t.prototype.getDrawCfg=function(t){var n=e.prototype.getDrawCfg.call(this,t);return n.background=this.background,n},t}(j_),lx=function(e){l(t,e);function t(t){var n=e.call(this,t)||this;n.type=`line`;var r=t.sortable;return n.sortable=r===void 0?!1:r,n}return t}(Wb),ux=[`circle`,`square`,`bowtie`,`diamond`,`hexagon`,`triangle`,`triangle-down`],dx=[`cross`,`tick`,`plus`,`hyphen`,`line`];function fx(e,t,n,r,i){var a,o,s=ov(t,i,!i,`r`),c=e.parsePoints(t.points),l=c[0];if(t.isStack)l=c[1];else if(c.length>1){var u=n.addGroup();try{for(var d=E(c),f=d.next();!f.done;f=d.next()){var p=f.value;u.addShape({type:`marker`,attrs:_(_(_({},s),{symbol:K_[r]||r}),p)})}}catch(e){a={error:e}}finally{try{f&&!f.done&&(o=d.return)&&o.call(d)}finally{if(a)throw a.error}}return u}return n.addShape({type:`marker`,attrs:_(_(_({},s),{symbol:K_[r]||r}),l)})}T_(`point`,{defaultShapeType:`hollow-circle`,getDefaultPoints:function(e){return cv(e)}}),F(ux,function(e){K(`point`,`hollow-${e}`,{draw:function(t,n){return fx(this,t,n,e,!0)},getMarker:function(t){var n=t.color;return{symbol:K_[e]||e,style:{r:4.5,stroke:n,fill:null}}}})});var px=function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=`point`,t.shapeType=`point`,t.generatePoints=!0,t}return t.prototype.getDrawCfg=function(t){var n=e.prototype.getDrawCfg.call(this,t);return _(_({},n),{isStack:!!this.getAdjust(`stack`)})},t}(j_);function mx(e){for(var t=e[0],n=1,r=[[`M`,t.x,t.y]];n<e.length;){var i=e[n];(i.x!==e[n-1].x||i.y!==e[n-1].y)&&(r.push([`L`,i.x,i.y]),i.x===t.x&&i.y===t.y&&n<e.length-1&&(t=e[n+1],r.push([`Z`]),r.push([`M`,t.x,t.y]),n++)),n++}return Ct(De(r),t)||r.push([`L`,t.x,t.y]),r.push([`Z`]),r}T_(`polygon`,{defaultShapeType:`polygon`,getDefaultPoints:function(e){var t=[];return F(e.x,function(n,r){var i=e.y[r];t.push({x:n,y:i})}),t}}),K(`polygon`,`polygon`,{draw:function(e,t){if(!xt(e.points)){var n=ov(e,!0,!0),r=this.parsePath(mx(e.points));return t.addShape(`path`,{attrs:_(_({},n),{path:r}),name:`polygon`})}},getMarker:function(e){return{symbol:`square`,style:{r:4,fill:e.color}}}});var hx=function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=`polygon`,t.shapeType=`polygon`,t.generatePoints=!0,t}return t.prototype.createShapePointsCfg=function(t){var n=e.prototype.createShapePointsCfg.call(this,t),r=n.x,i=n.y,a;if(!(N(r)&&N(i))){var o=this.getXScale(),s=this.getYScale(),c=o.values.length,l=s.values.length,u=.5*1/c,d=.5*1/l;o.isCategory&&s.isCategory?(r=[r-u,r-u,r+u,r+u],i=[i-d,i+d,i+d,i-d]):N(r)?(a=r,r=[a[0],a[0],a[1],a[1]],i=[i-d/2,i+d/2,i+d/2,i-d/2]):N(i)&&(a=i,i=[a[0],a[1],a[1],a[0]],r=[r-u/2,r-u/2,r+u/2,r+u/2]),n.x=r,n.y=i}return n},t}(j_);T_(`schema`,{defaultShapeType:``});var gx=function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=`schema`,t.shapeType=`schema`,t.generatePoints=!0,t}return t.prototype.createShapePointsCfg=function(t){var n=e.prototype.createShapePointsCfg.call(this,t),r,i=this.getAttribute(`size`);if(i){r=this.getAttributeValues(i,t)[0];var a=this.coordinate,o=Om(a);r/=o}else this.defaultSize||=sx(this),r=this.defaultSize;return n.size=r,n},t}(j_);function _x(e){if(!N(e))return[];var t=me(e);return wt(e,function(e){return e/t})}T_(`violin`,{defaultShapeType:`violin`,getDefaultPoints:function(e){var t=e.size/2,n=[],r=_x(e._size);return F(e.y,function(i,a){var o=r[a]*t,s=a===0,c=a===e.y.length-1;n.push({isMin:s,isMax:c,x:e.x-o,y:i}),n.unshift({isMin:s,isMax:c,x:e.x+o,y:i})}),n}}),K(`violin`,`violin`,{draw:function(e,t){var n=ov(e,!0,!0),r=this.parsePath(iv(e.points));return t.addShape(`path`,{attrs:_(_({},n),{path:r}),name:`violin`})},getMarker:function(e){return{symbol:`circle`,style:{r:4,fill:e.color}}}});var vx=function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=`violin`,t.shapeType=`violin`,t.generatePoints=!0,t}return t.prototype.createShapePointsCfg=function(t){var n=e.prototype.createShapePointsCfg.call(this,t),r,i=this.getAttribute(`size`);if(i){r=this.getAttributeValues(i,t)[0];var a=this.coordinate,o=Om(a);r/=o}else this.defaultSize||=sx(this),r=this.defaultSize;return n.size=r,n._size=z(t[Jt],[this._sizeField]),n},t.prototype.initAttributes=function(){var t=this.attributeOption;this._sizeField=t.size?t.size.fields[0]:this._sizeField?this._sizeField:`size`,delete t.size,e.prototype.initAttributes.call(this)},t}(j_);K(`area`,`line`,{draw:function(e,t){var n=Kb(e,!0,!1,this);return t.addShape({type:`path`,attrs:n,name:`area`})},getMarker:function(e){return{symbol:function(e,t,n){return n===void 0&&(n=5.5),[[`M`,e-n,t-4],[`L`,e+n,t-4],[`L`,e+n,t+4],[`L`,e-n,t+4],[`Z`]]},style:{r:5,stroke:e.color,fill:null}}}}),K(`area`,`smooth`,{draw:function(e,t){var n=this.coordinate,r=Kb(e,!1,!0,this,qb(n));return t.addShape({type:`path`,attrs:r,name:`area`})},getMarker:function(e){return{symbol:function(e,t,n){return n===void 0&&(n=5.5),[[`M`,e-n,t-4],[`L`,e+n,t-4],[`L`,e+n,t+4],[`L`,e-n,t+4],[`Z`]]},style:{r:5,fill:e.color,fillOpacity:1}}}}),K(`area`,`smooth-line`,{draw:function(e,t){var n=this.coordinate,r=Kb(e,!0,!0,this,qb(n));return t.addShape({type:`path`,attrs:r,name:`area`})},getMarker:function(e){return{symbol:function(e,t,n){return n===void 0&&(n=5.5),[[`M`,e-n,t-4],[`L`,e+n,t-4],[`L`,e+n,t+4],[`L`,e-n,t+4],[`Z`]]},style:{r:5,stroke:e.color,fill:null}}}});function yx(e,t){return[`C`,e.x*1/2+t.x*1/2,e.y,e.x*1/2+t.x*1/2,t.y,t.x,t.y]}function bx(e,t){var n=[];n.push({x:t.x,y:t.y}),n.push(e);var r=[`Q`];return F(n,function(e){r.push(e.x,e.y)}),r}function xx(e,t,n){var r=bx(t,n),i=[[`M`,e.x,e.y]];return i.push(r),i}function Sx(e,t){var n=bx(e[1],t),r=bx(e[3],t),i=[[`M`,e[0].x,e[0].y]];return i.push(r),i.push([`L`,e[3].x,e[3].y]),i.push([`L`,e[2].x,e[2].y]),i.push(n),i.push([`L`,e[1].x,e[1].y]),i.push([`L`,e[0].x,e[0].y]),i.push([`Z`]),i}K(`edge`,`arc`,{draw:function(e,t){var n=ov(e,!0,!1,`lineWidth`),r=e.points,i=r.length>2?`weight`:`normal`,a;if(e.isInCircle){var o={x:0,y:1};return i===`normal`?a=xx(r[0],r[1],o):(n.fill=n.stroke,a=Sx(r,o)),a=this.parsePath(a),t.addShape(`path`,{attrs:_(_({},n),{path:a})})}else if(i===`normal`)return r=this.parsePoints(r),a=vm((r[1].x+r[0].x)/2,r[0].y,Math.abs(r[1].x-r[0].x)/2,Math.PI,Math.PI*2),t.addShape(`path`,{attrs:_(_({},n),{path:a})});else{var s=yx(r[1],r[3]),c=yx(r[2],r[0]);return a=[[`M`,r[0].x,r[0].y],[`L`,r[1].x,r[1].y],s,[`L`,r[3].x,r[3].y],[`L`,r[2].x,r[2].y],c,[`Z`]],a=this.parsePath(a),n.fill=n.stroke,t.addShape(`path`,{attrs:_(_({},n),{path:a})})}},getMarker:function(e){return{symbol:`circle`,style:{r:4.5,fill:e.color}}}});function Cx(e,t){var n=yx(e,t),r=[[`M`,e.x,e.y]];return r.push(n),r}K(`edge`,`smooth`,{draw:function(e,t){var n=ov(e,!0,!1,`lineWidth`),r=e.points,i=this.parsePath(Cx(r[0],r[1]));return t.addShape(`path`,{attrs:_(_({},n),{path:i})})},getMarker:function(e){return{symbol:`circle`,style:{r:4.5,fill:e.color}}}});var wx=1/3;function Tx(e,t){var n=[];n.push({x:e.x,y:e.y*(1-wx)+t.y*wx}),n.push({x:t.x,y:e.y*(1-wx)+t.y*wx}),n.push(t);var r=[[`M`,e.x,e.y]];return F(n,function(e){r.push([`L`,e.x,e.y])}),r}K(`edge`,`vhv`,{draw:function(e,t){var n=ov(e,!0,!1,`lineWidth`),r=e.points,i=this.parsePath(Tx(r[0],r[1]));return t.addShape(`path`,{attrs:_(_({},n),{path:i})})},getMarker:function(e){return{symbol:`circle`,style:{r:4.5,fill:e.color}}}}),K(`interval`,`funnel`,{getPoints:function(e){return e.size*=2,Zb(e)},draw:function(e,t){var n=ov(e,!1,!0),r=this.parsePath(nx(e.points,e.nextPoints,!1));return t.addShape(`path`,{attrs:_(_({},n),{path:r}),name:`interval`})},getMarker:function(e){return{symbol:`square`,style:{r:4,fill:e.color}}}}),K(`interval`,`hollow-rect`,{draw:function(e,t){var n=ov(e,!0,!1),r=t,i=e?.background;if(i){r=t.addGroup();var a=sv(e),o=ex(e,this.parsePoints(e.points),this.coordinate);r.addShape(`path`,{attrs:_(_({},a),{path:o}),capture:!1,zIndex:-1,name:m_})}var s=this.parsePath(Qb(e.points)),c=r.addShape(`path`,{attrs:_(_({},n),{path:s}),name:`interval`});return i?r:c},getMarker:function(e){var t=e.color;return e.isInPolar?{symbol:`circle`,style:{r:4.5,stroke:t,fill:null}}:{symbol:`square`,style:{r:4,stroke:t,fill:null}}}});function Ex(e){var t=e.x,n=e.y,r=e.y0;return N(n)?n.map(function(e,n){return{x:N(t)?t[n]:t,y:e}}):[{x:t,y:r},{x:t,y:n}]}K(`interval`,`line`,{getPoints:function(e){return Ex(e)},draw:function(e,t){var n=ov(e,!0,!1,`lineWidth`),r=wm(_({},n),[`fill`]),i=this.parsePath(Qb(e.points,!1));return t.addShape(`path`,{attrs:_(_({},r),{path:i}),name:`interval`})},getMarker:function(e){return{symbol:function(e,t,n){return[[`M`,e,t-n],[`L`,e,t+n]]},style:{r:5,stroke:e.color}}}}),K(`interval`,`pyramid`,{getPoints:function(e){return e.size*=2,Zb(e)},draw:function(e,t){var n=ov(e,!1,!0),r=this.parsePath(nx(e.points,e.nextPoints,!0));return t.addShape(`path`,{attrs:_(_({},n),{path:r}),name:`interval`})},getMarker:function(e){return{symbol:`square`,style:{r:4,fill:e.color}}}});function Dx(e){var t,n=e.x,r=e.y,i=e.y0,o=e.size,s,c;N(r)?(t=a(r,2),s=t[0],c=t[1]):(s=i,c=r);var l=n+o/2,u=n-o/2;return[{x:n,y:s},{x:n,y:c},{x:u,y:s},{x:l,y:s},{x:u,y:c},{x:l,y:c}]}function Ox(e){return[[`M`,e[0].x,e[0].y],[`L`,e[1].x,e[1].y],[`M`,e[2].x,e[2].y],[`L`,e[3].x,e[3].y],[`M`,e[4].x,e[4].y],[`L`,e[5].x,e[5].y]]}K(`interval`,`tick`,{getPoints:function(e){return Dx(e)},draw:function(e,t){var n=ov(e,!0,!1),r=this.parsePath(Ox(e.points));return t.addShape(`path`,{attrs:_(_({},n),{path:r}),name:`interval`})},getMarker:function(e){return{symbol:function(e,t,n){return[[`M`,e-n/2,t-n],[`L`,e+n/2,t-n],[`M`,e,t-n],[`L`,e,t+n],[`M`,e-n/2,t+n],[`L`,e+n/2,t+n]]},style:{r:5,stroke:e.color}}}});var kx=function(e,t,n){var r=e.x,i=e.y,a=t.x,o=t.y,s;switch(n){case`hv`:s=[{x:a,y:i}];break;case`vh`:s=[{x:r,y:o}];break;case`hvh`:var c=(a+r)/2;s=[{x:c,y:i},{x:c,y:o}];break;case`vhv`:var l=(i+o)/2;s=[{x:r,y:l},{x:a,y:l}];break;default:break}return s};function Ax(e,t){var n=[];return F(e,function(r,i){var a=e[i+1];if(n.push(r),a){var o=kx(r,a,t);n=n.concat(o)}}),n}function jx(e){return e.map(function(e,t){return t===0?[`M`,e.x,e.y]:[`L`,e.x,e.y]})}function Mx(e,t){var n=rv(e.points,e.connectNulls,e.showSinglePoint),r=[];return F(n,function(e){var n=Ax(e,t);r=r.concat(jx(n))}),_(_({},ov(e,!0,!1,`lineWidth`)),{path:r})}F([`hv`,`vh`,`hvh`,`vhv`],function(e){K(`line`,e,{draw:function(t,n){var r=Mx(t,e);return n.addShape({type:`path`,attrs:r,name:`line`})},getMarker:function(t){return uv(t,e)}})}),F(dx,function(e){K(`point`,e,{draw:function(t,n){return fx(this,t,n,e,!0)},getMarker:function(t){var n=t.color;return{symbol:K_[e],style:{r:4.5,stroke:n,fill:null}}}})}),K(`point`,`image`,{draw:function(e,t){var n,r,i=ov(e,!1,!1,`r`).r,a=this.parsePoints(e.points),o=a[0];if(e.isStack)o=a[1];else if(a.length>1){var s=t.addGroup();try{for(var c=E(a),l=c.next();!l.done;l=c.next()){var u=l.value;s.addShape(`image`,{attrs:{x:u.x-i/2,y:u.y-i,width:i,height:i,img:e.shape[1]}})}}catch(e){n={error:e}}finally{try{l&&!l.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}return s}return t.addShape(`image`,{attrs:{x:o.x-i/2,y:o.y-i,width:i,height:i,img:e.shape[1]}})},getMarker:function(e){return{symbol:`circle`,style:{r:4.5,fill:e.color}}}}),F(ux,function(e){K(`point`,e,{draw:function(t,n){return fx(this,t,n,e,!1)},getMarker:function(t){var n=t.color;return{symbol:K_[e]||e,style:{r:4.5,fill:n}}}})});function Nx(e){var t=N(e)?e:[e],n=t[0],r=t[t.length-1],i=t.length>1?t[1]:n,a=t.length>3?t[3]:r,o=t.length>2?t[2]:i;return{min:n,max:r,min1:i,max1:a,median:o}}function Px(e,t,n){var r=n/2,i;if(N(t)){var a=Nx(t),o=a.min,s=a.max,c=a.median,l=a.min1,u=a.max1,d=e-r,f=e+r;i=[[d,s],[f,s],[e,s],[e,u],[d,l],[d,u],[f,u],[f,l],[e,l],[e,o],[d,o],[f,o],[d,c],[f,c]]}else{t=M(t)?.5:t;var p=Nx(e),o=p.min,s=p.max,c=p.median,l=p.min1,u=p.max1,m=t-r,h=t+r;i=[[o,m],[o,h],[o,t],[l,t],[l,m],[l,h],[u,h],[u,m],[u,t],[s,t],[s,m],[s,h],[c,m],[c,h]]}return i.map(function(e){return{x:e[0],y:e[1]}})}function Fx(e){return[[`M`,e[0].x,e[0].y],[`L`,e[1].x,e[1].y],[`M`,e[2].x,e[2].y],[`L`,e[3].x,e[3].y],[`M`,e[4].x,e[4].y],[`L`,e[5].x,e[5].y],[`L`,e[6].x,e[6].y],[`L`,e[7].x,e[7].y],[`L`,e[4].x,e[4].y],[`Z`],[`M`,e[8].x,e[8].y],[`L`,e[9].x,e[9].y],[`M`,e[10].x,e[10].y],[`L`,e[11].x,e[11].y],[`M`,e[12].x,e[12].y],[`L`,e[13].x,e[13].y]]}K(`schema`,`box`,{getPoints:function(e){var t=e.x,n=e.y,r=e.size;return Px(t,n,r)},draw:function(e,t){var n=ov(e,!0,!1),r=this.parsePath(Fx(e.points));return t.addShape(`path`,{attrs:_(_({},n),{path:r,name:`schema`})})},getMarker:function(e){return{symbol:function(e,t,n){var r=[t-6,t-3,t,t+3,t+6],i=Px(e,r,n);return[[`M`,i[0].x+1,i[0].y],[`L`,i[1].x-1,i[1].y],[`M`,i[2].x,i[2].y],[`L`,i[3].x,i[3].y],[`M`,i[4].x,i[4].y],[`L`,i[5].x,i[5].y],[`L`,i[6].x,i[6].y],[`L`,i[7].x,i[7].y],[`L`,i[4].x,i[4].y],[`Z`],[`M`,i[8].x,i[8].y],[`L`,i[9].x,i[9].y],[`M`,i[10].x+1,i[10].y],[`L`,i[11].x-1,i[11].y],[`M`,i[12].x,i[12].y],[`L`,i[13].x,i[13].y]]},style:{r:6,lineWidth:1,stroke:e.color}}}});function Ix(e){var t=(N(e)?e:[e]).sort(function(e,t){return t-e});return Cm(t,4,t[t.length-1])}function Lx(e,t,n){var r=Ix(t);return[{x:e,y:r[0]},{x:e,y:r[1]},{x:e-n/2,y:r[2]},{x:e-n/2,y:r[1]},{x:e+n/2,y:r[1]},{x:e+n/2,y:r[2]},{x:e,y:r[2]},{x:e,y:r[3]}]}function Rx(e){return[[`M`,e[0].x,e[0].y],[`L`,e[1].x,e[1].y],[`M`,e[2].x,e[2].y],[`L`,e[3].x,e[3].y],[`L`,e[4].x,e[4].y],[`L`,e[5].x,e[5].y],[`Z`],[`M`,e[6].x,e[6].y],[`L`,e[7].x,e[7].y]]}K(`schema`,`candle`,{getPoints:function(e){var t=e.x,n=e.y,r=e.size;return Lx(t,n,r)},draw:function(e,t){var n=ov(e,!0,!0),r=this.parsePath(Rx(e.points));return t.addShape(`path`,{attrs:_(_({},n),{path:r,name:`schema`})})},getMarker:function(e){var t=e.color;return{symbol:function(e,t,n){var r=[t+7.5,t+3,t-3,t-7.5],i=Lx(e,r,n);return[[`M`,i[0].x,i[0].y],[`L`,i[1].x,i[1].y],[`M`,i[2].x,i[2].y],[`L`,i[3].x,i[3].y],[`L`,i[4].x,i[4].y],[`L`,i[5].x,i[5].y],[`Z`],[`M`,i[6].x,i[6].y],[`L`,i[7].x,i[7].y]]},style:{lineWidth:1,stroke:t,fill:t,r:6}}}});function zx(e,t){var n=Math.abs(e[0].x-e[2].x),r=Math.abs(e[0].y-e[2].y),i=Math.min(n,r);t&&(i=Fe(t,0,Math.min(n,r))),i/=2;var a=(e[0].x+e[2].x)/2,o=(e[0].y+e[2].y)/2;return{x:a-i,y:o-i,width:i*2,height:i*2}}K(`polygon`,`square`,{draw:function(e,t){if(!xt(e.points)){var n=ov(e,!0,!0),r=this.parsePoints(e.points);return t.addShape(`rect`,{attrs:_(_({},n),zx(r,e.size)),name:`polygon`})}},getMarker:function(e){return{symbol:`square`,style:{r:4,fill:e.color}}}}),K(`violin`,`smooth`,{draw:function(e,t){var n=ov(e,!0,!0),r=this.parsePath(av(e.points));return t.addShape(`path`,{attrs:_(_({},n),{path:r})})},getMarker:function(e){return{symbol:`circle`,style:{stroke:null,r:4,fill:e.color}}}}),K(`violin`,`hollow`,{draw:function(e,t){var n=ov(e,!0,!1),r=this.parsePath(iv(e.points));return t.addShape(`path`,{attrs:_(_({},n),{path:r})})},getMarker:function(e){return{symbol:`circle`,style:{r:4,fill:null,stroke:e.color}}}}),K(`violin`,`hollow-smooth`,{draw:function(e,t){var n=ov(e,!0,!1),r=this.parsePath(av(e.points));return t.addShape(`path`,{attrs:_(_({},n),{path:r})})},getMarker:function(e){return{symbol:`circle`,style:{r:4,fill:null,stroke:e.color}}}});var Bx=function(e){l(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getLabelValueDir=function(e){var t=`y`,n=e.points;return n[0][t]<=n[2][t]?1:-1},t.prototype.getLabelOffsetPoint=function(t,n,r,i){var a,o=e.prototype.getLabelOffsetPoint.call(this,t,n,r),s=this.getCoordinate(),c=s.isTransposed?`x`:`y`,l=this.getLabelValueDir(t.mappingData);return o=_(_({},o),(a={},a[c]=o[c]*l,a)),s.isReflect(`x`)&&(o=_(_({},o),{x:o.x*-1})),s.isReflect(`y`)&&(o=_(_({},o),{y:o.y*-1})),o},t.prototype.getThemedLabelCfg=function(e){var t=this.geometry,n=this.getDefaultLabelCfg(),r=t.theme;return R({},n,r.labels,e.position===`middle`?{offset:0}:{},e)},t.prototype.setLabelPosition=function(e,t,n,r){var i=this.getCoordinate(),a=i.isTransposed,o=t.points,s=i.convert(o[0]),c=i.convert(o[2]),l=this.getLabelValueDir(t),u,d,f,p,m=N(t.shape)?t.shape[0]:t.shape;if(m===`funnel`||m===`pyramid`){var h=z(t,`nextPoints`),g=z(t,`points`);if(h){var _=i.convert(g[0]),v=i.convert(g[1]),y=i.convert(h[0]),b=i.convert(h[1]);a?(u=Math.min(y.y,_.y),f=Math.max(y.y,_.y),d=(v.x+b.x)/2,p=(_.x+y.x)/2):(u=Math.min((v.y+b.y)/2,(_.y+y.y)/2),f=Math.max((v.y+b.y)/2,(_.y+y.y)/2),d=b.x,p=_.x)}else u=Math.min(c.y,s.y),f=Math.max(c.y,s.y),d=c.x,p=s.x}else u=Math.min(c.y,s.y),f=Math.max(c.y,s.y),d=c.x,p=s.x;switch(r){case`right`:e.x=d,e.y=(u+f)/2,e.textAlign=z(e,`textAlign`,l>0?`left`:`right`);break;case`left`:e.x=p,e.y=(u+f)/2,e.textAlign=z(e,`textAlign`,l>0?`left`:`right`);break;case`bottom`:a&&(e.x=(d+p)/2),e.y=f,e.textAlign=z(e,`textAlign`,`center`),e.textBaseline=z(e,`textBaseline`,l>0?`bottom`:`top`);break;case`middle`:a&&(e.x=(d+p)/2),e.y=(u+f)/2,e.textAlign=z(e,`textAlign`,`center`),e.textBaseline=z(e,`textBaseline`,`middle`);break;case`top`:a&&(e.x=(d+p)/2),e.y=u,e.textAlign=z(e,`textAlign`,`center`),e.textBaseline=z(e,`textBaseline`,l>0?`bottom`:`top`);break;default:break}},t}(W_),Vx=Math.PI/2,Hx=function(e){l(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getLabelOffset=function(e){var t=this.getCoordinate(),n=0;if(L(e))n=e;else if(I(e)&&e.indexOf(`%`)!==-1){var r=t.getRadius();t.innerRadius>0&&(r*=1-t.innerRadius),n=parseFloat(e)*.01*r}return n},t.prototype.getLabelItems=function(t){var n=e.prototype.getLabelItems.call(this,t),r=this.geometry.getYScale();return wt(n,function(e){if(e&&r){var t=r.scale(z(e.data,r.field));return _(_({},e),{percent:t})}return e})},t.prototype.getLabelAlign=function(e){var t=this.getCoordinate(),n;if(e.labelEmit)n=e.angle<=Math.PI/2&&e.angle>=-Math.PI/2?`left`:`right`;else if(!t.isTransposed)n=`center`;else{var r=t.getCenter(),i=e.offset;n=Math.abs(e.x-r.x)<1?`center`:e.angle>Math.PI||e.angle<=0?i>0?`left`:`right`:i>0?`right`:`left`}return n},t.prototype.getLabelPoint=function(e,t,n){var r=1,i,a=e.content[n];this.isToMiddle(t)?i=this.getMiddlePoint(t.points):(e.content.length===1&&n===0?n=1:n===0&&(r=-1),i=this.getArcPoint(t,n));var o=e.offset*r,s=this.getPointAngle(i),c=e.labelEmit,l=this.getCirclePoint(s,o,i,c);return l.r===0?l.content=``:(l.content=a,l.angle=s,l.color=t.color),l.rotate=e.autoRotate?this.getLabelRotate(s,o,c):e.rotate,l.start={x:i.x,y:i.y},l},t.prototype.getArcPoint=function(e,t){return t===void 0&&(t=0),!N(e.x)&&!N(e.y)?{x:e.x,y:e.y}:{x:N(e.x)?e.x[t]:e.x,y:N(e.y)?e.y[t]:e.y}},t.prototype.getPointAngle=function(e){return Mm(this.getCoordinate(),e)},t.prototype.getCirclePoint=function(e,t,n,r){var i=this.getCoordinate(),a=i.getCenter(),o=Am(i,n);if(o===0)return _(_({},a),{r:o});var s=e;if(i.isTransposed&&o>t&&!r){var c=Math.asin(t/(2*o));s=e+c*2}else o+=t;return{x:a.x+o*Math.cos(s),y:a.y+o*Math.sin(s),r:o}},t.prototype.getLabelRotate=function(e,t,n){var r=e+Vx;return n&&(r-=Vx),r&&(r>Vx?r-=Math.PI:r<-Vx&&(r+=Math.PI)),r},t.prototype.getMiddlePoint=function(e){var t=this.getCoordinate(),n=e.length,r={x:0,y:0};return F(e,function(e){r.x+=e.x,r.y+=e.y}),r.x/=n,r.y/=n,r=t.convert(r),r},t.prototype.isToMiddle=function(e){return e.x.length>2},t}(W_),Ux=function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.defaultLayout=`distribute`,t}return t.prototype.getDefaultLabelCfg=function(t,n){var r=e.prototype.getDefaultLabelCfg.call(this,t,n);return R({},r,z(this.geometry.theme,`pieLabels`,{}))},t.prototype.getLabelOffset=function(t){return e.prototype.getLabelOffset.call(this,t)||0},t.prototype.getLabelRotate=function(e,t,n){var r;return t<0&&(r=e,r>Math.PI/2&&(r-=Math.PI),r<-Math.PI/2&&(r+=Math.PI)),r},t.prototype.getLabelAlign=function(e){var t=this.getCoordinate().getCenter(),n=e.angle<=Math.PI/2&&e.x>=t.x?`left`:`right`;return e.offset<=0&&(n=n===`right`?`left`:`right`),n},t.prototype.getArcPoint=function(e){return e},t.prototype.getPointAngle=function(e){var t=this.getCoordinate(),n={x:N(e.x)?e.x[0]:e.x,y:e.y[0]},r={x:N(e.x)?e.x[1]:e.x,y:e.y[1]},i,a=Mm(t,n);if(e.points&&e.points[0].y===e.points[1].y)i=a;else{var o=Mm(t,r);a>=o&&(o+=Math.PI*2),i=a+(o-a)/2}return i},t.prototype.getCirclePoint=function(e,t){var n=this.getCoordinate(),r=n.getCenter(),i=n.getRadius()+t;return _(_({},gm(r.x,r.y,i,e)),{angle:e,r:i})},t}(Hx),Wx=4;function Gx(e,t,n,r,i,a){var o,s,c=!0,l=r.start,u=r.end,d=Math.min(l.y,u.y),f=Math.abs(l.y-u.y),p,m=0,h=Number.MIN_VALUE,g=t.map(function(e){return e.y>m&&(m=e.y),e.y<h&&(h=e.y),{size:n,targets:[e.y-d]}});for(h-=d,m-d>f&&(f=m-d);c;)for(g.forEach(function(e){var t=(Math.min.apply(h,e.targets)+Math.max.apply(h,e.targets))/2;e.pos=Math.min(Math.max(h,t-e.size/2),f-e.size)}),c=!1,p=g.length;p--;)if(p>0){var _=g[p-1],v=g[p];_.pos+_.size>v.pos&&(_.size+=v.size,_.targets=_.targets.concat(v.targets),_.pos+_.size>f&&(_.pos=f-_.size),g.splice(p,1),c=!0)}p=0,g.forEach(function(e){var r=d+n/2;e.targets.forEach(function(){t[p].y=e.pos+r,r+=n,p++})});var y={};try{for(var b=E(e),x=b.next();!x.done;x=b.next()){var S=x.value;y[S.get(`id`)]=S}}catch(e){o={error:e}}finally{try{x&&!x.done&&(s=b.return)&&s.call(b)}finally{if(o)throw o.error}}t.forEach(function(e){var t=e.r*e.r,n=Math.abs(e.y-i.y)**2;if(t<n)e.x=i.x;else{var r=Math.sqrt(t-n);a?e.x=i.x+r:e.x=i.x-r}var o=y[e.id];o.attr(`x`,e.x),o.attr(`y`,e.y);var s=le(o.getChildren(),function(e){return e.get(`type`)===`text`});s&&(s.attr(`y`,e.y),s.attr(`x`,e.x))})}function Kx(e,t,n,r){if(!(!e.length||!t.length)){var i=e[0]?e[0].offset:0,a=t[0].get(`coordinate`),o=a.getRadius(),s=a.getCenter();if(i>0){var c=14,l=(o+i)*2+c*2,u={start:a.start,end:a.end},d=[[],[]];e.forEach(function(e){e&&(e.textAlign===`right`?d[0].push(e):d[1].push(e))}),d.forEach(function(e,n){var r=l/c;e.length>r&&(e.sort(function(e,t){return t[`..percent`]-e[`..percent`]}),e.splice(r,e.length-r)),e.sort(function(e,t){return e.y-t.y}),Gx(t,e,c,u,s,n)})}F(e,function(e){if(e&&e.labelLine){var t=e.offset,n=e.angle,r=gm(s.x,s.y,o,n),i=gm(s.x,s.y,o+t/2,n),a=e.x+z(e,`offsetX`,0),c=e.y+z(e,`offsetY`,0),l={x:a-Math.cos(n)*Wx,y:c-Math.sin(n)*Wx};P(e.labelLine)||(e.labelLine={}),e.labelLine.path=[`M ${r.x}`,`${r.y} Q${i.x}`,`${i.y} ${l.x}`,l.y].join(`,`)}})}}function qx(e,t,n){var r=e.filter(function(e){return!e.invisible});r.sort(function(e,t){return e.y-t.y});var i=!0,a=n.minY,o=n.maxY,s=Math.abs(a-o),c,l=0,u=Number.MIN_VALUE,d=r.map(function(e){return e.y>l&&(l=e.y),e.y<u&&(u=e.y),{content:e.content,size:t,targets:[e.y-a],pos:null}});for(u-=a,l-a>s&&(s=l-a);i;)for(d.forEach(function(e){var t=(Math.min.apply(u,e.targets)+Math.max.apply(u,e.targets))/2;e.pos=Math.min(Math.max(u,t-e.size/2),s-e.size),e.pos=Math.max(0,e.pos)}),i=!1,c=d.length;c--;)if(c>0){var f=d[c-1],p=d[c];f.pos+f.size>p.pos&&(f.size+=p.size,f.targets=f.targets.concat(p.targets),f.pos+f.size>s&&(f.pos=s-f.size),d.splice(c,1),i=!0)}c=0,d.forEach(function(e){var n=a+t/2;e.targets.forEach(function(){r[c].y=e.pos+n,n+=t,c++})})}var Jx=4;function Yx(e,t){var n=t.getCenter(),r=t.getRadius();if(e&&e.labelLine){var i=e.angle,a=e.offset,o=gm(n.x,n.y,r,i),s=e.x+z(e,`offsetX`,0)*(Math.cos(i)>0?1:-1),c=e.y+z(e,`offsetY`,0)*(Math.sin(i)>0?1:-1),l={x:s-Math.cos(i)*Jx,y:c-Math.sin(i)*Jx},u=e.labelLine.smooth,d=[],f=l.x-n.x,p=l.y-n.y,m=Math.atan(p/f);if(f<0&&(m+=Math.PI),u===!1){P(e.labelLine)||(e.labelLine={});var h=0;(i<0&&i>-Math.PI/2||i>Math.PI*1.5)&&l.y>o.y&&(h=1),i>=0&&i<Math.PI/2&&l.y>o.y&&(h=1),i>=Math.PI/2&&i<Math.PI&&o.y>l.y&&(h=1),(i<-Math.PI/2||i>=Math.PI&&i<Math.PI*1.5)&&o.y>l.y&&(h=1);var g=a/2>4?4:Math.max(a/2-1,0),_=gm(n.x,n.y,r+g,i),v=gm(n.x,n.y,r+a/2,m);d.push(`M ${o.x} ${o.y}`),d.push(`L ${_.x} ${_.y}`),d.push(`A ${n.x} ${n.y} 0 0 ${h} ${v.x} ${v.y}`),d.push(`L ${l.x} ${l.y}`)}else{var _=gm(n.x,n.y,r+(a/2>4?4:Math.max(a/2-1,0)),i),y=o.x<n.x?1:-1;d.push(`M ${l.x} ${l.y}`);var b=(o.y-n.y)/(o.x-n.x),x=(l.y-n.y)/(l.x-n.x);Math.abs(b-x)>Math.E**-16&&d.push.apply(d,[`C`,l.x+y*4,l.y,2*_.x-o.x,2*_.y-o.y,o.x,o.y]),d.push(`L ${o.x} ${o.y}`)}e.labelLine.path=d.join(` `)}}function Xx(e,t,n,r){var i,a,o=k(e,function(e){return!M(e)}),s=t[0]&&t[0].get(`coordinate`);if(s){var c=s.getCenter(),l=s.getRadius(),u={};try{for(var d=E(t),f=d.next();!f.done;f=d.next()){var p=f.value;u[p.get(`id`)]=p}}catch(e){i={error:e}}finally{try{f&&!f.done&&(a=d.return)&&a.call(d)}finally{if(i)throw i.error}}var m=z(o[0],`labelHeight`,14),h=z(o[0],`offset`,0);if(!(h<=0)){var g=`left`,_=`right`,v=Me(o,function(e){return e.x<c.x?g:_}),y=s.start,b=s.end,x=Math.min((l+h+m)*2,s.getHeight()),S=x/2,C={minX:y.x,maxX:b.x,minY:c.y-S,maxY:c.y+S};F(v,function(e,t){var n=Math.floor(x/m);e.length>n&&(e.sort(function(e,t){return t.percent-e.percent}),F(e,function(e,t){t+1>n&&(u[e.id].set(`visible`,!1),e.invisible=!0)})),qx(e,m,C)}),F(v,function(e,t){F(e,function(e){var n=t===_,r=u[e.id].getChildByIndex(0);if(r){var i=l+h,a=e.y-c.y,o=i**2,d=a**2,f=o-d>0?o-d:0,p=Math.sqrt(f),m=Math.abs(Math.cos(e.angle)*i);n?e.x=c.x+Math.max(p,m):e.x=c.x-Math.max(p,m)}r&&(r.attr(`y`,e.y),r.attr(`x`,e.x)),Yx(e,s)})})}}}var Zx=4,Qx=4,$x=4;function eS(e,t,n){var r=t.getCenter(),i=t.getRadius(),a={x:e.x-(n?$x:-$x),y:e.y},o=gm(r.x,r.y,i+Zx,e.angle),s={x:a.x,y:a.y},c={x:o.x,y:o.y},l=gm(r.x,r.y,i,e.angle),u=``;if(a.y!==o.y){var d=n?4:-4;s.y=a.y,e.angle<0&&e.angle>=-Math.PI/2&&(s.x=Math.max(o.x,a.x-d),a.y<o.y?c.y=s.y:(c.y=o.y,c.x=Math.max(c.x,s.x-d))),e.angle>0&&e.angle<Math.PI/2&&(s.x=Math.max(o.x,a.x-d),a.y>o.y?c.y=s.y:(c.y=o.y,c.x=Math.max(c.x,s.x-d))),e.angle>Math.PI/2&&(s.x=Math.min(o.x,a.x-d),a.y>o.y?c.y=s.y:(c.y=o.y,c.x=Math.min(c.x,s.x-d))),e.angle<-Math.PI/2&&(s.x=Math.min(o.x,a.x-d),a.y<o.y?c.y=s.y:(c.y=o.y,c.x=Math.min(c.x,s.x-d)))}u=[`M ${a.x},${a.y}`,`L ${s.x},${s.y}`,`L ${c.x},${c.y}`,`L ${o.x},${o.y}`,`L ${l.x},${l.y}`].join(` `),e.labelLine=R({},e.labelLine,{path:u})}function tS(e,t,n,r){var i,a,o=t[0]&&t[0].get(`coordinate`);if(o){var s=o.getCenter(),c=o.getRadius(),l={};try{for(var u=E(t),d=u.next();!d.done;d=u.next()){var f=d.value;l[f.get(`id`)]=f}}catch(e){i={error:e}}finally{try{d&&!d.done&&(a=u.return)&&a.call(u)}finally{if(i)throw i.error}}var p=z(e[0],`labelHeight`,14),m=Math.max(z(e[0],`offset`,0),Zx);F(e,function(e){if(e&&z(l,[e.id])){var t=e.x>s.x||e.x===s.x&&e.y>s.y,n=M(e.offsetX)?Qx:e.offsetX,r=gm(s.x,s.y,c+Zx,e.angle),i=m+n;e.x=s.x+(t?1:-1)*(c+i),e.y=r.y}});var h=o.start,g=o.end,_=`left`,v=`right`,y=Me(e,function(e){return e.x<s.x?_:v}),b=(c+m)*2+p;F(y,function(e){var t=e.length*p;t>b&&(b=Math.min(t,Math.abs(h.y-g.y)))});var x={minX:h.x,maxX:g.x,minY:s.y-b/2,maxY:s.y+b/2};F(y,function(e,t){var n=b/p;e.length>n&&(e.sort(function(e,t){return t.percent-e.percent}),F(e,function(e,t){t>n&&(l[e.id].set(`visible`,!1),e.invisible=!0)})),qx(e,p,x)});var S=x.minY,C=x.maxY;F(y,function(e,t){var n=t===v;F(e,function(e){var t=z(l,e&&[e.id]);if(t){if(e.y<S||e.y>C){t.set(`visible`,!1);return}var r=t.getChildByIndex(0),i=r.getCanvasBBox(),a={x:n?i.x:i.maxX,y:i.y+i.height/2};N_(r,e.x-a.x,e.y-a.y),e.labelLine&&eS(e,o,n)}})})}}function nS(e,t,n,r){F(t,function(e){var t=r.minX,n=r.minY,i=r.maxX,a=r.maxY,o=e.getCanvasBBox(),s=o.minX,c=o.minY,l=o.maxX,u=o.maxY,d=o.x,f=o.y,p=o.width,m=o.height,h=d,g=f;(s<t||l<t)&&(h=t),(c<n||u<n)&&(g=n),s>i?h=i-p:l>i&&(h-=l-i),c>a?g=a-m:u>a&&(g-=u-a),(h!==d||g!==f)&&N_(e,h-d,g-f)})}function rS(e,t,n,r){F(t,function(e,t){var r=e.getCanvasBBox(),i=n[t].getBBox();(r.minX<i.minX||r.minY<i.minY||r.maxX>i.maxX||r.maxY>i.maxY)&&e.remove(!0)})}var iS=100,aS=function(){function e(e){e===void 0&&(e={}),this.bitmap={};var t=e.xGap,n=t===void 0?1:t,r=e.yGap,i=r===void 0?8:r;this.xGap=n,this.yGap=i}return e.prototype.hasGap=function(e){for(var t=!0,n=this.bitmap,r=Math.round(e.minX),i=Math.round(e.maxX),a=Math.round(e.minY),o=Math.round(e.maxY),s=r;s<=i;s+=1){if(!n[s]){n[s]={};continue}if(s===r||s===i){for(var c=a;c<=o;c++)if(n[s][c]){t=!1;break}}else if(n[s][a]||n[s][o]){t=!1;break}}return t},e.prototype.fillGap=function(e){for(var t=this.bitmap,n=Math.round(e.minX),r=Math.round(e.maxX),i=Math.round(e.minY),a=Math.round(e.maxY),o=n;o<=r;o+=1)t[o]||(t[o]={});for(var o=n;o<=r;o+=this.xGap){for(var s=i;s<=a;s+=this.yGap)t[o][s]=!0;t[o][a]=!0}if(this.yGap!==1)for(var o=i;o<=a;o+=1)t[n][o]=!0,t[r][o]=!0;if(this.xGap!==1)for(var o=n;o<=r;o+=1)t[o][i]=!0,t[o][a]=!0},e.prototype.destroy=function(){this.bitmap={}},e}();function oS(e,t,n){n===void 0&&(n=iS);var r=-1,i=e.attr(),a=i.x,o=i.y,s=e.getCanvasBBox(),c=Math.sqrt(s.width*s.width+s.height*s.height),l,u=-r,d=0,f=0,p=function(e){var t=e*.1;return[t*Math.cos(t),t*Math.sin(t)]};if(t.hasGap(s))return t.fillGap(s),!0;for(var m=!1,h=0,g={};Math.min(Math.abs(d),Math.abs(f))<c&&h<n;)if(l=p(u+=r),d=~~l[0],f=~~l[1],!(!d&&!f||g[`${d}-${f}`])&&(e.attr({x:a+d,y:o+f}),d+f<0&&e.attr(`textAlign`,`right`),h++,t.hasGap(e.getCanvasBBox()))){t.fillGap(e.getCanvasBBox()),m=!0,g[`${d}-${f}`]=!0;break}return m}function sS(e,t,n,r){var i=e.getCanvasBBox(),a=i.width,o=i.height,s={x:t,y:n,textAlign:`center`};switch(r){case 0:s.y-=o+1,s.x+=1,s.textAlign=`left`;break;case 1:s.y-=o+1,--s.x,s.textAlign=`right`;break;case 2:s.y+=o+1,--s.x,s.textAlign=`right`;break;case 3:s.y+=o+1,s.x+=1,s.textAlign=`left`;break;case 5:s.y-=o*2+2;break;case 6:s.y+=o*2+2;break;case 7:s.x+=a+1,s.textAlign=`left`;break;case 8:s.x-=a+1,s.textAlign=`right`;break;default:break}return e.attr(s),e.getCanvasBBox()}function cS(e,t,n,r){var i=new aS;F(t,function(e){var t=e.find(function(e){return e.get(`type`)===`text`});oS(t,i)||e.remove(!0)}),i.destroy()}function lS(e,t,n,r){var i=new aS;F(t,function(e){for(var t=e.find(function(e){return e.get(`type`)===`text`}),n=t.attr(),r=n.x,a=n.y,o=!1,s=0;s<=8;s++){var c=sS(t,r,a,s);if(i.hasGap(c)){i.fillGap(c),o=!0;break}}o||e.remove(!0)}),i.destroy()}function uS(e,t){return(e[0]||0)*(t[0]||0)+(e[1]||0)*(t[1]||0)+(e[2]||0)*(t[2]||0)}function dS(e){if(e.length>4)return[];var t=function(e,t){return[t.x-e.x,t.y-e.y]},n=t(e[0],e[1]),r=t(e[1],e[2]);return[n,r]}function fS(e,t,n){t===void 0&&(t=0),n===void 0&&(n={x:0,y:0});var r=e.x,i=e.y;return{x:(r-n.x)*Math.cos(-t)+(i-n.y)*Math.sin(-t)+n.x,y:(n.x-r)*Math.sin(-t)+(i-n.y)*Math.cos(-t)+n.y}}function pS(e){var t=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}],n=e.rotation;return n?[fS(t[0],n,t[0]),fS(t[1],n,t[0]),fS(t[2],n,t[0]),fS(t[3],n,t[0])]:t}function mS(e,t){if(e.length>4)return{min:0,max:0};var n=[];return e.forEach(function(e){n.push(uS([e.x,e.y],t))}),{min:Math.min.apply(Math,s([],a(n),!1)),max:Math.max.apply(Math,s([],a(n),!1))}}function hS(e,t){return e.max>t.min&&e.min<t.max}function gS(e){return typeof e==`number`&&!Number.isNaN(e)&&e!==1/0&&e!==-1/0}function _S(e){return[`x`,`y`,`width`,`height`].every(function(t){return gS(e[t])})}function vS(e,t,n){return n===void 0&&(n=0),!(t.x>e.x+e.width+n||t.x+t.width<e.x-n||t.y>e.y+e.height+n||t.y+t.height<e.y-n)}function yS(e,t,n){if(n===void 0&&(n=0),!_S(e)||!_S(t))return!1;if(!e.rotation&&!t.rotation)return vS(e,t,n);for(var r=pS(e),i=pS(t),a=dS(r).concat(dS(i)),o=0;o<a.length;o++){var s=a[o],c=mS(r,s),l=mS(i,s);if(!hS(c,l))return!1}return!0}var bS=function(){function e(e){var t=this;this.queue=[],this.worker=new Worker(e),this.worker.onmessage=function(e){var n;(n=t.queue.shift())==null||n.resolve(e)},this.worker.onmessageerror=function(e){var n;console.warn(`[AntV G2] Web worker is not available`),(n=t.queue.shift())==null||n.reject(e)}}return e.prototype.post=function(e,t){var n=this;return new Promise(function(r,i){n.queue.push({resolve:r,reject:i});try{n.worker.postMessage(e)}catch{console.warn(`[AntV G2] Web worker is not available`),j(t)&&t()}})},e.prototype.destroy=function(){this.worker.terminate()},e}();function xS(e){if(!(typeof window>`u`)){var t;try{t=new Blob([e.toString()],{type:`application/javascript`})}catch{t=new window.BlobBuilder,t.append(e.toString()),t=t.getBlob()}return new bS(URL.createObjectURL(t))}}var SS=`
   self.onmessage = ${function(e){function t(){function e(e,t){return(e[0]||0)*(t[0]||0)+(e[1]||0)*(t[1]||0)+(e[2]||0)*(t[2]||0)}function t(e){if(e.length>4)return[];var t=function(e,t){return[t.x-e.x,t.y-e.y]},n=t(e[0],e[1]),r=t(e[1],e[2]);return[n,r]}function n(e,t,n){t===void 0&&(t=0),n===void 0&&(n={x:0,y:0});var r=e.x,i=e.y;return{x:(r-n.x)*Math.cos(-t)+(i-n.y)*Math.sin(-t)+n.x,y:(n.x-r)*Math.sin(-t)+(i-n.y)*Math.cos(-t)+n.y}}function r(e){var t=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}],r=e.rotation;return r?[n(t[0],r,t[0]),n(t[1],r,t[0]),n(t[2],r,t[0]),n(t[3],r,t[0])]:t}function i(t,n){if(t.length>4)return{min:0,max:0};var r=[];return t.forEach(function(t){r.push(e([t.x,t.y],n))}),{min:Math.min.apply(null,r),max:Math.max.apply(null,r)}}function a(e,t){return e.max>t.min&&e.min<t.max}function o(e){return typeof e==`number`&&!Number.isNaN(e)&&e!==1/0&&e!==-1/0}function s(e){return[`x`,`y`,`width`,`height`].every(function(t){return o(e[t])})}function c(e,t,n){return n===void 0&&(n=0),!(t.x>e.x+e.width+n||t.x+t.width<e.x-n||t.y>e.y+e.height+n||t.y+t.height<e.y-n)}function l(e,n,o){if(o===void 0&&(o=0),!s(e)||!s(n))return!1;if(!e.rotation&&!n.rotation)return c(e,n,o);for(var l=r(e),u=r(n),d=t(l).concat(t(u)),f=0;f<d.length;f++){var p=d[f],m=i(l,p),h=i(u,p);if(!a(m,h))return!1}return!0}return{intersect:l}}var n=t().intersect;function r(e){for(var t=e.slice(),r=0;r<t.length;r++){var i=t[r];if(i.visible)for(var a=r+1;a<t.length;a++){var o=t[a];i!==o&&o.visible&&n(i,o)&&(o.visible=!1)}}return t}var i={"hide-overlap":r};try{var a=JSON.parse(e.data);if(!a||!a.type||!i[a.type])return;var o=a.type,s=a.items,c=i[o](s);self.postMessage(c)}catch(e){throw e}}.toString()}
`,CS=function(e){for(var t=e.slice(),n=0;n<t.length;n++){var r=t[n];if(r.visible)for(var i=n+1;i<t.length;i++){var a=t[i];r!==a&&a.visible&&yS(r,a)&&(a.visible=!1)}}return t},wS=new Map,TS=xS(SS);function ES(e,t,n,r){return c(this,void 0,void 0,function(){var n,r,i,a,o,s;return u(this,function(c){switch(c.label){case 0:return n=t.map(function(t,n){return _(_({},R_(t,e[n],z(e[n],`background.padding`))),{visible:!0})}),r=JSON.stringify(n),i=function(e){return wS.set(r,e),F(e,function(e,n){var r=e.visible,i=t[n];r?i?.show():i?.hide()}),e},wS.get(r)?(i(wS.get(r)),[3,7]):[3,1];case 1:if(!TS)return[3,6];c.label=2;case 2:return c.trys.push([2,4,,5]),a=JSON.stringify({type:`hide-overlap`,items:n}),[4,TS.post(a,function(){return i(CS(n))})];case 3:return o=c.sent(),i(Array.isArray(o.data)?o.data:[]),[3,5];case 4:return s=c.sent(),console.error(s),i(CS(n)),[3,5];case 5:return[3,7];case 6:i(CS(n)),c.label=7;case 7:return[2]}})})}var DS={"#5B8FF9":!0},OS=function(e){var t=sl.toRGB(e).toUpperCase();if(DS[t])return DS[t];var n=a(sl.rgb2arr(t),3),r=n[0],i=n[1],o=n[2];return(r*299+i*587+o*114)/1e3<128};function kS(e,t,n){if(n.length!==0){var r=n[0].get(`element`).geometry.theme,i=r.labels||{},a=i.fillColorLight,o=i.fillColorDark;n.forEach(function(e,n){var i=t[n].find(function(e){return e.get(`type`)===`text`}),s=Em.fromObject(e.getBBox()),c=Em.fromObject(i.getCanvasBBox()),l=!s.contains(c),u=e.attr(`fill`),d=OS(u);l?i.attr(r.overflowLabels.style):d?a&&i.attr(`fill`,a):o&&i.attr(`fill`,o)})}}function AS(e,t,n){var r=e.coordinate,i=L_(t),a=Em.fromObject(i.getCanvasBBox()),o=Em.fromObject(n.getBBox());return r.isTransposed?o.height>=a.height:o.width>=a.width}function jS(e,t,n){return!!e.getAdjust(`stack`)||t.every(function(t,r){var i=n[r];return AS(e,t,i)})}function MS(e,t,n){var r=e.coordinate,i=Em.fromObject(n.getBBox()),a=L_(t);r.isTransposed?a.attr({x:i.minX+i.width/2,textAlign:`center`}):a.attr({y:i.minY+i.height/2,textBaseline:`middle`})}function NS(e,t,n){if(n.length!==0){var r=n[0]?.get(`element`),i=r?.geometry;!i||i.type!==`interval`||jS(i,t,n)&&n.forEach(function(e,n){var r=t[n];MS(i,r,e)})}}function PS(e){var t=500,n=[],r=Math.max(Math.floor(e.length/t),1);return F(e,function(e,t){t%r===0?n.push(e):e.set(`visible`,!1)}),n}function FS(e,t,n){if(n.length!==0){var r=n[0]?.get(`element`),i=r?.geometry;if(!(!i||i.type!==`interval`)){var o=PS(t),c=a(i.getXYFields(),1),l=c[0],u=[],d=[],f=Me(o,function(e){return e.get(`data`)[l]}),p=we(wt(o,function(e){return e.get(`data`)[l]})),m;o.forEach(function(e){e.set(`visible`,!0)});var h=function(e){e&&(e.length&&d.push(e.pop()),d.push.apply(d,s([],a(e),!1)))};for(It(p)>0&&(m=p.shift(),h(f[m])),It(p)>0&&(m=p.pop(),h(f[m])),F(p.reverse(),function(e){h(f[e])});d.length>0;){var g=d.shift();g.get(`visible`)&&(B_(g,u)?g.set(`visible`,!1):u.push(g))}}}}function IS(e,t){var n=e.getXYFields()[1],r=[],i=t.sort(function(e,t){return e.get(`data`)[n]-e.get(`data`)[n]});return i.length>0&&r.push(i.shift()),i.length>0&&r.push(i.pop()),r.push.apply(r,s([],a(i),!1)),r}function LS(e,t,n){return e.some(function(e){return n(e,t)})}function RS(e,t,n){n===void 0&&(n=0);var r=Math.max(0,Math.min(e.x+e.width+n,t.x+t.width+n)-Math.max(e.x-n,t.x-n)),i=Math.max(0,Math.min(e.y+e.height+n,t.y+t.height+n)-Math.max(e.y-n,t.y-n));return r*i}function zS(e,t){return LS(e,t,function(e,t){var n=L_(e),r=L_(t);return RS(n.getCanvasBBox(),r.getCanvasBBox(),2)>0})}function BS(e,t,n,r,i){if(n.length!==0){var o=n[0]?.get(`element`),s=o?.geometry;if(!(!s||s.type!==`point`)){var c=a(s.getXYFields(),2),l=c[0],u=c[1],d=Me(t,function(e){return e.get(`data`)[l]}),f=[],p=i&&i.offset||e[0]?.offset||12;wt(re(d).reverse(),function(e){for(var t=IS(s,d[e]);t.length;){var n=t.shift(),r=L_(n);if(LS(f,n,function(e,t){return e.get(`data`)[l]===t.get(`data`)[l]&&e.get(`data`)[u]===t.get(`data`)[u]})){r.set(`visible`,!1);continue}var i=zS(f,n),a=!1;if(i&&(r.attr(`y`,r.attr(`y`)+2*p),a=zS(f,n)),a){r.set(`visible`,!1);continue}f.push(n)}})}}}function VS(e,t){var n=e.getXYFields()[1],r=[],i=t.sort(function(e,t){return e.get(`data`)[n]-e.get(`data`)[n]});return i.length>0&&r.push(i.shift()),i.length>0&&r.push(i.pop()),r.push.apply(r,s([],a(i),!1)),r}function HS(e,t,n){return e.some(function(e){return n(e,t)})}function US(e,t,n){n===void 0&&(n=0);var r=Math.max(0,Math.min(e.x+e.width+n,t.x+t.width+n)-Math.max(e.x-n,t.x-n)),i=Math.max(0,Math.min(e.y+e.height+n,t.y+t.height+n)-Math.max(e.y-n,t.y-n));return r*i}function WS(e,t){return HS(e,t,function(e,t){var n=L_(e),r=L_(t);return US(n.getCanvasBBox(),r.getCanvasBBox(),2)>0})}function GS(e,t,n,r,i){if(n.length!==0){var o=n[0]?.get(`element`),s=o?.geometry;if(!(!s||[`path`,`line`,`area`].indexOf(s.type)<0)){var c=a(s.getXYFields(),2),l=c[0],u=c[1],d=Me(t,function(e){return e.get(`data`)[l]}),f=[],p=i&&i.offset||e[0]?.offset||12;wt(re(d).reverse(),function(e){for(var t=VS(s,d[e]);t.length;){var n=t.shift(),r=L_(n);if(HS(f,n,function(e,t){return e.get(`data`)[l]===t.get(`data`)[l]&&e.get(`data`)[u]===t.get(`data`)[u]})){r.set(`visible`,!1);continue}var i=WS(f,n),a=!1;if(i&&(r.attr(`y`,r.attr(`y`)+2*p),a=WS(f,n)),a){r.set(`visible`,!1);continue}f.push(n)}})}}}var KS;function qS(){return KS||=document.createElement(`canvas`).getContext(`2d`),KS}var JS=ht(function(e,t){t===void 0&&(t={});var n=t.fontSize,r=t.fontFamily,i=t.fontWeight,a=t.fontStyle,o=t.fontVariant,s=qS();return s.font=[a,o,i,`${n}px`,r].join(` `),s.measureText(I(e)?e:``).width},function(e,t){return t===void 0&&(t={}),s([e],a(Ke(t)),!1).join(``)}),YS=function(e,t,n){var r=16,i=JS(`...`,n),a=I(e)?e:qe(e),o=t,s=[],c,l;if(JS(e,n)<=t)return e;for(;c=a.substr(0,r),l=JS(c,n),!(l+i>o&&l>o);)if(s.push(c),o-=l,a=a.substr(r),!a)return s.join(``);for(;c=a.substr(0,1),l=JS(c,n),!(l+i>o);)if(s.push(c),o-=l,a=a.substr(1),!a)return s.join(``);return`${s.join(``)}...`};function XS(e,t,n,r,i){if(!(t.length<=0)){var a=i?.direction||[`top`,`right`,`bottom`,`left`],o=i?.action||`translate`,s=i?.margin||0,c=t[0].get(`coordinate`);if(c){var l=Pm(c,s),u=l.minX,d=l.minY,f=l.maxX,p=l.maxY;F(t,function(e){var t=e.getCanvasBBox(),n=t.minX,r=t.minY,i=t.maxX,s=t.maxY,c=t.x,l=t.y,m=t.width,h=t.height,g=c,_=l;if(a.indexOf(`left`)>=0&&(n<u||i<u)&&(g=u),a.indexOf(`top`)>=0&&(r<d||s<d)&&(_=d),a.indexOf(`right`)>=0&&(n>f?g=f-m:i>f&&(g-=i-f)),a.indexOf(`bottom`)>=0&&(r>p?_=p-h:s>p&&(_-=s-p)),g!==c||_!==l){var v=g-c;o===`translate`?N_(e,v,_-l):o===`ellipsis`?e.findAll(function(e){return e.get(`type`)===`text`}).forEach(function(e){var t=kt(e.attr(),[`fontSize`,`fontFamily`,`fontWeight`,`fontStyle`,`fontVariant`]),n=e.getCanvasBBox(),r=YS(e.attr(`text`),n.width-Math.abs(v),t);e.attr(`text`,r)}):e.hide()}})}}}function ZS(e,t,n){var r={fillOpacity:M(e.attr(`fillOpacity`))?1:e.attr(`fillOpacity`),strokeOpacity:M(e.attr(`strokeOpacity`))?1:e.attr(`strokeOpacity`),opacity:M(e.attr(`opacity`))?1:e.attr(`opacity`)};e.attr({fillOpacity:0,strokeOpacity:0,opacity:0}),e.animate(r,t)}function QS(e,t,n){var r={fillOpacity:0,strokeOpacity:0,opacity:0},i=t.easing,a=t.duration,o=t.delay;e.animate(r,a,i,function(){e.remove(!0)},o)}function $S(e,t,n){var r,i=a(t,2),o=i[0],s=i[1];return e.applyToMatrix([o,s,1]),n===`x`?(e.setMatrix(Ir(e.getMatrix(),[[`t`,-o,-s],[`s`,.01,1],[`t`,o,s]])),r=Ir(e.getMatrix(),[[`t`,-o,-s],[`s`,100,1],[`t`,o,s]])):n===`y`?(e.setMatrix(Ir(e.getMatrix(),[[`t`,-o,-s],[`s`,1,.01],[`t`,o,s]])),r=Ir(e.getMatrix(),[[`t`,-o,-s],[`s`,1,100],[`t`,o,s]])):n===`xy`&&(e.setMatrix(Ir(e.getMatrix(),[[`t`,-o,-s],[`s`,.01,.01],[`t`,o,s]])),r=Ir(e.getMatrix(),[[`t`,-o,-s],[`s`,100,100],[`t`,o,s]])),r}function eC(e,t,n,r,i){var a=n.start,o=n.end,s=n.getWidth(),c=n.getHeight(),l,u;i===`y`?(l=a.x+s/2,u=r.y<a.y?r.y:a.y):i===`x`?(l=r.x>a.x?r.x:a.x,u=a.y+c/2):i===`xy`&&(n.isPolar?(l=n.getCenter().x,u=n.getCenter().y):(l=(a.x+o.x)/2,u=(a.y+o.y)/2));var d=$S(e,[l,u],i);e.animate({matrix:d},t)}function tC(e,t,n){var r=n.coordinate,i=n.minYPoint;eC(e,t,r,i,`x`)}function nC(e,t,n){var r=n.coordinate,i=n.minYPoint;eC(e,t,r,i,`y`)}function rC(e,t,n){var r=n.coordinate,i=n.minYPoint;eC(e,t,r,i,`xy`)}function iC(e,t,n){var r=e.getTotalLength();e.attr(`lineDash`,[r]),e.animate(function(e){return{lineDashOffset:(1-e)*r}},t)}function aC(e,t,n){var r=n.toAttrs,i=r.x,a=r.y;delete r.x,delete r.y,e.attr(r),e.animate({x:i,y:a},t)}function oC(e,t,n){var r=e.getBBox(),i=e.get(`origin`).mappingData.points,a=i[0].y-i[1].y>0?r.maxX:r.minX,o=(r.minY+r.maxY)/2;e.applyToMatrix([a,o,1]);var s=Ir(e.getMatrix(),[[`t`,-a,-o],[`s`,.01,1],[`t`,a,o]]);e.setMatrix(s),e.animate({matrix:Ir(e.getMatrix(),[[`t`,-a,-o],[`s`,100,1],[`t`,a,o]])},t)}function sC(e,t,n){var r=e.getBBox(),i=e.get(`origin`).mappingData,a=(r.minX+r.maxX)/2,o=i.points,s=o[0].y-o[1].y<=0?r.maxY:r.minY;e.applyToMatrix([a,s,1]);var c=Ir(e.getMatrix(),[[`t`,-a,-s],[`s`,1,.01],[`t`,a,s]]);e.setMatrix(c),e.animate({matrix:Ir(e.getMatrix(),[[`t`,-a,-s],[`s`,1,100],[`t`,a,s]])},t)}function cC(e,t){var n,r=Vv(e,t),i=r.startAngle,o=r.endAngle;return!Re(i,-Math.PI*.5)&&i<-Math.PI*.5&&(i+=Math.PI*2),!Re(o,-Math.PI*.5)&&o<-Math.PI*.5&&(o+=Math.PI*2),t[5]===0&&(n=a([o,i],2),i=n[0],o=n[1]),Re(i,Math.PI*1.5)&&(i=Math.PI*-.5),Re(o,Math.PI*-.5)&&!Re(i,o)&&(o=Math.PI*1.5),{startAngle:i,endAngle:o}}function lC(e){var t;return e[0]===`M`||e[0]===`L`?t=[e[1],e[2]]:(e[0]===`a`||e[0]===`A`||e[0]===`C`)&&(t=[e[e.length-2],e[e.length-1]]),t}function uC(e){var t,n,r,i=e.filter(function(e){return e[0]===`A`||e[0]===`a`});if(i.length===0)return{startAngle:0,endAngle:0,radius:0,innerRadius:0};var o=i[0],s=i.length>1?i[1]:i[0],c=e.indexOf(o),l=e.indexOf(s),u=lC(e[c-1]),d=lC(e[l-1]),f=cC(u,o),p=f.startAngle,m=f.endAngle,h=cC(d,s),g=h.startAngle,_=h.endAngle;Re(p,g)&&Re(m,_)?(n=p,r=m):(n=Math.min(p,g),r=Math.max(m,_));var v=o[1],y=i[i.length-1][1];return v<y?(t=a([y,v],2),v=t[0],y=t[1]):v===y&&(y=0),{startAngle:n,endAngle:r,radius:v,innerRadius:y}}function dC(e,t,n){var r=n.toAttrs,i=n.coordinate,a=r.path||[],o=a.map(function(e){return e[0]});if(!(a.length<1)){var s=uC(a),c=s.startAngle,l=s.endAngle,u=s.radius,d=s.innerRadius,f=uC(e.attr(`path`)),p=f.startAngle,m=f.endAngle,h=i.getCenter(),g=c-p,v=l-m;if(g===0&&v===0){e.attr(r);return}e.animate(function(e){var t=p+e*g,n=m+e*v;return _(_({},r),{path:Ct(o,[`M`,`A`,`A`,`Z`])?vm(h.x,h.y,u,t,n):_m(h.x,h.y,u,t,n,d)})},_(_({},t),{callback:function(){e.attr(`path`,a),j(t.callback)&&t.callback()}}))}}function fC(e,t,n){var r=Nm(n.coordinate,20),i=r.type,a=r.startState,o=r.endState,s=e.setClip({type:i,attrs:a});n.toAttrs&&e.attr(n.toAttrs),s.animate(o,_(_({},t),{callback:function(){e&&!e.get(`destroyed`)&&e.set(`clipShape`,null),s.remove(!0),j(t.callback)&&t.callback()}}))}function pC(e,t,n){if(e.isGroup())F(e.getChildren(),function(e){pC(e,t,n)});else{var r=e.getBBox(),i=(r.minX+r.maxX)/2,a=(r.minY+r.maxY)/2;if(e.applyToMatrix([i,a,1]),n===`zoomIn`){var o=Ir(e.getMatrix(),[[`t`,-i,-a],[`s`,.01,.01],[`t`,i,a]]);e.setMatrix(o),e.animate({matrix:Ir(e.getMatrix(),[[`t`,-i,-a],[`s`,100,100],[`t`,i,a]])},t)}else e.animate({matrix:Ir(e.getMatrix(),[[`t`,-i,-a],[`s`,.01,.01],[`t`,i,a]])},_(_({},t),{callback:function(){e.remove(!0),j(t.callback)&&t.callback()}}))}}function mC(e,t,n){pC(e,t,`zoomIn`)}function hC(e,t,n){pC(e,t,`zoomOut`)}function gC(e){return[B.TOP,B.BOTTOM].includes(e)?{offsetX:0,offsetY:e===B.TOP?-8:8,style:{textAlign:`center`,textBaseline:e===B.TOP?`bottom`:`top`}}:[B.LEFT,B.RIGHT].includes(e)?{offsetX:e===B.LEFT?-8:8,offsetY:0,style:{textAlign:e===B.LEFT?`right`:`left`,textBaseline:`middle`,rotate:Math.PI/2}}:{}}function _C(e,t,n){return{x:e.x+t*Math.cos(n),y:e.y+t*Math.sin(n)}}var vC=function(e){l(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){return R({},e.prototype.getDefaultCfg.call(this),{type:`circle`,showTitle:!0,title:e.prototype.getDefaultTitleCfg.call(this)})},t.prototype.render=function(){e.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},t.prototype.getRegion=function(e,t){var n=1/2,r={x:.5,y:.5},i=Math.PI*2/e,a=-1*Math.PI/2+i*t,o=n/(1+1/Math.sin(i/2)),s=_C(r,n-o,a),c=Math.PI*5/4,l=Math.PI*1/4;return{start:_C(s,o,c),end:_C(s,o,l)}},t.prototype.afterEachView=function(e,t){this.processAxis(e,t)},t.prototype.beforeEachView=function(e,t){},t.prototype.generateFacets=function(e){var t=this,n=this.cfg,r=n.fields,i=n.type,o=a(r,1),s=o[0];if(!s)throw Error("No `fields` specified!");var c=this.getFieldValues(e,s),l=c.length,u=[];return c.forEach(function(n,r){var a=[{field:s,value:n,values:c}],o=k(e,t.getFacetDataFilter(a)),d={type:i,data:o,region:t.getRegion(l,r),columnValue:n,columnField:s,columnIndex:r,columnValuesLength:l,rowValue:null,rowField:null,rowIndex:0,rowValuesLength:1};u.push(d)}),u},t.prototype.getXAxisOption=function(e,t,n,r){return n},t.prototype.getYAxisOption=function(e,t,n,r){return n},t.prototype.renderTitle=function(){var e=this;F(this.facets,function(t){var n=t.columnValue,r=t.view,i=z(e.cfg.title,`formatter`),a=R({position:[`50%`,`0%`],content:i?i(n):n},gC(B.TOP),e.cfg.title);r.annotation().text(a)})},t}(eh),yC=function(e){l(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){return R({},e.prototype.getDefaultCfg.call(this),{type:`list`,cols:null,showTitle:!0,title:e.prototype.getDefaultTitleCfg.call(this)})},t.prototype.render=function(){e.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},t.prototype.afterEachView=function(e,t){this.processAxis(e,t)},t.prototype.beforeEachView=function(e,t){},t.prototype.generateFacets=function(e){var t=this,n=this.cfg.fields,r=this.cfg.cols,i=a(n,1),o=i[0];if(!o)throw Error("No `fields` specified!");var s=this.getFieldValues(e,o),c=s.length;r||=c;var l=this.getPageCount(c,r),u=[];return s.forEach(function(n,i){var a=t.getRowCol(i,r),d=a.row,f=a.col,p=[{field:o,value:n,values:s}],m=k(e,t.getFacetDataFilter(p)),h={type:t.cfg.type,data:m,region:t.getRegion(l,r,f,d),columnValue:n,rowValue:n,columnField:o,rowField:null,columnIndex:f,rowIndex:d,columnValuesLength:r,rowValuesLength:l,total:c};u.push(h)}),u},t.prototype.getXAxisOption=function(e,t,n,r){return r.rowIndex!==r.rowValuesLength-1&&r.columnValuesLength*r.rowIndex+r.columnIndex+1+r.columnValuesLength<=r.total?_(_({},n),{label:null,title:null}):n},t.prototype.getYAxisOption=function(e,t,n,r){return r.columnIndex===0?n:_(_({},n),{title:null,label:null})},t.prototype.renderTitle=function(){var e=this;F(this.facets,function(t){var n=t.columnValue,r=t.view,i=z(e.cfg.title,`formatter`),a=R({position:[`50%`,`0%`],content:i?i(n):n},gC(B.TOP),e.cfg.title);r.annotation().text(a)})},t.prototype.getPageCount=function(e,t){return Math.floor((e+t-1)/t)},t.prototype.getRowCol=function(e,t){var n=Math.floor(e/t),r=e%t;return{row:n,col:r}},t}(eh),bC=function(e){l(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){return R({},e.prototype.getDefaultCfg.call(this),{type:`matrix`,showTitle:!1,columnTitle:_({},e.prototype.getDefaultTitleCfg.call(this)),rowTitle:_({},e.prototype.getDefaultTitleCfg.call(this))})},t.prototype.render=function(){e.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},t.prototype.afterEachView=function(e,t){this.processAxis(e,t)},t.prototype.beforeEachView=function(e,t){},t.prototype.generateFacets=function(e){for(var t=this.cfg,n=t.fields,r=t.type,i=n.length,a=i,o=[],s=0;s<a;s++)for(var c=n[s],l=0;l<i;l++){var u=n[l],d={type:r,data:e,region:this.getRegion(i,a,s,l),columnValue:c,rowValue:u,columnField:c,rowField:u,columnIndex:s,rowIndex:l,columnValuesLength:a,rowValuesLength:i};o.push(d)}return o},t.prototype.getXAxisOption=function(e,t,n,r){return r.rowIndex===r.rowValuesLength-1?n:_(_({},n),{label:null,title:null})},t.prototype.getYAxisOption=function(e,t,n,r){return r.columnIndex===0?n:_(_({},n),{title:null,label:null})},t.prototype.renderTitle=function(){var e=this;F(this.facets,function(t,n){var r=t.columnIndex,i=t.rowIndex,a=t.columnValuesLength;t.rowValuesLength;var o=t.columnValue,s=t.rowValue,c=t.view;if(i===0){var l=z(e.cfg.columnTitle,`formatter`),u=R({position:[`50%`,`0%`],content:l?l(o):o},gC(B.TOP),e.cfg.columnTitle);c.annotation().text(u)}if(r===a-1){var l=z(e.cfg.rowTitle,`formatter`),u=R({position:[`100%`,`50%`],content:l?l(s):s},gC(B.RIGHT),e.cfg.rowTitle);c.annotation().text(u)}})},t}(eh),xC=function(e){l(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){return R({},e.prototype.getDefaultCfg.call(this),{type:`mirror`,showTitle:!0,title:e.prototype.getDefaultTitleCfg.call(this),transpose:!1})},t.prototype.render=function(){e.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},t.prototype.beforeEachView=function(e,t){this.cfg.transpose?t.columnIndex%2==0?e.coordinate().transpose().reflect(`x`):e.coordinate().transpose():t.rowIndex%2!=0&&e.coordinate().reflect(`y`)},t.prototype.afterEachView=function(e,t){this.processAxis(e,t)},t.prototype.generateFacets=function(e){var t=this,n=a(this.cfg.fields,1),r=n[0],i=[],o=1,s=1,c=[``],l=[``],u,d;return this.cfg.transpose?(u=r,c=this.getFieldValues(e,u).slice(0,2),o=c.length):(d=r,l=this.getFieldValues(e,d).slice(0,2),s=l.length),c.forEach(function(n,r){l.forEach(function(a,f){var p=[{field:u,value:n,values:c},{field:d,value:a,values:l}],m=k(e,t.getFacetDataFilter(p)),h={type:t.cfg.type,data:m,region:t.getRegion(s,o,r,f),columnValue:n,rowValue:a,columnField:u,rowField:d,columnIndex:r,rowIndex:f,columnValuesLength:o,rowValuesLength:s};i.push(h)})}),i},t.prototype.getXAxisOption=function(e,t,n,r){return r.columnIndex===1||r.rowIndex===1?_(_({},n),{label:null,title:null}):n},t.prototype.getYAxisOption=function(e,t,n,r){return n},t.prototype.renderTitle=function(){var e=this;F(this.facets,function(t,n){var r=t.columnValue,i=t.rowValue,a=t.view,o=z(e.cfg.title,`formatter`);if(e.cfg.transpose){var s=R({position:[`50%`,`0%`],content:o?o(r):r},gC(B.TOP),e.cfg.title);a.annotation().text(s)}else{var s=R({position:[`100%`,`50%`],content:o?o(i):i},gC(B.RIGHT),e.cfg.title);a.annotation().text(s)}})},t}(eh),SC=function(e){l(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.afterEachView=function(e,t){this.processAxis(e,t)},t.prototype.beforeEachView=function(e,t){},t.prototype.getDefaultCfg=function(){return R({},e.prototype.getDefaultCfg.call(this),{type:`rect`,columnTitle:_({},e.prototype.getDefaultTitleCfg.call(this)),rowTitle:_({},e.prototype.getDefaultTitleCfg.call(this))})},t.prototype.render=function(){e.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},t.prototype.generateFacets=function(e){var t=this,n=a(this.cfg.fields,2),r=n[0],i=n[1],o=[],s=1,c=1,l=[``],u=[``];return r&&(l=this.getFieldValues(e,r),s=l.length),i&&(u=this.getFieldValues(e,i),c=u.length),l.forEach(function(n,a){u.forEach(function(d,f){var p=[{field:r,value:n,values:l},{field:i,value:d,values:u}],m=k(e,t.getFacetDataFilter(p)),h={type:t.cfg.type,data:m,region:t.getRegion(c,s,a,f),columnValue:n,rowValue:d,columnField:r,rowField:i,columnIndex:a,rowIndex:f,columnValuesLength:s,rowValuesLength:c};o.push(h)})}),o},t.prototype.renderTitle=function(){var e=this;F(this.facets,function(t,n){var r=t.columnIndex,i=t.rowIndex,a=t.columnValuesLength,o=t.columnValue,s=t.rowValue,c=t.view;if(i===0){var l=z(e.cfg.columnTitle,`formatter`),u=R({position:[`50%`,`0%`],content:l?l(o):o},gC(B.TOP),e.cfg.columnTitle);c.annotation().text(u)}if(r===a-1){var l=z(e.cfg.rowTitle,`formatter`),u=R({position:[`100%`,`50%`],content:l?l(s):s},gC(B.RIGHT),e.cfg.rowTitle);c.annotation().text(u)}})},t.prototype.getXAxisOption=function(e,t,n,r){return r.rowIndex===r.rowValuesLength-1?r.columnIndex===Math.floor((r.columnValuesLength-1)/2)?n:_(_({},n),{title:null}):_(_({},n),{title:null,label:null})},t.prototype.getYAxisOption=function(e,t,n,r){return r.columnIndex===0?r.rowIndex===Math.floor((r.rowValuesLength-1)/2)?n:_(_({},n),{title:null}):_(_({},n),{title:null,label:null})},t}(eh),CC=function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.afterChartRender=function(){t.facets&&t.cfg.line&&(t.container.clear(),t.drawLines(t.facets))},t}return t.prototype.afterEachView=function(e,t){this.processAxis(e,t)},t.prototype.beforeEachView=function(e,t){},t.prototype.init=function(){e.prototype.init.call(this),this.view.on(V.AFTER_RENDER,this.afterChartRender)},t.prototype.getDefaultCfg=function(){return R({},e.prototype.getDefaultCfg.call(this),{type:`tree`,line:{style:{lineWidth:1,stroke:`#ddd`},smooth:!1},showTitle:!0,title:e.prototype.getDefaultTitleCfg.call(this)})},t.prototype.generateFacets=function(e){if(!this.cfg.fields.length)throw Error(`Please specify for the fields for rootFacet!`);var t=[],n={type:this.cfg.type,data:e,region:null,rowValuesLength:this.getRows(),columnValuesLength:1,rowIndex:0,columnIndex:0,rowField:``,columnField:``,rowValue:``,columnValue:``};return t.push(n),n.children=this.getChildFacets(e,1,t),this.setRegion(t),t},t.prototype.setRegion=function(e){var t=this;this.forceColIndex(e),e.forEach(function(e){e.region=t.getRegion(e.rowValuesLength,e.columnValuesLength,e.columnIndex,e.rowIndex)})},t.prototype.getRegion=function(e,t,n,r){var i=1/t,a=1/e,o={x:i*n,y:a*r},s={x:o.x+i,y:o.y+a*2/3};return{start:o,end:s}},t.prototype.forceColIndex=function(e){var t,n,r=this,i=[],a=0;e.forEach(function(e){r.isLeaf(e)&&(i.push(e),e.columnIndex=a,a++)}),i.forEach(function(e){e.columnValuesLength=i.length});for(var o=this.cfg.fields.length-1;o>=0;o--){var s=this.getFacetsByLevel(e,o);try{for(var c=(t=void 0,E(s)),l=c.next();!l.done;l=c.next()){var u=l.value;this.isLeaf(u)||(u.originColIndex=u.columnIndex,u.columnIndex=this.getRegionIndex(u.children),u.columnValuesLength=i.length)}}catch(e){t={error:e}}finally{try{l&&!l.done&&(n=c.return)&&n.call(c)}finally{if(t)throw t.error}}}},t.prototype.getFacetsByLevel=function(e,t){var n=[];return e.forEach(function(e){e.rowIndex===t&&n.push(e)}),n},t.prototype.getRegionIndex=function(e){var t=e[0];return(e[e.length-1].columnIndex-t.columnIndex)/2+t.columnIndex},t.prototype.isLeaf=function(e){return!e.children||!e.children.length},t.prototype.getRows=function(){return this.cfg.fields.length+1},t.prototype.getChildFacets=function(e,t,n){var r=this,i=this.cfg.fields;if(!(i.length<t)){var a=[],o=i[t-1],s=this.getFieldValues(e,o);return s.forEach(function(i,c){var l=[{field:o,value:i,values:s}],u=e.filter(r.getFacetDataFilter(l));if(u.length){var d={type:r.cfg.type,data:u,region:null,columnValue:i,rowValue:``,columnField:o,rowField:``,columnIndex:c,rowValuesLength:r.getRows(),columnValuesLength:1,rowIndex:t,children:r.getChildFacets(u,t+1,n)};a.push(d),n.push(d)}}),a}},t.prototype.render=function(){e.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},t.prototype.renderTitle=function(){var e=this;F(this.facets,function(t){var n=t.columnValue,r=t.view,i=z(e.cfg.title,`formatter`),a=R({position:[`50%`,`0%`],content:i?i(n):n},gC(B.TOP),e.cfg.title);r.annotation().text(a)})},t.prototype.drawLines=function(e){var t=this;e.forEach(function(e){if(!t.isLeaf(e)){var n=e.children;t.addFacetLines(e,n)}})},t.prototype.addFacetLines=function(e,t){var n=this,r=e.view.coordinateBBox,i={x:r.x+r.width/2,y:r.y+r.height};t.forEach(function(e){var t=e.view.coordinateBBox,r={x:t.bl.x+(t.tr.x-t.bl.x)/2,y:t.tr.y},a={x:i.x,y:i.y+(r.y-i.y)/2},o={x:r.x,y:a.y};n.drawLine([i,a,o,r])})},t.prototype.getPath=function(e){var t=[];return this.cfg.line.smooth?(t.push([`M`,e[0].x,e[0].y]),t.push([`C`,e[1].x,e[1].y,e[2].x,e[2].y,e[3].x,e[3].y])):e.forEach(function(e,n){n===0?t.push([`M`,e.x,e.y]):t.push([`L`,e.x,e.y])}),t},t.prototype.drawLine=function(e){var t=this.getPath(e),n=this.cfg.line.style;this.container.addShape(`path`,{attrs:ut({path:t},n)})},t.prototype.getXAxisOption=function(e,t,n,r){return r.rowIndex===r.rowValuesLength-1?n:_(_({},n),{title:null,label:null})},t.prototype.getYAxisOption=function(e,t,n,r){return r.originColIndex!==0&&r.columnIndex!==0?_(_({},n),{title:null,label:null}):n},t}(eh);function wC(e){var t=s([],a(e),!1);t.sort(function(e,t){return e-t});var n=t.length;return n===0?0:n%2==1?t[(n-1)/2]:(t[n/2]+t[n/2-1])/2}function TC(e){var t=be(e,function(e,t){return e+=isNaN(t)||!L(t)?0:t},0);return e.length===0?0:t/e.length}function EC(e,t){if(!t)return null;var n;switch(e){case`start`:return 0;case`center`:return .5;case`end`:return 1;case`median`:n=t.isCategory?wC(t.values.map(function(e,t){return t})):wC(t.values);break;case`mean`:n=t.isCategory?(t.values.length-1)/2:TC(t.values);break;case`min`:n=t.isCategory?0:t[e];break;case`max`:n=t.isCategory?t.values.length-1:t[e];break;default:n=e;break}return t.scale(n)}var DC=[`regionFilter`,`shape`],OC=function(e){l(t,e);function t(t){var n=e.call(this,t)||this;return n.cache=new Map,n.foregroundContainer=n.view.getLayer(Vt.FORE).addGroup(),n.backgroundContainer=n.view.getLayer(Vt.BG).addGroup(),n.option=[],n}return Object.defineProperty(t.prototype,`name`,{get:function(){return`annotation`},enumerable:!1,configurable:!0}),t.prototype.init=function(){},t.prototype.layout=function(){this.update()},t.prototype.render=function(){},t.prototype.update=function(){var e=this;this.onAfterRender(function(){var t=new Map;F(e.option,function(n){if(O(DC,n.type)){var r=e.updateOrCreate(n);r&&t.set(e.getCacheKey(n),r)}}),e.cache=e.syncCache(t)});var t=new Map;F(this.option,function(n){if(!O(DC,n.type)){var r=e.updateOrCreate(n);r&&t.set(e.getCacheKey(n),r)}}),this.cache=this.syncCache(t)},t.prototype.clear=function(t){t===void 0&&(t=!1),e.prototype.clear.call(this),this.clearComponents(),this.foregroundContainer.clear(),this.backgroundContainer.clear(),t&&(this.option=[])},t.prototype.destroy=function(){this.clear(!0),this.foregroundContainer.remove(!0),this.backgroundContainer.remove(!0)},t.prototype.getComponents=function(){var e=[];return this.cache.forEach(function(t){e.push(t)}),e},t.prototype.clearComponents=function(){this.getComponents().forEach(function(e){e.component.destroy()}),this.cache.clear()},t.prototype.onAfterRender=function(e){var t=!1;this.view.getOptions().animate&&this.view.geometries.forEach(function(n){n.animateOption&&(n.once(Wt.AFTER_DRAW_ANIMATE,function(){e()}),t=!0)}),t||this.view.getRootView().once(V.AFTER_RENDER,function(){e()})},t.prototype.createAnnotation=function(e){var t=e.type,n=Cf[Ze(t)];if(n){var r=this.getAnnotationTheme(t),i=this.getAnnotationCfg(t,e,r);return i?{component:new n(i),layer:this.isTop(i)?Vt.FORE:Vt.BG,direction:B.NONE,type:Ht.ANNOTATION,extra:e}:null}},t.prototype.annotation=function(e){this.option.push(e)},t.prototype.arc=function(e){return this.annotation(_({type:`arc`},e)),this},t.prototype.image=function(e){return this.annotation(_({type:`image`},e)),this},t.prototype.line=function(e){return this.annotation(_({type:`line`},e)),this},t.prototype.region=function(e){return this.annotation(_({type:`region`},e)),this},t.prototype.text=function(e){return this.annotation(_({type:`text`},e)),this},t.prototype.dataMarker=function(e){return this.annotation(_({type:`dataMarker`},e)),this},t.prototype.dataRegion=function(e){this.annotation(_({type:`dataRegion`},e))},t.prototype.regionFilter=function(e){this.annotation(_({type:`regionFilter`},e))},t.prototype.shape=function(e){this.annotation(_({type:`shape`},e))},t.prototype.html=function(e){this.annotation(_({type:`html`},e))},t.prototype.parsePosition=function(e){var t,n,r=this.view.getXScale(),i=this.view.getScalesByDim(`y`),o=j(e)?e.call(null,r,i):e,s=0,c=0;if(N(o)){var l=a(o,2),u=l[0],d=l[1];if(I(u)&&u.indexOf(`%`)!==-1&&!isNaN(u.slice(0,-1)))return this.parsePercentPosition(o);s=EC(u,r),c=EC(d,Object.values(i)[0])}else if(!M(o))try{for(var f=E(re(o)),p=f.next();!p.done;p=f.next()){var m=p.value,h=o[m];m===r.field&&(s=EC(h,r)),i[m]&&(c=EC(h,i[m]))}}catch(e){t={error:e}}finally{try{p&&!p.done&&(n=f.return)&&n.call(f)}finally{if(t)throw t.error}}return isNaN(s)||isNaN(c)?null:this.view.getCoordinate().convert({x:s,y:c})},t.prototype.getRegionPoints=function(e,t){var n=this,r=this.view.getXScale(),i=this.view.getScalesByDim(`y`),a=Object.values(i)[0],o=r.field,s=this.view.getData(),c=N(e)?e[0]:e[o],l=N(t)?t[0]:t[o],u=[],d;return F(s,function(e,t){if(e[o]===c&&(d=t),t>=d){var r=n.parsePosition([e[o],e[a.field]]);r&&u.push(r)}if(e[o]===l)return!1}),u},t.prototype.parsePercentPosition=function(e){var t=parseFloat(e[0])/100,n=parseFloat(e[1])/100,r=this.view.getCoordinate(),i=r.start,a=r.end,o={x:Math.min(i.x,a.x),y:Math.min(i.y,a.y)},s=r.getWidth()*t+o.x,c=r.getHeight()*n+o.y;return{x:s,y:c}},t.prototype.getCoordinateBBox=function(){var e=this.view.getCoordinate(),t=e.start,n=e.end,r=e.getWidth(),i=e.getHeight(),a={x:Math.min(t.x,n.x),y:Math.min(t.y,n.y)};return{x:a.x,y:a.y,minX:a.x,minY:a.y,maxX:a.x+r,maxY:a.y+i,width:r,height:i}},t.prototype.getAnnotationCfg=function(e,t,n){var r=this,i=this.view.getCoordinate(),a=this.view.getCanvas(),s={};if(M(t))return null;var c=t.start,l=t.end,u=t.position,d=this.parsePosition(c),f=this.parsePosition(l),p=this.parsePosition(u);if([`arc`,`image`,`line`,`region`,`regionFilter`].includes(e)&&(!d||!f)||[`text`,`dataMarker`,`html`].includes(e)&&!p)return null;if(e===`arc`){var m=t;m.start,m.end;var h=o(m,[`start`,`end`]),g=Mm(i,d),v=Mm(i,f);g>v&&(v=Math.PI*2+v),s=_(_({},h),{center:i.getCenter(),radius:Am(i,d),startAngle:g,endAngle:v})}else if(e===`image`){var y=t;y.start,y.end;var h=o(y,[`start`,`end`]);s=_(_({},h),{start:d,end:f,src:t.src})}else if(e===`line`){var b=t;b.start,b.end;var h=o(b,[`start`,`end`]);s=_(_({},h),{start:d,end:f,text:z(t,`text`,null)})}else if(e===`region`){var x=t;x.start,x.end;var h=o(x,[`start`,`end`]);s=_(_({},h),{start:d,end:f})}else if(e===`text`){var S=this.view.getData(),C=t;C.position;var w=C.content,h=o(C,[`position`,`content`]),T=w;j(w)&&(T=w(S)),s=_(_(_({},p),h),{content:T})}else if(e===`dataMarker`){var E=t;E.position;var D=E.point,k=E.line,A=E.text,ee=E.autoAdjust,te=E.direction,h=o(E,[`position`,`point`,`line`,`text`,`autoAdjust`,`direction`]);s=_(_(_({},h),p),{coordinateBBox:this.getCoordinateBBox(),point:D,line:k,text:A,autoAdjust:ee,direction:te})}else if(e===`dataRegion`){var N=t,P=N.start,ne=N.end,re=N.region,A=N.text,ie=N.lineLength,h=o(N,[`start`,`end`,`region`,`text`,`lineLength`]);s=_(_({},h),{points:this.getRegionPoints(P,ne),region:re,text:A,lineLength:ie})}else if(e===`regionFilter`){var ae=t;ae.start,ae.end;var oe=ae.apply,se=ae.color,h=o(ae,[`start`,`end`,`apply`,`color`]),ce=this.view.geometries,le=[],ue=function(e){e&&(e.isGroup()?e.getChildren().forEach(function(e){return ue(e)}):le.push(e))};F(ce,function(e){oe?O(oe,e.type)&&F(e.elements,function(e){ue(e.shape)}):F(e.elements,function(e){ue(e.shape)})}),s=_(_({},h),{color:se,shapes:le,start:d,end:f})}else if(e===`shape`){var de=t,fe=de.render,pe=o(de,[`render`]);s=_(_({},pe),{render:function(e){if(j(t.render))return fe(e,r.view,{parsePosition:r.parsePosition.bind(r)})}})}else if(e===`html`){var me=t,he=me.html;me.position;var pe=o(me,[`html`,`position`]);s=_(_(_({},pe),p),{parent:a.get(`el`).parentNode,html:function(e){return j(he)?he(e,r.view):he}})}var ge=R({},n,_(_({},s),{top:t.top,style:t.style,offsetX:t.offsetX,offsetY:t.offsetY}));return e!==`html`&&(ge.container=this.getComponentContainer(ge)),ge.animate=this.view.getOptions().animate&&ge.animate&&z(t,`animate`,ge.animate),ge.animateOption=R({},s_,ge.animateOption,t.animateOption),ge},t.prototype.isTop=function(e){return z(e,`top`,!0)},t.prototype.getComponentContainer=function(e){return this.isTop(e)?this.foregroundContainer:this.backgroundContainer},t.prototype.getAnnotationTheme=function(e){return z(this.view.getTheme(),[`components`,`annotation`,e],{})},t.prototype.updateOrCreate=function(e){var t=this.cache.get(this.getCacheKey(e));if(t){var n=e.type,r=this.getAnnotationTheme(n),i=this.getAnnotationCfg(n,e,r);i&&wm(i,[`container`]),t.component.update(_(_({},i||{}),{visible:!!i})),O(DC,e.type)&&t.component.render()}else t=this.createAnnotation(e),t&&(t.component.init(),O(DC,e.type)&&t.component.render());return t},t.prototype.syncCache=function(e){var t=this,n=new Map(this.cache);return e.forEach(function(e,t){n.set(t,e)}),n.forEach(function(e,r){le(t.option,function(e){return r===t.getCacheKey(e)})||(e.component.destroy(),n.delete(r))}),n},t.prototype.getCacheKey=function(e){return e},t}(t_);function kC(e,t){var n=R({},z(e,[`components`,`axis`,`common`]),z(e,[`components`,`axis`,t]));return z(n,[`grid`],{})}function AC(e,t,n,r){var i=[],a=t.getTicks();return e.isPolar&&a.push({value:1,text:``,tickValue:``}),a.reduce(function(t,a,o){var s=a.value;if(r)i.push({points:[e.convert(n===`y`?{x:0,y:s}:{x:s,y:0}),e.convert(n===`y`?{x:1,y:s}:{x:s,y:1})]});else if(o){var c=(t.value+s)/2;i.push({points:[e.convert(n===`y`?{x:0,y:c}:{x:c,y:0}),e.convert(n===`y`?{x:1,y:c}:{x:c,y:1})]})}return a},a[0]),i}function jC(e,t,n,r,i){var a=t.values.length,o=[],s=n.getTicks();return s.reduce(function(t,n){var s=t?t.value:n.value,c=n.value,l=(s+c)/2;return i===`x`?o.push({points:[e.convert({x:r?c:l,y:0}),e.convert({x:r?c:l,y:1})]}):o.push({points:wt(Array(a+1),function(t,n){return e.convert({x:n/a,y:r?c:l})})}),n},s[0]),o}function MC(e,t){var n=z(t,`grid`);if(n===null)return!1;var r=z(e,`grid`);return!(n===void 0&&r===null)}var NC=[`container`],PC=_(_({},s_),{appear:null}),FC=function(e){l(t,e);function t(t){var n=e.call(this,t)||this;return n.cache=new Map,n.gridContainer=n.view.getLayer(Vt.BG).addGroup(),n.gridForeContainer=n.view.getLayer(Vt.FORE).addGroup(),n.axisContainer=n.view.getLayer(Vt.BG).addGroup(),n.axisForeContainer=n.view.getLayer(Vt.FORE).addGroup(),n}return Object.defineProperty(t.prototype,`name`,{get:function(){return`axis`},enumerable:!1,configurable:!0}),t.prototype.init=function(){},t.prototype.render=function(){this.update()},t.prototype.layout=function(){var e=this,t=this.view.getCoordinate();F(this.getComponents(),function(n){var r=n.component,i=n.direction,a=n.type,o=n.extra,s=o.dim,c=o.scale,l=o.alignTick,u;if(a===Ht.AXIS)t.isPolar?s===`x`?u=t.isTransposed?Gm(t,i):Xm(t):s===`y`&&(u=t.isTransposed?Xm(t):Gm(t,i)):u=Gm(t,i);else if(a===Ht.GRID)if(t.isPolar){var d=void 0;d=t.isTransposed?s===`x`?jC(t,e.view.getYScales()[0],c,l,s):AC(t,c,s,l):s===`x`?AC(t,c,s,l):jC(t,e.view.getXScale(),c,l,s),u={items:d,center:e.view.getCoordinate().getCenter()}}else u={items:AC(t,c,s,l)};r.update(u)})},t.prototype.update=function(){this.option=this.view.getOptions().axes;var e=new Map;this.updateXAxes(e),this.updateYAxes(e);var t=new Map;this.cache.forEach(function(n,r){e.has(r)?t.set(r,n):n.component.destroy()}),this.cache=t},t.prototype.clear=function(){e.prototype.clear.call(this),this.cache.clear(),this.gridContainer.clear(),this.gridForeContainer.clear(),this.axisContainer.clear(),this.axisForeContainer.clear()},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.gridContainer.remove(!0),this.gridForeContainer.remove(!0),this.axisContainer.remove(!0),this.axisForeContainer.remove(!0)},t.prototype.getComponents=function(){var e=[];return this.cache.forEach(function(t){e.push(t)}),e},t.prototype.updateXAxes=function(e){var t=this.view.getXScale();if(!(!t||t.isIdentity)){var n=Zm(this.option,t.field);if(n!==!1){var r=Qm(n,B.BOTTOM),i=Vt.BG,a=`x`,o=this.view.getCoordinate(),s=this.getId(`axis`,t.field),c=this.getId(`grid`,t.field);if(o.isRect){var l=this.cache.get(s);if(l){var u=this.getLineAxisCfg(t,n,r);wm(u,NC),l.component.update(u),e.set(s,l)}else l=this.createLineAxis(t,n,i,r,a),this.cache.set(s,l),e.set(s,l);var d=this.cache.get(c);if(d){var u=this.getLineGridCfg(t,n,r,a);wm(u,NC),d.component.update(u),e.set(c,d)}else d=this.createLineGrid(t,n,i,r,a),d&&(this.cache.set(c,d),e.set(c,d))}else if(o.isPolar){var l=this.cache.get(s);if(l){var u=o.isTransposed?this.getLineAxisCfg(t,n,B.RADIUS):this.getCircleAxisCfg(t,n,r);wm(u,NC),l.component.update(u),e.set(s,l)}else{if(o.isTransposed){if(at(n))return;l=this.createLineAxis(t,n,i,B.RADIUS,a)}else l=this.createCircleAxis(t,n,i,r,a);this.cache.set(s,l),e.set(s,l)}var d=this.cache.get(c);if(d){var u=o.isTransposed?this.getCircleGridCfg(t,n,B.RADIUS,a):this.getLineGridCfg(t,n,B.CIRCLE,a);wm(u,NC),d.component.update(u),e.set(c,d)}else{if(o.isTransposed){if(at(n))return;d=this.createCircleGrid(t,n,i,B.RADIUS,a)}else d=this.createLineGrid(t,n,i,B.CIRCLE,a);d&&(this.cache.set(c,d),e.set(c,d))}}}}},t.prototype.updateYAxes=function(e){var t=this,n=this.view.getYScales();F(n,function(n,r){if(!(!n||n.isIdentity)){var i=n.field,a=Zm(t.option,i);if(a!==!1){var o=Vt.BG,s=`y`,c=t.getId(`axis`,i),l=t.getId(`grid`,i),u=t.view.getCoordinate();if(u.isRect){var d=Qm(a,r===0?B.LEFT:B.RIGHT),f=t.cache.get(c);if(f){var p=t.getLineAxisCfg(n,a,d);wm(p,NC),f.component.update(p),e.set(c,f)}else f=t.createLineAxis(n,a,o,d,s),t.cache.set(c,f),e.set(c,f);var m=t.cache.get(l);if(m){var p=t.getLineGridCfg(n,a,d,s);wm(p,NC),m.component.update(p),e.set(l,m)}else m=t.createLineGrid(n,a,o,d,s),m&&(t.cache.set(l,m),e.set(l,m))}else if(u.isPolar){var f=t.cache.get(c);if(f){var p=u.isTransposed?t.getCircleAxisCfg(n,a,B.CIRCLE):t.getLineAxisCfg(n,a,B.RADIUS);wm(p,NC),f.component.update(p),e.set(c,f)}else{if(u.isTransposed){if(at(a))return;f=t.createCircleAxis(n,a,o,B.CIRCLE,s)}else f=t.createLineAxis(n,a,o,B.RADIUS,s);t.cache.set(c,f),e.set(c,f)}var m=t.cache.get(l);if(m){var p=u.isTransposed?t.getLineGridCfg(n,a,B.CIRCLE,s):t.getCircleGridCfg(n,a,B.RADIUS,s);wm(p,NC),m.component.update(p),e.set(l,m)}else{if(u.isTransposed){if(at(a))return;m=t.createLineGrid(n,a,o,B.CIRCLE,s)}else m=t.createCircleGrid(n,a,o,B.RADIUS,s);m&&(t.cache.set(l,m),e.set(l,m))}}}}})},t.prototype.createLineAxis=function(e,t,n,r,i){var a={component:new om(this.getLineAxisCfg(e,t,r)),layer:n,direction:r===B.RADIUS?B.NONE:r,type:Ht.AXIS,extra:{dim:i,scale:e}};return a.component.set(`field`,e.field),a.component.init(),a},t.prototype.createLineGrid=function(e,t,n,r,i){var a=this.getLineGridCfg(e,t,r,i);if(a){var o={component:new cm(a),layer:n,direction:B.NONE,type:Ht.GRID,extra:{dim:i,scale:e,alignTick:z(a,`alignTick`,!0)}};return o.component.init(),o}},t.prototype.createCircleAxis=function(e,t,n,r,i){var a={component:new sm(this.getCircleAxisCfg(e,t,r)),layer:n,direction:r,type:Ht.AXIS,extra:{dim:i,scale:e}};return a.component.set(`field`,e.field),a.component.init(),a},t.prototype.createCircleGrid=function(e,t,n,r,i){var a=this.getCircleGridCfg(e,t,r,i);if(a){var o={component:new lm(a),layer:n,direction:B.NONE,type:Ht.GRID,extra:{dim:i,scale:e,alignTick:z(a,`alignTick`,!0)}};return o.component.init(),o}},t.prototype.getLineAxisCfg=function(e,t,n){var r=z(t,[`top`])?this.axisForeContainer:this.axisContainer,i=this.view.getCoordinate(),a=Gm(i,n),o=$m(e,t),s=Jm(this.view.getTheme(),n),c=z(t,[`title`])?R({title:{style:{text:o}}},{title:Ym(this.view.getTheme(),n,t.title)},t):t,l=R(_(_({container:r},a),{ticks:e.getTicks().map(function(e){return{id:`${e.tickValue}`,name:e.text,value:e.value}}),verticalFactor:i.isPolar?qm(a,i.getCenter())*-1:qm(a,i.getCenter()),theme:s}),s,c),u=this.getAnimateCfg(l),d=u.animate;l.animateOption=u.animateOption,l.animate=d;var f=Km(a),p=z(l,`verticalLimitLength`,f?1/3:1/2);if(p<=1){var m=this.view.getCanvas().get(`width`),h=this.view.getCanvas().get(`height`);l.verticalLimitLength=p*(f?m:h)}return l},t.prototype.getLineGridCfg=function(e,t,n,r){if(MC(Jm(this.view.getTheme(),n),t)){var i=kC(this.view.getTheme(),n),a=R({container:z(t,[`top`])?this.gridForeContainer:this.gridContainer},i,z(t,`grid`),this.getAnimateCfg(t));return a.items=AC(this.view.getCoordinate(),e,r,z(a,`alignTick`,!0)),a}},t.prototype.getCircleAxisCfg=function(e,t,n){var r=z(t,[`top`])?this.axisForeContainer:this.axisContainer,i=this.view.getCoordinate(),a=e.getTicks().map(function(e){return{id:`${e.tickValue}`,name:e.text,value:e.value}});!e.isCategory&&Math.abs(i.endAngle-i.startAngle)===Math.PI*2&&a.length&&(a[a.length-1].name=``);var o=$m(e,t),s=Jm(this.view.getTheme(),B.CIRCLE),c=z(t,[`title`])?R({title:{style:{text:o}}},{title:Ym(this.view.getTheme(),n,t.title)},t):t,l=R(_(_({container:r},Xm(this.view.getCoordinate())),{ticks:a,verticalFactor:1,theme:s}),s,c),u=this.getAnimateCfg(l),d=u.animate,f=u.animateOption;return l.animate=d,l.animateOption=f,l},t.prototype.getCircleGridCfg=function(e,t,n,r){if(MC(Jm(this.view.getTheme(),n),t)){var i=kC(this.view.getTheme(),B.RADIUS),a=R({container:z(t,[`top`])?this.gridForeContainer:this.gridContainer,center:this.view.getCoordinate().getCenter()},i,z(t,`grid`),this.getAnimateCfg(t)),o=z(a,`alignTick`,!0),s=r===`x`?this.view.getYScales()[0]:this.view.getXScale();return a.items=jC(this.view.getCoordinate(),s,e,o,r),a}},t.prototype.getId=function(e,t){var n=this.view.getCoordinate();return`${e}-${t}-${n.type}`},t.prototype.getAnimateCfg=function(e){return{animate:this.view.getOptions().animate&&z(e,`animate`),animateOption:e&&e.animateOption?R({},PC,e.animateOption):PC}},t}(t_);function IC(e,t,n){return n===B.TOP?[e.minX+e.width/2-t.width/2,e.minY]:n===B.BOTTOM?[e.minX+e.width/2-t.width/2,e.maxY-t.height]:n===B.LEFT?[e.minX,e.minY+e.height/2-t.height/2]:n===B.RIGHT?[e.maxX-t.width,e.minY+e.height/2-t.height/2]:n===B.TOP_LEFT||n===B.LEFT_TOP?[e.tl.x,e.tl.y]:n===B.TOP_RIGHT||n===B.RIGHT_TOP?[e.tr.x-t.width,e.tr.y]:n===B.BOTTOM_LEFT||n===B.LEFT_BOTTOM?[e.bl.x,e.bl.y-t.height]:n===B.BOTTOM_RIGHT||n===B.RIGHT_BOTTOM?[e.br.x-t.width,e.br.y-t.height]:[0,0]}function LC(e,t){return et(e)?e===!1?!1:{}:z(e,[t],e)}function RC(e){return z(e,`position`,B.BOTTOM)}var zC=function(e){l(t,e);function t(t){var n=e.call(this,t)||this;return n.container=n.view.getLayer(Vt.FORE).addGroup(),n}return Object.defineProperty(t.prototype,`name`,{get:function(){return`legend`},enumerable:!1,configurable:!0}),t.prototype.init=function(){},t.prototype.render=function(){this.update()},t.prototype.layout=function(){var e=this;this.layoutBBox=this.view.viewBBox,F(this.components,function(t){var n=t.component,r=t.direction,i=Z_(r),o=n.get(`maxWidthRatio`),s=n.get(`maxHeightRatio`),c=e.getCategoryLegendSizeCfg(i,o,s),l=n.get(`maxWidth`),u=n.get(`maxHeight`);n.update({maxWidth:Math.min(c.maxWidth,l||0),maxHeight:Math.min(c.maxHeight,u||0)});var d=n.get(`padding`),f=n.getLayoutBBox(),p=new Em(f.x,f.y,f.width,f.height).expand(d),m=a(IC(e.view.viewBBox,p,r),2),h=m[0],g=m[1],_=a(IC(e.layoutBBox,p,r),2),v=_[0],y=_[1],b=0,x=0;r.startsWith(`top`)||r.startsWith(`bottom`)?(b=h,x=y):(b=v,x=g),n.setLocation({x:b+d[3],y:x+d[0]}),e.layoutBBox=e.layoutBBox.cut(p,r)})},t.prototype.update=function(){var e=this;this.option=this.view.getOptions().legends;var t={},n=function(n,r,i){var a=e.getId(i.field),o=e.getComponentById(a);if(o){var s=void 0,c=LC(e.option,i.field);c!==!1&&(z(c,`custom`)?s=e.getCategoryCfg(n,r,i,c,!0):i.isLinear?s=e.getContinuousCfg(n,r,i,c):i.isCategory&&(s=e.getCategoryCfg(n,r,i,c))),s&&(wm(s,[`container`]),o.direction=RC(c),o.component.update(s),t[a]=!0)}else{var l=e.createFieldLegend(n,r,i);l&&(l.component.init(),e.components.push(l),t[a]=!0)}};if(z(this.option,`custom`)){var r=`global-custom`,i=this.getComponentById(r);if(i){var a=this.getCategoryCfg(void 0,void 0,void 0,this.option,!0);wm(a,[`container`]),i.component.update(a),t[r]=!0}else{var o=this.createCustomLegend(void 0,void 0,void 0,this.option);if(o){o.init();var s=Vt.FORE,c=RC(this.option);this.components.push({id:r,component:o,layer:s,direction:c,type:Ht.LEGEND,extra:void 0}),t[r]=!0}}}else this.loopLegends(n);var l=[];F(this.getComponents(),function(e){t[e.id]?l.push(e):e.component.destroy()}),this.components=l},t.prototype.clear=function(){e.prototype.clear.call(this),this.container.clear()},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.container.remove(!0)},t.prototype.getGeometries=function(e){var t=this,n=e.geometries;return F(e.views,function(e){n=n.concat(t.getGeometries(e))}),n},t.prototype.loopLegends=function(e){if(this.view.getRootView()===this.view){var t=this.getGeometries(this.view),n={};F(t,function(t){var r=t.getGroupAttributes();F(r,function(r){var i=r.getScale(r.type);!i||i.type===`identity`||n[i.field]||(e(t,r,i),n[i.field]=!0)})})}},t.prototype.createFieldLegend=function(e,t,n){var r,i=LC(this.option,n.field),a=Vt.FORE,o=RC(i);if(i!==!1&&(z(i,`custom`)?r=this.createCustomLegend(e,t,n,i):n.isLinear?r=this.createContinuousLegend(e,t,n,i):n.isCategory&&(r=this.createCategoryLegend(e,t,n,i))),r)return r.set(`field`,n.field),{id:this.getId(n.field),component:r,layer:a,direction:o,type:Ht.LEGEND,extra:{scale:n}}},t.prototype.createCustomLegend=function(e,t,n,r){var i=this.getCategoryCfg(e,t,n,r,!0);return new um(i)},t.prototype.createContinuousLegend=function(e,t,n,r){var i=this.getContinuousCfg(e,t,n,wm(r,[`value`]));return new dm(i)},t.prototype.createCategoryLegend=function(e,t,n,r){var i=this.getCategoryCfg(e,t,n,r);return new um(i)},t.prototype.getContinuousCfg=function(e,t,n,r){var i=n.getTicks(),a=le(i,function(e){return e.value===0}),o=le(i,function(e){return e.value===1}),s=i.map(function(e){var r=e.value,i=e.tickValue,a=t.mapping(n.invert(r)).join(``);return{value:i,attrValue:a,color:a,scaleValue:r}});a||s.push({value:n.min,attrValue:t.mapping(n.invert(0)).join(``),color:t.mapping(n.invert(0)).join(``),scaleValue:0}),o||s.push({value:n.max,attrValue:t.mapping(n.invert(1)).join(``),color:t.mapping(n.invert(1)).join(``),scaleValue:1}),s.sort(function(e,t){return e.value-t.value});var c={min:Ee(s).value,max:De(s).value,colors:[],rail:{type:t.type},track:{}};t.type===`size`&&(c.track={style:{fill:t.type===`size`?this.view.getTheme().defaultColor:void 0}}),t.type===`color`&&(c.colors=s.map(function(e){return e.attrValue}));var l=this.container,u=RC(r),d=Z_(u),f=z(r,`title`);return f&&=R({text:Bm(n)},f),c.container=l,c.layout=d,c.title=f,c.animateOption=s_,this.mergeLegendCfg(c,r,`continuous`)},t.prototype.getCategoryCfg=function(e,t,n,r,i){var a=this.container,o=z(r,`position`,B.BOTTOM),s=ev(this.view.getTheme(),o),c=z(s,[`marker`]),l=z(r,`marker`),u=Z_(o),d=z(s,[`pageNavigator`]),f=z(r,`pageNavigator`),p=i?$_(c,l,r.items):Q_(this.view,e,t,c,l),m=z(r,`title`);m&&=R({text:n?Bm(n):``},m);var h=z(r,`maxWidthRatio`),g=z(r,`maxHeightRatio`),_=this.getCategoryLegendSizeCfg(u,h,g);_.container=a,_.layout=u,_.items=p,_.title=m,_.animateOption=s_,_.pageNavigator=R({},d,f);var v=this.mergeLegendCfg(_,r,o);v.reversed&&v.items.reverse();var y=z(v,`maxItemWidth`);return y&&y<=1&&(v.maxItemWidth=this.view.viewBBox.width*y),v},t.prototype.mergeLegendCfg=function(e,t,n){var r=n.split(`-`)[0],i=ev(this.view.getTheme(),r);return R({},i,e,t)},t.prototype.getId=function(e){return`${this.name}-${e}`},t.prototype.getComponentById=function(e){return le(this.components,function(t){return t.id===e})},t.prototype.getCategoryLegendSizeCfg=function(e,t,n){t===void 0&&(t=Yt),n===void 0&&(n=Yt);var r=this.view.viewBBox,i=r.width,a=r.height;return e===`vertical`?{maxWidth:i*t,maxHeight:a}:{maxWidth:i,maxHeight:a*n}},t}(t_),BC=function(e){l(t,e);function t(t){var n=e.call(this,t)||this;return n.onChangeFn=Ft,n.resetMeasure=function(){n.clear()},n.onValueChange=function(e){var t=a(e,2),r=t[0],i=t[1];n.start=r,n.end=i,n.changeViewData(r,i)},n.container=n.view.getLayer(Vt.FORE).addGroup(),n.onChangeFn=jt(n.onValueChange,20,{leading:!0}),n.width=0,n.view.on(V.BEFORE_CHANGE_DATA,n.resetMeasure),n.view.on(V.BEFORE_CHANGE_SIZE,n.resetMeasure),n}return Object.defineProperty(t.prototype,`name`,{get:function(){return`slider`},enumerable:!1,configurable:!0}),t.prototype.destroy=function(){e.prototype.destroy.call(this),this.view.off(V.BEFORE_CHANGE_DATA,this.resetMeasure),this.view.off(V.BEFORE_CHANGE_SIZE,this.resetMeasure)},t.prototype.init=function(){},t.prototype.render=function(){this.option=this.view.getOptions().slider;var e=this.getSliderCfg(),t=e.start,n=e.end;M(this.start)&&(this.start=t,this.end=n);var r=this.view.getOptions().data;this.option&&!xt(r)?this.slider?this.slider=this.updateSlider():(this.slider=this.createSlider(),this.slider.component.on(`sliderchange`,this.onChangeFn)):this.slider&&=(this.slider.component.destroy(),void 0)},t.prototype.layout=function(){var e=this;if(this.option&&!this.width&&(this.measureSlider(),setTimeout(function(){e.view.destroyed||e.changeViewData(e.start,e.end)},0)),this.slider){var t=this.view.coordinateBBox.width,n=this.slider.component.get(`padding`),r=a(n,4),i=r[0];r[1],r[2];var o=r[3],s=this.slider.component.getLayoutBBox(),c=new Em(s.x,s.y,Math.min(s.width,t),s.height).expand(n),l=this.getMinMaxText(this.start,this.end),u=l.minText,d=l.maxText,f=a(IC(this.view.viewBBox,c,B.BOTTOM),2);f[0];var p=f[1],m=a(IC(this.view.coordinateBBox,c,B.BOTTOM),2),h=m[0];m[1],this.slider.component.update(_(_({},this.getSliderCfg()),{x:h+o,y:p+i,width:this.width,start:this.start,end:this.end,minText:u,maxText:d})),this.view.viewBBox=this.view.viewBBox.cut(c,B.BOTTOM)}},t.prototype.update=function(){this.render()},t.prototype.createSlider=function(){var e=this.getSliderCfg(),t=new rm(_({container:this.container},e));return t.init(),{component:t,layer:Vt.FORE,direction:B.BOTTOM,type:Ht.SLIDER}},t.prototype.updateSlider=function(){var e=this.getSliderCfg();if(this.width){var t=this.getMinMaxText(this.start,this.end),n=t.minText,r=t.maxText;e=_(_({},e),{width:this.width,start:this.start,end:this.end,minText:n,maxText:r})}return this.slider.component.update(e),this.slider},t.prototype.measureSlider=function(){this.width=this.getSliderCfg().width},t.prototype.getSliderCfg=function(){var e={height:16,start:0,end:1,minText:``,maxText:``,x:0,y:0,width:this.view.coordinateBBox.width};if(P(this.option)){var t=_({data:this.getData()},z(this.option,`trendCfg`,{}));e=R({},e,this.getThemeOptions(),this.option),e=_(_({},e),{trendCfg:t})}return e.start=Fe(Math.min(M(e.start)?0:e.start,M(e.end)?1:e.end),0,1),e.end=Fe(Math.max(M(e.start)?0:e.start,M(e.end)?1:e.end),0,1),e},t.prototype.getData=function(){var e=this.view.getOptions().data,t=a(this.view.getYScales(),1),n=t[0],r=this.view.getGroupScales();if(r.length){var i=r[0],o=i.field,s=i.ticks;return e.reduce(function(e,t){return t[o]===s[0]&&e.push(t[n.field]),e},[])}return e.map(function(e){return e[n.field]||0})},t.prototype.getThemeOptions=function(){var e=this.view.getTheme();return z(e,[`components`,`slider`,`common`],{})},t.prototype.getMinMaxText=function(e,t){var n=this.view.getOptions().data,r=this.view.getXScale(),i=!0,a=Te(n,r.field);r.isLinear&&(a=a.sort());var o=i?a:a.reverse(),s=It(n);if(!r||!s)return{};var c=It(o),l=Math.round(e*(c-1)),u=Math.round(t*(c-1)),d=z(o,[l]),f=z(o,[u]),p=this.getSliderCfg().formatter;return p&&(d=p(d,n[l],l),f=p(f,n[u],u)),{minText:d,maxText:f}},t.prototype.changeViewData=function(e,t){var n=this.view.getOptions().data,r=this.view.getXScale(),i=It(n);if(!(!r||!i)){var a=!0,o=Te(n,r.field),s=this.view.getXScale().isLinear?o.sort(function(e,t){return Number(e)-Number(t)}):o,c=a?s:s.reverse(),l=It(c),u=Math.round(e*(l-1)),d=Math.round(t*(l-1));this.view.filter(r.field,function(e,t){var n=c.indexOf(e);return n>-1?Sm(n,u,d):!0}),this.view.render(!0)}},t.prototype.getComponents=function(){return this.slider?[this.slider]:[]},t.prototype.clear=function(){this.slider&&=(this.slider.component.destroy(),void 0),this.width=0,this.start=void 0,this.end=void 0},t}(t_),VC=0,HC=8,UC=32,WC=20,GC=function(e){l(t,e);function t(t){var n=e.call(this,t)||this;return n.onChangeFn=Ft,n.resetMeasure=function(){n.clear()},n.onValueChange=function(e){var t=e.ratio,r=n.getValidScrollbarCfg().animate;n.ratio=Fe(t,0,1);var i=n.view.getOptions().animate;r||n.view.animate(!1),n.changeViewData(n.getScrollRange(),!0),n.view.animate(i)},n.container=n.view.getLayer(Vt.FORE).addGroup(),n.onChangeFn=jt(n.onValueChange,20,{leading:!0}),n.trackLen=0,n.thumbLen=0,n.ratio=0,n.view.on(V.BEFORE_CHANGE_DATA,n.resetMeasure),n.view.on(V.BEFORE_CHANGE_SIZE,n.resetMeasure),n}return Object.defineProperty(t.prototype,`name`,{get:function(){return`scrollbar`},enumerable:!1,configurable:!0}),t.prototype.destroy=function(){e.prototype.destroy.call(this),this.view.off(V.BEFORE_CHANGE_DATA,this.resetMeasure),this.view.off(V.BEFORE_CHANGE_SIZE,this.resetMeasure)},t.prototype.init=function(){},t.prototype.render=function(){this.option=this.view.getOptions().scrollbar,this.option?this.scrollbar?this.scrollbar=this.updateScrollbar():(this.scrollbar=this.createScrollbar(),this.scrollbar.component.on(`scrollchange`,this.onChangeFn)):this.scrollbar&&=(this.scrollbar.component.destroy(),void 0)},t.prototype.layout=function(){var e=this;if(this.option&&!this.trackLen&&(this.measureScrollbar(),setTimeout(function(){e.view.destroyed||e.changeViewData(e.getScrollRange(),!0)})),this.scrollbar){var t=this.view.coordinateBBox.width,n=this.scrollbar.component.get(`padding`),r=this.scrollbar.component.getLayoutBBox(),i=new Em(r.x,r.y,Math.min(r.width,t),r.height).expand(n),o=this.getScrollbarComponentCfg(),s=void 0,c=void 0;if(o.isHorizontal){var l=a(IC(this.view.viewBBox,i,B.BOTTOM),2);l[0];var u=l[1],d=a(IC(this.view.coordinateBBox,i,B.BOTTOM),2),f=d[0];d[1],s=f,c=u}else{var p=a(IC(this.view.viewBBox,i,B.RIGHT),2);p[0];var u=p[1],m=a(IC(this.view.viewBBox,i,B.RIGHT),2),f=m[0];m[1],s=f,c=u}s+=n[3],c+=n[0],this.trackLen?this.scrollbar.component.update(_(_({},o),{x:s,y:c,trackLen:this.trackLen,thumbLen:this.thumbLen,thumbOffset:(this.trackLen-this.thumbLen)*this.ratio})):this.scrollbar.component.update(_(_({},o),{x:s,y:c})),this.view.viewBBox=this.view.viewBBox.cut(i,o.isHorizontal?B.BOTTOM:B.RIGHT)}},t.prototype.update=function(){this.render()},t.prototype.getComponents=function(){return this.scrollbar?[this.scrollbar]:[]},t.prototype.clear=function(){this.scrollbar&&=(this.scrollbar.component.destroy(),void 0),this.trackLen=0,this.thumbLen=0,this.ratio=0,this.cnt=0,this.step=0,this.data=void 0,this.xScaleCfg=void 0,this.yScalesCfg=[]},t.prototype.setValue=function(e){this.onValueChange({ratio:e})},t.prototype.getValue=function(){return this.ratio},t.prototype.getThemeOptions=function(){var e=this.view.getTheme();return z(e,[`components`,`scrollbar`,`common`],{})},t.prototype.getScrollbarTheme=function(e){var t=z(this.view.getTheme(),[`components`,`scrollbar`]),n=e||{},r=n.thumbHighlightColor,i=o(n,[`thumbHighlightColor`]);return{default:R({},z(t,[`default`,`style`],{}),i),hover:R({},z(t,[`hover`,`style`],{}),{thumbColor:r})}},t.prototype.measureScrollbar=function(){var e=this.view.getXScale(),t=this.view.getYScales().slice();this.data=this.getScrollbarData(),this.step=this.getStep(),this.cnt=this.getCnt();var n=this.getScrollbarComponentCfg(),r=n.trackLen,i=n.thumbLen;this.trackLen=r,this.thumbLen=i,this.xScaleCfg={field:e.field,values:e.values||[]},this.yScalesCfg=t},t.prototype.getScrollRange=function(){var e=Math.floor((this.cnt-this.step)*Fe(this.ratio,0,1)),t=Math.min(e+this.step-1,this.cnt-1);return[e,t]},t.prototype.changeViewData=function(e,t){var n=this,r=a(e,2),i=r[0],o=r[1],s=this.getValidScrollbarCfg().type!==`vertical`,c=Te(this.data,this.xScaleCfg.field),l=this.view.getXScale().isLinear?c.sort(function(e,t){return Number(e)-Number(t)}):c,u=s?l:l.reverse();this.yScalesCfg.forEach(function(e){n.view.scale(e.field,{formatter:e.formatter,type:e.type,min:e.min,max:e.max,tickMethod:e.tickMethod})}),this.view.filter(this.xScaleCfg.field,function(e){var t=u.indexOf(e);return t>-1?Sm(t,i,o):!0}),this.view.render(!0)},t.prototype.createScrollbar=function(){var e=this.getValidScrollbarCfg().type!==`vertical`,t=new am(_(_({container:this.container},this.getScrollbarComponentCfg()),{x:0,y:0}));return t.init(),{component:t,layer:Vt.FORE,direction:e?B.BOTTOM:B.RIGHT,type:Ht.SCROLLBAR}},t.prototype.updateScrollbar=function(){var e=this.getScrollbarComponentCfg(),t=this.trackLen?_(_({},e),{trackLen:this.trackLen,thumbLen:this.thumbLen,thumbOffset:(this.trackLen-this.thumbLen)*this.ratio}):_({},e);return this.scrollbar.component.update(t),this.scrollbar},t.prototype.getStep=function(){if(this.step)return this.step;var e=this.view.coordinateBBox,t=this.getValidScrollbarCfg(),n=t.type,r=t.categorySize,i=n!==`vertical`;return Math.floor((i?e.width:e.height)/r)},t.prototype.getCnt=function(){if(this.cnt)return this.cnt;var e=this.view.getXScale(),t=this.getScrollbarData(),n=Te(t,e.field);return It(n)},t.prototype.getScrollbarComponentCfg=function(){var e=this.view,t=e.coordinateBBox,n=e.viewBBox,r=this.getValidScrollbarCfg(),i=r.type,o=r.padding,s=r.width,c=r.height,l=r.style,u=i!==`vertical`,d=a(o,4),f=d[0],p=d[1],m=d[2],h=d[3],g=u?{x:t.minX+h,y:n.maxY-c-m}:{x:n.maxX-s-p,y:t.minY+f},v=this.getStep(),y=this.getCnt(),b=u?t.width-h-p:t.height-f-m,x=Math.max(b*Fe(v/y,0,1),WC);return _(_({},this.getThemeOptions()),{x:g.x,y:g.y,size:u?c:s,isHorizontal:u,trackLen:b,thumbLen:x,thumbOffset:0,theme:this.getScrollbarTheme(l)})},t.prototype.getValidScrollbarCfg=function(){var e={type:`horizontal`,categorySize:UC,width:HC,height:HC,padding:[0,0,0,0],animate:!0,style:{}};return P(this.option)&&(e=_(_({},e),this.option)),(!P(this.option)||!this.option.padding)&&(e.padding=e.type===`horizontal`?[VC,0,VC,0]:[0,VC,0,VC]),e},t.prototype.getScrollbarData=function(){var e=this.view.getCoordinate(),t=this.getValidScrollbarCfg(),n=this.view.getOptions().data||[];return e.isReflect(`y`)&&t.type===`vertical`&&(n=s([],a(n),!1).reverse()),n},t}(t_),KC={fill:`#CCD6EC`,opacity:.3};function qC(e,t,n){var r,i,a,o,s,c,l=Rg(e,t,n);if(l.length){l=pe(l);try{for(var u=E(l),d=u.next();!d.done;d=u.next()){var f=d.value;try{for(var p=(a=void 0,E(f)),m=p.next();!m.done;m=p.next()){var h=m.value,g=h.mappingData,_=g.x,v=g.y;h.x=N(_)?_[_.length-1]:_,h.y=N(v)?v[v.length-1]:v}}catch(e){a={error:e}}finally{try{m&&!m.done&&(o=p.return)&&o.call(p)}finally{if(a)throw a.error}}}}catch(e){r={error:e}}finally{try{d&&!d.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}if(n.shared===!1&&l.length>1){var y=l[0],b=Math.abs(t.y-y[0].y);try{for(var x=E(l),S=x.next();!S.done;S=x.next()){var C=S.value,w=Math.abs(t.y-C[0].y);w<=b&&(y=C,b=w)}}catch(e){s={error:e}}finally{try{S&&!S.done&&(c=x.return)&&c.call(x)}finally{if(s)throw s.error}}l=[y]}return we(pe(l))}return[]}var JC=function(e){l(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.show=function(e){var t=this.context.view,n=this.context.event,r=t.getController(`tooltip`).getTooltipCfg(),i=qC(t,{x:n.x,y:n.y},r);if(!Ct(i,this.items)&&(this.items=i,i.length)){var a=t.getXScale().field,o=i[0].data[a],s=[],c=t.geometries;if(F(c,function(e){if(e.type===`interval`||e.type===`schema`){var t=e.getElementsBy(function(e){return e.getData()[a]===o});s=s.concat(t)}}),s.length){var l=t.getCoordinate(),u=s[0].shape.getCanvasBBox(),d=s[0].shape.getCanvasBBox(),f=u;F(s,function(e){var t=e.shape.getCanvasBBox();l.isTransposed?(t.minY<u.minY&&(u=t),t.maxY>d.maxY&&(d=t)):(t.minX<u.minX&&(u=t),t.maxX>d.maxX&&(d=t)),f.x=Math.min(t.minX,f.minX),f.y=Math.min(t.minY,f.minY),f.width=Math.max(t.maxX,f.maxX)-f.x,f.height=Math.max(t.maxY,f.maxY)-f.y});var p=t.backgroundGroup,m=t.coordinateBBox,h=void 0;if(l.isRect){var g=t.getXScale(),v=e||{},y=v.appendRatio,b=v.appendWidth;M(b)&&(y=M(y)?g.isLinear?0:.25:y,b=l.isTransposed?y*d.height:y*u.width);var x=void 0,S=void 0,C=void 0,w=void 0;l.isTransposed?(x=m.minX,S=Math.min(d.minY,u.minY)-b,C=m.width,w=f.height+b*2):(x=Math.min(u.minX,d.minX)-b,S=m.minY,C=f.width+b*2,w=m.height),h=[[`M`,x,S],[`L`,x+C,S],[`L`,x+C,S+w],[`L`,x,S+w],[`Z`]]}else{var T=Ee(s),E=De(s),D=ym(T.getModel(),l).startAngle,O=ym(E.getModel(),l).endAngle,k=l.getCenter(),A=l.getRadius(),ee=l.innerRadius*A;h=_m(k.x,k.y,A,D,O,ee)}if(this.regionPath)this.regionPath.attr(`path`,h),this.regionPath.show();else{var te=z(e,`style`,KC);this.regionPath=p.addShape({type:`path`,name:`active-region`,capture:!1,attrs:_(_({},te),{path:h})})}}}},t.prototype.hide=function(){this.regionPath&&this.regionPath.hide(),this.items=null},t.prototype.destroy=function(){this.hide(),this.regionPath&&this.regionPath.remove(!0),e.prototype.destroy.call(this)},t}(ih),YC=function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.timeStamp=0,t}return t.prototype.show=function(){var e=this.context,t=e.event,n=e.view;if(!n.isTooltipLocked()){var r=this.timeStamp,i=+new Date,a=z(e.view.getOptions(),`tooltip.showDelay`,16);if(i-r>a){var o=this.location,s={x:t.x,y:t.y};(!o||!Ct(o,s))&&this.showTooltip(n,s),this.timeStamp=i,this.location=s}}},t.prototype.hide=function(){var e=this.context.view,t=e.getController(`tooltip`),n=this.context.event,r=n.clientX,i=n.clientY;t.isCursorEntered({x:r,y:i})||e.isTooltipLocked()||(this.hideTooltip(e),this.location=null)},t.prototype.showTooltip=function(e,t){e.showTooltip(t)},t.prototype.hideTooltip=function(e){e.hideTooltip()},t}(ih),XC=function(e){l(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.showTooltip=function(e,t){var n=Qh(e);F(n,function(n){var r=eg(e,n,t);n.showTooltip(r)})},t.prototype.hideTooltip=function(e){var t=Qh(e);F(t,function(e){e.hideTooltip()})},t}(YC),ZC=function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.timeStamp=0,t}return t.prototype.destroy=function(){e.prototype.destroy.call(this),this.tooltip&&this.tooltip.destroy()},t.prototype.show=function(){var e=this.context.event,t=this.timeStamp,n=+new Date;if(n-t>16){var r=this.location,i={x:e.x,y:e.y};(!r||!Ct(r,i))&&this.showTooltip(i),this.timeStamp=n,this.location=i}},t.prototype.hide=function(){this.hideTooltip(),this.location=null},t.prototype.showTooltip=function(e){var t=this.context,n=t.event.target;if(n&&n.get(`tip`)){if(!this.tooltip)this.renderTooltip();else{var r=t.view.canvas,i={start:{x:0,y:0},end:{x:r.get(`width`),y:r.get(`height`)}};this.tooltip.set(`region`,i)}var a=n.get(`tip`);this.tooltip.update(_({title:a},e)),this.tooltip.show()}},t.prototype.hideTooltip=function(){this.tooltip&&this.tooltip.hide()},t.prototype.renderTooltip=function(){var e,t=this.context.view,n=t.canvas,r={start:{x:0,y:0},end:{x:n.get(`width`),y:n.get(`height`)}},i=t.getTheme(),a=z(i,[`components`,`tooltip`,`domStyles`],{}),o=new fm({parent:n.get(`el`).parentNode,region:r,visible:!1,crosshairs:null,domStyles:_({},R({},a,(e={},e[wp]={"max-width":`50%`},e[Tp]={"word-break":`break-all`},e)))});o.init(),o.setCapture(!1),this.tooltip=o},t}(ih),QC=function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.stateName=``,t}return t.prototype.hasState=function(e){return e.hasState(this.stateName)},t.prototype.setElementState=function(e,t){e.setState(this.stateName,t)},t.prototype.setState=function(){this.setStateEnable(!0)},t.prototype.clear=function(){var e=this.context.view;this.clearViewState(e)},t.prototype.clearViewState=function(e){var t=this,n=Hh(e,this.stateName);F(n,function(e){t.setElementState(e,!1)})},t}(ih);function $C(e){return z(e.get(`delegateObject`),`item`)}var ew=function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.ignoreListItemStates=[`unchecked`],t}return t.prototype.isItemIgnore=function(e,t){return!!this.ignoreListItemStates.filter(function(n){return t.hasState(e,n)}).length},t.prototype.setStateByComponent=function(e,t,n){var r=this.context.view,i=e.get(`field`),a=Bh(r);this.setElementsStateByItem(a,i,t,n)},t.prototype.setStateByElement=function(e,t){this.setElementState(e,t)},t.prototype.isMathItem=function(e,t,n){var r=this.context.view,i=ng(r,t),a=Uh(e,t);return!M(a)&&n.name===i.getText(a)},t.prototype.setElementsStateByItem=function(e,t,n,r){var i=this;F(e,function(e){i.isMathItem(e,t,n)&&e.setState(i.stateName,r)})},t.prototype.setStateEnable=function(e){var t=Oh(this.context);if(t)Ah(this.context)&&this.setStateByElement(t,e);else{var n=kh(this.context);if(jh(n)){var r=n.item,i=n.component;if(r&&i&&!this.isItemIgnore(r,i)){var a=this.context.event.gEvent;if(a&&a.fromShape&&a.toShape&&$C(a.fromShape)===$C(a.toShape))return;this.setStateByComponent(i,r,e)}}}},t.prototype.toggle=function(){var e=Oh(this.context);if(e){var t=e.hasState(this.stateName);this.setElementState(e,!t)}},t.prototype.reset=function(){this.setStateEnable(!1)},t}(QC),tw=function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.stateName=`active`,t}return t.prototype.active=function(){this.setState()},t}(ew),nw=function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.cache={},t}return t.prototype.getColorScale=function(e,t){var n=t.geometry.getAttribute(`color`);return n?e.getScaleByField(n.getFields()[0]):null},t.prototype.getLinkPath=function(e,t){var n=this.context.view.getCoordinate().isTransposed,r=e.shape.getCanvasBBox(),i=t.shape.getCanvasBBox();return n?[[`M`,r.minX,r.minY],[`L`,i.minX,i.maxY],[`L`,i.maxX,i.maxY],[`L`,r.maxX,r.minY],[`Z`]]:[[`M`,r.maxX,r.minY],[`L`,i.minX,i.minY],[`L`,i.minX,i.maxY],[`L`,r.maxX,r.maxY],[`Z`]]},t.prototype.addLinkShape=function(e,t,n,r){var i={opacity:.4,fill:t.shape.attr(`fill`)};e.addShape({type:`path`,attrs:_(_({},R({},i,j(r)?r(i,t):r)),{path:this.getLinkPath(t,n)})})},t.prototype.linkByElement=function(e,t){var n=this,r=this.context.view,i=this.getColorScale(r,e);if(i){var a=Uh(e,i.field);if(!this.cache[a]){var o=Vh(r,i.field,a),s=this.linkGroup.addGroup();this.cache[a]=s;var c=o.length;F(o,function(e,r){if(r<c-1){var i=o[r+1];n.addLinkShape(s,e,i,t)}})}}},t.prototype.removeLink=function(e){var t=this.getColorScale(this.context.view,e);if(t){var n=Uh(e,t.field);this.cache[n]&&(this.cache[n].remove(),this.cache[n]=null)}},t.prototype.link=function(e){var t=this.context;this.linkGroup||=t.view.foregroundGroup.addGroup({id:`link-by-color-group`,capture:!1});var n=Oh(t);n&&this.linkByElement(n,e?.style)},t.prototype.unlink=function(){var e=Oh(this.context);e&&this.removeLink(e)},t.prototype.clear=function(){this.linkGroup&&this.linkGroup.clear(),this.cache={}},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.linkGroup&&this.linkGroup.remove()},t}(ih),rw=function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.startPoint=null,t.endPoint=null,t.isStarted=!1,t.effectSiblings=!1,t.effectByRecord=!1,t}return t.prototype.getCurrentPoint=function(){var e=this.context.event;return{x:e.x,y:e.y}},t.prototype.start=function(){this.clear(),this.startPoint=this.getCurrentPoint(),this.isStarted=!0},t.prototype.getIntersectElements=function(){var e=null;if(Nh(this.context))e=Fh(this.context,10);else{var t=this.startPoint,n=this.isStarted?this.getCurrentPoint():this.endPoint;if(!t||!n)return;var r={minX:Math.min(t.x,n.x),minY:Math.min(t.y,n.y),maxX:Math.max(t.x,n.x),maxY:Math.max(t.y,n.y)},i=this.context.view;e=Gh(i,r)}return e},t.prototype.setStateEnable=function(e){if(this.effectSiblings&&!this.effectByRecord)this.setSiblingsState(e);else{var t=Bh(this.context.view),n=this.getIntersectElements();n&&n.length?this.effectByRecord?this.setSiblingsStateByRecord(n,e):this.setElementsState(n,e,t):this.clear()}},t.prototype.setSiblingsStateByRecord=function(e,t){var n=this,r=this.context.view,i=Qh(r),a=e.map(function(e){return e.getModel().data}),o=r.getXScale().field,s=r.getYScales()[0].field;F(i,function(e){var r=Bh(e),i=r.filter(function(e){var t=e.getModel().data;return tg(a,t,o,s)});n.setElementsState(i,t,r)})},t.prototype.setSiblingsState=function(e){var t=this,n=this.context.view,r=Qh(n);Nh(this.context)&&F(r,function(n){var r=Bh(n),i=Lh(t.context,n,10);i&&i.length?t.setElementsState(i,e,r):t.clearViewState(n)})},t.prototype.setElementsState=function(e,t,n){var r=this;F(n,function(n){e.includes(n)?r.setElementState(n,t):r.setElementState(n,!1)})},t.prototype.end=function(){this.isStarted=!1,this.endPoint=this.getCurrentPoint()},t.prototype.clear=function(){var e=this,t=this.context.view;if(this.effectSiblings){var n=Qh(t);F(n,function(t){e.clearViewState(t)})}else this.clearViewState(t)},t}(QC),iw=function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.stateName=`active`,t}return t.prototype.active=function(){this.setState()},t}(rw),aw=function(e){l(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.setStateEnable=function(e){var t=Oh(this.context);if(t){if(!Ah(this.context))return;e?(this.clear(),this.setElementState(t,!0)):this.hasState(t)&&this.setElementState(t,!1)}},t.prototype.toggle=function(){var e=Oh(this.context);if(e){var t=this.hasState(e);t||this.clear(),this.setElementState(e,!t)}},t.prototype.reset=function(){this.setStateEnable(!1)},t}(QC),ow=function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.stateName=`active`,t}return t.prototype.active=function(){this.setState()},t}(aw),sw=`inactive`,cw=`active`;function lw(e){var t=Bh(e);F(t,function(e){e.hasState(cw)&&e.setState(cw,!1),e.hasState(sw)&&e.setState(sw,!1)})}function uw(e,t,n){F(e,function(e){t(e)?(e.hasState(sw)&&e.setState(sw,!1),e.setState(cw,n)):(e.hasState(cw)&&e.setState(cw,!1),e.setState(sw,n))})}var dw=Kt.INACTIVE,fw=Kt.ACTIVE,pw=function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.stateName=fw,t}return t.prototype.setElementsStateByItem=function(e,t,n,r){var i=this;this.setHighlightBy(e,function(e){return i.isMathItem(e,t,n)},r)},t.prototype.setElementHighlight=function(e,t){t(e)?(e.hasState(dw)&&e.setState(dw,!1),e.setState(fw,!0)):e.hasState(fw)||e.setState(dw,!0)},t.prototype.setHighlightBy=function(e,t,n){var r=this;if(n)F(e,function(e){r.setElementHighlight(e,t)});else{var i=Hh(this.context.view,fw),a=!0;F(i,function(e){if(!t(e))return a=!1,!1}),a?this.clear():F(e,function(e){t(e)&&(e.hasState(fw)&&e.setState(fw,!1),e.setState(dw,!0))})}},t.prototype.setElementState=function(e,t){var n=this.context.view,r=Bh(n);this.setHighlightBy(r,function(t){return e===t},t)},t.prototype.highlight=function(){this.setState()},t.prototype.clear=function(){var e=this.context.view;lw(e)},t}(ew),mw=function(e){l(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.setStateByElement=function(e,t){var n=this.context.view,r=e.geometry.getAttribute(`color`);if(r){var i=n.getScaleByField(r.getFields()[0]),a=Uh(e,i.field),o=Bh(n),s=o.filter(function(e){return Uh(e,i.field)===a});this.setHighlightBy(o,function(e){return s.includes(e)},t)}},t}(pw),hw=function(e){l(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.setElementHighlight=function(e,t){t(e)?(e.hasState(dw)&&e.setState(dw,!1),e.setState(fw,!0)):(e.setState(dw,!0),e.hasState(fw)&&e.setState(fw,!1))},t.prototype.setStateByElement=function(e,t){var n=this.context.view,r=n.getXScale(),i=Uh(e,r.field),a=Bh(n),o=a.filter(function(e){return Uh(e,r.field)===i});this.setHighlightBy(a,function(e){return o.includes(e)},t)},t.prototype.toggle=function(){var e=Oh(this.context);if(e){var t=e.hasState(this.stateName);this.setStateByElement(e,!t)}},t}(pw),gw;(function(e){e.BEFORE_HIGHLIGHT=`element-range-highlight:beforehighlight`,e.AFTER_HIGHLIGHT=`element-range-highlight:afterhighlight`,e.BEFORE_CLEAR=`element-range-highlight:beforeclear`,e.AFTER_CLEAR=`element-range-highlight:afterclear`})(gw||={});var _w=function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.stateName=`active`,t}return t.prototype.clearViewState=function(e){lw(e)},t.prototype.highlight=function(){var e=this.context,t=e.view,n=e.event,r=this.getIntersectElements(),i={view:t,event:n,highlightElements:r};t.emit(gw.BEFORE_HIGHLIGHT,Kg.fromData(t,gw.BEFORE_HIGHLIGHT,i)),this.setState(),t.emit(gw.AFTER_HIGHLIGHT,Kg.fromData(t,gw.AFTER_HIGHLIGHT,i))},t.prototype.clear=function(){var t=this.context.view;t.emit(gw.BEFORE_CLEAR,Kg.fromData(t,gw.BEFORE_CLEAR,{})),e.prototype.clear.call(this),t.emit(gw.AFTER_CLEAR,Kg.fromData(t,gw.AFTER_CLEAR,{}))},t.prototype.setElementsState=function(e,t,n){uw(n,function(t){return e.indexOf(t)>=0},t)},t}(rw),vw=function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.stateName=`active`,t}return t.prototype.highlight=function(){this.setState()},t.prototype.setElementState=function(e,t){var n=this.context.view,r=Bh(n);uw(r,function(t){return e===t},t)},t.prototype.clear=function(){var e=this.context.view;lw(e)},t}(aw),yw=function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.stateName=`selected`,t}return t.prototype.selected=function(){this.setState()},t}(rw),bw=function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.stateName=`selected`,t}return t.prototype.selected=function(){this.setState()},t}(ew),xw=function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.stateName=`selected`,t}return t.prototype.selected=function(){this.setState()},t}(aw),Sw=function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.stateName=``,t.ignoreItemStates=[],t}return t.prototype.getTriggerListInfo=function(){var e=kh(this.context),t=null;return jh(e)&&(t={item:e.item,list:e.component}),t},t.prototype.getAllowComponents=function(){var e=this,t=this.context.view,n=Jh(t),r=[];return F(n,function(t){t.isList()&&e.allowSetStateByElement(t)&&r.push(t)}),r},t.prototype.hasState=function(e,t){return e.hasState(t,this.stateName)},t.prototype.clearAllComponentsState=function(){var e=this,t=this.getAllowComponents();F(t,function(t){t.clearItemsState(e.stateName)})},t.prototype.allowSetStateByElement=function(e){var t=e.get(`field`);if(!t)return!1;if(this.cfg&&this.cfg.componentNames){var n=e.get(`name`);if(this.cfg.componentNames.indexOf(n)===-1)return!1}var r=this.context.view,i=ng(r,t);return i&&i.isCategory},t.prototype.allowSetStateByItem=function(e,t){var n=this.ignoreItemStates;return n.length?n.filter(function(n){return t.hasState(e,n)}).length===0:!0},t.prototype.setStateByElement=function(e,t,n){var r=e.get(`field`),i=this.context.view,a=ng(i,r),o=Uh(t,r),s=a.getText(o);this.setItemsState(e,s,n)},t.prototype.setStateEnable=function(e){var t=this,n=Oh(this.context);if(n){var r=this.getAllowComponents();F(r,function(r){t.setStateByElement(r,n,e)})}else{var i=kh(this.context);if(jh(i)){var a=i.item,o=i.component;this.allowSetStateByElement(o)&&this.allowSetStateByItem(a,o)&&this.setItemState(o,a,e)}}},t.prototype.setItemsState=function(e,t,n){var r=this,i=e.getItems();F(i,function(i){i.name===t&&r.setItemState(e,i,n)})},t.prototype.setItemState=function(e,t,n){e.setItemState(t,this.stateName,n)},t.prototype.setState=function(){this.setStateEnable(!0)},t.prototype.reset=function(){this.setStateEnable(!1)},t.prototype.toggle=function(){var e=this.getTriggerListInfo();if(e&&e.item){var t=e.list,n=e.item,r=this.hasState(t,n);this.setItemState(t,n,!r)}},t.prototype.clear=function(){var e=this.getTriggerListInfo();e?e.list.clearItemsState(this.stateName):this.clearAllComponentsState()},t}(ih),Cw=function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.stateName=`active`,t}return t.prototype.active=function(){this.setState()},t}(Sw),ww=`inactive`,Tw=`active`;function Ew(e){var t=e.getItems();F(t,function(t){e.hasState(t,Tw)&&e.setItemState(t,Tw,!1),e.hasState(t,ww)&&e.setItemState(t,ww,!1)})}var Dw=`inactive`,Ow=`active`,kw=function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.stateName=Ow,t.ignoreItemStates=[`unchecked`],t}return t.prototype.setItemsState=function(e,t,n){this.setHighlightBy(e,function(e){return e.name===t},n)},t.prototype.setItemState=function(e,t,n){e.getItems(),this.setHighlightBy(e,function(e){return e===t},n)},t.prototype.setHighlightBy=function(e,t,n){var r=e.getItems();if(n)F(r,function(n){t(n)?(e.hasState(n,Dw)&&e.setItemState(n,Dw,!1),e.setItemState(n,Ow,!0)):e.hasState(n,Ow)||e.setItemState(n,Dw,!0)});else{var i=e.getItemsByState(Ow),a=!0;F(i,function(e){if(!t(e))return a=!1,!1}),a?this.clear():F(r,function(n){t(n)&&(e.hasState(n,Ow)&&e.setItemState(n,Ow,!1),e.setItemState(n,Dw,!0))})}},t.prototype.highlight=function(){this.setState()},t.prototype.clear=function(){var e=this.getTriggerListInfo();if(e)Ew(e.list);else{var t=this.getAllowComponents();F(t,function(e){e.clearItemsState(Ow),e.clearItemsState(Dw)})}},t}(Sw),Aw=function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.stateName=`selected`,t}return t.prototype.selected=function(){this.setState()},t}(Sw),jw=function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.stateName=`unchecked`,t}return t.prototype.unchecked=function(){this.setState()},t}(Sw),Mw=`unchecked`,Nw=`checked`,Pw=function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.stateName=Nw,t}return t.prototype.setItemState=function(e,t,n){this.setCheckedBy(e,function(e){return e===t},n)},t.prototype.setCheckedBy=function(e,t,n){var r=e.getItems();n&&F(r,function(n){t(n)?(e.hasState(n,Mw)&&e.setItemState(n,Mw,!1),e.setItemState(n,Nw,!0)):e.hasState(n,Nw)||e.setItemState(n,Mw,!0)})},t.prototype.toggle=function(){var e=this.getTriggerListInfo();if(e&&e.item){var t=e.list,n=e.item;!ke(t.getItems(),function(e){return t.hasState(e,Mw)})||t.hasState(n,Mw)?this.setItemState(t,n,!0):this.reset()}},t.prototype.checked=function(){this.setState()},t.prototype.reset=function(){var e=this.getAllowComponents();F(e,function(e){e.clearItemsState(Nw),e.clearItemsState(Mw)})},t}(Sw),Fw=`unchecked`,Iw=function(e){l(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.toggle=function(){var e,t,n,r,i,a,o,s,c=this.getTriggerListInfo();if(c?.item){var l=c.list,u=c.item,d=l.getItems(),f=d.filter(function(e){return!l.hasState(e,Fw)}),p=d.filter(function(e){return l.hasState(e,Fw)}),m=f[0];if(d.length===f.length)try{for(var h=E(d),g=h.next();!g.done;g=h.next()){var _=g.value;l.setItemState(_,Fw,_.id!==u.id)}}catch(t){e={error:t}}finally{try{g&&!g.done&&(t=h.return)&&t.call(h)}finally{if(e)throw e.error}}else if(d.length-p.length===1)if(m.id===u.id)try{for(var v=E(d),y=v.next();!y.done;y=v.next()){var _=y.value;l.setItemState(_,Fw,!1)}}catch(e){n={error:e}}finally{try{y&&!y.done&&(r=v.return)&&r.call(v)}finally{if(n)throw n.error}}else try{for(var b=E(d),x=b.next();!x.done;x=b.next()){var _=x.value;l.setItemState(_,Fw,_.id!==u.id)}}catch(e){i={error:e}}finally{try{x&&!x.done&&(a=b.return)&&a.call(b)}finally{if(i)throw i.error}}else try{for(var S=E(d),C=S.next();!C.done;C=S.next()){var _=C.value;l.setItemState(_,Fw,_.id!==u.id)}}catch(e){o={error:e}}finally{try{C&&!C.done&&(s=S.return)&&s.call(S)}finally{if(o)throw o.error}}}},t}(Sw),Lw=`showRadio`,Rw=`legend-radio-tip`,zw=function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.timeStamp=0,t}return t.prototype.show=function(){var e=this.getTriggerListInfo();if(e?.item){var t=e.list,n=e.item;t.setItemState(n,Lw,!0)}},t.prototype.hide=function(){var e=this.getTriggerListInfo();if(e?.item){var t=e.list,n=e.item;t.setItemState(n,Lw,!1)}},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.tooltip&&this.tooltip.destroy()},t.prototype.showTip=function(){var e=this.context.event,t=this.timeStamp,n=+new Date,r=this.context.event.target;if(n-t>16&&r.get(`name`)===`legend-item-radio`){var i=this.location,a={x:e.x,y:e.y};this.timeStamp=n,this.location=a,(!i||!Ct(i,a))&&this.showTooltip(a)}},t.prototype.hideTip=function(){this.hideTooltip(),this.location=null},t.prototype.showTooltip=function(e){var t=this.context,n=t.event.target;if(n&&n.get(`tip`)){this.tooltip||this.renderTooltip();var r=t.view.getCanvas().get(`el`).getBoundingClientRect(),i=r.x,a=r.y;this.tooltip.update(_(_({title:n.get(`tip`)},e),{x:e.x+i,y:e.y+a})),this.tooltip.show()}},t.prototype.hideTooltip=function(){this.tooltip&&this.tooltip.hide()},t.prototype.renderTooltip=function(){var e,t=(e={},e[wp]={padding:`6px 8px`,transform:`translate(-50%, -80%)`,background:`rgba(0,0,0,0.75)`,color:`#fff`,"border-radius":`2px`,"z-index":100},e[Tp]={"font-size":`12px`,"line-height":`14px`,"margin-bottom":0,"word-break":`break-all`},e);document.getElementById(Rw)&&document.body.removeChild(document.getElementById(Rw));var n=new fm({parent:document.body,region:null,visible:!1,crosshairs:null,domStyles:t,containerId:Rw});n.init(),n.setCapture(!1),this.tooltip=n},t}(Sw),Bw=function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.maskShape=null,t.points=[],t.starting=!1,t.moving=!1,t.preMovePoint=null,t.shapeType=`path`,t}return t.prototype.getCurrentPoint=function(){var e=this.context.event;return{x:e.x,y:e.y}},t.prototype.emitEvent=function(e){var t=`mask:${e}`,n=this.context.view,r=this.context.event;n.emit(t,{target:this.maskShape,shape:this.maskShape,points:this.points,x:r.x,y:r.y})},t.prototype.createMask=function(){var e=this.context.view,t=this.getMaskAttrs();return e.foregroundGroup.addShape({type:this.shapeType,name:`mask`,draggable:!0,attrs:_({fill:`#C5D4EB`,opacity:.3},t)})},t.prototype.getMaskPath=function(){return[]},t.prototype.show=function(){this.maskShape&&(this.maskShape.show(),this.emitEvent(`show`))},t.prototype.start=function(e){this.starting=!0,this.moving=!1,this.points=[this.getCurrentPoint()],this.maskShape||(this.maskShape=this.createMask(),this.maskShape.set(`capture`,!1)),this.updateMask(e?.maskStyle),this.emitEvent(`start`)},t.prototype.moveStart=function(){this.moving=!0,this.preMovePoint=this.getCurrentPoint()},t.prototype.move=function(){if(!(!this.moving||!this.maskShape)){var e=this.getCurrentPoint(),t=this.preMovePoint,n=e.x-t.x,r=e.y-t.y,i=this.points;F(i,function(e){e.x+=n,e.y+=r}),this.updateMask(),this.emitEvent(`change`),this.preMovePoint=e}},t.prototype.updateMask=function(e){var t=R({},this.getMaskAttrs(),e);this.maskShape.attr(t)},t.prototype.moveEnd=function(){this.moving=!1,this.preMovePoint=null},t.prototype.end=function(){this.starting=!1,this.emitEvent(`end`),this.maskShape&&this.maskShape.set(`capture`,!0)},t.prototype.hide=function(){this.maskShape&&(this.maskShape.hide(),this.emitEvent(`hide`))},t.prototype.resize=function(){this.starting&&this.maskShape&&(this.points.push(this.getCurrentPoint()),this.updateMask(),this.emitEvent(`change`))},t.prototype.destroy=function(){this.points=[],this.maskShape&&this.maskShape.remove(),this.maskShape=null,this.preMovePoint=null,e.prototype.destroy.call(this)},t}(ih);function Vw(e){var t=De(e),n=0,r=0,i=0;if(e.length){var a=e[0];n=Yh(a,t)/2,r=(t.x+a.x)/2,i=(t.y+a.y)/2}return{x:r,y:i,r:n}}var Hw=function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.shapeType=`circle`,t}return t.prototype.getMaskAttrs=function(){return Vw(this.points)},t}(Bw);function Uw(e){return{start:Ee(e),end:De(e)}}function Ww(e,t){var n=Math.min(e.x,t.x),r=Math.min(e.y,t.y),i=Math.abs(t.x-e.x),a=Math.abs(t.y-e.y);return{x:n,y:r,width:i,height:a}}var Gw=function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.shapeType=`rect`,t}return t.prototype.getRegion=function(){return Uw(this.points)},t.prototype.getMaskAttrs=function(){var e=this.getRegion(),t=e.start,n=e.end;return Ww(t,n)},t}(Bw);function Kw(e){e.x=Fe(e.x,0,1),e.y=Fe(e.y,0,1)}function qw(e,t,n,r){var i=null,a=null,o=r.invert(Ee(e)),s=r.invert(De(e));return n&&(Kw(o),Kw(s)),t===`x`?(i=r.convert({x:o.x,y:0}),a=r.convert({x:s.x,y:1})):(i=r.convert({x:0,y:o.y}),a=r.convert({x:1,y:s.y})),{start:i,end:a}}var Jw=function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.dim=`x`,t.inPlot=!0,t}return t.prototype.getRegion=function(){var e=this.context.view.getCoordinate();return qw(this.points,this.dim,this.inPlot,e)},t}(Gw);function Yw(e){var t=[];return e.length&&(F(e,function(e,n){n===0?t.push([`M`,e.x,e.y]):t.push([`L`,e.x,e.y])}),t.push([`L`,e[0].x,e[0].y])),t}function Xw(e){return{path:Yw(e)}}var Zw=function(e){l(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getMaskPath=function(){return Yw(this.points)},t.prototype.getMaskAttrs=function(){return Xw(this.points)},t.prototype.addPoint=function(){this.resize()},t}(Bw);function Qw(e){return Xh(e,!0)}function $w(e){return{path:Qw(e)}}var eT=function(e){l(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getMaskPath=function(){return Qw(this.points)},t.prototype.getMaskAttrs=function(){return $w(this.points)},t}(Zw),tT=function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.maskShapes=[],t.starting=!1,t.moving=!1,t.recordPoints=null,t.preMovePoint=null,t.shapeType=`path`,t.maskType=`multi-mask`,t}return t.prototype.getCurrentPoint=function(){var e=this.context.event;return{x:e.x,y:e.y}},t.prototype.emitEvent=function(e){var t=`${this.maskType}:${e}`,n=this.context.view,r=this.context.event,i={type:this.shapeType,name:this.maskType,get:function(e){return i.hasOwnProperty(e)?i[e]:void 0}};n.emit(t,{target:i,maskShapes:this.maskShapes,multiPoints:this.recordPoints,x:r.x,y:r.y})},t.prototype.createMask=function(e){var t=this.context.view,n=this.recordPoints[e],r=this.getMaskAttrs(n),i=t.foregroundGroup.addShape({type:this.shapeType,name:`mask`,draggable:!0,attrs:_({fill:`#C5D4EB`,opacity:.3},r)});this.maskShapes.push(i)},t.prototype.getMaskPath=function(e){return[]},t.prototype.show=function(){this.maskShapes.length>0&&(this.maskShapes.forEach(function(e){return e.show()}),this.emitEvent(`show`))},t.prototype.start=function(e){this.recordPointStart(),this.starting=!0,this.moving=!1;var t=this.recordPoints.length-1;this.createMask(t),this.updateShapesCapture(!1),this.updateMask(e?.maskStyle),this.emitEvent(`start`)},t.prototype.moveStart=function(){this.moving=!0,this.preMovePoint=this.getCurrentPoint(),this.updateShapesCapture(!1)},t.prototype.move=function(){if(!(!this.moving||this.maskShapes.length===0)){var e=this.getCurrentPoint(),t=this.preMovePoint,n=e.x-t.x,r=e.y-t.y,i=this.getCurMaskShapeIndex();i>-1&&(this.recordPoints[i].forEach(function(e){e.x+=n,e.y+=r}),this.updateMask(),this.emitEvent(`change`),this.preMovePoint=e)}},t.prototype.updateMask=function(e){var t=this;this.recordPoints.forEach(function(n,r){var i=R({},t.getMaskAttrs(n),e);t.maskShapes[r].attr(i)})},t.prototype.resize=function(){this.starting&&this.maskShapes.length>0&&(this.recordPointContinue(),this.updateMask(),this.emitEvent(`change`))},t.prototype.moveEnd=function(){this.moving=!1,this.preMovePoint=null,this.updateShapesCapture(!0)},t.prototype.end=function(){this.starting=!1,this.emitEvent(`end`),this.updateShapesCapture(!0)},t.prototype.hide=function(){this.maskShapes.length>0&&(this.maskShapes.forEach(function(e){return e.hide()}),this.emitEvent(`hide`))},t.prototype.remove=function(){var e=this.getCurMaskShapeIndex();e>-1&&(this.recordPoints.splice(e,1),this.maskShapes[e].remove(),this.maskShapes.splice(e,1),this.preMovePoint=null,this.updateShapesCapture(!0),this.emitEvent(`change`))},t.prototype.clearAll=function(){this.recordPointClear(),this.maskShapes.forEach(function(e){return e.remove()}),this.maskShapes=[],this.preMovePoint=null},t.prototype.clear=function(){var e=this.getCurMaskShapeIndex();e===-1?(this.recordPointClear(),this.maskShapes.forEach(function(e){return e.remove()}),this.maskShapes=[],this.emitEvent(`clearAll`)):(this.recordPoints.splice(e,1),this.maskShapes[e].remove(),this.maskShapes.splice(e,1),this.preMovePoint=null,this.emitEvent(`clearSingle`)),this.preMovePoint=null},t.prototype.destroy=function(){this.clear(),e.prototype.destroy.call(this)},t.prototype.getRecordPoints=function(){return s([],a(this.recordPoints??[]),!1)},t.prototype.recordPointStart=function(){var e=this.getRecordPoints(),t=this.getCurrentPoint();this.recordPoints=s(s([],a(e),!1),[[t]],!1)},t.prototype.recordPointContinue=function(){var e=this.getRecordPoints(),t=this.getCurrentPoint(),n=e.splice(-1,1)[0]||[];n.push(t),this.recordPoints=s(s([],a(e),!1),[n],!1)},t.prototype.recordPointClear=function(){this.recordPoints=[]},t.prototype.updateShapesCapture=function(e){this.maskShapes.forEach(function(t){return t.set(`capture`,e)})},t.prototype.getCurMaskShapeIndex=function(){var e=this.getCurrentPoint();return this.maskShapes.findIndex(function(t){var n=t.attrs,r=n.width,i=n.height,a=n.r;return!(r===0||i===0||a===0)&&t.isHit(e.x,e.y)})},t}(ih),nT=function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.shapeType=`rect`,t}return t.prototype.getRegion=function(e){return Uw(e)},t.prototype.getMaskAttrs=function(e){var t=this.getRegion(e),n=t.start,r=t.end;return Ww(n,r)},t}(tT),rT=function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.dim=`x`,t.inPlot=!0,t}return t.prototype.getRegion=function(e){var t=this.context.view.getCoordinate();return qw(e,this.dim,this.inPlot,t)},t}(nT),iT=function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.shapeType=`circle`,t.getMaskAttrs=Vw,t}return t}(tT),aT=function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.getMaskPath=Yw,t.getMaskAttrs=Xw,t}return t.prototype.addPoint=function(){this.resize()},t}(tT),oT=function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.getMaskPath=Qw,t.getMaskAttrs=$w,t}return t}(aT),sT=function(e){l(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.setCursor=function(e){this.context.view.getCanvas().setCursor(e)},t.prototype.default=function(){this.setCursor(`default`)},t.prototype.pointer=function(){this.setCursor(`pointer`)},t.prototype.move=function(){this.setCursor(`move`)},t.prototype.crosshair=function(){this.setCursor(`crosshair`)},t.prototype.wait=function(){this.setCursor(`wait`)},t.prototype.help=function(){this.setCursor(`help`)},t.prototype.text=function(){this.setCursor(`text`)},t.prototype.eResize=function(){this.setCursor(`e-resize`)},t.prototype.wResize=function(){this.setCursor(`w-resize`)},t.prototype.nResize=function(){this.setCursor(`n-resize`)},t.prototype.sResize=function(){this.setCursor(`s-resize`)},t.prototype.neResize=function(){this.setCursor(`ne-resize`)},t.prototype.nwResize=function(){this.setCursor(`nw-resize`)},t.prototype.seResize=function(){this.setCursor(`se-resize`)},t.prototype.swResize=function(){this.setCursor(`sw-resize`)},t.prototype.nsResize=function(){this.setCursor(`ns-resize`)},t.prototype.ewResize=function(){this.setCursor(`ew-resize`)},t.prototype.zoomIn=function(){this.setCursor(`zoom-in`)},t.prototype.zoomOut=function(){this.setCursor(`zoom-out`)},t}(ih),cT=function(e){l(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.filterView=function(e,t,n){var r=this;e.getScaleByField(t)&&e.filter(t,n),e.views&&e.views.length&&F(e.views,function(e){r.filterView(e,t,n)})},t.prototype.filter=function(){var e=kh(this.context);if(e){var t=this.context.view,n=e.component,r=n.get(`field`);if(jh(e)){if(r){var i=n.getItemsByState(`unchecked`),o=ng(t,r),s=i.map(function(e){return e.name});s.length?this.filterView(t,r,function(e){var t=o.getText(e);return!s.includes(t)}):this.filterView(t,r,null),t.render(!0)}}else if(Mh(e)){var c=n.getValue(),l=a(c,2),u=l[0],d=l[1];this.filterView(t,r,function(e){return e>=u&&e<=d}),t.render(!0)}}},t}(ih);function lT(e,t,n,r){var i=Math.min(n[t],r[t]),o=Math.max(n[t],r[t]),s=a(e.range,2),c=s[0],l=s[1];if(i<c&&(i=c),o>l&&(o=l),i===l&&o===l)return null;var u=e.invert(i),d=e.invert(o);if(e.isCategory){var f=e.values.indexOf(u),p=e.values.indexOf(d),m=e.values.slice(f,p+1);return function(e){return m.includes(e)}}else return function(e){return e>=u&&e<=d}}var uT;(function(e){e.FILTER=`brush-filter-processing`,e.RESET=`brush-filter-reset`,e.BEFORE_FILTER=`brush-filter:beforefilter`,e.AFTER_FILTER=`brush-filter:afterfilter`,e.BEFORE_RESET=`brush-filter:beforereset`,e.AFTER_RESET=`brush-filter:afterreset`})(uT||={});var dT=function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.dims=[`x`,`y`],t.startPoint=null,t.isStarted=!1,t}return t.prototype.hasDim=function(e){return this.dims.includes(e)},t.prototype.start=function(){var e=this.context;this.isStarted=!0,this.startPoint=e.getCurrentPoint()},t.prototype.filter=function(){var e,t;if(Nh(this.context)){var n=this.context.event.target.getCanvasBBox();e={x:n.x,y:n.y},t={x:n.maxX,y:n.maxY}}else{if(!this.isStarted)return;e=this.startPoint,t=this.context.getCurrentPoint()}if(!(Math.abs(e.x-t.x)<5||Math.abs(e.x-t.y)<5)){var r=this.context,i=r.view,a=r.event,o={view:i,event:a,dims:this.dims};i.emit(uT.BEFORE_FILTER,Kg.fromData(i,uT.BEFORE_FILTER,o));var s=i.getCoordinate(),c=s.invert(t),l=s.invert(e);if(this.hasDim(`x`)){var u=i.getXScale(),d=lT(u,`x`,c,l);this.filterView(i,u.field,d)}if(this.hasDim(`y`)){var f=i.getYScales()[0],d=lT(f,`y`,c,l);this.filterView(i,f.field,d)}this.reRender(i,{source:uT.FILTER}),i.emit(uT.AFTER_FILTER,Kg.fromData(i,uT.AFTER_FILTER,o))}},t.prototype.end=function(){this.isStarted=!1},t.prototype.reset=function(){var e=this.context.view;if(e.emit(uT.BEFORE_RESET,Kg.fromData(e,uT.BEFORE_RESET,{})),this.isStarted=!1,this.hasDim(`x`)){var t=e.getXScale();this.filterView(e,t.field,null)}if(this.hasDim(`y`)){var n=e.getYScales()[0];this.filterView(e,n.field,null)}this.reRender(e,{source:uT.RESET}),e.emit(uT.AFTER_RESET,Kg.fromData(e,uT.AFTER_RESET,{}))},t.prototype.filterView=function(e,t,n){e.filter(t,n)},t.prototype.reRender=function(e,t){e.render(!0,t)},t}(ih),fT=function(e){l(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.filterView=function(e,t,n){var r=Qh(e);F(r,function(e){e.filter(t,n)})},t.prototype.reRender=function(e){var t=Qh(e);F(t,function(e){e.render(!0)})},t}(dT),pT=function(e){l(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.filter=function(){var e=kh(this.context),t=this.context.view,n=Bh(t);if(Nh(this.context)){var r=Fh(this.context,10);r&&F(n,function(e){r.includes(e)?e.show():e.hide()})}else if(e){var i=e.component,o=i.get(`field`);if(jh(e)){if(o){var s=i.getItemsByState(`unchecked`),c=ng(t,o),l=s.map(function(e){return e.name});F(n,function(e){var t=Uh(e,o),n=c.getText(t);l.indexOf(n)>=0?e.hide():e.show()})}}else if(Mh(e)){var u=i.getValue(),d=a(u,2),f=d[0],p=d[1];F(n,function(e){var t=Uh(e,o);t>=f&&t<=p?e.show():e.hide()})}}},t.prototype.clear=function(){var e=Bh(this.context.view);F(e,function(e){e.show()})},t.prototype.reset=function(){this.clear()},t}(ih),mT=function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.byRecord=!1,t}return t.prototype.filter=function(){Nh(this.context)&&(this.byRecord?this.filterByRecord():this.filterByBBox())},t.prototype.filterByRecord=function(){var e=this.context.view,t=Fh(this.context,10);if(t){var n=e.getXScale().field,r=e.getYScales()[0].field,i=t.map(function(e){return e.getModel().data}),a=Qh(e);F(a,function(e){var t=Bh(e);F(t,function(e){var t=e.getModel().data;tg(i,t,n,r)?e.show():e.hide()})})}},t.prototype.filterByBBox=function(){var e=this,t=this.context.view,n=Qh(t);F(n,function(t){var n=Lh(e.context,t,10),r=Bh(t);n&&F(r,function(e){n.includes(e)?e.show():e.hide()})})},t.prototype.reset=function(){var e=Qh(this.context.view);F(e,function(e){var t=Bh(e);F(t,function(e){e.show()})})},t}(ih),hT=10,gT=5,_T=function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.buttonGroup=null,t.buttonCfg={name:`button`,text:`button`,textStyle:{x:0,y:0,fontSize:12,fill:`#333333`,cursor:`pointer`},padding:[8,10],style:{fill:`#f7f7f7`,stroke:`#cccccc`,cursor:`pointer`},activeStyle:{fill:`#e6e6e6`}},t}return t.prototype.getButtonCfg=function(){return R(this.buttonCfg,this.cfg)},t.prototype.drawButton=function(){var e=this.getButtonCfg(),t=this.context.view.foregroundGroup.addGroup({name:e.name}),n=t.addShape({type:`text`,name:`button-text`,attrs:_({text:e.text},e.textStyle)}).getBBox(),r=Bg(e.padding),i=t.addShape({type:`rect`,name:`button-rect`,attrs:_({x:n.x-r[3],y:n.y-r[0],width:n.width+r[1]+r[3],height:n.height+r[0]+r[2]},e.style)});i.toBack(),t.on(`mouseenter`,function(){i.attr(e.activeStyle)}),t.on(`mouseleave`,function(){i.attr(e.style)}),this.buttonGroup=t},t.prototype.resetPosition=function(){var e=this.context.view.getCoordinate().convert({x:1,y:1}),t=this.buttonGroup,n=t.getBBox(),r=Ir(null,[[`t`,e.x-n.width-hT,e.y+n.height+gT]]);t.setMatrix(r)},t.prototype.show=function(){this.buttonGroup||this.drawButton(),this.resetPosition(),this.buttonGroup.show()},t.prototype.hide=function(){this.buttonGroup&&this.buttonGroup.hide()},t.prototype.destroy=function(){var t=this.buttonGroup;t&&t.remove(),e.prototype.destroy.call(this)},t}(ih),vT=4,yT=function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.starting=!1,t.dragStart=!1,t}return t.prototype.start=function(){this.starting=!0,this.startPoint=this.context.getCurrentPoint()},t.prototype.drag=function(){if(this.startPoint){var e=this.context.getCurrentPoint(),t=this.context.view,n=this.context.event;this.dragStart?t.emit(`drag`,{target:n.target,x:n.x,y:n.y}):Yh(e,this.startPoint)>vT&&(t.emit(`dragstart`,{target:n.target,x:n.x,y:n.y}),this.dragStart=!0)}},t.prototype.end=function(){if(this.dragStart){var e=this.context.view,t=this.context.event;e.emit(`dragend`,{target:t.target,x:t.x,y:t.y})}this.starting=!1,this.dragStart=!1},t}(ih),bT=5,xT=function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.starting=!1,t.isMoving=!1,t.startPoint=null,t.startMatrix=null,t}return t.prototype.start=function(){this.starting=!0,this.startPoint=this.context.getCurrentPoint(),this.startMatrix=this.context.view.middleGroup.getMatrix()},t.prototype.move=function(){if(this.starting){var e=this.startPoint,t=this.context.getCurrentPoint();if(Yh(e,t)>bT&&!this.isMoving&&(this.isMoving=!0),this.isMoving){var n=this.context.view,r=Ir(this.startMatrix,[[`t`,t.x-e.x,t.y-e.y]]);n.backgroundGroup.setMatrix(r),n.foregroundGroup.setMatrix(r),n.middleGroup.setMatrix(r)}}},t.prototype.end=function(){this.isMoving&&=!1,this.startMatrix=null,this.starting=!1,this.startPoint=null},t.prototype.reset=function(){this.starting=!1,this.startPoint=null,this.isMoving=!1;var e=this.context.view;e.backgroundGroup.resetMatrix(),e.foregroundGroup.resetMatrix(),e.middleGroup.resetMatrix(),this.isMoving=!1},t}(ih),ST=`x`,CT=`y`,wT=function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.dims=[ST,CT],t.cfgFields=[`dims`],t.cacheScaleDefs={},t}return t.prototype.hasDim=function(e){return this.dims.includes(e)},t.prototype.getScale=function(e){var t=this.context.view;return e===`x`?t.getXScale():t.getYScales()[0]},t.prototype.resetDim=function(e){var t=this.context.view;if(this.hasDim(e)&&this.cacheScaleDefs[e]){var n=this.getScale(e);t.scale(n.field,this.cacheScaleDefs[e]),this.cacheScaleDefs[e]=null}},t.prototype.reset=function(){this.resetDim(ST),this.resetDim(CT),this.context.view.render(!0)},t}(ih),TT=function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.startPoint=null,t.starting=!1,t.startCache={},t}return t.prototype.start=function(){var e=this;this.startPoint=this.context.getCurrentPoint(),this.starting=!0;var t=this.dims;F(t,function(t){var n=e.getScale(t),r=n.min,i=n.max,a=n.values;e.startCache[t]={min:r,max:i,values:a}})},t.prototype.end=function(){this.startPoint=null,this.starting=!1,this.startCache={}},t.prototype.translate=function(){var e=this;if(this.starting){var t=this.startPoint,n=this.context.view.getCoordinate(),r=this.context.getCurrentPoint(),i=n.invert(t),a=n.invert(r),o=a.x-i.x,s=a.y-i.y,c=this.context.view,l=this.dims;F(l,function(t){e.translateDim(t,{x:o*-1,y:s*-1})}),c.render(!0)}},t.prototype.translateDim=function(e,t){if(this.hasDim(e)){var n=this.getScale(e);n.isLinear&&this.translateLinear(e,n,t)}},t.prototype.translateLinear=function(e,t,n){var r=this.context.view,i=this.startCache[e],a=i.min,o=i.max,s=o-a,c=n[e]*s;this.cacheScaleDefs[e]||(this.cacheScaleDefs[e]={nice:t.nice,min:a,max:o}),r.scale(t.field,{nice:!1,min:a+c,max:o+c})},t.prototype.reset=function(){e.prototype.reset.call(this),this.startPoint=null,this.starting=!1},t}(wT),ET=function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.zoomRatio=.05,t}return t.prototype.zoomIn=function(){this.zoom(this.zoomRatio)},t.prototype.zoom=function(e){var t=this,n=this.dims;F(n,function(n){t.zoomDim(n,e)}),this.context.view.render(!0)},t.prototype.zoomOut=function(){this.zoom(-1*this.zoomRatio)},t.prototype.zoomDim=function(e,t){if(this.hasDim(e)){var n=this.getScale(e);n.isLinear&&this.zoomLinear(e,n,t)}},t.prototype.zoomLinear=function(e,t,n){var r=this.context.view;this.cacheScaleDefs[e]||(this.cacheScaleDefs[e]={nice:t.nice,min:t.min,max:t.max});var i=this.cacheScaleDefs[e],a=i.max-i.min,o=t.min,s=t.max,c=n*a,l=o-c,u=s+c,d=(u-l)/a;u>l&&d<100&&d>.01&&r.scale(t.field,{nice:!1,min:o-c,max:s+c})},t}(wT);function DT(e){return e.gEvent.originalEvent.deltaY>0}var OT=1,kT=function(e){l(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.scroll=function(e){var t=this.context,n=t.view,r=t.event;if(n.getOptions().scrollbar){var i=e?.wheelDelta||OT,a=n.getController(`scrollbar`),o=n.getXScale(),s=n.getOptions().data,c=It(Te(s,o.field)),l=It(o.values),u=a.getValue(),d=Math.floor((c-l)*u)+(DT(r)?i:-i),f=i/(c-l)/1e4,p=Fe(d/(c-l)+f,0,1);a.setValue(p)}},t}(ih),AT=`aixs-description-tooltip`,jT=function(e){l(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.show=function(){var e=this.context,t=kh(e).axis.cfg.title,n=t.description,r=t.text,i=t.descriptionTooltipStyle,a=e.event,o=a.x,s=a.y;this.tooltip||this.renderTooltip(),this.tooltip.update({title:r||``,customContent:function(){return`
          <div class="${wp}" style={${i}}>
            <div class="${Tp}">
              字段说明：${n}
            </div>
          </div>
        `},x:o,y:s}),this.tooltip.show()},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.tooltip&&this.tooltip.destroy()},t.prototype.hide=function(){this.tooltip&&this.tooltip.hide()},t.prototype.renderTooltip=function(){var e,t=this.context.view.canvas,n={start:{x:0,y:0},end:{x:t.get(`width`),y:t.get(`height`)}},r=new fm({parent:t.get(`el`).parentNode,region:n,visible:!1,containerId:AT,domStyles:_({},R({},(e={},e[wp]={"max-width":`50%`,padding:`10px`,"line-height":`15px`,"font-size":`12px`,color:`rgba(0, 0, 0, .65)`},e[Tp]={"word-break":`break-all`,"margin-bottom":`3px`},e)))});r.init(),r.setCapture(!1),this.tooltip=r},t}(ih);Cg(`dark`,mg(xv)),Qt(`canvas`,qy),Qt(`svg`,Hb),$g(`Polygon`,hx),$g(`Interval`,cx),$g(`Schema`,gx),$g(`Path`,Wb),$g(`Point`,px),$g(`Line`,lx),$g(`Area`,Jb),$g(`Edge`,Yb),$g(`Heatmap`,Xb),$g(`Violin`,vx),y_(`base`,W_),y_(`interval`,Bx),y_(`pie`,Ux),y_(`polar`,Hx),x_(`overlap`,lS),x_(`distribute`,Kx),x_(`fixed-overlap`,cS),x_(`hide-overlap`,ES),x_(`limit-in-shape`,rS),x_(`limit-in-canvas`,nS),x_(`limit-in-plot`,XS),x_(`pie-outer`,Xx),x_(`adjust-color`,kS),x_(`interval-adjust-position`,NS),x_(`interval-hide-overlap`,FS),x_(`point-adjust-position`,BS),x_(`pie-spider`,tS),x_(`path-adjust-position`,GS),o_(`fade-in`,ZS),o_(`fade-out`,QS),o_(`grow-in-x`,tC),o_(`grow-in-xy`,rC),o_(`grow-in-y`,nC),o_(`scale-in-x`,oC),o_(`scale-in-y`,sC),o_(`wave-in`,fC),o_(`zoom-in`,mC),o_(`zoom-out`,hC),o_(`position-update`,aC),o_(`sector-path-update`,dC),o_(`path-in`,iC),rh(`rect`,SC),rh(`mirror`,xC),rh(`list`,yC),rh(`matrix`,bC),rh(`circle`,vC),rh(`tree`,CC),Hg(`axis`,FC),Hg(`legend`,zC),Hg(`tooltip`,r_),Hg(`annotation`,OC),Hg(`slider`,BC),Hg(`scrollbar`,GC),U(`tooltip`,YC),U(`sibling-tooltip`,XC),U(`ellipsis-text`,ZC),U(`element-active`,tw),U(`element-single-active`,ow),U(`element-range-active`,iw),U(`element-highlight`,pw),U(`element-highlight-by-x`,hw),U(`element-highlight-by-color`,mw),U(`element-single-highlight`,vw),U(`element-range-highlight`,_w),U(`element-sibling-highlight`,_w,{effectSiblings:!0,effectByRecord:!0}),U(`element-selected`,bw),U(`element-single-selected`,xw),U(`element-range-selected`,yw),U(`element-link-by-color`,nw),U(`active-region`,JC),U(`list-active`,Cw),U(`list-selected`,Aw),U(`list-highlight`,kw),U(`list-unchecked`,jw),U(`list-checked`,Pw),U(`list-focus`,Iw),U(`list-radio`,zw),U(`legend-item-highlight`,kw,{componentNames:[`legend`]}),U(`axis-label-highlight`,kw,{componentNames:[`axis`]}),U(`axis-description`,jT),U(`rect-mask`,Gw),U(`x-rect-mask`,Jw,{dim:`x`}),U(`y-rect-mask`,Jw,{dim:`y`}),U(`circle-mask`,Hw),U(`path-mask`,Zw),U(`smooth-path-mask`,eT),U(`rect-multi-mask`,nT),U(`x-rect-multi-mask`,rT,{dim:`x`}),U(`y-rect-multi-mask`,rT,{dim:`y`}),U(`circle-multi-mask`,iT),U(`path-multi-mask`,aT),U(`smooth-path-multi-mask`,oT),U(`cursor`,sT),U(`data-filter`,cT),U(`brush`,dT),U(`brush-x`,dT,{dims:[`x`]}),U(`brush-y`,dT,{dims:[`y`]}),U(`sibling-filter`,fT),U(`sibling-x-filter`,fT,{dims:`x`}),U(`sibling-y-filter`,fT,{dims:`y`}),U(`element-filter`,pT),U(`element-sibling-filter`,mT),U(`element-sibling-filter-record`,mT,{byRecord:!0}),U(`view-drag`,yT),U(`view-move`,xT),U(`scale-translate`,TT),U(`scale-zoom`,ET),U(`reset-button`,_T,{name:`reset-button`,text:`reset`}),U(`mousewheel-scroll`,kT);function MT(e){return e.isInPlot()}W(`tooltip`,{start:[{trigger:`plot:mousemove`,action:`tooltip:show`,throttle:{wait:50,leading:!0,trailing:!1}},{trigger:`plot:touchmove`,action:`tooltip:show`,throttle:{wait:50,leading:!0,trailing:!1}}],end:[{trigger:`plot:mouseleave`,action:`tooltip:hide`},{trigger:`plot:leave`,action:`tooltip:hide`},{trigger:`plot:touchend`,action:`tooltip:hide`}]}),W(`ellipsis-text`,{start:[{trigger:`legend-item-name:mousemove`,action:`ellipsis-text:show`,throttle:{wait:50,leading:!0,trailing:!1}},{trigger:`legend-item-name:touchstart`,action:`ellipsis-text:show`,throttle:{wait:50,leading:!0,trailing:!1}},{trigger:`axis-label:mousemove`,action:`ellipsis-text:show`,throttle:{wait:50,leading:!0,trailing:!1}},{trigger:`axis-label:touchstart`,action:`ellipsis-text:show`,throttle:{wait:50,leading:!0,trailing:!1}}],end:[{trigger:`legend-item-name:mouseleave`,action:`ellipsis-text:hide`},{trigger:`legend-item-name:touchend`,action:`ellipsis-text:hide`},{trigger:`axis-label:mouseleave`,action:`ellipsis-text:hide`},{trigger:`axis-label:mouseout`,action:`ellipsis-text:hide`},{trigger:`axis-label:touchend`,action:`ellipsis-text:hide`}]}),W(`element-active`,{start:[{trigger:`element:mouseenter`,action:`element-active:active`}],end:[{trigger:`element:mouseleave`,action:`element-active:reset`}]}),W(`element-selected`,{start:[{trigger:`element:click`,action:`element-selected:toggle`}]}),W(`element-highlight`,{start:[{trigger:`element:mouseenter`,action:`element-highlight:highlight`}],end:[{trigger:`element:mouseleave`,action:`element-highlight:reset`}]}),W(`element-highlight-by-x`,{start:[{trigger:`element:mouseenter`,action:`element-highlight-by-x:highlight`}],end:[{trigger:`element:mouseleave`,action:`element-highlight-by-x:reset`}]}),W(`element-highlight-by-color`,{start:[{trigger:`element:mouseenter`,action:`element-highlight-by-color:highlight`}],end:[{trigger:`element:mouseleave`,action:`element-highlight-by-color:reset`}]}),W(`legend-active`,{start:[{trigger:`legend-item:mouseenter`,action:[`list-active:active`,`element-active:active`]}],end:[{trigger:`legend-item:mouseleave`,action:[`list-active:reset`,`element-active:reset`]}]}),W(`legend-highlight`,{start:[{trigger:`legend-item:mouseenter`,action:[`legend-item-highlight:highlight`,`element-highlight:highlight`]}],end:[{trigger:`legend-item:mouseleave`,action:[`legend-item-highlight:reset`,`element-highlight:reset`]}]}),W(`axis-label-highlight`,{start:[{trigger:`axis-label:mouseenter`,action:[`axis-label-highlight:highlight`,`element-highlight:highlight`]}],end:[{trigger:`axis-label:mouseleave`,action:[`axis-label-highlight:reset`,`element-highlight:reset`]}]}),W(`element-list-highlight`,{start:[{trigger:`element:mouseenter`,action:[`list-highlight:highlight`,`element-highlight:highlight`]}],end:[{trigger:`element:mouseleave`,action:[`list-highlight:reset`,`element-highlight:reset`]}]}),W(`element-range-highlight`,{showEnable:[{trigger:`plot:mouseenter`,action:`cursor:crosshair`},{trigger:`mask:mouseenter`,action:`cursor:move`},{trigger:`plot:mouseleave`,action:`cursor:default`},{trigger:`mask:mouseleave`,action:`cursor:crosshair`}],start:[{trigger:`plot:mousedown`,isEnable:function(e){return!e.isInShape(`mask`)},action:[`rect-mask:start`,`rect-mask:show`]},{trigger:`mask:dragstart`,action:[`rect-mask:moveStart`]}],processing:[{trigger:`plot:mousemove`,action:[`rect-mask:resize`]},{trigger:`mask:drag`,action:[`rect-mask:move`]},{trigger:`mask:change`,action:[`element-range-highlight:highlight`]}],end:[{trigger:`plot:mouseup`,action:[`rect-mask:end`]},{trigger:`mask:dragend`,action:[`rect-mask:moveEnd`]},{trigger:`document:mouseup`,isEnable:function(e){return!e.isInPlot()},action:[`element-range-highlight:clear`,`rect-mask:end`,`rect-mask:hide`]}],rollback:[{trigger:`dblclick`,action:[`element-range-highlight:clear`,`rect-mask:hide`]}]}),W(`brush`,{showEnable:[{trigger:`plot:mouseenter`,action:`cursor:crosshair`},{trigger:`plot:mouseleave`,action:`cursor:default`}],start:[{trigger:`mousedown`,isEnable:MT,action:[`brush:start`,`rect-mask:start`,`rect-mask:show`]}],processing:[{trigger:`mousemove`,isEnable:MT,action:[`rect-mask:resize`]}],end:[{trigger:`mouseup`,isEnable:MT,action:[`brush:filter`,`brush:end`,`rect-mask:end`,`rect-mask:hide`,`reset-button:show`]}],rollback:[{trigger:`reset-button:click`,action:[`brush:reset`,`reset-button:hide`,`cursor:crosshair`]}]}),W(`brush-visible`,{showEnable:[{trigger:`plot:mouseenter`,action:`cursor:crosshair`},{trigger:`plot:mouseleave`,action:`cursor:default`}],start:[{trigger:`plot:mousedown`,action:[`rect-mask:start`,`rect-mask:show`]}],processing:[{trigger:`plot:mousemove`,action:[`rect-mask:resize`]},{trigger:`mask:change`,action:[`element-range-highlight:highlight`]}],end:[{trigger:`plot:mouseup`,action:[`rect-mask:end`,`rect-mask:hide`,`element-filter:filter`,`element-range-highlight:clear`]}],rollback:[{trigger:`dblclick`,action:[`element-filter:clear`]}]}),W(`brush-x`,{showEnable:[{trigger:`plot:mouseenter`,action:`cursor:crosshair`},{trigger:`plot:mouseleave`,action:`cursor:default`}],start:[{trigger:`mousedown`,isEnable:MT,action:[`brush-x:start`,`x-rect-mask:start`,`x-rect-mask:show`]}],processing:[{trigger:`mousemove`,isEnable:MT,action:[`x-rect-mask:resize`]}],end:[{trigger:`mouseup`,isEnable:MT,action:[`brush-x:filter`,`brush-x:end`,`x-rect-mask:end`,`x-rect-mask:hide`]}],rollback:[{trigger:`dblclick`,action:[`brush-x:reset`]}]}),W(`element-path-highlight`,{showEnable:[{trigger:`plot:mouseenter`,action:`cursor:crosshair`},{trigger:`plot:mouseleave`,action:`cursor:default`}],start:[{trigger:`mousedown`,isEnable:MT,action:`path-mask:start`},{trigger:`mousedown`,isEnable:MT,action:`path-mask:show`}],processing:[{trigger:`mousemove`,action:`path-mask:addPoint`}],end:[{trigger:`mouseup`,action:`path-mask:end`}],rollback:[{trigger:`dblclick`,action:`path-mask:hide`}]}),W(`brush-x-multi`,{showEnable:[{trigger:`plot:mouseenter`,action:`cursor:crosshair`},{trigger:`mask:mouseenter`,action:`cursor:move`},{trigger:`plot:mouseleave`,action:`cursor:default`},{trigger:`mask:mouseleave`,action:`cursor:crosshair`}],start:[{trigger:`mousedown`,isEnable:MT,action:[`x-rect-multi-mask:start`,`x-rect-multi-mask:show`]},{trigger:`mask:dragstart`,action:[`x-rect-multi-mask:moveStart`]}],processing:[{trigger:`mousemove`,isEnable:function(e){return!Ph(e)},action:[`x-rect-multi-mask:resize`]},{trigger:`multi-mask:change`,action:`element-range-highlight:highlight`},{trigger:`mask:drag`,action:[`x-rect-multi-mask:move`]}],end:[{trigger:`mouseup`,action:[`x-rect-multi-mask:end`]},{trigger:`mask:dragend`,action:[`x-rect-multi-mask:moveEnd`]}],rollback:[{trigger:`dblclick`,action:[`x-rect-multi-mask:clear`,`cursor:crosshair`]},{trigger:`multi-mask:clearAll`,action:[`element-range-highlight:clear`]},{trigger:`multi-mask:clearSingle`,action:[`element-range-highlight:highlight`]}]}),W(`element-single-selected`,{start:[{trigger:`element:click`,action:`element-single-selected:toggle`}]}),W(`legend-filter`,{showEnable:[{trigger:`legend-item:mouseenter`,action:[`cursor:pointer`,`list-radio:show`]},{trigger:`legend-item:mouseleave`,action:[`cursor:default`,`list-radio:hide`]}],start:[{trigger:`legend-item:click`,isEnable:function(e){return!e.isInShape(`legend-item-radio`)},action:[`legend-item-highlight:reset`,`element-highlight:reset`,`list-unchecked:toggle`,`data-filter:filter`,`list-radio:show`]},{trigger:`legend-item-radio:mouseenter`,action:[`list-radio:showTip`]},{trigger:`legend-item-radio:mouseleave`,action:[`list-radio:hideTip`]},{trigger:`legend-item-radio:click`,action:[`list-focus:toggle`,`data-filter:filter`,`list-radio:show`]}]}),W(`continuous-filter`,{start:[{trigger:`legend:valuechanged`,action:`data-filter:filter`}]}),W(`continuous-visible-filter`,{start:[{trigger:`legend:valuechanged`,action:`element-filter:filter`}]}),W(`legend-visible-filter`,{showEnable:[{trigger:`legend-item:mouseenter`,action:`cursor:pointer`},{trigger:`legend-item:mouseleave`,action:`cursor:default`}],start:[{trigger:`legend-item:click`,action:[`legend-item-highlight:reset`,`element-highlight:reset`,`list-unchecked:toggle`,`element-filter:filter`]}]}),W(`active-region`,{start:[{trigger:`plot:mousemove`,action:`active-region:show`}],end:[{trigger:`plot:mouseleave`,action:`active-region:hide`}]}),W(`axis-description`,{start:[{trigger:`axis-description:mousemove`,action:`axis-description:show`}],end:[{trigger:`axis-description:mouseleave`,action:`axis-description:hide`}]});function NT(e){return e.gEvent.preventDefault(),e.gEvent.originalEvent.deltaY>0}W(`view-zoom`,{start:[{trigger:`plot:mousewheel`,isEnable:function(e){return NT(e.event)},action:`scale-zoom:zoomOut`,throttle:{wait:100,leading:!0,trailing:!1}},{trigger:`plot:mousewheel`,isEnable:function(e){return!NT(e.event)},action:`scale-zoom:zoomIn`,throttle:{wait:100,leading:!0,trailing:!1}}]}),W(`sibling-tooltip`,{start:[{trigger:`plot:mousemove`,action:`sibling-tooltip:show`}],end:[{trigger:`plot:mouseleave`,action:`sibling-tooltip:hide`}]}),W(`plot-mousewheel-scroll`,{start:[{trigger:`plot:mousewheel`,action:`mousewheel-scroll:scroll`}]});var PT=[`type`,`alias`,`tickCount`,`tickInterval`,`min`,`max`,`nice`,`minLimit`,`maxLimit`,`range`,`tickMethod`,`base`,`exponent`,`mask`,`sync`],FT;(function(e){e.ERROR=`error`,e.WARN=`warn`,e.INFO=`log`})(FT||={});var IT=`AntV/G2Plot`;function LT(e){var t=[...arguments].slice(1),n=0;return`${IT}: ${e.replace(/%s/g,function(){return`${t[n++]}`})}`}function RT(e,t,n){var r=[...arguments].slice(3);t||console[e](LT.apply(void 0,s([n],r,!1)))}function J(e,t){var n={};return typeof e==`object`&&e&&t.forEach(function(t){var r=e[t];r!==void 0&&(n[t]=r)}),n}function zT(e,t){if(!e)return{};var n=e.filter(function(e){var n=z(e,[t]);return L(n)&&!isNaN(n)}),r=n.every(function(e){return z(e,[t])>=0}),i=n.every(function(e){return z(e,[t])<=0});return r?{min:0}:i?{max:0}:{}}function BT(e,t,n,r,i){if(i===void 0&&(i=[]),!Array.isArray(e))return{nodes:[],links:[]};var a=[],o={},s=-1;return e.forEach(function(e){var c=e[t],l=e[n],u=e[r],d=J(e,i);o[c]||(o[c]=_({id:++s,name:c},d)),o[l]||(o[l]=_({id:++s,name:l},d)),a.push(_({source:o[c].id,target:o[l].id,value:u},d))}),{nodes:Object.values(o).sort(function(e,t){return e.id-t.id}),links:a}}function VT(e,t){var n=k(e,function(e){var n=e[t];return n===null||typeof n==`number`&&!isNaN(n)});return RT(FT.WARN,n.length===e.length,`illegal data existed in chart data.`),n}var HT=5,UT={}.toString,WT=function(e,t){return UT.call(e)===`[object `+t+`]`},GT=function(e){return WT(e,`Array`)},KT=function(e){return typeof e==`object`&&!!e},qT=function(e){if(!KT(e)||!WT(e,`Object`))return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t},JT=function(e,t,n,r){for(var i in n||=0,r||=HT,t)if(Object.prototype.hasOwnProperty.call(t,i)){var a=t[i];a?qT(a)?(qT(e[i])||(e[i]={}),n<r?JT(e[i],a,n+1,r):e[i]=t[i]):GT(a)?(e[i]=[],e[i]=e[i].concat(a)):e[i]=a:e[i]=a}},Y=function(e){for(var t=[...arguments].slice(1),n=0;n<t.length;n+=1)JT(e,t[n]);return e};function YT(e){if(!e)return{width:0,height:0};var t=getComputedStyle(e);return{width:(e.clientWidth||parseInt(t.width,10))-parseInt(t.paddingLeft,10)-parseInt(t.paddingRight,10),height:(e.clientHeight||parseInt(t.height,10))-parseInt(t.paddingTop,10)-parseInt(t.paddingBottom,10)}}function X(){var e=[...arguments];return function(t){return e.reduce(function(e,t){return t(e)},t)}}function XT(e,t){return e.geometries.find(function(e){return e.type===t})}function ZT(e){return be(e.geometries,function(e,t){return e.concat(t.elements)},[])}function QT(e){return z(e,[`views`,`length`],0)<=0?ZT(e):be(e.views,function(e,t){return e.concat(QT(t))},ZT(e))}function $T(e){return z(e,[`views`,`length`],0)<=0?e.geometries:be(e.views,function(e,t){return e.concat(t.geometries)},e.geometries)}function eE(e){return e&&e.match(/(([A-Z]{0,1}[a-z]*[^A-Z])|([A-Z]{1}))/g).map(function(e){return e.toLowerCase()}).join(`-`)}function tE(e){if(!te(e,`Object`))return e;var t=_({},e);return t.formatter&&!t.content&&(t.content=t.formatter),t}var nE;function rE(){return nE||=document.createElement(`canvas`).getContext(`2d`),nE}ht(function(e,t){t===void 0&&(t={});var n=t.fontSize,r=t.fontFamily,i=r===void 0?`sans-serif`:r,a=t.fontWeight,o=t.fontStyle,s=t.fontVariant,c=rE();return c.font=[o,a,s,`${n}px`,i].join(` `),c.measureText(I(e)?e:``).width},function(e,t){return t===void 0&&(t={}),s([e],Ke(t),!0).join(``)});function iE(e){return typeof e==`number`&&!isNaN(e)}function aE(e,t,n){return e>=Math.min(t,n)&&e<=Math.max(t,n)}function oE(e){if(L(e))return[e,e,e,e];if(N(e)){var t=e.length;if(t===1)return[e[0],e[0],e[0],e[0]];if(t===2)return[e[0],e[1],e[0],e[1]];if(t===3)return[e[0],e[1],e[2],e[1]];if(t===4)return e}return[0,0,0,0]}function sE(e,t,n){t===void 0&&(t=`bottom`),n===void 0&&(n=25);var r=oE(e),i=[t.startsWith(`top`)?n:0,t.startsWith(`right`)?n:0,t.startsWith(`bottom`)?n:0,t.startsWith(`left`)?n:0];return[r[0]+i[0],r[1]+i[1],r[2]+i[2],r[3]+i[3]]}function cE(e){var t=e.map(function(e){return oE(e)}),n=[0,0,0,0];return t.length>0&&(n=n.map(function(e,n){return t.forEach(function(r,i){e+=t[i][n]}),e})),n}function lE(e,t){var n=[];if(e.length){n.push([`M`,e[0].x,e[0].y]);for(var r=1,i=e.length;r<i;r+=1){var a=e[r];n.push([`L`,a.x,a.y])}t&&n.push([`Z`])}return n}var uE=function(e,t,n,r){var i=[],a,o,s=!!r,c,l;if(s){c=[1/0,1/0],l=[-1/0,-1/0];for(var u=0,d=e.length;u<d;u++){var _=e[u];c=h([0,0],c,_),l=m([0,0],l,_)}c=h([0,0],c,r[0]),l=m([0,0],l,r[1])}for(var u=0,v=e.length;u<v;u++){var _=e[u];if(n)a=e[u?u-1:v-1],o=e[(u+1)%v];else if(u===0||u===v-1){i.push(_);continue}else a=e[u-1],o=e[u+1];var y=[0,0];y=f(y,o,a),y=g(y,y,t);var b=p(_,a),x=p(_,o),S=b+x;S!==0&&(b/=S,x/=S);var w=g([0,0],y,-b),T=g([0,0],y,x),E=C([0,0],_,w),D=C([0,0],_,T);s&&(E=m([0,0],E,c),E=h([0,0],E,l),D=m([0,0],D,c),D=h([0,0],D,l)),i.push(E),i.push(D)}return n&&i.push(i.shift()),i};function dE(e,t,n){for(var r=!!t,i=[],a=0,o=e.length;a<o;a+=2)i.push([e[a],e[a+1]]);for(var s=uE(i,.4,r,n),c=i.length,l=[],u,d,f,a=0;a<c-1;a++)u=s[a*2],d=s[a*2+1],f=i[a+1],l.push([`C`,u[0],u[1],d[0],d[1],f[0],f[1]]);return r&&(u=s[c],d=s[c+1],f=i[0],l.push([`C`,u[0],u[1],d[0],d[1],f[0],f[1]])),l}function fE(e,t,n){var r=[],i=e[0],a=null;if(e.length<=2)return lE(e,t);for(var o=0,s=e.length;o<s;o++){var c=e[o];(!a||!(a.x===c.x&&a.y===c.y))&&(r.push(c.x),r.push(c.y),a=c)}var l=dE(r,t,n||[[0,0],[1,1]]);return l.unshift([`M`,i.x,i.y]),l}function pE(e){var t={overflow:`hidden`,"white-space":`nowrap`,"text-overflow":`ellipsis`,display:`flex`,justifyContent:`center`,alignItems:`center`},n=[`stroke`,`lineWidth`,`shadowColor`,`strokeOpacity`,`shadowBlur`,`shadowOffsetX`,`shadowOffsetY`,`fill`];z(e,`fill`)&&(t.color=e.fill);var r=J(e,n),i=r.shadowColor,a=r.shadowBlur,o=a===void 0?0:a,s=r.shadowOffsetX,c=s===void 0?0:s,l=r.shadowOffsetY,u=l===void 0?0:l;t[`text-shadow`]=`${[i,`${c}px`,`${u}px`,`${o}px`].join(` `)}`;var d=J(e,n),f=d.stroke,p=d.lineWidth;return t[`-webkit-text-stroke`]=`${[`${p===void 0?0:p}px`,f].join(` `)}`,F(e,function(e,r){[`fontSize`].includes(r)&&L(e)?t[eE(r)]=`${e}px`:r&&!n.includes(r)&&(t[eE(r)]=`${e}`)}),t}function mE(e,t){e.style[`pointer-events`]=`none`,F(t,function(t,n){n&&t&&(e.style[n]=t)})}var hE=function(e,t,n){var r=t.statistic,i=t.plotType,a=r.title,o=r.content;[a,o].forEach(function(t,r){if(t){var s=``;s=r===0?o?`translate(-50%, -100%)`:`translate(-50%, -50%)`:a?`translate(-50%, 0)`:`translate(-50%, -50%)`;var c=j(t.style)?t.style(n):t.style;e.annotation().html(_({position:[`50%`,`50%`],html:function(e,r){var a=r.getCoordinate(),o=0;if(i===`pie`||i===`ring-progress`)o=a.getRadius()*a.innerRadius*2;else if(i===`liquid`){var l=z(r.geometries,[0,`elements`,0,`shape`]);l&&(o=l.find(function(e){return e.get(`name`)===`wrap`}).getCanvasBBox().width)}else o||=a.getWidth();mE(e,_({width:`${o}px`,transform:s},pE(c)));var u=r.getData();if(t.customHtml)return t.customHtml(e,r,n,u);var d=t.content;return t.formatter&&(d=t.formatter(n,u)),d?I(d)?d:`${d}`:`<div></div>`},key:`${r===0?`top`:`bottom`}-statistic`},J(t,[`offsetX`,`offsetY`,`rotate`,`style`,`formatter`])))}})},gE=function(e,t,n){var r=t.statistic,i=r.title,a=r.content;[i,a].forEach(function(t){if(t){var r=j(t.style)?t.style(n):t.style;e.annotation().html(_({position:[`50%`,`100%`],html:function(e,i){var a=i.getCoordinate(),o=i.views[0].getCoordinate(),s=o.getCenter(),c=o.getRadius(),l=Math.max(Math.sin(o.startAngle),Math.sin(o.endAngle))*c,u=s.y+l-a.y.start-parseFloat(z(r,`fontSize`,0)),d=a.getRadius()*a.innerRadius*2;mE(e,_({width:`${d}px`,transform:`translate(-50%, ${u}px)`},pE(r)));var f=i.getData();if(t.customHtml)return t.customHtml(e,i,n,f);var p=t.content;return t.formatter&&(p=t.formatter(n,f)),p?I(p)?p:`${p}`:`<div></div>`}},J(t,[`offsetX`,`offsetY`,`rotate`,`style`,`formatter`])))}})};function _E(e,t){return t?be(t,function(e,t,n){return e.replace(RegExp(`{\\s*${n}\\s*}`,`g`),t)},e):e}function Z(e,t){return e.views.find(function(e){return e.id===t})}function vE(e){var t=e.parent;return t?t.views:[]}function yE(e){return vE(e).filter(function(t){return t!==e})}function bE(e,t,n){n===void 0&&(n=e.geometries),typeof t==`boolean`?e.animate(t):e.animate(!0),F(n,function(e){var n=j(t)?t(e.type||e.shapeType,e)||!0:t;e.animate(n)})}function xE(){return typeof window==`object`?window==null?void 0:window.devicePixelRatio:2}function SE(e,t){t===void 0&&(t=e);var n=document.createElement(`canvas`),r=xE();return n.width=e*r,n.height=t*r,n.style.width=`${e}px`,n.style.height=`${t}px`,n.getContext(`2d`).scale(r,r),n}function CE(e,t,n,r){r===void 0&&(r=n);var i=t.backgroundColor;e.globalAlpha=t.opacity,e.fillStyle=i,e.beginPath(),e.fillRect(0,0,n,r),e.closePath()}function wE(e,t,n){var r=e+t;return n?r*2:r}function TE(e,t){return t?[[e*(1/4),e*(1/4)],[e*(3/4),e*(3/4)]]:[[e*(1/2),e*(1/2)]]}function EE(e,t){var n=t*Math.PI/180;return{a:Math.cos(n)*(1/e),b:Math.sin(n)*(1/e),c:-Math.sin(n)*(1/e),d:Math.cos(n)*(1/e),e:0,f:0}}var DE={size:6,padding:2,backgroundColor:`transparent`,opacity:1,rotation:0,fill:`#fff`,fillOpacity:.5,stroke:`transparent`,lineWidth:0,isStagger:!0};function OE(e,t,n,r){var i=t.size,a=t.fill,o=t.lineWidth,s=t.stroke,c=t.fillOpacity;e.beginPath(),e.globalAlpha=c,e.fillStyle=a,e.strokeStyle=s,e.lineWidth=o,e.arc(n,r,i/2,0,2*Math.PI,!1),e.fill(),o&&e.stroke(),e.closePath()}function kE(e){var t=Y({},DE,e),n=t.size,r=t.padding,i=t.isStagger,a=t.rotation,o=wE(n,r,i),s=TE(o,i),c=SE(o,o),l=c.getContext(`2d`);CE(l,t,o);for(var u=0,d=s;u<d.length;u++){var f=d[u],p=f[0],m=f[1];OE(l,t,p,m)}var h=l.createPattern(c,`repeat`);if(h){var g=xE(),_=EE(g,a);h.setTransform(_)}return h}var AE={rotation:45,spacing:5,opacity:1,backgroundColor:`transparent`,strokeOpacity:.5,stroke:`#fff`,lineWidth:2};function jE(e,t,n){var r=t.stroke,i=t.lineWidth,a=t.strokeOpacity,o=new Path2D(n);e.globalAlpha=a,e.lineCap=`square`,e.strokeStyle=i?r:`transparent`,e.lineWidth=i,e.stroke(o)}function ME(e){var t=Y({},AE,e),n=t.spacing,r=t.rotation,i=t.lineWidth,a=n+i||1,o=n+i||1,s=`
            M 0 0 L ${a} 0
            M 0 ${o} L ${a} ${o}
            `,c=SE(a,o),l=c.getContext(`2d`);CE(l,t,a,o),jE(l,t,s);var u=l.createPattern(c,`repeat`);if(u){var d=xE(),f=EE(d,r);u.setTransform(f)}return u}var NE={size:6,padding:1,isStagger:!0,backgroundColor:`transparent`,opacity:1,rotation:0,fill:`#fff`,fillOpacity:.5,stroke:`transparent`,lineWidth:0};function PE(e,t,n,r){var i=t.stroke,a=t.size,o=t.fill,s=t.lineWidth;e.globalAlpha=t.fillOpacity,e.strokeStyle=i,e.lineWidth=s,e.fillStyle=o,e.strokeRect(n-a/2,r-a/2,a,a),e.fillRect(n-a/2,r-a/2,a,a)}function FE(e){var t=Y({},NE,e),n=t.size,r=t.padding,i=t.isStagger,a=t.rotation,o=wE(n,r,i),s=TE(o,i),c=SE(o,o),l=c.getContext(`2d`);CE(l,t,o);for(var u=0,d=s;u<d.length;u++){var f=d[u],p=f[0],m=f[1];PE(l,t,p,m)}var h=l.createPattern(c,`repeat`);if(h){var g=xE(),_=EE(g,a);h.setTransform(_)}return h}function IE(e){var t=e.type,n=e.cfg,r;switch(t){case`dot`:r=kE(n);break;case`line`:r=ME(n);break;case`square`:r=FE(n);break;default:break}return r}function LE(e){var t=this;return function(n){var r,i=n.options,a=n.chart,o=i.pattern;return o?Y({},n,{options:(r={},r[e]=function(n){var r=[...arguments].slice(1),c=a.getTheme().defaultColor,l=c,u=(a.geometries?.[0])?.getAttribute(`color`);if(u){var d=u.getFields()[0],f=z(n,d);l=hv.getMappingValue(u,f,u.values?.[0]||c)}var p=o;typeof o==`function`&&(p=o.call(t,n,l)),p instanceof CanvasPattern||(p=IE(Y({},{cfg:{backgroundColor:l}},p)));var m=i[e];return _(_({},typeof m==`function`?m.call.apply(m,s([t,n],r,!1)):m||{}),{fill:p||l})},r)}):n}}function RE(e){var t=e.chart,n=e.options,r=n.legend,i=n.colorField,a=n.seriesField;return r===!1?t.legend(!1):(i||a)&&t.legend(i||a,r),e}function zE(e){var t=e.chart,n=e.options.tooltip;return n!==void 0&&t.tooltip(n),e}function BE(e){var t=e.chart,n=e.options.interactions;return F(n,function(e){e.enable===!1?t.removeInteraction(e.type):t.interaction(e.type,e.cfg||{})}),e}function VE(e){var t=e.chart,n=e.options.animation;return bE(t,n),e}function Q(e){var t=e.chart,n=e.options.theme;return n&&t.theme(n),e}function HE(e){var t=e.chart,n=e.options.state;return n&&F(t.geometries,function(e){e.state(n)}),e}function UE(e){var t=e.chart,n=e.options.slider;return t.option(`slider`,n),e}function WE(e){var t=e.chart,n=e.options.scrollbar;return t.option(`scrollbar`,n),e}function GE(e,t){return function(n){var r=n.chart,i=n.options,a={};return F(e,function(e,t){a[t]=J(e,PT)}),a=Y({},t,i.meta,a),r.scale(a),n}}function KE(e){return function(t){var n=t.chart,r=t.options,i=n.getController(`annotation`);return F(s(s([],r.annotations||[],!0),e||[],!0),function(e){i.annotation(e)}),t}}function qE(e){var t=e.chart,n=e.options,r=n.yAxis,i=n.limitInPlot,a=i;return P(r)&&M(i)&&(a=!!Object.values(J(r,[`min`,`max`,`minLimit`,`maxLimit`])).some(function(e){return!M(e)})),t.limitInPlot=a,e}function JE(e){return e===void 0&&(e=`rect`),function(t){var n=t.chart,r=t.options.coordinate,i=Array.from(r||[]).map(function(e){return e.type===`reflectX`?[`reflect`,`x`]:e.type===`reflectY`?[`reflect`,`y`]:e.type===`transpose`?[`transpose`]:null}).filter(function(e){return!!e});return i.length!==0&&n.coordinate({type:e,actions:i}),t}}var YE={locale:`en-US`},XE={};function ZE(e,t){XE[e]=t}function QE(e){return{get:function(t,n){return _E(z(XE[e],t)||z(XE[YE.locale],t)||z(XE[`en-US`],t)||t,n)}}}var $E={locale:`en-US`,general:{increase:`Increase`,decrease:`Decrease`,root:`Root`},statistic:{total:`Total`},conversionTag:{label:`Rate`},legend:{},tooltip:{},slider:{},scrollbar:{},waterfall:{total:`Total`}},eD={locale:`zh-CN`,general:{increase:`增加`,decrease:`减少`,root:`初始`},statistic:{total:`总计`},conversionTag:{label:`转化率`},legend:{},tooltip:{},slider:{},scrollbar:{},waterfall:{total:`总计`}};function tD(e,t){if(e===!1)return{fields:!1};var n=z(e,`fields`),r=z(e,`formatter`);return r&&!n&&(n=t),{fields:n,formatter:r}}function nD(e,t){var n=e.type,r=e.xField,i=e.yField,a=e.colorField,o=e.shapeField,c=e.sizeField,l=e.styleField,u=e.rawFields,d=[];if(u=(j(u)?u(n,t):u)||[],t===`color`)d=s([a||r],u,!0);else if(t===`shape`)d=s([o||r],u,!0);else if(t===`size`)d=s([c||r],u,!0);else{d=s([r,i,a,o,c,l],u,!0);var f=[`x`,`y`,`color`,`shape`,`size`,`style`].indexOf(t),p=d[f];d.splice(f,1),d.unshift(p)}var m=we(d.filter(function(e){return!!e})),h=n===`line`&&[r,i].includes(m.join(`*`))?``:m.join(`*`);return{mappingFields:m,tileMappingField:h}}function rD(e,t){if(t)return function(){var n=[...arguments],r={};return e.forEach(function(e,t){r[e]=n[t]}),delete r.undefined,t(r)}}function iD(e){var t=e.chart,n=e.options,r=n.type,i=n.args,a=n.mapping,s=n.xField,c=n.yField,l=n.colorField,u=n.shapeField,d=n.sizeField,f=n.tooltipFields,p=n.label,m=n.state,h=n.customInfo,g=n.customMappingField;if(!a)return e;var v=a.color,y=a.shape,b=a.size,x=a.style,S=a.tooltip,C=t[r](i).position(`${s}*${c}`);if(I(v))l?C.color(l,v):C.color(v);else if(j(v)){var w=nD(n,`color`),T=w.mappingFields,E=w.tileMappingField;C.color(g||E,rD(T,v))}else l&&C.color(l,v);if(I(y))u?C.shape(u,[y]):C.shape(y);else if(j(y)){var D=nD(n,`shape`),T=D.mappingFields,E=D.tileMappingField;C.shape(E,rD(T,y))}else u&&C.shape(u,y);if(L(b))d?C.size(d,b):C.size(b);else if(j(b)){var O=nD(n,`size`),T=O.mappingFields,E=O.tileMappingField;C.size(E,rD(T,b))}else d&&C.size(d,b);if(j(x)){var k=nD(n,`style`),T=k.mappingFields,E=k.tileMappingField;C.style(E,rD(T,x))}else P(x)&&C.style(x);if(f===!1?C.tooltip(!1):xt(f)||C.tooltip(f.join(`*`),rD(f,S)),p===!1)C.label(!1);else if(p){var A=p.callback,ee=p.fields,te=o(p,[`callback`,`fields`]);C.label({fields:ee||[c],callback:A,cfg:tE(te)})}return m&&C.state(m),h&&C.customInfo(h),[s,c].filter(function(e){return e!==l}).forEach(function(e){t.legend(e,!1)}),_(_({},e),{ext:{geometry:C}})}function aD(e){var t=e.options,n=t.area,r=t.xField,i=t.yField,a=t.seriesField,o=t.smooth,s=t.tooltip,c=t.useDeferredLabel,l=tD(s,[r,i,a]),u=l.fields,d=l.formatter;return n?iD(Y({},e,{options:{type:`area`,colorField:a,tooltipFields:u,mapping:R({shape:o?`smooth`:`area`,tooltip:d},n),args:{useDeferredLabel:c}}})):e}function oD(e){var t=e.options,n=t.edge,r=t.xField,i=t.yField,a=t.seriesField,o=t.tooltip,s=t.useDeferredLabel,c=tD(o,[r,i,a]),l=c.fields,u=c.formatter;return n?iD(Y({},e,{options:{type:`edge`,colorField:a,tooltipFields:l,mapping:_({tooltip:u},n),args:{useDeferredLabel:s}}})):e}function sD(e){var t=e.chart,n=e.options,r=e.ext,i=n.seriesField,a=n.isGroup,o=n.isStack,s=n.marginRatio,c=n.widthRatio,l=n.groupField,u=n.theme,d=[];return i&&(a&&d.push({type:`dodge`,dodgeBy:l||i,marginRatio:s}),o&&d.push({type:`stack`,marginRatio:s})),d.length&&r?.geometry&&(r?.geometry).adjust(d),M(c)||t.theme(Y({},P(u)?u:Sg(u),{columnWidthRatio:c})),e}function cD(e){var t=e.options,n=t.xField,r=t.yField,i=t.interval,a=t.seriesField,o=t.tooltip,s=t.minColumnWidth,c=t.maxColumnWidth,l=t.columnBackground,u=t.dodgePadding,d=t.intervalPadding,f=t.useDeferredLabel,p=tD(o,[n,r,a]),m=p.fields,h=p.formatter,g=(i?iD(Y({},e,{options:{type:`interval`,colorField:a,tooltipFields:m,mapping:_({tooltip:h},i),args:{dodgePadding:u,intervalPadding:d,minColumnWidth:s,maxColumnWidth:c,background:l,useDeferredLabel:f}}})):e).ext;return sD(_(_({},e),{ext:g}))}function lD(e){var t=e.options,n=t.line,r=t.stepType,i=t.xField,a=t.yField,o=t.seriesField,s=t.smooth,c=t.connectNulls,l=t.tooltip,u=t.useDeferredLabel,d=tD(l,[i,a,o]),f=d.fields,p=d.formatter;return n?iD(Y({},e,{options:{type:`line`,colorField:o,tooltipFields:f,mapping:R({shape:r||(s?`smooth`:`line`),tooltip:p},n),args:{connectNulls:c,useDeferredLabel:u}}})):e}function uD(e){var t=e.options,n=t.point,r=t.xField,i=t.yField,a=t.seriesField,o=t.sizeField,s=t.shapeField,c=t.tooltip,l=t.useDeferredLabel,u=tD(c,[r,i,a,o,s]),d=u.fields,f=u.formatter;return n?iD(Y({},e,{options:{type:`point`,colorField:a,shapeField:s,tooltipFields:d,mapping:_({tooltip:f},n),args:{useDeferredLabel:l}}})):e}function dD(e){var t=e.options,n=t.polygon,r=t.xField,i=t.yField,a=t.seriesField,o=t.tooltip,s=t.useDeferredLabel,c=tD(o,[r,i,a]),l=c.fields,u=c.formatter;return n?iD(Y({},e,{options:{type:`polygon`,colorField:a,tooltipFields:l,mapping:_({tooltip:u},n),args:{useDeferredLabel:s}}})):e}function fD(e){var t=e.options,n=t.schema,r=t.xField,i=t.yField,a=t.seriesField,o=t.tooltip,s=t.useDeferredLabel,c=tD(o,[r,i,a]),l=c.fields,u=c.formatter;return n?iD(Y({},e,{options:{type:`schema`,colorField:a,tooltipFields:l,mapping:_({tooltip:u},n),args:{useDeferredLabel:s}}})):e}function pD(e){var t=e.options,n=t.violin,r=t.xField,i=t.yField,a=t.seriesField,o=t.sizeField,s=t.tooltip,c=tD(s,[r,i,a,o]),l=c.fields,u=c.formatter;return n?iD(Y({},e,{options:{type:`violin`,colorField:a,tooltipFields:l,mapping:_({tooltip:u},n)}})):e}var mD=n((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0});var t=1;exports.default=function(){return`${t++}`}})),hD=n((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.default=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:60,n=null;return function(){var r=this,i=[...arguments];clearTimeout(n),n=setTimeout(function(){e.apply(r,i)},t)}}})),gD=n((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.SizeSensorId=`size-sensor-id`,exports.SensorClassName=`size-sensor-object`,exports.SensorTabIndex=`-1`})),_D=n((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0});var t=r(hD()),n=gD();function r(e){return e&&e.__esModule?e:{default:e}}exports.createSensor=function(e,r){var i=void 0,a=[],o=function(){getComputedStyle(e).position===`static`&&(e.style.position=`relative`);var t=document.createElement(`object`);return t.onload=function(){t.contentDocument.defaultView.addEventListener(`resize`,s),s()},t.style.display=`block`,t.style.position=`absolute`,t.style.top=`0`,t.style.left=`0`,t.style.height=`100%`,t.style.width=`100%`,t.style.overflow=`hidden`,t.style.pointerEvents=`none`,t.style.zIndex=`-1`,t.style.opacity=`0`,t.setAttribute(`class`,n.SensorClassName),t.setAttribute(`tabindex`,n.SensorTabIndex),t.type=`text/html`,e.appendChild(t),t.data=`about:blank`,t},s=(0,t.default)(function(){a.forEach(function(t){t(e)})}),c=function(e){i||=o(),a.indexOf(e)===-1&&a.push(e)},l=function(){i&&i.parentNode&&(i.contentDocument&&i.contentDocument.defaultView.removeEventListener(`resize`,s),i.parentNode.removeChild(i),e.removeAttribute(n.SizeSensorId),i=void 0,a=[],r&&r())};return{element:e,bind:c,destroy:l,unbind:function(e){var t=a.indexOf(e);t!==-1&&a.splice(t,1),a.length===0&&i&&l()}}}})),vD=n((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0});var t=gD(),n=r(hD());function r(e){return e&&e.__esModule?e:{default:e}}exports.createSensor=function(e,r){var i=void 0,a=[],o=(0,n.default)(function(){a.forEach(function(t){t(e)})}),s=function(){var t=new ResizeObserver(o);return t.observe(e),o(),t},c=function(e){i||=s(),a.indexOf(e)===-1&&a.push(e)},l=function(){i.disconnect(),a=[],i=void 0,e.removeAttribute(t.SizeSensorId),r&&r()};return{element:e,bind:c,destroy:l,unbind:function(e){var t=a.indexOf(e);t!==-1&&a.splice(t,1),a.length===0&&i&&l()}}}})),yD=n((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0});var t=_D(),n=vD();exports.createSensor=typeof ResizeObserver<`u`?n.createSensor:t.createSensor})),bD=n((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0});var t=i(mD()),n=yD(),r=gD();function i(e){return e&&e.__esModule?e:{default:e}}var a={};exports.Sensors=a;function o(e){e&&a[e]&&delete a[e]}exports.getSensor=function(e){var i=e.getAttribute(r.SizeSensorId);if(i&&a[i])return a[i];var s=(0,t.default)();e.setAttribute(r.SizeSensorId,s);var c=(0,n.createSensor)(e,function(){return o(s)});return a[s]=c,c},exports.removeSensor=function(e){var t=e.element.getAttribute(r.SizeSensorId);e.destroy(),o(t)}})),xD=t(n((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0});var t=bD();exports.bind=function(e,n){var r=(0,t.getSensor)(e);return r.bind(n),function(){r.unbind(n)}}}))()),SD=`data-chart-source-type`,CD=[`padding`,`appendPadding`,`renderer`,`pixelRatio`,`syncViewPadding`,`supportCSSTransform`,`limitInPlot`],$=function(e){l(t,e);function t(t,n){var r=e.call(this)||this;return r.container=typeof t==`string`?document.getElementById(t):t,r.options=Y({},r.getDefaultOptions(),n),r.createG2(),r.bindEvents(),r}return t.getDefaultOptions=function(){return{renderer:`canvas`,xAxis:{nice:!0,label:{autoRotate:!1,autoHide:{type:`equidistance`,cfg:{minGap:6}}}},yAxis:{nice:!0,label:{autoHide:!0,autoRotate:!1}},animation:!0}},t.prototype.createG2=function(){var e=this.options,t=e.width,n=e.height,r=e.defaultInteractions;this.chart=new e_(_(_(_(_({container:this.container,autoFit:!1},this.getChartSize(t,n)),{localRefresh:!1}),J(this.options,CD)),{defaultInteractions:r})),this.container.setAttribute(SD,`G2Plot`)},t.prototype.getChartSize=function(e,t){var n=YT(this.container);return{width:e||n.width||400,height:t||n.height||400}},t.prototype.bindEvents=function(){var e=this;this.chart&&this.chart.on(`*`,function(t){t?.type&&e.emit(t.type,t)})},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.render=function(){this.chart.clear(),this.chart.options={data:[],animate:!0},this.chart.views=[],this.execAdaptor(),this.chart.render(),this.bindSizeSensor()},t.prototype.update=function(e){this.updateOption(e),this.render()},t.prototype.updateOption=function(e){this.options=Y({},this.options,e)},t.prototype.setState=function(e,t,n){n===void 0&&(n=!0);var r=QT(this.chart);F(r,function(r){t(r.getData())&&r.setState(e,n)})},t.prototype.getStates=function(){var e=QT(this.chart),t=[];return F(e,function(e){var n=e.getData(),r=e.getStates();F(r,function(r){t.push({data:n,state:r,geometry:e.geometry,element:e})})}),t},t.prototype.changeData=function(e){this.update({data:e})},t.prototype.changeSize=function(e,t){this.chart.changeSize(e,t)},t.prototype.addAnnotations=function(e,t){t||=this.chart;var n=s([],e,!0),r=t.getController(`annotation`),i=r.getComponents().map(function(e){return e.extra});r.clear(!0);for(var a=function(e){var t=i[e],a=n.findIndex(function(e){return e.id&&e.id===t.id});a!==-1&&(t=Y({},t,n[a]),n.splice(a,1)),r.annotation(t)},o=0;o<i.length;o++)a(o);n.forEach(function(e){return r.annotation(e)}),t.render(!0)},t.prototype.removeAnnotations=function(e){var t=this.chart.getController(`annotation`),n=t.getComponents().map(function(e){return e.extra});t.clear(!0);for(var r=function(r){var i=n[r];e.find(function(e){return e.id&&e.id===i.id})||t.annotation(i)},i=0;i<n.length;i++)r(i);this.chart.render(!0)},t.prototype.destroy=function(){this.unbindSizeSensor(),this.chart.destroy(),this.off(),this.container.removeAttribute(SD)},t.prototype.execAdaptor=function(){var e=this.getSchemaAdaptor(),t=this.options,n=t.padding,r=t.appendPadding;this.chart.padding=n,this.chart.appendPadding=r,e({chart:this.chart,options:this.options})},t.prototype.triggerResize=function(){this.chart.forceFit()},t.prototype.bindSizeSensor=function(){var e=this;if(!this.unbind){var t=this.options.autoFit;(t===void 0||t)&&(this.unbind=(0,xD.bind)(this.container,function(){var t=YT(e.container),n=t.width,r=t.height;(n!==e.chart.width||r!==e.chart.height)&&e.triggerResize()}))}},t.prototype.unbindSizeSensor=function(){this.unbind&&=(this.unbind(),void 0)},t}(vn);function wD(e,t,n,r){var i=be(e,function(e,r){var i=r[n],a=e.has(i)?e.get(i):0,o=r[t];return a=iE(o)?a+o:a,e.set(i,a),e},new Map);return wt(e,function(e){var a,o=e[t],s=e[n],c=iE(o)&&i.get(s)!==0?o/i.get(s):0;return _(_({},e),(a={},a[r]=c,a))})}function TD(e,t,n,r){var i=be(e,function(e,r){var i=be(n,function(e,t){return`${e}${r[t]}`},``),a=e.has(i)?e.get(i):0,o=r[t];return a=iE(o)?a+o:a,e.set(i,a),e},new Map);return wt(e,function(e){var a,o=e[t],s=be(n,function(t,n){return`${t}${e[n]}`},``),c=iE(o)&&i.get(s)!==0?o/i.get(s):0;return _(_({},e),(a={},a[r]=c,a))})}function ED(e,t,n,r,i){return i?wD(e,t,n,r):e}function DD(e){var t=e.chart,n=e.options,r=n.data,i=n.color,a=n.lineStyle,o=n.lineShape,s=n.point,c=n.area,l=n.seriesField,u=s?.state,d=c?.state;t.data(r);var f=Y({},e,{options:{shapeField:l,line:{color:i,style:a,shape:o},point:s&&_({color:i,shape:`circle`},s),area:c&&_({color:i},c),label:void 0}}),p=Y({},f,{options:{tooltip:!1,state:u}}),m=Y({},f,{options:{tooltip:!1,state:d}});return lD(f),uD(p),aD(m),e}function OD(e){var t,n,r=e.options,i=r.xAxis,a=r.yAxis,o=r.xField,s=r.yField,c=r.data;return X(GE((t={},t[o]=i,t[s]=a,t),(n={},n[o]={type:`cat`},n[s]=zT(c,s),n)))(e)}function kD(e){var t=e.chart,n=e.options.reflect;if(n){var r=n;N(r)||(r=[r]);var i=r.map(function(e){return[`reflect`,e]});t.coordinate({type:`rect`,actions:i})}return e}function AD(e){var t=e.chart,n=e.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField;return r===!1?t.axis(a,!1):t.axis(a,r),i===!1?t.axis(o,!1):t.axis(o,i),e}function jD(e){var t=e.chart,n=e.options,r=n.legend,i=n.seriesField;return r&&i?t.legend(i,r):r===!1&&t.legend(!1),e}function MD(e){var t=e.chart,n=e.options,r=n.label,i=n.yField,a=XT(t,`line`);if(!r)a.label(!1);else{var s=r.fields,c=r.callback,l=o(r,[`fields`,`callback`]);a.label({fields:s||[i],callback:c,cfg:_({layout:[{type:`limit-in-plot`},{type:`path-adjust-position`},{type:`point-adjust-position`},{type:`limit-in-plot`,cfg:{action:`hide`}}]},tE(l))})}return e}function ND(e){var t=e.chart;return e.options.isStack&&F(t.geometries,function(e){e.adjust(`stack`)}),e}function PD(e){return X(DD,OD,ND,Q,kD,AD,jD,zE,MD,UE,WE,BE,VE,KE(),qE)(e)}function FD(e){var t=e.chart,n=e.options,r=n.data,i=n.areaStyle,a=n.areaShape,o=n.color,s=n.point,c=n.line,l=n.isPercent,u=n.xField,d=n.yField,f=n.tooltip,p=n.seriesField,m=n.startOnZero,h=s?.state,g=ED(r,d,u,d,l);t.data(g);var v=l?_({formatter:function(e){return{name:e[p]||e[u],value:(Number(e[d])*100).toFixed(2)+`%`}}},f):f,y=Y({},e,{options:{area:{color:o,style:i,shape:a},point:s&&_({color:o},s),tooltip:v,label:void 0,args:{startOnZero:m}}}),b={chart:t,options:Y({line:{size:2}},At(n,[`state`]),{line:c&&_({color:o},c),sizeField:p,state:c?.state,tooltip:!1,label:void 0,args:{startOnZero:m}})},x=Y({},y,{options:{tooltip:!1,state:h}});return aD(y),lD(b),uD(x),e}function ID(e){var t=e.chart,n=e.options,r=n.label,i=n.yField,a=XT(t,`area`);if(!r)a.label(!1);else{var s=r.fields,c=r.callback,l=o(r,[`fields`,`callback`]);a.label({fields:s||[i],callback:c,cfg:_({layout:[{type:`limit-in-plot`},{type:`path-adjust-position`},{type:`point-adjust-position`},{type:`limit-in-plot`,cfg:{action:`hide`}}]},tE(l))})}return e}function LD(e){var t=e.chart,n=e.options,r=n.isStack,i=n.isPercent,a=n.seriesField;return(i||r)&&a&&F(t.geometries,function(e){e.adjust(`stack`)}),e}function RD(e){return X(Q,LE(`areaStyle`),JE(`rect`),FD,OD,LD,AD,jD,zE,ID,UE,KE(),BE,VE,qE)(e)}var zD=Y({},$.getDefaultOptions(),{tooltip:{shared:!0,showMarkers:!0,showCrosshairs:!0,crosshairs:{type:`x`}},isStack:!0,line:{},legend:{position:`top-left`,radio:{}}}),BD=function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=`area`,t}return t.getDefaultOptions=function(){return zD},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.changeData=function(e){this.updateOption({data:e});var t=this.options,n=t.isPercent,r=t.xField,i=t.yField,a=this,o=a.chart,s=a.options;OD({chart:o,options:s}),this.chart.changeData(ED(e,i,r,i,n))},t.prototype.getSchemaAdaptor=function(){return RD},t}($),VD=10,HD=5,UD={padding:[8,10],text:`reset`,textStyle:{default:{x:0,y:0,fontSize:12,fill:`#333333`,cursor:`pointer`}},buttonStyle:{default:{fill:`#f7f7f7`,stroke:`#cccccc`,cursor:`pointer`},active:{fill:`#e6e6e6`}}},WD=function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.buttonGroup=null,t.buttonCfg=_({name:`button`},UD),t}return t.prototype.getButtonCfg=function(){var e=this.context.view,t=z(e,[`interactions`,`filter-action`,`cfg`,`buttonConfig`]);return Y(this.buttonCfg,t,this.cfg)},t.prototype.drawButton=function(){var e=this.getButtonCfg(),t=this.context.view.foregroundGroup.addGroup({name:e.name}),n=this.drawText(t);this.drawBackground(t,n.getBBox()),this.buttonGroup=t},t.prototype.drawText=function(e){var t=this.getButtonCfg();return e.addShape({type:`text`,name:`button-text`,attrs:_({text:t.text},t.textStyle?.default)})},t.prototype.drawBackground=function(e,t){var n=this.getButtonCfg(),r=oE(n.padding),i=e.addShape({type:`rect`,name:`button-rect`,attrs:_({x:t.x-r[3],y:t.y-r[0],width:t.width+r[1]+r[3],height:t.height+r[0]+r[2]},n.buttonStyle?.default)});return i.toBack(),e.on(`mouseenter`,function(){i.attr(n.buttonStyle?.active)}),e.on(`mouseleave`,function(){i.attr(n.buttonStyle?.default)}),i},t.prototype.resetPosition=function(){var e=this.context.view.getCoordinate().convert({x:1,y:1}),t=this.buttonGroup,n=t.getBBox(),r=hv.transform(null,[[`t`,e.x-n.width-VD,e.y+n.height+HD]]);t.setMatrix(r)},t.prototype.show=function(){this.buttonGroup||this.drawButton(),this.resetPosition(),this.buttonGroup.show()},t.prototype.hide=function(){this.buttonGroup&&this.buttonGroup.hide()},t.prototype.destroy=function(){var t=this.buttonGroup;t&&t.remove(),e.prototype.destroy.call(this)},t}(ih);U(`brush-reset-button`,WD,{name:`brush-reset-button`}),W(`filter-action`,{});function GD(e){return e.isInPlot()}function KD(e,t,n){var r=n||{},i=r.mask,a=r.isStartEnable,o=t||`rect`;switch(e){case`brush`:return{showEnable:[{trigger:`plot:mouseenter`,action:`cursor:crosshair`,isEnable:a||(function(){return!0})},{trigger:`plot:mouseleave`,action:`cursor:default`}],start:[{trigger:`mousedown`,isEnable:a||GD,action:[`brush:start`,`${o}-mask:start`,`${o}-mask:show`],arg:[null,{maskStyle:i?.style}]}],processing:[{trigger:`mousemove`,isEnable:GD,action:[`${o}-mask:resize`]}],end:[{trigger:`mouseup`,isEnable:GD,action:[`brush:filter`,`brush:end`,`${o}-mask:end`,`${o}-mask:hide`,`brush-reset-button:show`]}],rollback:[{trigger:`brush-reset-button:click`,action:[`brush:reset`,`brush-reset-button:hide`,`cursor:crosshair`]}]};case`brush-highlight`:return{showEnable:[{trigger:`plot:mouseenter`,action:`cursor:crosshair`,isEnable:a||(function(){return!0})},{trigger:`plot:mousemove`,action:`cursor:crosshair`,isEnable:a||(function(){return!0})},{trigger:`plot:mousemove`,action:`cursor:default`,isEnable:function(e){return a?!a(e):!1}},{trigger:`mask:mouseenter`,action:`cursor:move`,isEnable:a||(function(){return!0})},{trigger:`plot:mouseleave`,action:`cursor:default`},{trigger:`mask:mouseleave`,action:`cursor:crosshair`}],start:[{trigger:`plot:mousedown`,isEnable:a||(function(e){return!e.isInShape(`mask`)}),action:[`${o}-mask:start`,`${o}-mask:show`],arg:[{maskStyle:i?.style}]},{trigger:`mask:dragstart`,action:[`${o}-mask:moveStart`]}],processing:[{trigger:`plot:mousemove`,action:[`${o}-mask:resize`]},{trigger:`mask:drag`,action:[`${o}-mask:move`]},{trigger:`mask:change`,action:[`element-range-highlight:highlight`]}],end:[{trigger:`plot:mouseup`,action:[`${o}-mask:end`]},{trigger:`mask:dragend`,action:[`${o}-mask:moveEnd`]},{trigger:`document:mouseup`,isEnable:function(e){return!e.isInPlot()},action:[`element-range-highlight:clear`,`${o}-mask:end`,`${o}-mask:hide`]}],rollback:[{trigger:`dblclick`,action:[`element-range-highlight:clear`,`${o}-mask:hide`]}]};case`brush-x`:return{showEnable:[{trigger:`plot:mouseenter`,action:`cursor:crosshair`,isEnable:a||(function(){return!0})},{trigger:`plot:mouseleave`,action:`cursor:default`}],start:[{trigger:`mousedown`,isEnable:a||GD,action:[`brush-x:start`,`${o}-mask:start`,`${o}-mask:show`],arg:[null,{maskStyle:i?.style}]}],processing:[{trigger:`mousemove`,isEnable:GD,action:[`${o}-mask:resize`]}],end:[{trigger:`mouseup`,isEnable:GD,action:[`brush-x:filter`,`brush-x:end`,`${o}-mask:end`,`${o}-mask:hide`]}],rollback:[{trigger:`dblclick`,action:[`brush-x:reset`]}]};case`brush-x-highlight`:return{showEnable:[{trigger:`plot:mouseenter`,action:`cursor:crosshair`,isEnable:a||(function(){return!0})},{trigger:`mask:mouseenter`,action:`cursor:move`,isEnable:a||(function(){return!0})},{trigger:`plot:mouseleave`,action:`cursor:default`},{trigger:`mask:mouseleave`,action:`cursor:crosshair`}],start:[{trigger:`plot:mousedown`,isEnable:a||(function(e){return!e.isInShape(`mask`)}),action:[`${o}-mask:start`,`${o}-mask:show`],arg:[{maskStyle:i?.style}]},{trigger:`mask:dragstart`,action:[`${o}-mask:moveStart`]}],processing:[{trigger:`plot:mousemove`,action:[`${o}-mask:resize`]},{trigger:`mask:drag`,action:[`${o}-mask:move`]},{trigger:`mask:change`,action:[`element-range-highlight:highlight`]}],end:[{trigger:`plot:mouseup`,action:[`${o}-mask:end`]},{trigger:`mask:dragend`,action:[`${o}-mask:moveEnd`]},{trigger:`document:mouseup`,isEnable:function(e){return!e.isInPlot()},action:[`element-range-highlight:clear`,`${o}-mask:end`,`${o}-mask:hide`]}],rollback:[{trigger:`dblclick`,action:[`element-range-highlight:clear`,`${o}-mask:hide`]}]};case`brush-y`:return{showEnable:[{trigger:`plot:mouseenter`,action:`cursor:crosshair`,isEnable:a||(function(){return!0})},{trigger:`plot:mouseleave`,action:`cursor:default`}],start:[{trigger:`mousedown`,isEnable:a||GD,action:[`brush-y:start`,`${o}-mask:start`,`${o}-mask:show`],arg:[null,{maskStyle:i?.style}]}],processing:[{trigger:`mousemove`,isEnable:GD,action:[`${o}-mask:resize`]}],end:[{trigger:`mouseup`,isEnable:GD,action:[`brush-y:filter`,`brush-y:end`,`${o}-mask:end`,`${o}-mask:hide`]}],rollback:[{trigger:`dblclick`,action:[`brush-y:reset`]}]};case`brush-y-highlight`:return{showEnable:[{trigger:`plot:mouseenter`,action:`cursor:crosshair`,isEnable:a||(function(){return!0})},{trigger:`mask:mouseenter`,action:`cursor:move`,isEnable:a||(function(){return!0})},{trigger:`plot:mouseleave`,action:`cursor:default`},{trigger:`mask:mouseleave`,action:`cursor:crosshair`}],start:[{trigger:`plot:mousedown`,isEnable:a||(function(e){return!e.isInShape(`mask`)}),action:[`${o}-mask:start`,`${o}-mask:show`],arg:[{maskStyle:i?.style}]},{trigger:`mask:dragstart`,action:[`${o}-mask:moveStart`]}],processing:[{trigger:`plot:mousemove`,action:[`${o}-mask:resize`]},{trigger:`mask:drag`,action:[`${o}-mask:move`]},{trigger:`mask:change`,action:[`element-range-highlight:highlight`]}],end:[{trigger:`plot:mouseup`,action:[`${o}-mask:end`]},{trigger:`mask:dragend`,action:[`${o}-mask:moveEnd`]},{trigger:`document:mouseup`,isEnable:function(e){return!e.isInPlot()},action:[`element-range-highlight:clear`,`${o}-mask:end`,`${o}-mask:hide`]}],rollback:[{trigger:`dblclick`,action:[`element-range-highlight:clear`,`${o}-mask:hide`]}]};default:return{}}}W(`brush`,KD(`brush`)),W(`brush-highlight`,KD(`brush-highlight`)),W(`brush-x`,KD(`brush-x`,`x-rect`)),W(`brush-y`,KD(`brush-y`,`y-rect`)),W(`brush-x-highlight`,KD(`brush-x-highlight`,`x-rect`)),W(`brush-y-highlight`,KD(`brush-y-highlight`,`y-rect`));var qD=[`brush`,`brush-x`,`brush-y`,`brush-highlight`,`brush-x-highlight`,`brush-y-highlight`];function JD(e){var t=e.options,n=t.brush,r=k(t.interactions||[],function(e){return qD.indexOf(e.type)===-1});return n?.enabled&&(qD.forEach(function(e){var t=!1;switch(n.type){case`x-rect`:t=e===(n.action===`highlight`?`brush-x-highlight`:`brush-x`);break;case`y-rect`:t=e===(n.action===`highlight`?`brush-y-highlight`:`brush-y`);break;default:t=e===(n.action===`highlight`?`brush-highlight`:`brush`);break}var i={type:e,enable:t};n&&(i.cfg=KD(e,n.type,n)),r.push(i)}),n?.action!==`highlight`&&r.push({type:`filter-action`,cfg:{buttonConfig:n.button}})),Y({},e,{options:{interactions:r}})}var YD={hover:`__interval-connected-area-hover__`,click:`__interval-connected-area-click__`},XD=function(e,t){return e===`hover`?[{trigger:`interval:mouseenter`,action:[`element-highlight-by-color:highlight`,`element-link-by-color:link`],arg:[null,{style:t}]}]:[{trigger:`interval:click`,action:[`element-highlight-by-color:clear`,`element-highlight-by-color:highlight`,`element-link-by-color:clear`,`element-link-by-color:unlink`,`element-link-by-color:link`],arg:[null,null,null,null,{style:t}]}]};W(YD.hover,{start:XD(YD.hover),end:[{trigger:`interval:mouseleave`,action:[`element-highlight-by-color:reset`,`element-link-by-color:unlink`]}]}),W(YD.click,{start:XD(YD.click),end:[{trigger:`document:mousedown`,action:[`element-highlight-by-color:clear`,`element-link-by-color:clear`]}]});function ZD(e){return e===void 0&&(e=!1),function(t){var n=t.chart,r=t.options.connectedArea,i=function(){n.removeInteraction(YD.hover),n.removeInteraction(YD.click)};if(!e&&r){var a=r.trigger||`hover`;i(),n.interaction(YD[a],{start:XD(a,r.style)})}else i();return t}}function QD(e,t){return!L(e)||!L(t)||e===0&&t===0?`-`:e===t?`100%`:e===0?`∞`:`${(100*t/e).toFixed(2)}%`}function $D(e,t){return Y({size:t?32:80,spacing:t?8:12,offset:t?32:0,arrow:e.arrow!==!1&&{headSize:12,style:{fill:`rgba(0, 0, 0, 0.05)`}},text:e.text!==!1&&{style:{fontSize:12,fill:`rgba(0, 0, 0, 0.85)`,textAlign:`center`,textBaseline:`middle`},formatter:QD}},e)}function eO(e,t){return wt(t.getModel().points,function(t){return e.convertPoint(t)})}function tO(e,t,n){var r=e.view,i=e.geometry,a=e.group,o=e.options,s=e.horizontal,c=o.offset,l=o.size,u=o.arrow,d=r.getCoordinate(),f=eO(d,t)[3],p=eO(d,n)[0],m=p.y-f.y,h=p.x-f.x;if(typeof u!=`boolean`){var g=u.headSize,v=o.spacing,y;s?(h-g)/2<v?(v=Math.max(1,(h-g)/2),y=[[f.x+v,f.y-c],[f.x+v,f.y-c-l],[p.x-v,p.y-c-l/2]]):y=[[f.x+v,f.y-c],[f.x+v,f.y-c-l],[p.x-v-g,p.y-c-l],[p.x-v,p.y-c-l/2],[p.x-v-g,p.y-c]]:(m-g)/2<v?(v=Math.max(1,(m-g)/2),y=[[f.x+c,f.y+v],[f.x+c+l,f.y+v],[p.x+c+l/2,p.y-v]]):y=[[f.x+c,f.y+v],[f.x+c+l,f.y+v],[p.x+c+l,p.y-v-g],[p.x+c+l/2,p.y-v],[p.x+c,p.y-v-g]],a.addShape(`polygon`,{id:`${r.id}-conversion-tag-arrow-${i.getElementId(t.getModel().mappingData)}`,name:`conversion-tag-arrow`,origin:{element:t,nextElement:n},attrs:_(_({},u.style||{}),{points:y})})}}function nO(e,t,n){var r=e.view,i=e.geometry,a=e.group,o=e.options,s=e.field,c=e.horizontal,l=o.offset,u=o.size;if(typeof o.text!=`boolean`){var d=r.getCoordinate(),f=o.text?.formatter&&o.text?.formatter(t.getData()[s],n.getData()[s]),p=eO(d,t)[c?3:0],m=eO(d,n)[c?0:3],h=a.addShape(`text`,{id:`${r.id}-conversion-tag-text-${i.getElementId(t.getModel().mappingData)}`,name:`conversion-tag-text`,origin:{element:t,nextElement:n},attrs:_(_({},o.text?.style||{}),{text:f,x:c?(p.x+m.x)/2:p.x+l+u/2,y:c?p.y-l-u/2:(p.y+m.y)/2})});if(c){var g=m.x-p.x,v=h.getBBox().width;if(v>g){var y=v/f.length,b=Math.max(1,Math.ceil(g/y)-1),x=`${f.slice(0,b)}...`;h.attr(`text`,x)}}}}function rO(e,t,n){tO(e,t,n),nO(e,t,n)}function iO(e,t,n){return t===void 0&&(t=!0),n===void 0&&(n=!1),function(r){var i=r.options,a=r.chart,o=i.conversionTag,s=i.theme;return o&&!n&&(a.theme(Y({},P(s)?s:Sg(s),{columnWidthRatio:1/3})),a.annotation().shape({render:function(n,r){var i=n.addGroup({id:`${a.id}-conversion-tag-group`,name:`conversion-tag-group`}),s=le(a.geometries,function(e){return e.type===`interval`}),c={view:r,geometry:s,group:i,field:e,horizontal:t,options:$D(o,t)},l=s.elements;F(l,function(e,t){t>0&&rO(c,l[t-1],e)})}})),r}}function aO(e){var t=e.options,n=t.legend,r=t.seriesField,i=t.isStack;return r?n!==!1&&(n=_({position:i?`right-top`:`top-left`},n)):n=!1,e.options.legend=n,e}function oO(e){var t=e.chart,n=e.options,r=n.data,i=n.columnStyle,a=n.color,o=n.columnWidthRatio,s=n.isPercent,c=n.isGroup,l=n.isStack,u=n.xField,d=n.yField,f=n.seriesField,p=n.groupField,m=n.tooltip,h=n.shape,g=s&&c&&l?TD(r,d,[u,p],d):ED(r,d,u,d,s),v=[];l&&f&&!c?g.forEach(function(e){var t=v.find(function(t){return t[u]===e[u]&&t[f]===e[f]});t?t[d]+=e[d]||0:v.push(_({},e))}):v=g,t.data(v);var y=s?_({formatter:function(e){return{name:c&&l?`${e[f]} - ${e[p]}`:e[f]??e[u],value:(Number(e[d])*100).toFixed(2)+`%`}}},m):m,b=Y({},e,{options:{data:v,widthRatio:o,tooltip:y,interval:{shape:h,style:i,color:a}}});return cD(b),b}function sO(e){var t,n,r=e.options,i=r.xAxis,a=r.yAxis,o=r.xField,s=r.yField,c=r.data,l=r.isPercent?{max:1,min:0,minLimit:0,maxLimit:1}:{};return X(GE((t={},t[o]=i,t[s]=a,t),(n={},n[o]={type:`cat`},n[s]=_(_({},zT(c,s)),l),n)))(e)}function cO(e){var t=e.chart,n=e.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField;return r===!1?t.axis(a,!1):t.axis(a,r),i===!1?t.axis(o,!1):t.axis(o,i),e}function lO(e){var t=e.chart,n=e.options,r=n.legend,i=n.seriesField;return r&&i?t.legend(i,r):r===!1&&t.legend(!1),e}function uO(e){var t=e.chart,n=e.options,r=n.label,i=n.yField,a=n.isRange,s=XT(t,`interval`);if(!r)s.label(!1);else{var c=r.callback,l=o(r,[`callback`]);s.label({fields:[i],callback:c,cfg:_({layout:l?.position?void 0:[{type:`interval-adjust-position`},{type:`interval-hide-overlap`},{type:`adjust-color`},{type:`limit-in-plot`,cfg:{action:`hide`}}]},tE(a?_({content:function(e){return e[i]?.join(`-`)}},l):l))})}return e}function dO(e){var t=e.chart,n=e.options,r=n.tooltip,i=n.isGroup,a=n.isStack,o=n.groupField,s=n.data,c=n.xField,l=n.yField,u=n.seriesField;if(r===!1)t.tooltip(!1);else{var d=r;if(i&&a){var f=d.customItems,p=d?.formatter||(function(e){return{name:`${e[u]} - ${e[o]}`,value:e[l]}});d=_(_({},d),{customItems:function(e){var t=[];return F(e,function(e){k(s,function(t){return ae(t,J(e.data,[c,u]))}).forEach(function(n){t.push(_(_(_({},e),{value:n[l],data:n,mappingData:{_origin:n}}),p(n)))})}),f?f(t):t}})}t.tooltip(d)}return e}function fO(e,t){t===void 0&&(t=!1);var n=e.options,r=n.seriesField;return X(aO,Q,LE(`columnStyle`),HE,JE(`rect`),oO,sO,cO,lO,dO,UE,WE,uO,JD,BE,VE,KE(),iO(n.yField,!t,!!r),ZD(!n.isStack),qE)(e)}function pO(e){var t=e.options,n=t.xField,r=t.yField,i=t.xAxis,a=t.yAxis,o={left:`bottom`,right:`top`,top:`left`,bottom:`right`},s=a===!1?!1:_({position:o[a?.position||`left`]},a),c=i===!1?!1:_({position:o[i?.position||`bottom`]},i);return _(_({},e),{options:_(_({},t),{xField:r,yField:n,xAxis:s,yAxis:c})})}function mO(e){var t=e.options.label;return t&&!t.position&&(t.position=`left`,t.layout||=[{type:`interval-adjust-position`},{type:`interval-hide-overlap`},{type:`adjust-color`},{type:`limit-in-plot`,cfg:{action:`hide`}}]),Y({},e,{options:{label:t}})}function hO(e){var t=e.options,n=t.seriesField,r=t.isStack,i=t.legend;return n?i!==!1&&(i=_({position:r?`top-left`:`right-top`},i||{})):i=!1,Y({},e,{options:{legend:i}})}function gO(e){var t=e.options,n=[{type:`transpose`},{type:`reflectY`}].concat(t.coordinate||[]);return Y({},e,{options:{coordinate:n}})}function _O(e){var t=e.chart,n=e.options,r=n.barStyle,i=n.barWidthRatio,a=n.minBarWidth,o=n.maxBarWidth,s=n.barBackground;return fO({chart:t,options:_(_({},n),{columnStyle:r,columnWidthRatio:i,minColumnWidth:a,maxColumnWidth:o,columnBackground:s})},!0)}function vO(e){return X(pO,mO,hO,zE,gO,_O)(e)}var yO=Y({},$.getDefaultOptions(),{barWidthRatio:.6,marginRatio:1/32,tooltip:{shared:!0,showMarkers:!1,offset:20},legend:{radio:{}},interactions:[{type:`active-region`}]}),bO=function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=`bar`,t}return t.getDefaultOptions=function(){return yO},t.prototype.changeData=function(e){var t,n;this.updateOption({data:e});var r=this,i=r.chart,a=r.options,o=a.isPercent,s=a.xField,c=a.yField,l=a.xAxis,u=a.yAxis;t=[c,s],s=t[0],c=t[1],n=[u,l],l=n[0],u=n[1];var d=_(_({},a),{xField:s,yField:c,yAxis:u,xAxis:l});sO({chart:i,options:d}),i.changeData(ED(e,s,c,s,o))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return vO},t}($),xO=Y({},$.getDefaultOptions(),{columnWidthRatio:.6,marginRatio:1/32,tooltip:{shared:!0,showMarkers:!1,offset:20},legend:{radio:{}},interactions:[{type:`active-region`}]}),SO=function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=`column`,t}return t.getDefaultOptions=function(){return xO},t.prototype.changeData=function(e){this.updateOption({data:e});var t=this.options,n=t.yField,r=t.xField,i=t.isPercent,a=this,o=a.chart,s=a.options;sO({chart:o,options:s}),this.chart.changeData(ED(e,n,r,n,i))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return fO},t}($),CO,wO=`$$percentage$$`,TO=`$$mappingValue$$`,EO=`$$conversion$$`,DO=`$$totalPercentage$$`,OO=`$$x$$`,kO=`$$y$$`,AO={appendPadding:[0,80],minSize:0,maxSize:1,meta:(CO={},CO[TO]={min:0,max:1,nice:!1},CO),label:{style:{fill:`#fff`,fontSize:12}},tooltip:{showTitle:!1,showMarkers:!1,shared:!1},conversionTag:{offsetX:10,offsetY:0,style:{fontSize:12,fill:`rgba(0,0,0,0.45)`}}},jO=`CONVERSION_TAG_NAME`;function MO(e,t,n){var r=[],i=n.yField,a=n.maxSize,o=n.minSize,s=z(ze(t,i),[i]),c=L(a)?a:1,l=L(o)?o:0;return r=wt(e,function(t,n){var r=(t[i]||0)/s;return t[wO]=r,t[TO]=(c-l)*r+l,t[EO]=[z(e,[n-1,i]),t[i]],t}),r}function NO(e){return function(t){var n=t.chart,r=t.options,i=r.conversionTag,a=r.filteredData||n.getOptions().data;if(i){var o=i.formatter;a.forEach(function(t,r){if(!(r<=0||Number.isNaN(t.$$mappingValue$$))){var s=e(t,r,a,{top:!0,name:jO,text:{content:j(o)?o(t,a):o,offsetX:i.offsetX,offsetY:i.offsetY,position:`end`,autoRotate:!1,style:_({textAlign:`start`,textBaseline:`middle`},i.style)}});n.annotation().line(s)}})}return t}}function PO(e){var t=e.chart,n=e.options,r=n.data,i=r===void 0?[]:r,a=n.yField,o=n.maxSize,s=n.minSize,c=MO(i,i,{yField:a,maxSize:o,minSize:s});return t.data(c),e}function FO(e){var t=e.chart,n=e.options,r=n.xField,i=n.yField,a=n.color,o=n.tooltip,s=n.label,c=n.shape,l=c===void 0?`funnel`:c,u=n.funnelStyle,d=n.state,f=tD(o,[r,i]),p=f.fields,m=f.formatter;return iD({chart:t,options:{type:`interval`,xField:r,yField:TO,colorField:r,tooltipFields:N(p)&&p.concat([`$$percentage$$`,`$$conversion$$`]),mapping:{shape:l,tooltip:m,color:a,style:u},label:s,state:d}}),XT(e.chart,`interval`).adjust(`symmetric`),e}function IO(e){var t=e.chart,n=e.options.isTransposed;return t.coordinate({type:`rect`,actions:n?[]:[[`transpose`],[`scale`,1,-1]]}),e}function LO(e){var t=e.options,n=e.chart,r=t.maxSize,i=z(n,[`geometries`,`0`,`dataArray`],[]),a=z(n,[`options`,`data`,`length`]),o=wt(i,function(e){return z(e,[`0`,`nextPoints`,`0`,`x`])*a-.5});return NO(function(e,t,n,i){var a=r-(r-e[TO])/2;return _(_({},i),{start:[o[t-1]||t-.5,a],end:[o[t-1]||t-.5,a+.05]})})(e),e}function RO(e){return X(PO,FO,IO,LO)(e)}function zO(e){var t,n=e.chart,r=e.options,i=r.data,a=i===void 0?[]:i,o=r.yField;return n.data(a),n.scale((t={},t[o]={sync:!0},t)),e}function BO(e){var t=e.chart,n=e.options,r=n.data,i=n.xField,a=n.yField,o=n.color,s=n.compareField,c=n.isTransposed,l=n.tooltip,u=n.maxSize,d=n.minSize,f=n.label,p=n.funnelStyle,m=n.state,h=n.showFacetTitle;return t.facet(`mirror`,{fields:[s],transpose:!c,padding:c?0:[32,0,0,0],showTitle:h,eachView:function(e,t){var n=c?t.rowIndex:t.columnIndex;c||e.coordinate({type:`rect`,actions:[[`transpose`],[`scale`,n===0?-1:1,-1]]});var h=MO(t.data,r,{yField:a,maxSize:u,minSize:d});e.data(h);var g=tD(l,[i,a,s]),_=g.fields,v=g.formatter,y=c?{offset:n===0?10:-23,position:n===0?`bottom`:`top`}:{offset:10,position:`left`,style:{textAlign:n===0?`end`:`start`}};iD({chart:e,options:{type:`interval`,xField:i,yField:TO,colorField:i,tooltipFields:N(_)&&_.concat([`$$percentage$$`,`$$conversion$$`]),mapping:{shape:`funnel`,tooltip:v,color:o,style:p},label:f===!1?!1:Y({},y,f),state:m}})}}),e}function VO(e){var t=e.chart,n=e.index,r=e.options,i=r.conversionTag,a=r.isTransposed;(L(n)?[t]:t.views).forEach(function(e,t){var o=z(e,[`geometries`,`0`,`dataArray`],[]),s=z(e,[`options`,`data`,`length`]),c=wt(o,function(e){return z(e,[`0`,`nextPoints`,`0`,`x`])*s-.5});NO(function(e,r,o,s){var l=(n||t)===0?-1:1;return Y({},s,{start:[c[r-1]||r-.5,e[TO]],end:[c[r-1]||r-.5,e[TO]+.05],text:a?{style:{textAlign:`start`}}:{offsetX:i===!1?0:l*i.offsetX,style:{textAlign:(n||t)===0?`end`:`start`}}})})(Y({},{chart:e,options:r}))})}function HO(e){return e.chart.once(`beforepaint`,function(){return VO(e)}),e}function UO(e){return X(zO,BO,HO)(e)}function WO(e){var t=e.chart,n=e.options,r=n.data,i=r===void 0?[]:r,a=n.yField,o=be(i,function(e,t){return e+(t[a]||0)},0),s=ze(i,a)[a],c=wt(i,function(e,t){var n=[],r=[];if(e[DO]=(e[a]||0)/o,t){var c=i[t-1][OO],l=i[t-1][kO];n[0]=c[3],r[0]=l[3],n[1]=c[2],r[1]=l[2]}else n[0]=-.5,r[0]=1,n[1]=.5,r[1]=1;return r[2]=r[1]-e[DO],n[2]=(r[2]+1)/4,r[3]=r[2],n[3]=-n[2],e[OO]=n,e[kO]=r,e[wO]=(e[a]||0)/s,e[EO]=[z(i,[t-1,a]),e[a]],e});return t.data(c),e}function GO(e){var t=e.chart,n=e.options,r=n.xField,i=n.yField,a=n.color,o=n.tooltip,s=n.label,c=n.funnelStyle,l=n.state,u=tD(o,[r,i]),d=u.fields,f=u.formatter;return iD({chart:t,options:{type:`polygon`,xField:OO,yField:kO,colorField:r,tooltipFields:N(d)&&d.concat([`$$percentage$$`,`$$conversion$$`]),label:s,state:l,mapping:{tooltip:f,color:a,style:c}}}),e}function KO(e){var t=e.chart,n=e.options.isTransposed;return t.coordinate({type:`rect`,actions:n?[[`transpose`],[`reflect`,`x`]]:[]}),e}function qO(e){return NO(function(e,t,n,r){return _(_({},r),{start:[e[OO][1],e[kO][1]],end:[e[OO][1]+.05,e[kO][1]]})})(e),e}function JO(e){return X(WO,GO,KO,qO)(e)}function YO(e){var t,n=e.chart,r=e.options,i=r.data,a=i===void 0?[]:i,o=r.yField;return n.data(a),n.scale((t={},t[o]={sync:!0},t)),e}function XO(e){var t=e.chart,n=e.options,r=n.seriesField,i=n.isTransposed,a=n.showFacetTitle;return t.facet(`rect`,{fields:[r],padding:[i?0:32,10,0,10],showTitle:a,eachView:function(t,n){RO(Y({},e,{chart:t,options:{data:n.data}}))}}),e}function ZO(e){return X(YO,XO)(e)}var QO=function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.rendering=!1,t}return t.prototype.change=function(e){var t=this;if(!this.rendering){var n=e.seriesField,r=e.compareField,i=r?VO:LO,a=this.context.view,o=n||r?a.views:[a];wt(o,function(n,r){var a=n.getController(`annotation`),o=k(z(a,[`option`],[]),function(e){return e.name!==jO});a.clear(!0),F(o,function(e){typeof e==`object`&&n.annotation()[e.type](e)});var s=z(n,[`filteredData`],n.getOptions().data);i({chart:n,index:r,options:_(_({},e),{filteredData:MO(s,s,e)})}),n.filterData(s),t.rendering=!0,n.render(!0)})}this.rendering=!1},t}(ih),$O=`funnel-conversion-tag`,ek=`funnel-afterrender`,tk={trigger:`afterrender`,action:`${$O}:change`};U($O,QO),W(ek,{start:[tk]});function nk(e){var t=e.options,n=t.compareField,r=t.xField,i=t.yField,a=t.locale,o=t.funnelStyle,s=t.data,c=QE(a),l={label:n?{fields:[r,i,n,wO,EO],formatter:function(e){return`${e[i]}`}}:{fields:[r,i,wO,EO],offset:0,position:`middle`,formatter:function(e){return`${e[r]} ${e[i]}`}},tooltip:{title:r,formatter:function(e){return{name:e[r],value:e[i]}}},conversionTag:{formatter:function(e){return`${c.get([`conversionTag`,`label`])}: ${QD.apply(void 0,e[EO])}`}}},u;return(n||o)&&(u=function(e){return Y({},n&&{lineWidth:1,stroke:`#fff`},j(o)?o(e):o)}),Y({options:l},e,{options:{funnelStyle:u,data:ft(s)}})}function rk(e){var t=e.options,n=t.compareField,r=t.dynamicHeight;return t.seriesField?ZO(e):n?UO(e):r?JO(e):RO(e)}function ik(e){var t,n=e.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField;return X(GE((t={},t[a]=r,t[o]=i,t)))(e)}function ak(e){return e.chart.axis(!1),e}function ok(e){var t=e.chart,n=e.options.legend;return n===!1?t.legend(!1):t.legend(n),e}function sk(e){var t=e.chart,n=e.options,r=n.interactions,i=n.dynamicHeight;return F(r,function(e){e.enable===!1?t.removeInteraction(e.type):t.interaction(e.type,e.cfg||{})}),i?t.removeInteraction(ek):t.interaction(ek,{start:[_(_({},tk),{arg:n})]}),e}function ck(e){return X(nk,rk,ik,ak,zE,sk,ok,VE,Q,KE())(e)}var lk=function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=`funnel`,t}return t.getDefaultOptions=function(){return AO},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return ck},t.prototype.setState=function(e,t,n){n===void 0&&(n=!0);var r=QT(this.chart);F(r,function(r){t(r.getData())&&r.setState(e,n)})},t.prototype.getStates=function(){var e=QT(this.chart),t=[];return F(e,function(e){var n=e.getData(),r=e.getStates();F(r,function(r){t.push({data:n,state:r,geometry:e.geometry,element:e})})}),t},t.CONVERSATION_FIELD=EO,t.PERCENT_FIELD=wO,t.TOTAL_PERCENT_FIELD=DO,t}($),uk,dk=`range`,fk=`type`,pk=`percent`,mk=`#f0f0f0`,hk=`indicator-view`,gk=`range-view`,_k={percent:0,range:{ticks:[]},innerRadius:.9,radius:.95,startAngle:-7/6*Math.PI,endAngle:1/6*Math.PI,syncViewPadding:!0,axis:{line:null,label:{offset:-24,style:{textAlign:`center`,textBaseline:`middle`}},subTickLine:{length:-8},tickLine:{length:-12},grid:null},indicator:{pointer:{style:{lineWidth:5,lineCap:`round`}},pin:{style:{r:9.75,lineWidth:4.5,fill:`#fff`}}},statistic:{title:!1},meta:(uk={},uk[dk]={sync:`v`},uk[pk]={sync:`v`,tickCount:5,tickInterval:.2},uk),animation:!1};function vk(e,t){return e.map(function(n,r){var i;return i={},i[dk]=n-(e[r-1]||0),i[fk]=`${r}`,i[pk]=t,i})}function yk(e){var t;return[(t={},t[pk]=Fe(e,0,1),t)]}function bk(e,t){var n=z(t,[`ticks`],[]),r=It(n)?we(n):[0,Fe(e,0,1),1];return r[0]||r.shift(),vk(r,e)}function xk(e){var t=e.chart,n=e.options,r=n.percent,i=n.range,a=n.radius,o=n.innerRadius,s=n.startAngle,c=n.endAngle,l=n.axis,u=n.indicator,d=n.gaugeStyle,f=n.type,p=n.meter,m=i.color,h=i.width;if(u){var g=yk(r),_=t.createView({id:hk});_.data(g),_.point().position(`${pk}*1`).shape(u.shape||`gauge-indicator`).customInfo({defaultColor:t.getTheme().defaultColor,indicator:u}),_.coordinate(`polar`,{startAngle:s,endAngle:c,radius:o*a}),_.axis(pk,l),_.scale(pk,J(l,PT))}var v=bk(r,n.range),y=t.createView({id:gk});y.data(v);var b=I(m)?[m,mk]:m;return cD({chart:y,options:{xField:`1`,yField:dk,seriesField:fk,rawFields:[pk],isStack:!0,interval:{color:b,style:d,shape:f===`meter`?`meter-gauge`:null},args:{zIndexReversed:!0,sortZIndex:!0},minColumnWidth:h,maxColumnWidth:h}}).ext.geometry.customInfo({meter:p}),y.coordinate(`polar`,{innerRadius:o,radius:a,startAngle:s,endAngle:c}).transpose(),e}function Sk(e){var t;return X(GE((t={range:{min:0,max:1,maxLimit:1,minLimit:0}},t[pk]={},t)))(e)}function Ck(e,t){var n=e.chart,r=e.options,i=r.statistic,a=r.percent;if(n.getController(`annotation`).clear(!0),i){var o=i.content,s=void 0;o&&(s=Y({},{content:`${(a*100).toFixed(2)}%`,style:{opacity:.75,fontSize:`30px`,lineHeight:1,textAlign:`center`,color:`rgba(44,53,66,0.85)`}},o)),gE(n,{statistic:_(_({},i),{content:s})},{percent:a})}return t&&n.render(!0),e}function wk(e){var t=e.chart,n=e.options.tooltip;return n?t.tooltip(Y({showTitle:!1,showMarkers:!1,containerTpl:`<div class="g2-tooltip"><div class="g2-tooltip-list"></div></div>`,domStyles:{"g2-tooltip":{padding:`4px 8px`,fontSize:`10px`}},customContent:function(e,t){return`${(z(t,[0,`data`,pk],0)*100).toFixed(2)}%`}},n)):t.tooltip(!1),e}function Tk(e){return e.chart.legend(!1),e}function Ek(e){return X(Q,VE,xk,Sk,wk,Ck,BE,KE(),Tk)(e)}K(`point`,`gauge-indicator`,{draw:function(e,t){var n=e.customInfo,r=n.indicator,i=n.defaultColor,a=r,o=a.pointer,s=a.pin,c=t.addGroup(),l=this.parsePoint({x:0,y:0});return o&&c.addShape(`line`,{name:`pointer`,attrs:_({x1:l.x,y1:l.y,x2:e.x,y2:e.y,stroke:i},o.style)}),s&&c.addShape(`circle`,{name:`pin`,attrs:_({x:l.x,y:l.y,stroke:i},s.style)}),c}}),K(`interval`,`meter-gauge`,{draw:function(e,t){var n=e.customInfo.meter,r=n===void 0?{}:n,i=r.steps,a=i===void 0?50:i,o=r.stepRatio,s=o===void 0?.5:o;a=a<1?1:a,s=Fe(s,0,1);var c=this.coordinate,l=c.startAngle,u=c.endAngle,d=0;s>0&&s<1&&(d=(u-l)/a/(s/(1-s)+1-1/a));for(var f=d/(1-s)*s,p=t.addGroup(),m=this.coordinate.getCenter(),h=this.coordinate.getRadius(),g=hv.getAngle(e,this.coordinate),_=g.startAngle,v=g.endAngle,y=_;y<v;){var b=void 0,x=(y-l)%(f+d);x<f?b=y+(f-x):(y+=f+d-x,b=y+f);var S=hv.getSectorPath(m.x,m.y,h,y,Math.min(b,v),h*this.coordinate.innerRadius);p.addShape(`path`,{name:`meter-gauge`,attrs:{path:S,fill:e.color,stroke:e.color,lineWidth:.5}}),y=b+d}return p}});var Dk=function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=`gauge`,t}return t.getDefaultOptions=function(){return _k},t.prototype.changeData=function(e){this.chart.emit(V.BEFORE_CHANGE_DATA,Kg.fromData(this.chart,V.BEFORE_CHANGE_DATA,null)),this.updateOption({percent:e});var t=this.chart.views.find(function(e){return e.id===hk});t&&t.data(yk(e));var n=this.chart.views.find(function(e){return e.id===gk});n&&n.data(bk(e,this.options.range)),Ck({chart:this.chart,options:this.options},!0),this.chart.emit(V.AFTER_CHANGE_DATA,Kg.fromData(this.chart,V.AFTER_CHANGE_DATA,null))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Ek},t}($);function Ok(e,t,n){if(n===1)return[0,t];var r=Math.floor(e/t);return[t*r,t*(r+1)]}function kk(e){return Math.ceil(Math.log(e.length)/Math.LN2)+1}function Ak(e,t,n,r,i){var a=ft(e);Ce(a,t);var o=Te(a,t),s=ge(o),c=s.max-s.min,l=n;if(!n&&r&&(l=r>1?c/(r-1):s.max),!n&&!r){var u=kk(o);l=c/u}var d={},f=Me(a,i);xt(f)?F(a,function(e){var n=e[t],i=Ok(n,l,r),a=`${i[0]}-${i[1]}`;Ge(d,a)||(d[a]={range:i,count:0}),d[a].count+=1}):Object.keys(f).forEach(function(e){F(f[e],function(n){var a=n[t],o=Ok(a,l,r),s=`${`${o[0]}-${o[1]}`}-${e}`;Ge(d,s)||(d[s]={range:o,count:0},d[s][i]=e),d[s].count+=1})});var p=[];return F(d,function(e){p.push(e)}),p}var jk=`range`,Mk=`count`,Nk=Y({},$.getDefaultOptions(),{columnStyle:{stroke:`#FFFFFF`},tooltip:{shared:!0,showMarkers:!1},interactions:[{type:`active-region`}]});function Pk(e){var t=e.chart,n=e.options,r=n.data,i=n.binField,a=n.binNumber,o=n.binWidth,s=n.color,c=n.stackField,l=n.legend,u=n.columnStyle,d=Ak(r,i,o,a,c);t.data(d);var f=Y({},e,{options:{xField:jk,yField:Mk,seriesField:c,isStack:!0,interval:{color:s,style:u}}});return cD(f),l&&c?t.legend(c,l):t.legend(!1),e}function Fk(e){var t,n=e.options,r=n.xAxis,i=n.yAxis;return X(GE((t={},t[jk]=r,t[Mk]=i,t)))(e)}function Ik(e){var t=e.chart,n=e.options,r=n.xAxis,i=n.yAxis;return r===!1?t.axis(jk,!1):t.axis(jk,r),i===!1?t.axis(Mk,!1):t.axis(Mk,i),e}function Lk(e){var t=e.chart,n=e.options.label,r=XT(t,`interval`);if(!n)r.label(!1);else{var i=n.callback,a=o(n,[`callback`]);r.label({fields:[Mk],callback:i,cfg:tE(a)})}return e}function Rk(e){return X(Q,LE(`columnStyle`),Pk,Fk,Ik,HE,Lk,zE,BE,VE)(e)}var zk=function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=`histogram`,t}return t.getDefaultOptions=function(){return Nk},t.prototype.changeData=function(e){this.updateOption({data:e});var t=this.options,n=t.binField,r=t.binNumber,i=t.binWidth,a=t.stackField;this.chart.changeData(Ak(e,n,i,r,a))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Rk},t}($),Bk=Y({},$.getDefaultOptions(),{tooltip:{shared:!0,showMarkers:!0,showCrosshairs:!0,crosshairs:{type:`x`}},legend:{position:`top-left`,radio:{}},isStack:!1}),Vk=function(e){l(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.active=function(){var e=this.getView(),t=this.context.event;if(t.data){var n=t.data.items,r=e.geometries.filter(function(e){return e.type===`point`});F(r,function(e){F(e.elements,function(e){var t=de(n,function(t){return t.data===e.data})!==-1;e.setState(`active`,t)})})}},t.prototype.reset=function(){var e=this.getView().geometries.filter(function(e){return e.type===`point`});F(e,function(e){F(e.elements,function(e){e.setState(`active`,!1)})})},t.prototype.getView=function(){return this.context.view},t}(ih);U(`marker-active`,Vk),W(`marker-active`,{start:[{trigger:`tooltip:show`,action:`marker-active:active`}],end:[{trigger:`tooltip:hide`,action:`marker-active:reset`}]});var Hk=function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=`line`,t}return t.getDefaultOptions=function(){return Bk},t.prototype.changeData=function(e){this.updateOption({data:e});var t=this,n=t.chart,r=t.options;OD({chart:n,options:r}),this.chart.changeData(e)},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return PD},t}($),Uk=Y({},$.getDefaultOptions(),{legend:{position:`right`,radio:{}},tooltip:{shared:!1,showTitle:!1,showMarkers:!1},label:{layout:{type:`limit-in-plot`,cfg:{action:`ellipsis`}}},pieStyle:{stroke:`white`,lineWidth:1},statistic:{title:{style:{fontWeight:300,color:`#4B535E`,textAlign:`center`,fontSize:`20px`,lineHeight:1}},content:{style:{fontWeight:`bold`,color:`rgba(44,53,66,0.85)`,textAlign:`center`,fontSize:`32px`,lineHeight:1}}},theme:{components:{annotation:{text:{animate:!1}}}}}),Wk=[1,0,0,0,1,0,0,0,1];function Gk(e,t){var n=t?s([],t,!0):s([],Wk,!0);return hv.transform(n,e)}var Kk=function(e){l(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getActiveElements=function(){var e=hv.getDelegationObject(this.context);if(e){var t=this.context.view,n=e.component,r=e.item,i=n.get(`field`);if(i)return t.geometries[0].elements.filter(function(e){return e.getModel().data[i]===r.value})}return[]},t.prototype.getActiveElementLabels=function(){var e=this.context.view,t=this.getActiveElements();return e.geometries[0].labelsContainer.getChildren().filter(function(e){return t.find(function(t){return Ct(t.getData(),e.get(`data`))})})},t.prototype.transfrom=function(e){e===void 0&&(e=7.5);var t=this.getActiveElements(),n=this.getActiveElementLabels();t.forEach(function(t,r){var i=n[r],a=t.geometry.coordinate;if(a.isPolar&&a.isTransposed){var o=hv.getAngle(t.getModel(),a),s=o.startAngle,c=o.endAngle,l=(s+c)/2,u=e,d=u*Math.cos(l),f=u*Math.sin(l);t.shape.setMatrix(Gk([[`t`,d,f]])),i.setMatrix(Gk([[`t`,d,f]]))}})},t.prototype.active=function(){this.transfrom()},t.prototype.reset=function(){this.transfrom(0)},t}(ih);function qk(e){var t=e.event,n,r=t.target;return r&&(n=r.get(`element`)),n}var Jk=function(e){l(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getAnnotations=function(e){return(e||this.context.view).getController(`annotation`).option},t.prototype.getInitialAnnotation=function(){return this.initialAnnotation},t.prototype.init=function(){var e=this,t=this.context.view;t.removeInteraction(`tooltip`),t.on(`afterchangesize`,function(){e.initialAnnotation=e.getAnnotations(t)})},t.prototype.change=function(e){var t=this.context,n=t.view,r=t.event;this.initialAnnotation||=this.getAnnotations();var i=z(r,[`data`,`data`]);if(r.type.match(`legend-item`)){var a=hv.getDelegationObject(this.context),o=n.getGroupedFields()[0];if(a&&o){var s=a.item;i=n.getData().find(function(e){return e[o]===s.value})}}if(i){var c=z(e,`annotations`,[]),l=z(e,`statistic`,{});n.getController(`annotation`).clear(!0),F(c,function(e){typeof e==`object`&&n.annotation()[e.type](e)}),hE(n,{statistic:l,plotType:`pie`},i),n.render(!0)}var u=qk(this.context);u&&u.shape.toFront()},t.prototype.reset=function(){var e=this.context.view;e.getController(`annotation`).clear(!0);var t=this.getInitialAnnotation();F(t,function(t){e.annotation()[t.type](t)}),e.render(!0)},t}(ih),Yk=`pie-statistic`;U(Yk,Jk),W(`pie-statistic-active`,{start:[{trigger:`element:mouseenter`,action:`pie-statistic:change`}],end:[{trigger:`element:mouseleave`,action:`pie-statistic:reset`}]}),U(`pie-legend`,Kk),W(`pie-legend-active`,{start:[{trigger:`legend-item:mouseenter`,action:`pie-legend:active`}],end:[{trigger:`legend-item:mouseleave`,action:`pie-legend:reset`}]});function Xk(e,t){var n=null;return F(e,function(e){typeof e[t]==`number`&&(n+=e[t])}),n}function Zk(e,t){var n;switch(e){case`inner`:return n=`-30%`,I(t)&&t.endsWith(`%`)?parseFloat(t)*.01>0?n:t:t<0?t:n;case`outer`:return n=12,I(t)&&t.endsWith(`%`)?parseFloat(t)*.01<0?n:t:t>0?t:n;default:return t}}function Qk(e,t){return Oe(VT(e,t),function(e){return e[t]===0})}function $k(e){var t=e.chart,n=e.options,r=n.data,i=n.angleField,a=n.colorField,o=n.color,s=n.pieStyle,c=n.shape,l=VT(r,i);if(Qk(l,i)){var u=`$$percentage$$`;l=l.map(function(e){var t;return _(_({},e),(t={},t[u]=1/l.length,t))}),t.data(l);var d=Y({},e,{options:{xField:`1`,yField:u,seriesField:a,isStack:!0,interval:{color:o,shape:c,style:s},args:{zIndexReversed:!0,sortZIndex:!0}}});cD(d)}else{t.data(l);var d=Y({},e,{options:{xField:`1`,yField:i,seriesField:a,isStack:!0,interval:{color:o,shape:c,style:s},args:{zIndexReversed:!0,sortZIndex:!0}}});cD(d)}return e}function eA(e){var t,n=e.chart,r=e.options,i=r.meta,a=r.colorField,o=Y({},i);return n.scale(o,(t={},t[a]={type:`cat`},t)),e}function tA(e){var t=e.chart,n=e.options,r=n.radius,i=n.innerRadius,a=n.startAngle,o=n.endAngle;return t.coordinate({type:`theta`,cfg:{radius:r,innerRadius:i,startAngle:a,endAngle:o}}),e}function nA(e){var t=e.chart,n=e.options,r=n.label,i=n.colorField,a=n.angleField,s=t.geometries[0];if(!r)s.label(!1);else{var c=r.callback,l=o(r,[`callback`]),u=tE(l);if(u.content){var d=u.content;u.content=function(e,n,r){var o=e[i],s=e[a],c=t.getScaleByField(a),l=c?.scale(s);return j(d)?d(_(_({},e),{percent:l}),n,r):I(d)?_E(d,{value:s,name:o,percentage:L(l)&&!M(s)?`${(l*100).toFixed(2)}%`:null}):d}}var f=u.type?{inner:``,outer:`pie-outer`,spider:`pie-spider`}[u.type]:`pie-outer`,p=u.layout?N(u.layout)?u.layout:[u.layout]:[];u.layout=(f?[{type:f}]:[]).concat(p),s.label({fields:i?[a,i]:[a],callback:c,cfg:_(_({},u),{offset:Zk(u.type,u.offset),type:`pie`})})}return e}function rA(e){var t=e.innerRadius,n=e.statistic,r=e.angleField,i=e.colorField,a=e.meta,o=e.locale,s=QE(o);if(t&&n){var c=Y({},Uk.statistic,n),l=c.title,u=c.content;return l!==!1&&(l=Y({},{formatter:function(e){var t=e?e[i]:M(l.content)?s.get([`statistic`,`total`]):l.content;return(z(a,[i,`formatter`])||(function(e){return e}))(t)}},l)),u!==!1&&(u=Y({},{formatter:function(e,t){var n=e?e[r]:Xk(t,r),i=z(a,[r,`formatter`])||(function(e){return e});return e||M(u.content)?i(n):u.content}},u)),Y({},{statistic:{title:l,content:u}},e)}return e}function iA(e){var t=e.chart,n=e.options,r=rA(n),i=r.innerRadius,a=r.statistic;return t.getController(`annotation`).clear(!0),X(KE())(e),i&&a&&hE(t,{statistic:a,plotType:`pie`}),e}function aA(e){var t=e.chart,n=e.options,r=n.tooltip,i=n.colorField,a=n.angleField,o=n.data;if(r===!1)t.tooltip(r);else if(t.tooltip(Y({},r,{shared:!1})),Qk(o,a)){var s=z(r,`fields`),c=z(r,`formatter`);xt(z(r,`fields`))&&(s=[i,a],c||=(function(e){return{name:e[i],value:qe(e[a])}})),t.geometries[0].tooltip(s.join(`*`),rD(s,c))}return e}function oA(e){var t=e.chart,n=e.options,r=rA(n),i=r.interactions,a=r.statistic,o=r.annotations;return F(i,function(e){if(e.enable===!1)t.removeInteraction(e.type);else if(e.type===`pie-statistic-active`){var n=[];e.cfg?.start||(n=[{trigger:`element:mouseenter`,action:`${Yk}:change`,arg:{statistic:a,annotations:o}}]),F(e.cfg?.start,function(e){n.push(_(_({},e),{arg:{statistic:a,annotations:o}}))}),t.interaction(e.type,Y({},e.cfg,{start:n}))}else t.interaction(e.type,e.cfg||{})}),e}function sA(e){return X(LE(`pieStyle`),$k,eA,Q,tA,RE,aA,nA,HE,iA,oA,VE)(e)}var cA=function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=`pie`,t}return t.getDefaultOptions=function(){return Uk},t.prototype.changeData=function(e){this.chart.emit(V.BEFORE_CHANGE_DATA,Kg.fromData(this.chart,V.BEFORE_CHANGE_DATA,null));var t=this.options,n=this.options.angleField,r=VT(t.data,n),i=VT(e,n);Qk(r,n)||Qk(i,n)?this.update({data:e}):(this.updateOption({data:e}),this.chart.data(i),iA({chart:this.chart,options:this.options}),this.chart.render(!0)),this.chart.emit(V.AFTER_CHANGE_DATA,Kg.fromData(this.chart,V.AFTER_CHANGE_DATA,null))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return sA},t}($),lA=[`#FAAD14`,`#E8EDF3`],uA={percent:.2,color:lA,animation:{}};function dA(e){var t=Fe(iE(e)?e:0,0,1);return[{current:`${t}`,type:`current`,percent:t},{current:`${t}`,type:`target`,percent:1}]}function fA(e){var t=e.chart,n=e.options,r=n.percent,i=n.progressStyle,a=n.color,o=n.barWidthRatio;t.data(dA(r));var s=Y({},e,{options:{xField:`current`,yField:`percent`,seriesField:`type`,widthRatio:o,interval:{style:i,color:I(a)?[a,lA[1]]:a},args:{zIndexReversed:!0,sortZIndex:!0}}});return cD(s),t.tooltip(!1),t.axis(!1),t.legend(!1),e}function pA(e){return e.chart.coordinate(`rect`).transpose(),e}function mA(e){return X(fA,GE({}),pA,VE,Q,KE())(e)}var hA=function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=`process`,t}return t.getDefaultOptions=function(){return uA},t.prototype.changeData=function(e){this.updateOption({percent:e}),this.chart.changeData(dA(e))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return mA},t}($);function gA(e){var t=e.chart,n=e.options,r=n.innerRadius,i=n.radius;return t.coordinate(`theta`,{innerRadius:r,radius:i}),e}function _A(e,t){var n=e.chart,r=e.options,i=r.innerRadius,a=r.statistic,o=r.percent,s=r.meta;if(n.getController(`annotation`).clear(!0),i&&a){var c=z(s,[`percent`,`formatter`])||(function(e){return`${(e*100).toFixed(2)}%`}),l=a.content;l&&=Y({},l,{content:M(l.content)?c(o):l.content}),hE(n,{statistic:_(_({},a),{content:l}),plotType:`ring-progress`},{percent:o})}return t&&n.render(!0),e}function vA(e){return X(fA,GE({}),gA,_A,VE,Q,KE())(e)}var yA={percent:.2,innerRadius:.8,radius:.98,color:[`#FAAD14`,`#E8EDF3`],statistic:{title:!1,content:{style:{fontSize:`14px`,fontWeight:300,fill:`#4D4D4D`,textAlign:`center`,textBaseline:`middle`}}},animation:{}},bA=function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=`ring-process`,t}return t.getDefaultOptions=function(){return yA},t.prototype.changeData=function(e){this.chart.emit(V.BEFORE_CHANGE_DATA,Kg.fromData(this.chart,V.BEFORE_CHANGE_DATA,null)),this.updateOption({percent:e}),this.chart.data(dA(e)),_A({chart:this.chart,options:this.options},!0),this.chart.emit(V.AFTER_CHANGE_DATA,Kg.fromData(this.chart,V.AFTER_CHANGE_DATA,null))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return vA},t}($),xA=t(n(((exports,t)=>{(function(n,r){typeof exports==`object`&&t!==void 0?r(exports):typeof define==`function`&&define.amd?define([`exports`],r):(n||=self,r(n.d3={}))})(exports,(function(e){function t(e,t){return n(e)||r(e,t)||i()}function n(e){if(Array.isArray(e))return e}function r(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o=e[Symbol.iterator](),s;!(r=(s=o.next()).done)&&(n.push(s.value),!(t&&n.length===t));r=!0);}catch(e){i=!0,a=e}finally{try{!r&&o.return!=null&&o.return()}finally{if(i)throw a}}return n}function i(){throw TypeError(`Invalid attempt to destructure non-iterable instance`)}function a(e,t,n,r){e=e.filter(function(e,r){var i=t(e,r),a=n(e,r);return i!=null&&isFinite(i)&&a!=null&&isFinite(a)}),r&&e.sort(function(e,n){return t(e)-t(n)});for(var i=e.length,a=new Float64Array(i),o=new Float64Array(i),s=0,c=0,l,u,d,f=0;f<i;)d=e[f],a[f]=l=+t(d,f,e),o[f]=u=+n(d,f,e),++f,s+=(l-s)/f,c+=(u-c)/f;for(var p=0;p<i;++p)a[p]-=s,o[p]-=c;return[a,o,s,c]}function o(e,t,n,r){for(var i=0,a=0,o=e.length;a<o;a++){var s=e[a],c=+t(s,a,e),l=+n(s,a,e);c!=null&&isFinite(c)&&l!=null&&isFinite(l)&&r(c,l,i++)}}function s(e,t,n,r,i){var a=0,s=0;return o(e,t,n,function(e,t){var n=t-i(e),o=t-r;a+=n*n,s+=o*o}),1-a/s}function c(e){return Math.atan2(e[1][1]-e[0][1],e[1][0]-e[0][0])*180/Math.PI}function l(e){return[(e[0][0]+e[1][0])/2,(e[0][1]+e[1][1])/2]}function u(e,t,n){for(var r=1*10**(-(Math.log(t-e)*Math.LOG10E+1|0)/2-1),i=1e4,a=[s(e),s(t)],o=0;u(a)&&o<i;);return a;function s(e){return[e,n(e)]}function u(e){o++;for(var t=e.length,n=!1,i=0;i<t-1;i++){var a=e[i],u=e[i+1],d=l([a,u]),f=s(d[0]),p=c([a,d]),m=c([a,f]);Math.abs(p-m)>r&&(e.splice(i+1,0,f),n=!0)}return n}}function d(e,t,n,r){var i=r-e*e,a=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-a*e,a]}function f(){var e=function(e){return e[0]},n=function(e){return e[1]},r;function i(i){var a=0,c=0,l=0,f=0,p=0,m=0,h=r?+r[0]:1/0,g=r?+r[1]:-1/0;o(i,e,n,function(e,t){var n=Math.log(t),i=e*t;++a,c+=(t-c)/a,f+=(i-f)/a,m+=(e*i-m)/a,l+=(t*n-l)/a,p+=(i*n-p)/a,r||(e<h&&(h=e),e>g&&(g=e))});var _=d(f/c,l/c,p/c,m/c),v=t(_,2),y=v[0],b=v[1];y=Math.exp(y);var x=function(e){return y*Math.exp(b*e)},S=u(h,g,x);return S.a=y,S.b=b,S.predict=x,S.rSquared=s(i,e,n,c,x),S}return i.domain=function(e){return arguments.length?(r=e,i):r},i.x=function(t){return arguments.length?(e=t,i):e},i.y=function(e){return arguments.length?(n=e,i):n},i}function p(){var e=function(e){return e[0]},n=function(e){return e[1]},r;function i(i){var a=0,c=0,l=0,u=0,f=0,p=r?+r[0]:1/0,m=r?+r[1]:-1/0;o(i,e,n,function(e,t){++a,c+=(e-c)/a,l+=(t-l)/a,u+=(e*t-u)/a,f+=(e*e-f)/a,r||(e<p&&(p=e),e>m&&(m=e))});var h=d(c,l,u,f),g=t(h,2),_=g[0],v=g[1],y=function(e){return v*e+_},b=[[p,y(p)],[m,y(m)]];return b.a=v,b.b=_,b.predict=y,b.rSquared=s(i,e,n,l,y),b}return i.domain=function(e){return arguments.length?(r=e,i):r},i.x=function(t){return arguments.length?(e=t,i):e},i.y=function(e){return arguments.length?(n=e,i):n},i}function m(e){e.sort(function(e,t){return e-t});var t=e.length/2;return t%1==0?(e[t-1]+e[t])/2:e[Math.floor(t)]}var h=2,g=1e-12;function _(){var e=function(e){return e[0]},n=function(e){return e[1]},r=.3;function i(i){for(var o=a(i,e,n,!0),s=t(o,4),c=s[0],l=s[1],u=s[2],f=s[3],p=c.length,_=Math.max(2,~~(r*p)),x=new Float64Array(p),S=new Float64Array(p),C=new Float64Array(p).fill(1),w=-1;++w<=h;){for(var T=[0,_-1],E=0;E<p;++E){for(var D=c[E],O=T[0],k=T[1],A=D-c[O]>c[k]-D?O:k,ee=0,te=0,j=0,M=0,N=0,P=1/Math.abs(c[A]-D||1),ne=O;ne<=k;++ne){var F=c[ne],re=l[ne],ie=v(Math.abs(D-F)*P)*C[ne],ae=F*ie;ee+=ie,te+=ae,j+=re*ie,M+=re*ae,N+=F*ae}var oe=d(te/ee,j/ee,M/ee,N/ee),se=t(oe,2),ce=se[0],le=se[1];x[E]=ce+le*D,S[E]=Math.abs(l[E]-x[E]),y(c,E+1,T)}if(w===h)break;var ue=m(S);if(Math.abs(ue)<g)break;for(var de=0,fe,pe;de<p;++de)fe=S[de]/(6*ue),C[de]=fe>=1?g:(pe=1-fe*fe)*pe}return b(c,x,u,f)}return i.bandwidth=function(e){return arguments.length?(r=e,i):r},i.x=function(t){return arguments.length?(e=t,i):e},i.y=function(e){return arguments.length?(n=e,i):n},i}function v(e){return(e=1-e*e*e)*e*e}function y(e,t,n){var r=e[t],i=n[0],a=n[1]+1;if(!(a>=e.length))for(;t>i&&e[a]-r<=r-e[i];)n[0]=++i,n[1]=a,++a}function b(e,t,n,r){for(var i=e.length,a=[],o=0,s=0,c=[],l;o<i;++o)l=e[o]+n,c[0]===l?c[1]+=(t[o]-c[1])/++s:(s=0,c[1]+=r,c=[l,t[o]],a.push(c));return c[1]+=r,a}function x(){var e=function(e){return e[0]},n=function(e){return e[1]},r=Math.E,i;function a(a){var c=0,l=0,f=0,p=0,m=0,h=i?+i[0]:1/0,g=i?+i[1]:-1/0,_=Math.log(r);o(a,e,n,function(e,t){var n=Math.log(e)/_;++c,l+=(n-l)/c,f+=(t-f)/c,p+=(n*t-p)/c,m+=(n*n-m)/c,i||(e<h&&(h=e),e>g&&(g=e))});var v=d(l,f,p,m),y=t(v,2),b=y[0],x=y[1],S=function(e){return x*Math.log(e)/_+b},C=u(h,g,S);return C.a=x,C.b=b,C.predict=S,C.rSquared=s(a,e,n,f,S),C}return a.domain=function(e){return arguments.length?(i=e,a):i},a.x=function(t){return arguments.length?(e=t,a):e},a.y=function(e){return arguments.length?(n=e,a):n},a.base=function(e){return arguments.length?(r=e,a):r},a}function S(){var e=function(e){return e[0]},n=function(e){return e[1]},r;function i(i){var c=a(i,e,n),l=t(c,4),d=l[0],f=l[1],p=l[2],m=l[3],h=d.length,g=0,_=0,v=0,y=0,b=0,x,S,C,w;for(x=0;x<h;)S=d[x],C=f[x++],w=S*S,g+=(w-g)/x,_+=(w*S-_)/x,v+=(w*w-v)/x,y+=(S*C-y)/x,b+=(w*C-b)/x;var T=0,E=0,D=r?+r[0]:1/0,O=r?+r[1]:-1/0;o(i,e,n,function(e,t){E++,T+=(t-T)/E,r||(e<D&&(D=e),e>O&&(O=e))});var k=v-g*g,A=g*k-_*_,ee=(b*g-y*_)/A,te=(y*k-b*_)/A,j=-ee*g,M=function(e){return e-=p,ee*e*e+te*e+j+m},N=u(D,O,M);return N.a=ee,N.b=te-2*ee*p,N.c=j-te*p+ee*p*p+m,N.predict=M,N.rSquared=s(i,e,n,T,M),N}return i.domain=function(e){return arguments.length?(r=e,i):r},i.x=function(t){return arguments.length?(e=t,i):e},i.y=function(e){return arguments.length?(n=e,i):n},i}function C(){var e=function(e){return e[0]},n=function(e){return e[1]},r=3,i;function c(c){if(r===1){var l=p().x(e).y(n).domain(i)(c);return l.coefficients=[l.b,l.a],delete l.a,delete l.b,l}if(r===2){var d=S().x(e).y(n).domain(i)(c);return d.coefficients=[d.c,d.b,d.a],delete d.a,delete d.b,delete d.c,d}var f=a(c,e,n),m=t(f,4),h=m[0],g=m[1],_=m[2],v=m[3],y=h.length,b=[],x=[],C=r+1,E=0,D=0,O=i?+i[0]:1/0,k=i?+i[1]:-1/0;o(c,e,n,function(e,t){++D,E+=(t-E)/D,i||(e<O&&(O=e),e>k&&(k=e))});var A,ee,te,j,M;for(A=0;A<C;++A){for(te=0,j=0;te<y;++te)j+=h[te]**+A*g[te];for(b.push(j),M=new Float64Array(C),ee=0;ee<C;++ee){for(te=0,j=0;te<y;++te)j+=h[te]**+(A+ee);M[ee]=j}x.push(M)}x.push(b);var N=T(x),P=function(e){e-=_;var t=v+N[0]+N[1]*e+N[2]*e*e;for(A=3;A<C;++A)t+=N[A]*e**+A;return t},ne=u(O,k,P);return ne.coefficients=w(C,N,-_,v),ne.predict=P,ne.rSquared=s(c,e,n,E,P),ne}return c.domain=function(e){return arguments.length?(i=e,c):i},c.x=function(t){return arguments.length?(e=t,c):e},c.y=function(e){return arguments.length?(n=e,c):n},c.order=function(e){return arguments.length?(r=e,c):r},c}function w(e,t,n,r){var i=Array(e),a,o,s,c;for(a=0;a<e;++a)i[a]=0;for(a=e-1;a>=0;--a)for(s=t[a],c=1,i[a]+=s,o=1;o<=a;++o)c*=(a+1-o)/o,i[a-o]+=s*n**+o*c;return i[0]+=r,i}function T(e){var t=e.length-1,n=[],r,i,a,o,s;for(r=0;r<t;++r){for(o=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][o])&&(o=i);for(a=r;a<t+1;++a)s=e[a][r],e[a][r]=e[a][o],e[a][o]=s;for(i=r+1;i<t;++i)for(a=t;a>=r;a--)e[a][i]-=e[a][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(s=0,a=i+1;a<t;++a)s+=e[a][i]*n[a];n[i]=(e[t][i]-s)/e[i][i]}return n}function E(){var e=function(e){return e[0]},n=function(e){return e[1]},r;function i(i){var a=0,c=0,l=0,f=0,p=0,m=0,h=r?+r[0]:1/0,g=r?+r[1]:-1/0;o(i,e,n,function(e,t){var n=Math.log(e),i=Math.log(t);++a,c+=(n-c)/a,l+=(i-l)/a,f+=(n*i-f)/a,p+=(n*n-p)/a,m+=(t-m)/a,r||(e<h&&(h=e),e>g&&(g=e))});var _=d(c,l,f,p),v=t(_,2),y=v[0],b=v[1];y=Math.exp(y);var x=function(e){return y*e**+b},S=u(h,g,x);return S.a=y,S.b=b,S.predict=x,S.rSquared=s(i,e,n,m,x),S}return i.domain=function(e){return arguments.length?(r=e,i):r},i.x=function(t){return arguments.length?(e=t,i):e},i.y=function(e){return arguments.length?(n=e,i):n},i}e.regressionExp=f,e.regressionLinear=p,e.regressionLoess=_,e.regressionLog=x,e.regressionPoly=C,e.regressionPow=E,e.regressionQuad=S,Object.defineProperty(e,`__esModule`,{value:!0})}))}))()),SA={exp:xA.regressionExp,linear:xA.regressionLinear,loess:xA.regressionLoess,log:xA.regressionLog,poly:xA.regressionPoly,pow:xA.regressionPow,quad:xA.regressionQuad};function CA(e,t){var n=10;return{regionStyle:[{position:{start:[e,`max`],end:[`max`,t]},style:{fill:`#d8d0c0`,opacity:.4}},{position:{start:[`min`,`max`],end:[e,t]},style:{fill:`#a3dda1`,opacity:.4}},{position:{start:[`min`,t],end:[e,`min`]},style:{fill:`#d8d0c0`,opacity:.4}},{position:{start:[e,t],end:[`max`,`min`]},style:{fill:`#a3dda1`,opacity:.4}}],lineStyle:{stroke:`#9ba29a`,lineWidth:1},labelStyle:[{position:[`max`,t],offsetX:-n,offsetY:-n,style:{textAlign:`right`,textBaseline:`bottom`,fontSize:14,fill:`#ccc`}},{position:[`min`,t],offsetX:n,offsetY:-n,style:{textAlign:`left`,textBaseline:`bottom`,fontSize:14,fill:`#ccc`}},{position:[`min`,t],offsetX:n,offsetY:n,style:{textAlign:`left`,textBaseline:`top`,fontSize:14,fill:`#ccc`}},{position:[`max`,t],offsetX:-n,offsetY:n,style:{textAlign:`right`,textBaseline:`top`,fontSize:14,fill:`#ccc`}}]}}var wA=function(e,t){var n=t.view,r=t.options,i=r.xField,a=r.yField,o=n.getScaleByField(i),s=n.getScaleByField(a),c=e.map(function(e){return n.getCoordinate().convert({x:o.scale(e[0]),y:s.scale(e[1])})});return fE(c,!1)},TA=function(e){var t=e.options,n=t.xField,r=t.yField,i=t.data,a=t.regressionLine,o=a.type,s=o===void 0?`linear`:o,c=a.algorithm,l=a.equation,u,d=null;return c?(u=N(c)?c:c(i),d=l):(u=SA[s]().x(function(e){return e[n]}).y(function(e){return e[r]})(i),d=DA(s,u)),[wA(u,e),d]},EA=function(e){var t,n=e.meta,r=n===void 0?{}:n,i=e.xField,a=e.yField,o=e.data,s=o[0][i],c=o[0][a],l=s>0,u=c>0;function d(e,t){var n=z(r,[e]);function i(e){return z(n,e)}var a={};return t===`x`?(L(s)&&(L(i(`min`))||(a.min=l?0:s*2),L(i(`max`))||(a.max=l?s*2:0)),a):(L(c)&&(L(i(`min`))||(a.min=u?0:c*2),L(i(`max`))||(a.max=u?c*2:0)),a)}return _(_({},r),(t={},t[i]=_(_({},r[i]),d(i,`x`)),t[a]=_(_({},r[a]),d(a,`y`)),t))};function DA(e,t){var n=function(e,t){return t===void 0&&(t=4),Math.round(e*10**t)/10**t},r=function(e){return Number.isFinite(e)?n(e):`?`};switch(e){case`linear`:return`y = ${r(t.a)}x + ${r(t.b)}, R^2 = ${r(t.rSquared)}`;case`exp`:return`y = ${r(t.a)}e^(${r(t.b)}x), R^2 = ${r(t.rSquared)}`;case`log`:return`y = ${r(t.a)}ln(x) + ${r(t.b)}, R^2 = ${r(t.rSquared)}`;case`quad`:return`y = ${r(t.a)}x^2 + ${r(t.b)}x + ${r(t.c)}, R^2 = ${r(t.rSquared)}`;case`poly`:for(var i=`y = ${r(t.coefficients?.[0])} + ${r(t.coefficients?.[1])}x + ${r(t.coefficients?.[2])}x^2`,a=3;a<t.coefficients.length;++a)i+=` + ${r(t.coefficients[a])}x^${a}`;return`${i}, R^2 = ${r(t.rSquared)}`;case`pow`:return`y = ${r(t.a)}x^${r(t.b)}, R^2 = ${r(t.rSquared)}`}return null}function OA(e){var t=e.data,n=t===void 0?[]:t,r=e.xField,i=e.yField;if(n.length){for(var a=!0,o=!0,s=n[0],c=void 0,l=1;l<n.length&&(c=n[l],s[r]!==c[r]&&(a=!1),s[i]!==c[i]&&(o=!1),!(!a&&!o));l++)s=c;var u=[];a&&u.push(r),o&&u.push(i);var d=J(EA(e),u);return Y({},e,{meta:d})}return e}function kA(e){var t=e.chart,n=e.options,r=n.data,i=n.type,a=n.color,o=n.shape,s=n.pointStyle,c=n.shapeField,l=n.colorField,u=n.xField,d=n.yField,f=n.sizeField,p=n.size,m=n.tooltip;f&&(p||=[2,8],L(p)&&(p=[p,p])),m&&!m.fields&&(m=_(_({},m),{fields:[u,d,l,f,c]})),t.data(r),uD(Y({},e,{options:{seriesField:l,point:{color:a,shape:o,size:p,style:s},tooltip:m}}));var h=XT(t,`point`);return i&&h.adjust(i),e}function AA(e){var t,n=e.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField,s=OA(n);return X(GE((t={},t[a]=r,t[o]=i,t)))(Y({},e,{options:s}))}function jA(e){var t=e.chart,n=e.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField;return t.axis(a,r),t.axis(o,i),e}function MA(e){var t=e.chart,n=e.options,r=n.legend,i=n.colorField,a=n.shapeField,o=n.sizeField,s=n.shapeLegend,c=n.sizeLegend,l=r!==!1;return i&&t.legend(i,l?r:!1),a&&(s?t.legend(a,s):t.legend(a,s===!1?!1:r)),o&&t.legend(o,c||!1),!l&&!s&&!c&&t.legend(!1),e}function NA(e){var t=e.chart,n=e.options,r=n.label,i=n.yField,a=XT(t,`point`);if(!r)a.label(!1);else{var s=r.callback,c=o(r,[`callback`]);a.label({fields:[i],callback:s,cfg:tE(c)})}return e}function PA(e){var t=e.options.quadrant,n=[];if(t){var r=t.xBaseline,i=r===void 0?0:r,a=t.yBaseline,o=a===void 0?0:a,s=t.labels,c=t.regionStyle,l=t.lineStyle,u=CA(i,o);[,,,,].join(`,`).split(`,`).forEach(function(e,t){n.push(_(_({type:`region`,top:!1},u.regionStyle[t].position),{style:Y({},u.regionStyle[t].style,c?.[t])}),_({type:`text`,top:!0},Y({},u.labelStyle[t],s?.[t])))}),n.push({type:`line`,top:!1,start:[`min`,o],end:[`max`,o],style:Y({},u.lineStyle,l)},{type:`line`,top:!1,start:[i,`min`],end:[i,`max`],style:Y({},u.lineStyle,l)})}return X(KE(n))(e)}function FA(e){var t=e.options,n=e.chart,r=t.regressionLine;if(r){var i=r.style,a=r.equationStyle,o=a===void 0?{}:a,s=r.top,c=s===void 0?!1:s,l=r.showEquation,u=l===void 0?!1:l,d={stroke:`#9ba29a`,lineWidth:2,opacity:.5},f={x:20,y:20,textAlign:`left`,textBaseline:`middle`,fontSize:14,fillOpacity:.5};n.annotation().shape({top:c,render:function(e,r){var a=e.addGroup({id:`${n.id}-regression-line`,name:`regression-line-group`}),s=TA({view:r,options:t}),c=s[0],l=s[1];a.addShape(`path`,{name:`regression-line`,attrs:_(_({path:c},d),i)}),u&&a.addShape(`text`,{name:`regression-equation`,attrs:_(_(_({},f),o),{text:l})})}})}return e}function IA(e){var t=e.chart,n=e.options.tooltip;return n?t.tooltip(n):n===!1&&t.tooltip(!1),e}function LA(e){return X(kA,AA,jA,MA,IA,NA,JD,UE,WE,BE,PA,VE,Q,FA)(e)}var RA=Y({},$.getDefaultOptions(),{size:4,tooltip:{showTitle:!1,showMarkers:!1,showCrosshairs:!0,crosshairs:{type:`xy`}}});W(`drag-move`,{start:[{trigger:`plot:mousedown`,action:`scale-translate:start`}],processing:[{trigger:`plot:mousemove`,action:`scale-translate:translate`,throttle:{wait:100,leading:!0,trailing:!1}}],end:[{trigger:`plot:mouseup`,action:`scale-translate:end`}]});var zA=function(e){l(t,e);function t(t,n){var r=e.call(this,t,n)||this;return r.type=`scatter`,r.on(V.BEFORE_RENDER,function(e){var t=r,n=t.options,i=t.chart;if(e.data?.source===uT.FILTER){var a=r.chart.filterData(r.chart.getData());AA({chart:i,options:_(_({},n),{data:a})})}e.data?.source===uT.RESET&&AA({chart:i,options:n})}),r}return t.getDefaultOptions=function(){return RA},t.prototype.changeData=function(e){this.updateOption(OA(Y({},this.options,{data:e})));var t=this,n=t.options,r=t.chart;AA({chart:r,options:n}),this.chart.changeData(e)},t.prototype.getSchemaAdaptor=function(){return LA},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t}($),BA=`$$stock-range$$`,VA=`trend`,HA=`down`,UA=Y({},$.getDefaultOptions(),{tooltip:{showMarkers:!1,showCrosshairs:!0,shared:!0,crosshairs:{type:`xy`,follow:!0,text:function(e,t,n){var r;if(e===`x`){var i=n[0];r=i?i.title:t}else r=t;return{position:e===`y`?`start`:`end`,content:r,style:{fill:`#dfdfdf`}}},textBackground:{padding:[2,4],style:{fill:`#666`}}}},interactions:[{type:`tooltip`}],legend:{position:`top-left`},risingFill:`#ef5350`,fallingFill:`#26a69a`});function WA(e,t){return wt(e,function(e){var n=e&&_({},e);if(N(t)&&n){var r=t[0],i=t[1],a=t[2],o=t[3];n[VA]=n[r]<=n[i]?`up`:HA,n[BA]=[n[r],n[i],n[a],n[o]]}return n})}function GA(e){var t=e.chart,n=e.options,r=n.yField,i=n.data,a=n.risingFill,o=n.fallingFill,s=n.tooltip,c=n.stockStyle;t.data(WA(i,r));var l=s;return l!==!1&&(l=Y({},{fields:r},l)),fD(Y({},e,{options:{schema:{shape:`candle`,color:[a,o],style:c},yField:BA,seriesField:VA,rawFields:r,tooltip:l}})),e}function KA(e){var t,n,r=e.chart,i=e.options,a=i.meta,o=i.xAxis,s=i.yAxis,c=i.xField,l=(t={},t[c]={type:`timeCat`,tickCount:6},t[VA]={values:[`up`,HA]},t),u=Y(l,a,(n={},n[c]=J(o,PT),n[BA]=J(s,PT),n));return r.scale(u),e}function qA(e){var t=e.chart,n=e.options,r=n.xAxis,i=n.yAxis,a=n.xField;return r===!1?t.axis(a,!1):t.axis(a,r),i===!1?t.axis(BA,!1):t.axis(BA,i),e}function JA(e){var t=e.chart,n=e.options.tooltip;return n===!1?t.tooltip(!1):t.tooltip(n),e}function YA(e){var t=e.chart,n=e.options.legend;return n?t.legend(VA,n):n===!1&&t.legend(!1),e}function XA(e){X(Q,GA,KA,qA,JA,YA,BE,VE,KE(),UE)(e)}var ZA=function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=`stock`,t}return t.getDefaultOptions=function(){return UA},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return XA},t.prototype.changeData=function(e){this.updateOption({data:e});var t=this.options.yField;this.chart.changeData(WA(e,t))},t}($);function QA(e){return wt(e||[],function(e,t){return{x:`${t}`,y:e}})}var $A={showTitle:!1,shared:!0,showMarkers:!1,customContent:function(e,t){return`${z(t,[0,`data`,`y`],0)}`},containerTpl:`<div class="g2-tooltip"><div class="g2-tooltip-list"></div></div>`,itemTpl:`<span>{value}</span>`,domStyles:{"g2-tooltip":{padding:`2px 4px`,fontSize:`10px`}},showCrosshairs:!0,crosshairs:{type:`x`}},ej={appendPadding:2,tooltip:_({},$A),animation:{}};function tj(e){var t=e.chart,n=e.options,r=n.data,i=n.color,a=n.areaStyle,o=n.point,s=n.line,c=o?.state,l=QA(r);t.data(l);var u=Y({},e,{options:{xField:`x`,yField:`y`,area:{color:i,style:a},line:s,point:o}}),d=Y({},u,{options:{tooltip:!1}}),f=Y({},u,{options:{tooltip:!1,state:c}});return aD(u),lD(d),uD(f),t.axis(!1),t.legend(!1),e}function nj(e){var t,n,r=e.options,i=r.xAxis,a=r.yAxis,o=r.data,s=QA(o);return X(GE((t={},t.x=i,t.y=a,t),(n={},n.x={type:`cat`},n.y=zT(s,`y`),n)))(e)}function rj(e){return X(LE(`areaStyle`),tj,nj,zE,Q,VE,KE())(e)}var ij={appendPadding:2,tooltip:_({},$A),color:`l(90) 0:#E5EDFE 1:#ffffff`,areaStyle:{fillOpacity:.6},line:{size:1,color:`#5B8FF9`},animation:{}},aj=function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=`tiny-area`,t}return t.getDefaultOptions=function(){return ij},t.prototype.changeData=function(e){this.updateOption({data:e});var t=this,n=t.chart,r=t.options;nj({chart:n,options:r}),n.changeData(QA(e))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return rj},t}($);function oj(e){var t=e.chart,n=e.options,r=n.data,i=n.color,a=n.columnStyle,o=n.columnWidthRatio,s=QA(r);t.data(s);var c=Y({},e,{options:{xField:`x`,yField:`y`,widthRatio:o,interval:{style:a,color:i}}});return cD(c),t.axis(!1),t.legend(!1),t.interaction(`element-active`),e}function sj(e){return X(Q,LE(`columnStyle`),oj,nj,zE,VE,KE())(e)}var cj={appendPadding:2,tooltip:_({},{showTitle:!1,shared:!0,showMarkers:!1,customContent:function(e,t){return`${z(t,[0,`data`,`y`],0)}`},containerTpl:`<div class="g2-tooltip"><div class="g2-tooltip-list"></div></div>`,itemTpl:`<span>{value}</span>`,domStyles:{"g2-tooltip":{padding:`2px 4px`,fontSize:`10px`}}}),animation:{}},lj=function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=`tiny-column`,t}return t.getDefaultOptions=function(){return cj},t.prototype.changeData=function(e){this.updateOption({data:e});var t=this,n=t.chart,r=t.options;nj({chart:n,options:r}),n.changeData(QA(e))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return sj},t}($);function uj(e){var t=e.chart,n=e.options,r=n.data,i=n.color,a=n.lineStyle,o=n.point,s=o?.state,c=QA(r);t.data(c);var l=Y({},e,{options:{xField:`x`,yField:`y`,line:{color:i,style:a},point:o}}),u=Y({},l,{options:{tooltip:!1,state:s}});return lD(l),uD(u),t.axis(!1),t.legend(!1),e}function dj(e){return X(uj,nj,Q,zE,VE,KE())(e)}var fj=function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=`tiny-line`,t}return t.getDefaultOptions=function(){return ej},t.prototype.changeData=function(e){this.updateOption({data:e});var t=this,n=t.chart,r=t.options;nj({chart:n,options:r}),n.changeData(QA(e))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return dj},t}($),pj={line:PD,pie:sA,column:fO,bar:vO,area:RD,gauge:Ek,"tiny-line":dj,"tiny-column":sj,"tiny-area":rj,"ring-progress":vA,progress:mA,scatter:LA,histogram:Rk,funnel:ck,stock:XA},mj={line:Hk,pie:cA,column:SO,bar:bO,area:BD,gauge:Dk,"tiny-line":fj,"tiny-column":lj,"tiny-area":aj,"ring-progress":bA,progress:hA,scatter:zA,histogram:zk,funnel:lk,stock:ZA},hj={pie:{label:!1},column:{tooltip:{showMarkers:!1}},bar:{tooltip:{showMarkers:!1}}};function gj(e,t,n){var r=mj[e];if(!r){console.error(`could not find ${e} plot`);return}var i=pj[e];i({chart:t,options:Y({},r.getDefaultOptions(),z(hj,e,{}),n)})}function _j(e){var t=e.chart,n=e.options,r=n.views,i=n.legend;return F(r,function(e){var n=e.region,r=e.data,i=e.meta,a=e.axes,o=e.coordinate,s=e.interactions,c=e.annotations,l=e.tooltip,u=e.geometries,d=t.createView({region:n});d.data(r);var f={};a&&F(a,function(e,t){f[t]=J(e,PT)}),f=Y({},i,f),d.scale(f),a?F(a,function(e,t){d.axis(t,e)}):d.axis(!1),d.coordinate(o),F(u,function(e){var t=iD({chart:d,options:e}).ext,n=e.adjust;n&&t.geometry.adjust(n)}),F(s,function(e){e.enable===!1?d.removeInteraction(e.type):d.interaction(e.type,e.cfg)}),F(c,function(e){d.annotation()[e.type](_({},e))}),typeof e.animation==`boolean`?d.animate(!1):(d.animate(!0),F(d.geometries,function(t){t.animate(e.animation)})),l&&(d.interaction(`tooltip`),d.tooltip(l))}),i?F(i,function(e,n){t.legend(n,e)}):t.legend(!1),t.tooltip(n.tooltip),e}function vj(e){var t=e.chart,n=e.options,r=n.plots,i=n.data,a=i===void 0?[]:i;return F(r,function(e){var n=e.type,r=e.region,i=e.options,o=i===void 0?{}:i,s=e.top,c=o.tooltip;if(s){gj(n,t,_(_({},o),{data:a}));return}var l=t.createView(_({region:r},J(o,CD)));c&&l.interaction(`tooltip`),gj(n,l,_({data:a},o))}),e}function yj(e){var t=e.chart,n=e.options;return t.option(`slider`,n.slider),e}function bj(e){return X(VE,_j,vj,BE,VE,Q,zE,yj,KE())(e)}function xj(e,t){var n=e.getModel().data;return N(n)?n[0][t]:n[t]}function Sj(e){var t=ZT(e);F(t,function(e){e.hasState(`active`)&&e.setState(`active`,!1),e.hasState(`selected`)&&e.setState(`selected`,!1),e.hasState(`inactive`)&&e.setState(`inactive`,!1)})}var Cj=function(e){l(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getAssociationItems=function(e,t){var n=this.context.event,r=t||{},i=r.linkField,a=r.dim,o=[];if(n.data?.data){var s=n.data.data;F(e,function(e){var t=i;if(a===`x`?t=e.getXScale().field:a===`y`?t=e.getYScales().find(function(e){return e.field===t})?.field:t||=e.getGroupScales()[0]?.field,t){var n=wt(ZT(e),function(n){var r=!1,i=!1,a=N(s)?z(s[0],t):z(s,t);return xj(n,t)===a?r=!0:i=!0,{element:n,view:e,active:r,inactive:i}});o.push.apply(o,n)}})}return o},t.prototype.showTooltip=function(e){var t=yE(this.context.view),n=this.getAssociationItems(t,e);F(n,function(e){if(e.active){var t=e.element.shape.getCanvasBBox();e.view.showTooltip({x:t.minX+t.width/2,y:t.minY+t.height/2})}})},t.prototype.hideTooltip=function(){var e=yE(this.context.view);F(e,function(e){e.hideTooltip()})},t.prototype.active=function(e){var t=vE(this.context.view),n=this.getAssociationItems(t,e);F(n,function(e){var t=e.active,n=e.element;t&&n.setState(`active`,!0)})},t.prototype.selected=function(e){var t=vE(this.context.view),n=this.getAssociationItems(t,e);F(n,function(e){var t=e.active,n=e.element;t&&n.setState(`selected`,!0)})},t.prototype.highlight=function(e){var t=vE(this.context.view),n=this.getAssociationItems(t,e);F(n,function(e){var t=e.inactive,n=e.element;t&&n.setState(`inactive`,!0)})},t.prototype.reset=function(){var e=vE(this.context.view);F(e,function(e){Sj(e)})},t}(ih);U(`association`,Cj),W(`association-active`,{start:[{trigger:`element:mouseenter`,action:`association:active`}],end:[{trigger:`element:mouseleave`,action:`association:reset`}]}),W(`association-selected`,{start:[{trigger:`element:mouseenter`,action:`association:selected`}],end:[{trigger:`element:mouseleave`,action:`association:reset`}]}),W(`association-highlight`,{start:[{trigger:`element:mouseenter`,action:`association:highlight`}],end:[{trigger:`element:mouseleave`,action:`association:reset`}]}),W(`association-tooltip`,{start:[{trigger:`element:mousemove`,action:`association:showTooltip`}],end:[{trigger:`element:mouseleave`,action:`association:hideTooltip`}]});var wj=function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=`mix`,t}return t.prototype.getSchemaAdaptor=function(){return bj},t}($),Tj;(function(e){e.DEV=`DEV`,e.BETA=`BETA`,e.STABLE=`STABLE`})(Tj||={});function Ej(e,t){console.warn(e===Tj.DEV?`Plot '${t}' is in DEV stage, just give us issues.`:e===Tj.BETA?`Plot '${t}' is in BETA stage, DO NOT use it in production env.`:e===Tj.STABLE?`Plot '${t}' is in STABLE stage, import it by "import { ${t} } from '@antv/g2plot'".`:`invalid Stage type.`)}(function(){function e(){}return Object.defineProperty(e,`MultiView`,{get:function(){return Ej(Tj.STABLE,`MultiView`),wj},enumerable:!1,configurable:!0}),e})();var Dj=`first-axes-view`,Oj=`second-axes-view`,kj=`series-field-key`;function Aj(e,t,n,r,i){var a=[];t.forEach(function(t){r.forEach(function(r){var i,o=(i={},i[e]=r[e],i[n]=t,i[t]=r[t],i);a.push(o)})});var o=Object.values(Me(a,n)),s=o[0],c=s===void 0?[]:s,l=o[1],u=l===void 0?[]:l;return i?[c.reverse(),u.reverse()]:[c,u]}function jj(e){return e!==`vertical`}function Mj(e,t,n){var r=t[0],i=t[1],a=r.autoPadding,o=i.autoPadding,s=e.__axisPosition,c=s.layout,l=s.position;if(jj(c)&&l===`top`&&(r.autoPadding=n.instance(a.top,0,a.bottom,a.left),i.autoPadding=n.instance(o.top,a.left,o.bottom,0)),jj(c)&&l===`bottom`&&(r.autoPadding=n.instance(a.top,a.right/2+5,a.bottom,a.left),i.autoPadding=n.instance(o.top,o.right,o.bottom,a.right/2+5)),!jj(c)&&l===`bottom`){var u=a.left>=o.left?a.left:o.left;r.autoPadding=n.instance(a.top,a.right,a.bottom/2+5,u),i.autoPadding=n.instance(a.bottom/2+5,o.right,o.bottom,u)}if(!jj(c)&&l===`top`){var u=a.left>=o.left?a.left:o.left;r.autoPadding=n.instance(a.top,a.right,0,u),i.autoPadding=n.instance(0,o.right,a.top,u)}}function Nj(e){var t=e.chart,n=e.options,r=n.data,i=n.xField,a=n.yField,o=n.color,s=n.barStyle,c=n.widthRatio,l=n.legend,u=n.layout,d=Aj(i,a,kj,r,jj(u));l?t.legend(kj,l):l===!1&&t.legend(!1);var f,p,m=d[0],h=d[1];jj(u)?(f=t.createView({region:{start:{x:0,y:0},end:{x:.5,y:1}},id:Dj}),f.coordinate().transpose().reflect(`x`),p=t.createView({region:{start:{x:.5,y:0},end:{x:1,y:1}},id:Oj}),p.coordinate().transpose(),f.data(m),p.data(h)):(f=t.createView({region:{start:{x:0,y:0},end:{x:1,y:.5}},id:Dj}),p=t.createView({region:{start:{x:0,y:.5},end:{x:1,y:1}},id:Oj}),p.coordinate().reflect(`y`),f.data(m),p.data(h));var g=Y({},e,{chart:f,options:{widthRatio:c,xField:i,yField:a[0],seriesField:kj,interval:{color:o,style:s}}});cD(g);var _=Y({},e,{chart:p,options:{xField:i,yField:a[1],seriesField:kj,widthRatio:c,interval:{color:o,style:s}}});return cD(_),e}function Pj(e){var t,n,r,i=e.options,a=e.chart,o=i.xAxis,s=i.yAxis,c=i.xField,l=i.yField,u=Z(a,Dj),d=Z(a,Oj),f={};return re(i?.meta||{}).map(function(e){z(i?.meta,[e,`alias`])&&(f[e]=i.meta[e].alias)}),a.scale((t={},t[kj]={sync:!0,formatter:function(e){return z(f,e,e)}},t)),GE((n={},n[c]=o,n[l[0]]=s[l[0]],n))(Y({},e,{chart:u})),GE((r={},r[c]=o,r[l[1]]=s[l[1]],r))(Y({},e,{chart:d})),e}function Fj(e){var t=e.chart,n=e.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField,s=n.layout,c=Z(t,Dj),l=Z(t,Oj);return r?.position===`bottom`?l.axis(a,_(_({},r),{label:{formatter:function(){return``}}})):l.axis(a,!1),r===!1?c.axis(a,!1):c.axis(a,_({position:jj(s)?`top`:`bottom`},r)),i===!1?(c.axis(o[0],!1),l.axis(o[1],!1)):(c.axis(o[0],i[o[0]]),l.axis(o[1],i[o[1]])),t.__axisPosition={position:c.getOptions().axes[a].position,layout:s},e}function Ij(e){var t=e.chart;return BE(Y({},e,{chart:Z(t,Dj)})),BE(Y({},e,{chart:Z(t,Oj)})),e}function Lj(e){var t=e.chart,n=e.options,r=n.yField,i=n.yAxis;return qE(Y({},e,{chart:Z(t,Dj),options:{yAxis:i[r[0]]}})),qE(Y({},e,{chart:Z(t,Oj),options:{yAxis:i[r[1]]}})),e}function Rj(e){var t=e.chart;return Q(Y({},e,{chart:Z(t,Dj)})),Q(Y({},e,{chart:Z(t,Oj)})),Q(e),e}function zj(e){var t=e.chart;return VE(Y({},e,{chart:Z(t,Dj)})),VE(Y({},e,{chart:Z(t,Oj)})),e}function Bj(e){var t=this,n=e.chart,r=e.options,i=r.label,a=r.yField,s=r.layout,c=Z(n,Dj),l=Z(n,Oj),u=XT(c,`interval`),d=XT(l,`interval`);if(!i)u.label(!1),d.label(!1);else{var f=i.callback,p=o(i,[`callback`]);p.position||=`middle`,p.offset===void 0&&(p.offset=2);var m=_({},p);if(jj(s)){var h=m.style?.textAlign||(p.position===`middle`?`center`:`left`);p.style=Y({},p.style,{textAlign:h}),m.style=Y({},m.style,{textAlign:{left:`right`,right:`left`,center:`center`}[h]})}else{var g={top:`bottom`,bottom:`top`,middle:`middle`};typeof p.position==`string`?p.position=g[p.position]:typeof p.position==`function`&&(p.position=function(){var e=[...arguments];return g[p.position.apply(t,e)]});var v=m.style?.textBaseline||`bottom`;m.style=Y({},m.style,{textBaseline:v}),p.style=Y({},p.style,{textBaseline:{top:`bottom`,bottom:`top`,middle:`middle`}[v]})}u.label({fields:[a[0]],callback:f,cfg:tE(m)}),d.label({fields:[a[1]],callback:f,cfg:tE(p)})}return e}function Vj(e){return X(Nj,Pj,Fj,Lj,Rj,Bj,zE,Ij,zj)(e)}(function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=`bidirectional-bar`,t}return t.getDefaultOptions=function(){return Y({},e.getDefaultOptions.call(this),{syncViewPadding:Mj})},t.prototype.changeData=function(e){e===void 0&&(e=[]),this.chart.emit(V.BEFORE_CHANGE_DATA,Kg.fromData(this.chart,V.BEFORE_CHANGE_DATA,null)),this.updateOption({data:e});var t=this.options,n=t.xField,r=t.yField,i=t.layout,a=Aj(n,r,kj,e,jj(i)),o=a[0],s=a[1],c=Z(this.chart,Dj),l=Z(this.chart,Oj);c.data(o),l.data(s),this.chart.render(!0),this.chart.emit(V.AFTER_CHANGE_DATA,Kg.fromData(this.chart,V.AFTER_CHANGE_DATA,null))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Vj},t.SERIES_FIELD_KEY=kj,t})($);var Hj,Uj=`$$range$$`,Wj=`low-q1-median-q3-high`,Gj=`$$y_outliers$$`,Kj=`outliers_view`,qj=Y({},$.getDefaultOptions(),{meta:(Hj={},Hj[Uj]={min:0,alias:Wj},Hj),interactions:[{type:`active-region`}],tooltip:{showMarkers:!1,shared:!0},boxStyle:{lineWidth:1}}),Jj=function(e,t){var n=e;if(Array.isArray(t)){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4];n=wt(e,function(e){return e[Uj]=[e[r],e[i],e[a],e[o],e[s]],e})}return n};function Yj(e){var t=e.chart,n=e.options,r=n.xField,i=n.yField,a=n.groupField,o=n.color,s=n.tooltip,c=n.boxStyle;t.data(Jj(n.data,i));var l=N(i)?Uj:i,u=i?N(i)?i:[i]:[],d=s;d!==!1&&(d=Y({},{fields:N(i)?i:[]},d));var f=fD(Y({},e,{options:{xField:r,yField:l,seriesField:a,tooltip:d,rawFields:u,label:!1,schema:{shape:`box`,color:o,style:c}}})).ext;return a&&f.geometry.adjust(`dodge`),e}function Xj(e){var t=e.chart,n=e.options,r=n.xField,i=n.data,a=n.outliersField,o=n.outliersStyle,s=n.padding,c=n.label;if(!a)return e;var l=t.createView({padding:s,id:Kj}),u=i.reduce(function(e,t){return t[a].forEach(function(n){var r;return e.push(_(_({},t),(r={},r[a]=n,r)))}),e},[]);return l.data(u),uD({chart:l,options:{xField:r,yField:a,point:{shape:`circle`,style:o},label:c}}),l.axis(!1),e}function Zj(e){var t,n,r=e.chart,i=e.options,a=i.meta,o=i.xAxis,s=i.yAxis,c=i.xField,l=i.yField,u=i.outliersField,d=Array.isArray(l)?Uj:l,f={};if(u){var p=Gj;f=(t={},t[u]={sync:p,nice:!0},t[d]={sync:p,nice:!0},t)}var m=Y(f,a,(n={},n[c]=J(o,PT),n[d]=J(s,PT),n));return r.scale(m),e}function Qj(e){var t=e.chart,n=e.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField,s=Array.isArray(o)?Uj:o;return r===!1?t.axis(a,!1):t.axis(a,r),i===!1?t.axis(Uj,!1):t.axis(s,i),e}function $j(e){var t=e.chart,n=e.options,r=n.legend,i=n.groupField;return i?r?t.legend(i,r):t.legend(i,{position:`bottom`}):t.legend(!1),e}function eM(e){return X(Yj,Xj,Zj,Qj,$j,zE,KE(),BE,VE,Q)(e)}(function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=`box`,t}return t.getDefaultOptions=function(){return qj},t.prototype.changeData=function(e){this.updateOption({data:e});var t=this.options.yField,n=this.chart.views.find(function(e){return e.id===Kj});n&&n.data(e),this.chart.changeData(Jj(e,t))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return eM},t})($);function tM(e,t,n){return e.length>1?`${t}_${n}`:`${t}`}function nM(e){var t=e.data,n=e.xField,r=e.measureField,i=e.rangeField,a=e.targetField,o=e.layout,s=[],c=[];t.forEach(function(e,t){var o=[e[i]].flat();o.sort(function(e,t){return e-t}),o.forEach(function(r,a){var c,l=a===0?r:o[a]-o[a-1];s.push((c={rKey:`${i}_${a}`},c[n]=n?e[n]:String(t),c[i]=l,c))});var l=[e[r]].flat();l.forEach(function(i,a){var o;s.push((o={mKey:tM(l,r,a)},o[n]=n?e[n]:String(t),o[r]=i,o))});var u=[e[a]].flat();u.forEach(function(r,i){var o;s.push((o={tKey:tM(u,a,i)},o[n]=n?e[n]:String(t),o[a]=r,o))}),c.push(e[i],e[r],e[a])});var l=Math.min.apply(Math,c.flat(1/0)),u=Math.max.apply(Math,c.flat(1/0));return l=l>0?0:l,o===`vertical`&&s.reverse(),{min:l,max:u,ds:s}}function rM(e){var t=e.chart,n=e.options,r=n.bulletStyle,i=n.targetField,a=n.rangeField,o=n.measureField,s=n.xField,c=n.color,l=n.layout,u=n.size,d=n.label,f=nM(n),p=f.min,m=f.max,h=f.ds;t.data(h);var g=Y({},e,{options:{xField:s,yField:a,seriesField:`rKey`,isStack:!0,label:z(d,`range`),interval:{color:z(c,`range`),style:z(r,`range`),size:z(u,`range`)}}});cD(g),t.geometries[0].tooltip(!1);var v=Y({},e,{options:{xField:s,yField:o,seriesField:`mKey`,isStack:!0,label:z(d,`measure`),interval:{color:z(c,`measure`),style:z(r,`measure`),size:z(u,`measure`)}}});cD(v);var y=Y({},e,{options:{xField:s,yField:i,seriesField:`tKey`,label:z(d,`target`),point:{color:z(c,`target`),style:z(r,`target`),size:j(z(u,`target`))?function(e){return z(u,`target`)(e)/2}:z(u,`target`)/2,shape:l===`horizontal`?`line`:`hyphen`}}});return uD(y),l===`horizontal`&&t.coordinate().transpose(),_(_({},e),{ext:{data:{min:p,max:m}}})}function iM(e){var t,n,r=e.options,i=e.ext,a=r.xAxis,o=r.yAxis,s=r.targetField,c=r.rangeField,l=r.measureField,u=r.xField,d=i.data;return X(GE((t={},t[u]=a,t[l]=o,t),(n={},n[l]={min:d?.min,max:d?.max,sync:!0},n[s]={sync:`${l}`},n[c]={sync:`${l}`},n)))(e)}function aM(e){var t=e.chart,n=e.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.measureField,s=n.rangeField,c=n.targetField;return t.axis(`${s}`,!1),t.axis(`${c}`,!1),r===!1?t.axis(`${a}`,!1):t.axis(`${a}`,r),i===!1?t.axis(`${o}`,!1):t.axis(`${o}`,i),e}function oM(e){var t=e.chart,n=e.options.legend;return t.removeInteraction(`legend-filter`),t.legend(n),t.legend(`rKey`,!1),t.legend(`mKey`,!1),t.legend(`tKey`,!1),e}function sM(e){var t=e.chart,n=e.options,r=n.label,i=n.measureField,a=n.targetField,o=n.rangeField,s=t.geometries,c=s[0],l=s[1],u=s[2];return z(r,`range`)?c.label(`${o}`,_({layout:[{type:`limit-in-plot`}]},tE(r.range))):c.label(!1),z(r,`measure`)?l.label(`${i}`,_({layout:[{type:`limit-in-plot`}]},tE(r.measure))):l.label(!1),z(r,`target`)?u.label(`${a}`,_({layout:[{type:`limit-in-plot`}]},tE(r.target))):u.label(!1),e}function cM(e){X(rM,iM,aM,oM,Q,sM,zE,BE,VE)(e)}var lM=Y({},$.getDefaultOptions(),{layout:`horizontal`,size:{range:30,measure:20,target:20},xAxis:{tickLine:!1,line:null},bulletStyle:{range:{fillOpacity:.5}},label:{measure:{position:`right`}},tooltip:{showMarkers:!1}});(function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=`bullet`,t}return t.getDefaultOptions=function(){return lM},t.prototype.changeData=function(e){this.updateOption({data:e});var t=nM(this.options),n=t.min,r=t.max,i=t.ds;iM({options:this.options,ext:{data:{min:n,max:r}},chart:this.chart}),this.chart.changeData(i)},t.prototype.getSchemaAdaptor=function(){return cM},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t})($);var uM={y:0,nodeWidthRatio:.05,weight:!1,nodePaddingRatio:.1,id:function(e){return e.id},source:function(e){return e.source},target:function(e){return e.target},sourceWeight:function(e){return e.value||1},targetWeight:function(e){return e.value||1},sortBy:null};function dM(e,t,n){We(e,function(e,r){e.inEdges=t.filter(function(e){return`${n.target(e)}`==`${r}`}),e.outEdges=t.filter(function(e){return`${n.source(e)}`==`${r}`}),e.edges=e.outEdges.concat(e.inEdges),e.frequency=e.edges.length,e.value=0,e.inEdges.forEach(function(t){e.value+=n.targetWeight(t)}),e.outEdges.forEach(function(t){e.value+=n.sourceWeight(t)})})}function fM(e,t){var n={weight:function(e,t){return t.value-e.value},frequency:function(e,t){return t.frequency-e.frequency},id:function(e,n){return`${t.id(e)}`.localeCompare(`${t.id(n)}`)}}[t.sortBy];!n&&j(t.sortBy)&&(n=t.sortBy),n&&e.sort(n)}function pM(e,t){var n=e.length;if(!n)throw TypeError(`Invalid nodes: it's empty!`);if(t.weight){var r=t.nodePaddingRatio;if(r<0||r>=1)throw TypeError(`Invalid nodePaddingRatio: it must be in range [0, 1)!`);var i=r/(2*n),a=t.nodeWidthRatio;if(a<=0||a>=1)throw TypeError(`Invalid nodeWidthRatio: it must be in range (0, 1)!`);var o=0;e.forEach(function(e){o+=e.value}),e.forEach(function(e){e.weight=e.value/o,e.width=e.weight*(1-r),e.height=a}),e.forEach(function(n,r){for(var o=0,s=r-1;s>=0;s--)o+=e[s].width+2*i;var c=n.minX=i+o,l=n.maxX=n.minX+n.width,u=n.minY=t.y-a/2,d=n.maxY=u+a;n.x=[c,l,l,c],n.y=[u,u,d,d]})}else{var s=1/n;e.forEach(function(e,n){e.x=(n+.5)*s,e.y=t.y})}return e}function mM(e,t,n){if(n.weight){var r={};We(e,function(e,t){r[t]=e.value}),t.forEach(function(t){var i=n.source(t),a=n.target(t),o=e[i],s=e[a];if(o&&s){var c=r[i],l=n.sourceWeight(t),u=o.minX+(o.value-c)/o.value*o.width,d=u+l/o.value*o.width;r[i]-=l;var f=r[a],p=n.targetWeight(t),m=s.minX+(s.value-f)/s.value*s.width,h=m+p/s.value*s.width;r[a]-=p;var g=n.y;t.x=[u,d,m,h],t.y=[g,g,g,g],t.source=o,t.target=s}})}else t.forEach(function(t){var r=e[n.source(t)],i=e[n.target(t)];r&&i&&(t.x=[r.x,i.x],t.y=[r.y,i.y],t.source=r,t.target=i)});return t}function hM(e){return ut({},uM,e)}function gM(e,t){var n=hM(e),r={},i=t.nodes,a=t.links;i.forEach(function(e){var t=n.id(e);r[t]=e}),dM(r,a,n),fM(i,n);var o=pM(i,n),s=mM(r,a,n);return{nodes:o,links:s}}var _M=`name`,vM=`source`,yM={nodeStyle:{opacity:1,fillOpacity:1,lineWidth:1},edgeStyle:{opacity:.5,lineWidth:2},label:{fields:[`x`,`name`],callback:function(e,t){return{offsetX:(e[0]+e[1])/2>.5?-4:4,content:t}},labelEmit:!0,style:{fill:`#8c8c8c`}},tooltip:{showTitle:!1,showMarkers:!1,fields:[`source`,`target`,`value`,`isNode`],showContent:function(e){return!z(e,[0,`data`,`isNode`])},formatter:function(e){var t=e.source,n=e.target,r=e.value;return{name:`${t} -> ${n}`,value:r}}},interactions:[{type:`element-active`}],weight:!0,nodePaddingRatio:.1,nodeWidthRatio:.05};function bM(e){var t=e.options,n=t.data,r=t.sourceField,i=t.targetField,a=t.weightField,o=t.nodePaddingRatio,c=t.nodeWidthRatio,l=t.rawFields,u=l===void 0?[]:l,d=BT(n,r,i,a),f=gM({weight:!0,nodePaddingRatio:o,nodeWidthRatio:c},d),p=f.nodes,m=f.links,h=p.map(function(e){return _(_({},J(e,s([`id`,`x`,`y`,`name`],u,!0))),{isNode:!0})}),g=m.map(function(e){return _(_({source:e.source.name,target:e.target.name,name:e.source.name||e.target.name},J(e,s([`x`,`y`,`value`],u,!0))),{isNode:!1})});return _(_({},e),{ext:_(_({},e.ext),{chordData:{nodesData:h,edgesData:g}})})}function xM(e){var t;return e.chart.scale((t={x:{sync:!0,nice:!0},y:{sync:!0,nice:!0,max:1}},t[_M]={sync:`color`},t[vM]={sync:`color`},t)),e}function SM(e){return e.chart.axis(!1),e}function CM(e){return e.chart.legend(!1),e}function wM(e){var t=e.chart,n=e.options.tooltip;return t.tooltip(n),e}function TM(e){return e.chart.coordinate(`polar`).reflect(`y`),e}function EM(e){var t=e.chart,n=e.options,r=e.ext.chordData.nodesData,i=n.nodeStyle,a=n.label,o=n.tooltip,s=t.createView();return s.data(r),dD({chart:s,options:{xField:`x`,yField:`y`,seriesField:_M,polygon:{style:i},label:a,tooltip:o}}),e}function DM(e){var t=e.chart,n=e.options,r=e.ext.chordData.edgesData,i=n.edgeStyle,a=n.tooltip,o=t.createView();return o.data(r),oD({chart:o,options:{xField:`x`,yField:`y`,seriesField:vM,edge:{style:i,shape:`arc`},tooltip:a}}),e}function OM(e){var t=e.chart,n=e.options.animation;return bE(t,n,$T(t)),e}function kM(e){return X(Q,bM,TM,xM,SM,CM,wM,DM,EM,BE,HE,OM)(e)}(function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=`chord`,t}return t.getDefaultOptions=function(){return yM},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return kM},t})($);var AM=[`x`,`y`,`r`,`name`,`value`,`path`,`depth`],jM={colorField:`name`,autoFit:!0,pointStyle:{lineWidth:0,stroke:`#fff`},legend:!1,hierarchyConfig:{size:[1,1],padding:0},label:{fields:[`name`],layout:{type:`limit-in-shape`}},tooltip:{showMarkers:!1,showTitle:!1},drilldown:{enabled:!1}},MM=4,NM=0,PM=`drilldown-bread-crumb`,FM={position:`top-left`,dividerText:`/`,textStyle:{fontSize:12,fill:`rgba(0, 0, 0, 0.65)`,cursor:`pointer`},activeTextStyle:{fill:`#87B5FF`}},IM=`hierarchy-data-transform-params`,LM=function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.name=`drill-down`,t.historyCache=[],t.breadCrumbGroup=null,t.breadCrumbCfg=FM,t}return t.prototype.click=function(){var e=z(this.context,[`event`,`data`,`data`]);if(!e)return!1;this.drill(e),this.drawBreadCrumb()},t.prototype.resetPosition=function(){if(this.breadCrumbGroup){var e=this.context.view.getCoordinate(),t=this.breadCrumbGroup,n=t.getBBox(),r=this.getButtonCfg().position,i={x:e.start.x,y:e.end.y-(n.height+10)};e.isPolar&&(i={x:0,y:0}),r===`bottom-left`&&(i={x:e.start.x,y:e.start.y});var a=hv.transform(null,[[`t`,i.x+NM,i.y+n.height+5]]);t.setMatrix(a)}},t.prototype.back=function(){It(this.historyCache)&&this.backTo(this.historyCache.slice(0,-1))},t.prototype.reset=function(){this.historyCache[0]&&this.backTo(this.historyCache.slice(0,1)),this.historyCache=[],this.hideCrumbGroup()},t.prototype.drill=function(e){var t=this.context.view,n=z(t,[`interactions`,`drill-down`,`cfg`,`transformData`],function(e){return e}),r=n(_({data:e.data},e[IM]));t.changeData(r);for(var i=[],a=e;a;){var o=a.data;i.unshift({id:`${o.name}_${a.height}_${a.depth}`,name:o.name,children:n(_({data:o},e[IM]))}),a=a.parent}this.historyCache=(this.historyCache||[]).slice(0,-1).concat(i)},t.prototype.backTo=function(e){if(!(!e||e.length<=0)){var t=this.context.view,n=De(e).children;t.changeData(n),e.length>1?(this.historyCache=e,this.drawBreadCrumb()):(this.historyCache=[],this.hideCrumbGroup())}},t.prototype.getButtonCfg=function(){var e=this.context.view,t=z(e,[`interactions`,`drill-down`,`cfg`,`drillDownConfig`]);return Y(this.breadCrumbCfg,t?.breadCrumb,this.cfg)},t.prototype.drawBreadCrumb=function(){this.drawBreadCrumbGroup(),this.resetPosition(),this.breadCrumbGroup.show()},t.prototype.drawBreadCrumbGroup=function(){var e=this,t=this.getButtonCfg(),n=this.historyCache;this.breadCrumbGroup?this.breadCrumbGroup.clear():this.breadCrumbGroup=this.context.view.foregroundGroup.addGroup({name:PM});var r=0;n.forEach(function(i,a){var o=e.breadCrumbGroup.addShape({type:`text`,id:i.id,name:`${PM}_${i.name}_text`,attrs:_(_({text:a===0&&!M(t.rootText)?t.rootText:i.name},t.textStyle),{x:r,y:0})}),s=o.getBBox();if(r+=s.width+MM,o.on(`click`,function(t){var r=t.target.get(`id`);if(r!==De(n)?.id){var i=n.slice(0,n.findIndex(function(e){return e.id===r})+1);e.backTo(i)}}),o.on(`mouseenter`,function(e){e.target.get(`id`)===De(n)?.id?o.attr({cursor:`default`}):o.attr(t.activeTextStyle)}),o.on(`mouseleave`,function(){o.attr(t.textStyle)}),a<n.length-1){var c=e.breadCrumbGroup.addShape({type:`text`,name:`${t.name}_${i.name}_divider`,attrs:_(_({text:t.dividerText},t.textStyle),{x:r,y:0})}).getBBox();r+=c.width+MM}})},t.prototype.hideCrumbGroup=function(){this.breadCrumbGroup&&this.breadCrumbGroup.hide()},t.prototype.destroy=function(){this.breadCrumbGroup&&this.breadCrumbGroup.remove(),e.prototype.destroy.call(this)},t}(ih);function RM(e,t){return e.parent===t.parent?1:2}function zM(e){return e.reduce(BM,0)/e.length}function BM(e,t){return e+t.x}function VM(e){return 1+e.reduce(HM,0)}function HM(e,t){return Math.max(e,t.y)}function UM(e){for(var t;t=e.children;)e=t[0];return e}function WM(e){for(var t;t=e.children;)e=t[t.length-1];return e}function GM(){var e=RM,t=1,n=1,r=!1;function i(i){var a,o=0;i.eachAfter(function(t){var n=t.children;n?(t.x=zM(n),t.y=VM(n)):(t.x=a?o+=e(t,a):0,t.y=0,a=t)});var s=UM(i),c=WM(i),l=s.x-e(s,c)/2,u=c.x+e(c,s)/2;return i.eachAfter(r?function(e){e.x=(e.x-i.x)*t,e.y=(i.y-e.y)*n}:function(e){e.x=(e.x-l)/(u-l)*t,e.y=(1-(i.y?e.y/i.y:1))*n})}return i.separation=function(t){return arguments.length?(e=t,i):e},i.size=function(e){return arguments.length?(r=!1,t=+e[0],n=+e[1],i):r?null:[t,n]},i.nodeSize=function(e){return arguments.length?(r=!0,t=+e[0],n=+e[1],i):r?[t,n]:null},i}function KM(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function qM(){return this.eachAfter(KM)}function JM(e,t){let n=-1;for(let r of this)e.call(t,r,++n,this);return this}function YM(e,t){for(var n=this,r=[n],i,a,o=-1;n=r.pop();)if(e.call(t,n,++o,this),i=n.children)for(a=i.length-1;a>=0;--a)r.push(i[a]);return this}function XM(e,t){for(var n=this,r=[n],i=[],a,o,s,c=-1;n=r.pop();)if(i.push(n),a=n.children)for(o=0,s=a.length;o<s;++o)r.push(a[o]);for(;n=i.pop();)e.call(t,n,++c,this);return this}function ZM(e,t){let n=-1;for(let r of this)if(e.call(t,r,++n,this))return r}function QM(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function $M(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function eN(e){for(var t=this,n=tN(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function tN(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function nN(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function rN(){return Array.from(this)}function iN(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function aN(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*oN(){var e=this,t,n=[e],r,i,a;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,a=r.length;i<a;++i)n.push(r[i]);while(n.length)}function sN(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=uN)):t===void 0&&(t=lN);for(var n=new pN(e),r,i=[n],a,o,s,c;r=i.pop();)if((o=t(r.data))&&(c=(o=Array.from(o)).length))for(r.children=o,s=c-1;s>=0;--s)i.push(a=o[s]=new pN(o[s])),a.parent=r,a.depth=r.depth+1;return n.eachBefore(fN)}function cN(){return sN(this).eachBefore(dN)}function lN(e){return e.children}function uN(e){return Array.isArray(e)?e[1]:null}function dN(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function fN(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function pN(e){this.data=e,this.depth=this.height=0,this.parent=null}pN.prototype=sN.prototype={constructor:pN,count:qM,each:JM,eachAfter:XM,eachBefore:YM,find:ZM,sum:QM,sort:$M,path:eN,ancestors:nN,descendants:rN,leaves:iN,links:aN,copy:cN,[Symbol.iterator]:oN};function mN(e){return typeof e==`object`&&`length`in e?e:Array.from(e)}function hN(e){for(var t=e.length,n,r;t;)r=Math.random()*t--|0,n=e[t],e[t]=e[r],e[r]=n;return e}function gN(e){for(var t=0,n=(e=hN(Array.from(e))).length,r=[],i,a;t<n;)i=e[t],a&&yN(a,i)?++t:(a=xN(r=_N(r,i)),t=0);return a}function _N(e,t){var n,r;if(bN(t,e))return[t];for(n=0;n<e.length;++n)if(vN(t,e[n])&&bN(CN(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(vN(CN(e[n],e[r]),t)&&vN(CN(e[n],t),e[r])&&vN(CN(e[r],t),e[n])&&bN(wN(e[n],e[r],t),e))return[e[n],e[r],t];throw Error()}function vN(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function yN(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function bN(e,t){for(var n=0;n<t.length;++n)if(!yN(e,t[n]))return!1;return!0}function xN(e){switch(e.length){case 1:return SN(e[0]);case 2:return CN(e[0],e[1]);case 3:return wN(e[0],e[1],e[2])}}function SN(e){return{x:e.x,y:e.y,r:e.r}}function CN(e,t){var n=e.x,r=e.y,i=e.r,a=t.x,o=t.y,s=t.r,c=a-n,l=o-r,u=s-i,d=Math.sqrt(c*c+l*l);return{x:(n+a+c/d*u)/2,y:(r+o+l/d*u)/2,r:(d+i+s)/2}}function wN(e,t,n){var r=e.x,i=e.y,a=e.r,o=t.x,s=t.y,c=t.r,l=n.x,u=n.y,d=n.r,f=r-o,p=r-l,m=i-s,h=i-u,g=c-a,_=d-a,v=r*r+i*i-a*a,y=v-o*o-s*s+c*c,b=v-l*l-u*u+d*d,x=p*m-f*h,S=(m*b-h*y)/(x*2)-r,C=(h*g-m*_)/x,w=(p*y-f*b)/(x*2)-i,T=(f*_-p*g)/x,E=C*C+T*T-1,D=2*(a+S*C+w*T),O=S*S+w*w-a*a,k=-(E?(D+Math.sqrt(D*D-4*E*O))/(2*E):O/D);return{x:r+S+C*k,y:i+w+T*k,r:k}}function TN(e,t,n){var r=e.x-t.x,i,a,o=e.y-t.y,s,c,l=r*r+o*o;l?(a=t.r+n.r,a*=a,c=e.r+n.r,c*=c,a>c?(i=(l+c-a)/(2*l),s=Math.sqrt(Math.max(0,c/l-i*i)),n.x=e.x-i*r-s*o,n.y=e.y-i*o+s*r):(i=(l+a-c)/(2*l),s=Math.sqrt(Math.max(0,a/l-i*i)),n.x=t.x+i*r-s*o,n.y=t.y+i*o+s*r)):(n.x=t.x+n.r,n.y=t.y)}function EN(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function DN(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,a=(t.y*n.r+n.y*t.r)/r;return i*i+a*a}function ON(e){this._=e,this.next=null,this.previous=null}function kN(e){if(!(i=(e=mN(e)).length))return 0;var t=e[0],n,r,i,a,o,s,c,l,u,d;if(t.x=0,t.y=0,!(i>1))return t.r;if(n=e[1],t.x=-n.r,n.x=t.r,n.y=0,!(i>2))return t.r+n.r;TN(n,t,r=e[2]),t=new ON(t),n=new ON(n),r=new ON(r),t.next=r.previous=n,n.next=t.previous=r,r.next=n.previous=t;pack:for(s=3;s<i;++s){TN(t._,n._,r=e[s]),r=new ON(r),c=n.next,l=t.previous,u=n._.r,d=t._.r;do if(u<=d){if(EN(c._,r._)){n=c,t.next=n,n.previous=t,--s;continue pack}u+=c._.r,c=c.next}else{if(EN(l._,r._)){t=l,t.next=n,n.previous=t,--s;continue pack}d+=l._.r,l=l.previous}while(c!==l.next);for(r.previous=t,r.next=n,t.next=n.previous=n=r,a=DN(t);(r=r.next)!==n;)(o=DN(r))<a&&(t=r,a=o);n=t.next}for(t=[n._],r=n;(r=r.next)!==n;)t.push(r._);for(r=gN(t),s=0;s<i;++s)t=e[s],t.x-=r.x,t.y-=r.y;return r.r}function AN(e){return kN(e),e}function jN(e){return e==null?null:MN(e)}function MN(e){if(typeof e!=`function`)throw Error();return e}function NN(){return 0}function PN(e){return function(){return e}}function FN(e){return Math.sqrt(e.value)}function IN(){var e=null,t=1,n=1,r=NN;function i(i){return i.x=t/2,i.y=n/2,e?i.eachBefore(LN(e)).eachAfter(RN(r,.5)).eachBefore(zN(1)):i.eachBefore(LN(FN)).eachAfter(RN(NN,1)).eachAfter(RN(r,i.r/Math.min(t,n))).eachBefore(zN(Math.min(t,n)/(2*i.r))),i}return i.radius=function(t){return arguments.length?(e=jN(t),i):e},i.size=function(e){return arguments.length?(t=+e[0],n=+e[1],i):[t,n]},i.padding=function(e){return arguments.length?(r=typeof e==`function`?e:PN(+e),i):r},i}function LN(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function RN(e,t){return function(n){if(r=n.children){var r,i,a=r.length,o=e(n)*t||0,s;if(o)for(i=0;i<a;++i)r[i].r+=o;if(s=kN(r),o)for(i=0;i<a;++i)r[i].r-=o;n.r=s+o}}}function zN(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function BN(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function VN(e,t,n,r,i){for(var a=e.children,o,s=-1,c=a.length,l=e.value&&(r-t)/e.value;++s<c;)o=a[s],o.y0=n,o.y1=i,o.x0=t,o.x1=t+=o.value*l}function HN(){var e=1,t=1,n=0,r=!1;function i(i){var o=i.height+1;return i.x0=i.y0=n,i.x1=e,i.y1=t/o,i.eachBefore(a(t,o)),r&&i.eachBefore(BN),i}function a(e,t){return function(r){r.children&&VN(r,r.x0,e*(r.depth+1)/t,r.x1,e*(r.depth+2)/t);var i=r.x0,a=r.y0,o=r.x1-n,s=r.y1-n;o<i&&(i=o=(i+o)/2),s<a&&(a=s=(a+s)/2),r.x0=i,r.y0=a,r.x1=o,r.y1=s}}return i.round=function(e){return arguments.length?(r=!!e,i):r},i.size=function(n){return arguments.length?(e=+n[0],t=+n[1],i):[e,t]},i.padding=function(e){return arguments.length?(n=+e,i):n},i}var UN={depth:-1},WN={};function GN(e){return e.id}function KN(e){return e.parentId}function qN(){var e=GN,t=KN;function n(n){var r=Array.from(n),i=r.length,a,o,s,c,l,u,d,f=new Map;for(o=0;o<i;++o)a=r[o],l=r[o]=new pN(a),(u=e(a,o,n))!=null&&(u+=``)&&(d=l.id=u,f.set(d,f.has(d)?WN:l)),(u=t(a,o,n))!=null&&(u+=``)&&(l.parent=u);for(o=0;o<i;++o)if(l=r[o],u=l.parent){if(c=f.get(u),!c)throw Error(`missing: `+u);if(c===WN)throw Error(`ambiguous: `+u);c.children?c.children.push(l):c.children=[l],l.parent=c}else{if(s)throw Error(`multiple roots`);s=l}if(!s)throw Error(`no root`);if(s.parent=UN,s.eachBefore(function(e){e.depth=e.parent.depth+1,--i}).eachBefore(fN),s.parent=null,i>0)throw Error(`cycle`);return s}return n.id=function(t){return arguments.length?(e=MN(t),n):e},n.parentId=function(e){return arguments.length?(t=MN(e),n):t},n}function JN(e,t){return e.parent===t.parent?1:2}function YN(e){var t=e.children;return t?t[0]:e.t}function XN(e){var t=e.children;return t?t[t.length-1]:e.t}function ZN(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function QN(e){for(var t=0,n=0,r=e.children,i=r.length,a;--i>=0;)a=r[i],a.z+=t,a.m+=t,t+=a.s+(n+=a.c)}function $N(e,t,n){return e.a.parent===t.parent?e.a:n}function eP(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}eP.prototype=Object.create(pN.prototype);function tP(e){for(var t=new eP(e,0),n,r=[t],i,a,o,s;n=r.pop();)if(a=n._.children)for(n.children=Array(s=a.length),o=s-1;o>=0;--o)r.push(i=n.children[o]=new eP(a[o],o)),i.parent=n;return(t.parent=new eP(null,0)).children=[t],t}function nP(){var e=JN,t=1,n=1,r=null;function i(i){var s=tP(i);if(s.eachAfter(a),s.parent.m=-s.z,s.eachBefore(o),r)i.eachBefore(c);else{var l=i,u=i,d=i;i.eachBefore(function(e){e.x<l.x&&(l=e),e.x>u.x&&(u=e),e.depth>d.depth&&(d=e)});var f=l===u?1:e(l,u)/2,p=f-l.x,m=t/(u.x+f+p),h=n/(d.depth||1);i.eachBefore(function(e){e.x=(e.x+p)*m,e.y=e.depth*h})}return i}function a(t){var n=t.children,r=t.parent.children,i=t.i?r[t.i-1]:null;if(n){QN(t);var a=(n[0].z+n[n.length-1].z)/2;i?(t.z=i.z+e(t._,i._),t.m=t.z-a):t.z=a}else i&&(t.z=i.z+e(t._,i._));t.parent.A=s(t,i,t.parent.A||r[0])}function o(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function s(t,n,r){if(n){for(var i=t,a=t,o=n,s=i.parent.children[0],c=i.m,l=a.m,u=o.m,d=s.m,f;o=XN(o),i=YN(i),o&&i;)s=YN(s),a=XN(a),a.a=t,f=o.z+u-i.z-c+e(o._,i._),f>0&&(ZN($N(o,t,r),t,f),c+=f,l+=f),u+=o.m,c+=i.m,d+=s.m,l+=a.m;o&&!XN(a)&&(a.t=o,a.m+=u-l),i&&!YN(s)&&(s.t=i,s.m+=c-d,r=t)}return r}function c(e){e.x*=t,e.y=e.depth*n}return i.separation=function(t){return arguments.length?(e=t,i):e},i.size=function(e){return arguments.length?(r=!1,t=+e[0],n=+e[1],i):r?null:[t,n]},i.nodeSize=function(e){return arguments.length?(r=!0,t=+e[0],n=+e[1],i):r?[t,n]:null},i}function rP(e,t,n,r,i){for(var a=e.children,o,s=-1,c=a.length,l=e.value&&(i-n)/e.value;++s<c;)o=a[s],o.x0=t,o.x1=r,o.y0=n,o.y1=n+=o.value*l}var iP=(1+Math.sqrt(5))/2;function aP(e,t,n,r,i,a){for(var o=[],s=t.children,c,l,u=0,d=0,f=s.length,p,m,h=t.value,g,_,v,y,b,x,S;u<f;){p=i-n,m=a-r;do g=s[d++].value;while(!g&&d<f);for(_=v=g,x=Math.max(m/p,p/m)/(h*e),S=g*g*x,b=Math.max(v/S,S/_);d<f;++d){if(g+=l=s[d].value,l<_&&(_=l),l>v&&(v=l),S=g*g*x,y=Math.max(v/S,S/_),y>b){g-=l;break}b=y}o.push(c={value:g,dice:p<m,children:s.slice(u,d)}),c.dice?VN(c,n,r,i,h?r+=m*g/h:a):rP(c,n,r,h?n+=p*g/h:i,a),h-=g,u=d}return o}var oP=(function e(t){function n(e,n,r,i,a){aP(t,e,n,r,i,a)}return n.ratio=function(t){return e((t=+t)>1?t:1)},n})(iP);function sP(){var e=oP,t=!1,n=1,r=1,i=[0],a=NN,o=NN,s=NN,c=NN,l=NN;function u(e){return e.x0=e.y0=0,e.x1=n,e.y1=r,e.eachBefore(d),i=[0],t&&e.eachBefore(BN),e}function d(t){var n=i[t.depth],r=t.x0+n,u=t.y0+n,d=t.x1-n,f=t.y1-n;d<r&&(r=d=(r+d)/2),f<u&&(u=f=(u+f)/2),t.x0=r,t.y0=u,t.x1=d,t.y1=f,t.children&&(n=i[t.depth+1]=a(t)/2,r+=l(t)-n,u+=o(t)-n,d-=s(t)-n,f-=c(t)-n,d<r&&(r=d=(r+d)/2),f<u&&(u=f=(u+f)/2),e(t,r,u,d,f))}return u.round=function(e){return arguments.length?(t=!!e,u):t},u.size=function(e){return arguments.length?(n=+e[0],r=+e[1],u):[n,r]},u.tile=function(t){return arguments.length?(e=MN(t),u):e},u.padding=function(e){return arguments.length?u.paddingInner(e).paddingOuter(e):u.paddingInner()},u.paddingInner=function(e){return arguments.length?(a=typeof e==`function`?e:PN(+e),u):a},u.paddingOuter=function(e){return arguments.length?u.paddingTop(e).paddingRight(e).paddingBottom(e).paddingLeft(e):u.paddingTop()},u.paddingTop=function(e){return arguments.length?(o=typeof e==`function`?e:PN(+e),u):o},u.paddingRight=function(e){return arguments.length?(s=typeof e==`function`?e:PN(+e),u):s},u.paddingBottom=function(e){return arguments.length?(c=typeof e==`function`?e:PN(+e),u):c},u.paddingLeft=function(e){return arguments.length?(l=typeof e==`function`?e:PN(+e),u):l},u}function cP(e,t,n,r,i){var a=e.children,o,s=a.length,c,l=Array(s+1);for(l[0]=c=o=0;o<s;++o)l[o+1]=c+=a[o].value;u(0,s,e.value,t,n,r,i);function u(e,t,n,r,i,o,s){if(e>=t-1){var c=a[e];c.x0=r,c.y0=i,c.x1=o,c.y1=s;return}for(var d=l[e],f=n/2+d,p=e+1,m=t-1;p<m;){var h=p+m>>>1;l[h]<f?p=h+1:m=h}f-l[p-1]<l[p]-f&&e+1<p&&--p;var g=l[p]-d,_=n-g;if(o-r>s-i){var v=n?(r*_+o*g)/n:o;u(e,p,g,r,i,v,s),u(p,t,_,v,i,o,s)}else{var y=n?(i*_+s*g)/n:s;u(e,p,g,r,i,o,y),u(p,t,_,r,y,o,s)}}}function lP(e,t,n,r,i){(e.depth&1?rP:VN)(e,t,n,r,i)}var uP=(function e(t){function n(e,n,r,i,a){if((o=e._squarify)&&o.ratio===t)for(var o,s,c,l,u=-1,d,f=o.length,p=e.value;++u<f;){for(s=o[u],c=s.children,l=s.value=0,d=c.length;l<d;++l)s.value+=c[l].value;s.dice?VN(s,n,r,i,p?r+=(a-r)*s.value/p:a):rP(s,n,r,p?n+=(i-n)*s.value/p:i,a),p-=s.value}else e._squarify=o=aP(t,e,n,r,i,a),o.ratio=t}return n.ratio=function(t){return e((t=+t)>1?t:1)},n})(iP),dP=e({cluster:()=>GM,hierarchy:()=>sN,pack:()=>IN,packEnclose:()=>gN,packSiblings:()=>AN,partition:()=>HN,stratify:()=>qN,tree:()=>nP,treemap:()=>sP,treemapBinary:()=>cP,treemapDice:()=>VN,treemapResquarify:()=>uP,treemapSlice:()=>rP,treemapSliceDice:()=>lP,treemapSquarify:()=>oP}),fP=`nodeIndex`,pP=`childNodeCount`,mP=`nodeAncestor`,hP=`Invalid field: it must be a string!`;function gP(e,t){var n=e.field,r=e.fields;if(I(n))return n;if(N(n))return console.warn(hP),n[0];if(console.warn(`${hP} will try to get fields instead.`),I(r))return r;if(N(r)&&r.length)return r[0];if(t)return t;throw TypeError(hP)}function _P(e){var t=[];if(e&&e.each){var n,r;e.each(function(e){e.parent===n?r+=1:(n=e.parent,r=0),e[mP]=k((e.ancestors?.call(e)||[]).map(function(e){return t.find(function(t){return t.name===e.name})||e}),function(t){var n=t.depth;return n>0&&n<e.depth}),e[pP]=e.children?.length||0,e[fP]=r,t.push(e)})}else e&&e.eachNode&&e.eachNode(function(e){t.push(e)});return t}var vP={field:`value`,as:[`x`,`y`,`r`],sort:function(e,t){return t.value-e.value}};function yP(e,t){t=ut({},vP,t);var n=t.as;if(!N(n)||n.length!==3)throw TypeError(`Invalid as: it must be an array with 3 strings (e.g. [ "x", "y", "r" ])!`);var r;try{r=gP(t)}catch(e){console.warn(e)}var i=function(e){return IN().size(t.size).padding(t.padding)(sN(e).sum(function(e){return e[r]}).sort(t.sort))}(e),a=n[0],o=n[1],s=n[2];return i.each(function(e){e[a]=e.x,e[o]=e.y,e[s]=e.r}),_P(i)}function bP(e){var t=e.data,n=e.hierarchyConfig,r=e.rawFields,i=r===void 0?[]:r,a=e.enableDrillDown,o=yP(t,_(_({},n),{field:`value`,as:[`x`,`y`,`r`]})),s=[];return o.forEach(function(e){for(var t=e.data.name,r=_({},e);r.depth>1;)t=`${r.parent.data?.name} / ${t}`,r=r.parent;if(a&&e.depth>2)return null;var o=Y({},e.data,_(_(_({},J(e.data,i)),{path:t}),e));o.ext=n,o[IM]={hierarchyConfig:n,rawFields:i,enableDrillDown:a},s.push(o)}),s}function xP(e,t,n){var r=cE([e,t]),i=r[0],a=r[1],o=r[2],s=r[3],c=n.width,l=n.height,u=c-(s+a),d=l-(i+o),f=Math.min(u,d),p=(u-f)/2,m=(d-f)/2,h=i+m,g=a+p,_=o+m,v=s+p;return{finalPadding:[h,g,_,v],finalSize:f<0?0:f}}function SP(e){var t=e.chart,n=Math.min(t.viewBBox.width,t.viewBBox.height);return Y({options:{size:function(e){return e.r*n}}},e)}function CP(e){var t=e.options,n=e.chart,r=n.viewBBox,i=t.padding,a=t.appendPadding,o=t.drilldown,s=a;if(o?.enabled){var c=sE(n.appendPadding,z(o,[`breadCrumb`,`position`]));s=cE([c,a])}return n.padding=xP(i,s,r).finalPadding,n.appendPadding=0,e}function wP(e){var t=e.chart,n=e.options,r=t.padding,i=t.appendPadding,a=n.color,o=n.colorField,c=n.pointStyle,l=n.hierarchyConfig,u=n.sizeField,d=n.rawFields,f=d===void 0?[]:d,p=n.drilldown,m=bP({data:n.data,hierarchyConfig:l,enableDrillDown:p?.enabled,rawFields:f});t.data(m);var h=t.viewBBox,g=xP(r,i,h).finalSize,_=function(e){return e.r*g};return u&&(_=function(e){return e[u]*g}),uD(Y({},e,{options:{xField:`x`,yField:`y`,seriesField:o,sizeField:u,rawFields:s(s([],AM,!0),f,!0),point:{color:a,style:c,shape:`circle`,size:_}}})),e}function TP(e){return X(GE({},{x:{min:0,max:1,minLimit:0,maxLimit:1,nice:!0},y:{min:0,max:1,minLimit:0,maxLimit:1,nice:!0}}))(e)}function EP(e){var t=e.chart,n=e.options.tooltip;if(n===!1)t.tooltip(!1);else{var r=n;z(n,`fields`)||(r=Y({},{customItems:function(e){return e.map(function(e){var n=z(t.getOptions(),`scales`),r=z(n,[`name`,`formatter`],function(e){return e}),i=z(n,[`value`,`formatter`],function(e){return e});return _(_({},e),{name:r(e.data.name),value:i(e.data.value)})})}},r)),t.tooltip(r)}return e}function DP(e){return e.chart.axis(!1),e}function OP(e){var t=e.drilldown,n=e.interactions,r=n===void 0?[]:n;return t?.enabled?Y({},e,{interactions:s(s([],r,!0),[{type:`drill-down`,cfg:{drillDownConfig:t,transformData:bP,enableDrillDown:!0}}],!1)}):e}function kP(e){var t=e.chart,n=e.options;return BE({chart:t,options:OP(n)}),e}function AP(e){return X(LE(`pointStyle`),SP,CP,Q,TP,wP,DP,RE,EP,kP,VE,KE())(e)}function jP(e){var t=z(e,[`event`,`data`,`data`],{});return N(t.children)&&t.children.length>0}function MP(e){var t=e.view.getCoordinate(),n=t.innerRadius;if(n){var r=e.event,i=r.x,a=r.y,o=t.center,s=o.x,c=o.y,l=t.getRadius()*n;return Math.sqrt((s-i)**2+(c-a)**2)<l}return!1}U(`drill-down-action`,LM),W(`drill-down`,{showEnable:[{trigger:`element:mouseenter`,action:`cursor:pointer`,isEnable:jP},{trigger:`element:mouseleave`,action:`cursor:default`},{trigger:`element:mouseleave`,action:`cursor:pointer`,isEnable:MP}],start:[{trigger:`element:click`,isEnable:jP,action:[`drill-down-action:click`]},{trigger:`afterchangesize`,action:[`drill-down-action:resetPosition`]},{trigger:`click`,isEnable:MP,action:[`drill-down-action:back`]}]}),function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=`circle-packing`,t}return t.getDefaultOptions=function(){return jM},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return AP},t.prototype.triggerResize=function(){this.chart.destroyed||(this.chart.forceFit(),this.chart.clear(),this.execAdaptor(),this.chart.render(!0))},t}($);var NP=`left-axes-view`,PP=`right-axes-view`,FP={nice:!0,label:{autoHide:!0,autoRotate:!1}},IP=_(_({},FP),{position:`left`}),LP=_(_({},FP),{position:`right`,grid:null}),RP;(function(e){e.Left=`Left`,e.Right=`Right`})(RP||={});var zP;(function(e){e.Line=`line`,e.Column=`column`})(zP||={});function BP(e){return z(e,`geometry`)===zP.Line}function VP(e){return z(e,`geometry`)===zP.Column}function HP(e,t,n){return VP(n)?Y({},{geometry:zP.Column,label:n.label&&n.isRange?{content:function(e){return e[t]?.join(`-`)}}:void 0},n):_({geometry:zP.Line},n)}function UP(e,t){var n=e[0],r=e[1];if(N(t)){var i=t[0],a=t[1];return[i,a]}var o=z(t,n),s=z(t,r);return[o,s]}function WP(e,t){return t===RP.Left?e===!1?!1:Y({},IP,e):t===RP.Right?e===!1?!1:Y({},LP,e):e}function GP(e){var t=e.options,n=e.chart,r=t.geometryOption,i=r.isStack,a=r.color,o=r.seriesField,s=r.groupField,c=r.isGroup,l=[`xField`,`yField`];if(BP(r)){lD(Y({},e,{options:_(_(_({},J(t,l)),r),{line:{color:r.color,style:r.lineStyle}})})),uD(Y({},e,{options:_(_(_({},J(t,l)),r),{point:r.point&&_({color:a,shape:`circle`},r.point)})}));var u=[];c&&u.push({type:`dodge`,dodgeBy:s||o,customOffset:0}),i&&u.push({type:`stack`}),u.length&&F(n.geometries,function(e){e.adjust(u)})}return VP(r)&&fO(Y({},e,{options:_(_(_({},J(t,l)),r),{widthRatio:r.columnWidthRatio,interval:_(_({},J(r,[`color`])),{style:r.columnStyle})})})),e}function KP(e){var t=e.view,n=e.geometryOption,r=e.yField,i=e.legend,a=z(i,`marker`),o=XT(t,BP(n)?`line`:`interval`);if(!n.seriesField){var s=z(t,`options.scales.${r}.alias`)||r,c=o.getAttribute(`color`),l=t.getTheme().defaultColor;c&&(l=hv.getMappingValue(c,s,z(c,[`values`,0],l)));var u=(j(a)?a:!xt(a)&&Y({},{style:{stroke:l,fill:l}},a))||(BP(n)?{symbol:function(e,t,n){return[[`M`,e-n,t],[`L`,e+n,t]]},style:{lineWidth:2,r:6,stroke:l}}:{symbol:`square`,style:{fill:l}});return[{value:r,name:s,marker:u,isGeometry:!0,viewId:t.id}]}var d=o.getGroupAttributes();return be(d,function(e,n){var r=hv.getLegendItems(t,o,n,t.getTheme(),a);return e.concat(r)},[])}var qP=function(e,t){var n=t[0],r=t[1],i=e.getOptions().data,a=e.getXScale(),o=It(i);if(!(!a||!o)){var s=!0,c=Te(i,a.field),l=s?c:c.reverse(),u=It(l),d=Math.round(n*(u-1)),f=Math.round(r*(u-1));e.filter(a.field,function(e){var t=l.indexOf(e);return t>-1?aE(t,d,f):!0}),e.getRootView().render(!0)}};function JP(e){var t,n=e.options,r=n.geometryOptions,i=r===void 0?[]:r,a=n.xField,o=n.yField,s=Oe(i,function(e){var t=e.geometry;return t===zP.Line||t===void 0});return Y({},{options:{geometryOptions:[],meta:(t={},t[a]={type:`cat`,sync:!0,range:s?[0,1]:void 0},t),tooltip:{showMarkers:s,showCrosshairs:s,shared:!0,crosshairs:{type:`x`}},interactions:s?[{type:`legend-visible-filter`}]:[{type:`legend-visible-filter`},{type:`active-region`}],legend:{position:`top-left`}}},e,{options:{yAxis:UP(o,n.yAxis),geometryOptions:[HP(a,o[0],i[0]),HP(a,o[1],i[1])],annotations:UP(o,n.annotations)}})}function YP(e){var t=e.chart,n=e.options.geometryOptions,r={line:0,column:1};return[{type:n[0]?.geometry,id:NP},{type:n[1]?.geometry,id:PP}].sort(function(e,t){return-r[e.type]+r[t.type]}).forEach(function(e){return t.createView({id:e.id})}),e}function XP(e){var t=e.chart,n=e.options,r=n.xField,i=n.yField,a=n.geometryOptions,o=n.data,s=n.tooltip;return[_(_({},a[0]),{id:NP,data:o[0],yField:i[0]}),_(_({},a[1]),{id:PP,data:o[1],yField:i[1]})].forEach(function(e){var n=e.id,i=e.data,a=e.yField,o=VP(e)&&e.isPercent,c=o?wD(i,a,r,a):i,l=Z(t,n).data(c),u=o?_({formatter:function(t){return{name:t[e.seriesField]||a,value:(Number(t[a])*100).toFixed(2)+`%`}}},s):s;GP({chart:l,options:{xField:r,yField:a,tooltip:u,geometryOption:e}})}),e}function ZP(e){var t=e.chart,n=e.options.geometryOptions,r=t.getTheme()?.colors10||[],i=0;return t.once(`beforepaint`,function(){F(n,function(e,n){var a=Z(t,n===0?NP:PP);if(!e.color){var o=a.getGroupScales(),s=z(o,[0,`values`,`length`],1),c=r.slice(i,i+s).concat(n===0?[]:r);a.geometries.forEach(function(t){e.seriesField?t.color(e.seriesField,c):t.color(c[0])}),i+=s}}),t.render(!0)}),e}function QP(e){var t,n,r=e.chart,i=e.options,a=i.xAxis,o=i.yAxis,s=i.xField,c=i.yField;return GE((t={},t[s]=a,t[c[0]]=o[0],t))(Y({},e,{chart:Z(r,NP)})),GE((n={},n[s]=a,n[c[1]]=o[1],n))(Y({},e,{chart:Z(r,PP)})),e}function $P(e){var t=e.chart,n=e.options,r=Z(t,NP),i=Z(t,PP),a=n.xField,o=n.yField,s=n.xAxis,c=n.yAxis;return t.axis(a,!1),t.axis(o[0],!1),t.axis(o[1],!1),r.axis(a,s),r.axis(o[0],WP(c[0],RP.Left)),i.axis(a,!1),i.axis(o[1],WP(c[1],RP.Right)),e}function eF(e){var t=e.chart,n=e.options.tooltip,r=Z(t,NP),i=Z(t,PP);return t.tooltip(n),r.tooltip({shared:!0}),i.tooltip({shared:!0}),e}function tF(e){var t=e.chart;return BE(Y({},e,{chart:Z(t,NP)})),BE(Y({},e,{chart:Z(t,PP)})),e}function nF(e){var t=e.chart,n=e.options.annotations,r=z(n,[0]),i=z(n,[1]);return KE(r)(Y({},e,{chart:Z(t,NP),options:{annotations:r}})),KE(i)(Y({},e,{chart:Z(t,PP),options:{annotations:i}})),e}function rF(e){var t=e.chart;return Q(Y({},e,{chart:Z(t,NP)})),Q(Y({},e,{chart:Z(t,PP)})),Q(e),e}function iF(e){var t=e.chart;return VE(Y({},e,{chart:Z(t,NP)})),VE(Y({},e,{chart:Z(t,PP)})),e}function aF(e){var t=e.chart,n=e.options.yAxis;return qE(Y({},e,{chart:Z(t,NP),options:{yAxis:n[0]}})),qE(Y({},e,{chart:Z(t,PP),options:{yAxis:n[1]}})),e}function oF(e){var t=e.chart,n=e.options,r=n.legend,i=n.geometryOptions,a=n.yField,o=n.data,s=Z(t,NP),c=Z(t,PP);if(r===!1)t.legend(!1);else if(P(r)&&r.custom===!0)t.legend(r);else{var l=z(i,[0,`legend`],r),u=z(i,[1,`legend`],r);t.once(`beforepaint`,function(){var e=o[0].length?KP({view:s,geometryOption:i[0],yField:a[0],legend:l}):[],n=o[1].length?KP({view:c,geometryOption:i[1],yField:a[1],legend:u}):[];t.legend(Y({},r,{custom:!0,items:e.concat(n)}))}),i[0].seriesField&&s.legend(i[0].seriesField,l),i[1].seriesField&&c.legend(i[1].seriesField,u),t.on(`legend-item:click`,function(e){var n=z(e,`gEvent.delegateObject`,{});if(n&&n.item){var r=n.item,i=r.value,o=r.isGeometry,s=r.viewId;if(o){if(de(a,function(e){return e===i})>-1){var c=z(Z(t,s),`geometries`);F(c,function(e){e.changeVisible(!n.item.unchecked)})}}else{var l=z(t.getController(`legend`),`option.items`,[]);F(t.views,function(e){var n=e.getGroupScales();F(n,function(t){t.values&&t.values.indexOf(i)>-1&&e.filter(t.field,function(e){return!le(l,function(t){return t.value===e}).unchecked})}),t.render(!0)})}}})}return e}function sF(e){var t=e.chart,n=e.options.slider,r=Z(t,NP),i=Z(t,PP);return n&&(r.option(`slider`,n),r.on(`slider:valuechanged`,function(e){var t=e.event,n=t.value,r=t.originValue;Ct(n,r)||qP(i,n)}),t.once(`afterpaint`,function(){if(!et(n)){var e=n.start,t=n.end;(e||t)&&qP(i,[e,t])}})),e}function cF(e){return X(JP,YP,rF,XP,QP,$P,aF,eF,tF,nF,iF,ZP,oF,sF)(e)}(function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=`dual-axes`,t}return t.prototype.getDefaultOptions=function(){return Y({},e.prototype.getDefaultOptions.call(this),{yAxis:[],syncViewPadding:!0})},t.prototype.getSchemaAdaptor=function(){return cF},t})($);function lF(e,t){var n=t.data,r=t.coordinate,i=t.interactions,a=t.annotations,o=t.animation,s=t.tooltip,c=t.axes,l=t.meta,u=t.geometries;n&&e.data(n);var d={};c&&F(c,function(e,t){d[t]=J(e,PT)}),d=Y({},l,d),e.scale(d),r&&e.coordinate(r),c===!1?e.axis(!1):F(c,function(t,n){e.axis(n,t)}),F(u,function(t){var n=iD({chart:e,options:t}).ext,r=t.adjust;r&&n.geometry.adjust(r)}),F(i,function(t){t.enable===!1?e.removeInteraction(t.type):e.interaction(t.type,t.cfg)}),F(a,function(t){e.annotation()[t.type](_({},t))}),bE(e,o),s?(e.interaction(`tooltip`),e.tooltip(s)):s===!1&&e.removeInteraction(`tooltip`)}function uF(e){var t=e.chart,n=e.options,r=n.type,i=n.data,a=n.fields,o=n.eachView,s=At(n,[`type`,`data`,`fields`,`eachView`,`axes`,`meta`,`tooltip`,`coordinate`,`theme`,`legend`,`interactions`,`annotations`]);return t.data(i),t.facet(r,_(_({},s),{fields:a,eachView:function(e,t){var r=o(e,t);if(r.geometries)lF(e,r);else{var i=r,a=i.options;[`seriesField`,`colorField`,`shapeField`,`sizeField`,`groupField`].forEach(function(e){n[e]&&a[e]===void 0&&(a[e]=n[e])}),a.tooltip&&e.interaction(`tooltip`),gj(i.type,e,a)}}})),e}function dF(e){var t=e.chart,n=e.options,r=n.axes,i=n.meta,a=n.tooltip,o=n.coordinate,s=n.theme,c=n.legend,l=n.interactions,u=n.annotations,d=n.shapeField,f=n.sizeField,p=n.shapeLegend,m=n.sizeLegend,h={};r&&F(r,function(e,t){h[t]=J(e,PT)}),h=Y({},i,h),t.scale(h),t.coordinate(o),r?F(r,function(e,n){t.axis(n,e)}):t.axis(!1),a?(t.interaction(`tooltip`),t.tooltip(a)):a===!1&&t.removeInteraction(`tooltip`),t.legend(c);var g=c!==!1;return d&&(p?t.legend(d,p):t.legend(d,p===!1?!1:c)),f&&t.legend(f,m||!1),!g&&!p&&!m&&t.legend(!1),s&&t.theme(s),F(l,function(e){e.enable===!1?t.removeInteraction(e.type):t.interaction(e.type,e.cfg)}),F(u,function(e){t.annotation()[e.type](_({},e))}),e}function fF(e){return X(Q,uF,dF)(e)}var pF={title:{style:{fontSize:12,fill:`rgba(0,0,0,0.65)`}},rowTitle:{style:{fontSize:12,fill:`rgba(0,0,0,0.65)`}},columnTitle:{style:{fontSize:12,fill:`rgba(0,0,0,0.65)`}}};(function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=`area`,t}return t.getDefaultOptions=function(){return pF},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return fF},t})($);function mF(e){var t=e.chart,n=e.options,r=n.data,i=n.type,a=n.xField,o=n.yField,s=n.colorField,c=n.sizeField,l=n.sizeRatio,u=n.shape,d=n.color,f=n.tooltip,p=n.heatmapStyle,m=n.meta;t.data(r);var h=`polygon`;i===`density`&&(h=`heatmap`);var g=tD(f,[a,o,s]),_=g.fields,v=g.formatter,y=1;return(l||l===0)&&(!u&&!c?console.warn(`sizeRatio is not in effect: Must define shape or sizeField first`):l<0||l>1?console.warn(`sizeRatio is not in effect: It must be a number in [0,1]`):y=l),iD(Y({},e,{options:{type:h,colorField:s,tooltipFields:_,shapeField:c||``,label:void 0,mapping:{tooltip:v,shape:u&&(c?function(e){var t=r.map(function(e){return e[c]}),n=m?.[c]||{},i=n.min,a=n.max;return i=L(i)?i:Math.min.apply(Math,t),a=L(a)?a:Math.max.apply(Math,t),[u,(z(e,c)-i)/(a-i),y]}:function(){return[u,1,y]}),color:d||s&&t.getTheme().sequenceColors.join(`-`),style:p}}})),e}function hF(e){var t,n=e.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField;return X(GE((t={},t[a]=r,t[o]=i,t)))(e)}function gF(e){var t=e.chart,n=e.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField;return r===!1?t.axis(a,!1):t.axis(a,r),i===!1?t.axis(o,!1):t.axis(o,i),e}function _F(e){var t=e.chart,n=e.options,r=n.legend,i=n.colorField,a=n.sizeField,o=n.sizeLegend,s=r!==!1;return i&&t.legend(i,s?r:!1),a&&t.legend(a,o===void 0?r:o),!s&&!o&&t.legend(!1),e}function vF(e){var t=e.chart,n=e.options,r=n.label,i=n.colorField,a=n.type,s=XT(t,a===`density`?`heatmap`:`polygon`);if(!r)s.label(!1);else if(i){var c=r.callback,l=o(r,[`callback`]);s.label({fields:[i],callback:c,cfg:tE(l)})}return e}function yF(e){var t,n,r=e.chart,i=e.options,a=i.coordinate,o=i.reflect,s=Y({actions:[]},a??{type:`rect`});return o&&((n=(t=s.actions)?.push)==null||n.call(t,[`reflect`,o])),r.coordinate(s),e}function bF(e){return X(Q,LE(`heatmapStyle`),hF,yF,mF,gF,_F,zE,vF,KE(),BE,VE,HE)(e)}var xF=Y({},$.getDefaultOptions(),{type:`polygon`,legend:!1,coordinate:{type:`rect`},xAxis:{tickLine:null,line:null,grid:{alignTick:!1,line:{style:{lineWidth:1,lineDash:null,stroke:`#f0f0f0`}}}},yAxis:{grid:{alignTick:!1,line:{style:{lineWidth:1,lineDash:null,stroke:`#f0f0f0`}}}}});K(`polygon`,`circle`,{draw:function(e,t){var n=e.x,r=e.y,i=this.parsePoints(e.points),a=Math.abs(i[2].x-i[1].x),o=Math.abs(i[1].y-i[0].y),s=Math.min(a,o)/2,c=Number(e.shape[1]),l=Number(e.shape[2]),u=s*Math.sqrt(l)*Math.sqrt(c),d=e.style?.fill||e.color||e.defaultStyle?.fill;return t.addShape(`circle`,{attrs:_(_(_({x:n,y:r,r:u},e.defaultStyle),e.style),{fill:d})})}}),K(`polygon`,`square`,{draw:function(e,t){var n=e.x,r=e.y,i=this.parsePoints(e.points),a=Math.abs(i[2].x-i[1].x),o=Math.abs(i[1].y-i[0].y),s=Math.min(a,o),c=Number(e.shape[1]),l=Number(e.shape[2]),u=s*Math.sqrt(l)*Math.sqrt(c),d=e.style?.fill||e.color||e.defaultStyle?.fill;return t.addShape(`rect`,{attrs:_(_(_({x:n-u/2,y:r-u/2,width:u,height:u},e.defaultStyle),e.style),{fill:d})})}}),function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=`heatmap`,t}return t.getDefaultOptions=function(){return xF},t.prototype.getSchemaAdaptor=function(){return bF},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t}($);var SF=`liquid`;function CF(e){return[{percent:e,type:SF}]}function wF(e){var t=e.chart,n=e.options,r=n.percent,i=n.liquidStyle,a=n.radius,o=n.outline,s=n.wave,c=n.shape,l=n.shapeStyle,u=n.animation;t.scale({percent:{min:0,max:1}}),t.data(CF(r));var d=n.color||t.getTheme().defaultColor,f=Y({},e,{options:{xField:`type`,yField:`percent`,widthRatio:a,interval:{color:d,style:i,shape:`liquid-fill-gauge`}}}),p=cD(f).ext.geometry,m=t.getTheme().background,h={percent:r,radius:a,outline:o,wave:s,shape:c,shapeStyle:l,background:m,animation:u};return p.customInfo(h),t.legend(!1),t.axis(!1),t.tooltip(!1),e}function TF(e,t){var n=e.chart,r=e.options,i=r.statistic,a=r.percent,o=r.meta;n.getController(`annotation`).clear(!0);var s=z(o,[`percent`,`formatter`])||(function(e){return`${(e*100).toFixed(2)}%`}),c=i.content;return c&&=Y({},c,{content:M(c.content)?s(a):c.content}),hE(n,{statistic:_(_({},i),{content:c}),plotType:`liquid`},{percent:a}),t&&n.render(!0),e}function EF(e){return X(Q,LE(`liquidStyle`),wF,TF,GE({}),VE,BE)(e)}var DF={radius:.9,statistic:{title:!1,content:{style:{opacity:.75,fontSize:`30px`,lineHeight:`30px`,textAlign:`center`}}},outline:{border:2,distance:0},wave:{count:3,length:192},shape:`circle`},OF=5e3;function kF(e,t,n){return e+(t-e)*n}function AF(e){var t=_({opacity:1},e.style);return e.color&&!t.fill&&(t.fill=e.color),t}function jF(e){var t=ut({},{fill:`#fff`,fillOpacity:0,lineWidth:4},e.style);return e.color&&!t.stroke&&(t.stroke=e.color),L(e.opacity)&&(t.opacity=t.strokeOpacity=e.opacity),t}function MF(e,t,n,r){return t===0?[[e+1/2*n/Math.PI/2,r/2],[e+1/2*n/Math.PI,r],[e+n/4,r]]:t===1?[[e+1/2*n/Math.PI/2*(Math.PI-2),r],[e+1/2*n/Math.PI/2*(Math.PI-1),r/2],[e+n/4,0]]:t===2?[[e+1/2*n/Math.PI/2,-r/2],[e+1/2*n/Math.PI,-r],[e+n/4,-r]]:[[e+1/2*n/Math.PI/2*(Math.PI-2),-r],[e+1/2*n/Math.PI/2*(Math.PI-1),-r/2],[e+n/4,0]]}function NF(e,t,n,r,i,a,o){for(var s=Math.ceil(2*e/n*4)*4,c=[],l=r;l<-Math.PI*2;)l+=Math.PI*2;for(;l>0;)l-=Math.PI*2;l=l/Math.PI/2*n;var u=a-e+l-e*2;c.push([`M`,u,t]);for(var d=0,f=0;f<s;++f){var p=f%4,m=MF(f*n/4,p,n,i);c.push([`C`,m[0][0]+u,-m[0][1]+t,m[1][0]+u,-m[1][1]+t,m[2][0]+u,-m[2][1]+t]),f===s-1&&(d=m[2][0])}return c.push([`L`,d+u,o+e]),c.push([`L`,u,o+e]),c.push([`Z`]),c}function PF(e,t,n,r,i,a,o,s,c,l){for(var u=i.fill,d=i.opacity,f=o.getBBox(),p=f.maxX-f.minX,m=f.maxY-f.minY,h=0;h<r;h++){var g=r<=1?1:h/(r-1),_=a.addShape(`path`,{name:`waterwave-path`,attrs:{path:NF(s,f.minY+m*n,c,0,p/32,e,t),fill:u,opacity:kF(.2,.9,g)*d}});try{if(l===!1)return;var v=Gk([[`t`,c,0]]);_.stopAnimate(),_.animate({matrix:v},{duration:kF(.5*OF,OF,g),repeat:!0})}catch{console.warn(`off-screen group animate error!`)}}}function FF(e,t,n,r){var i=n*2/3,a=Math.max(i,r),o=i/2,s=e,c=o+t-a/2,l=Math.asin(o/((a-o)*.85)),u=Math.sin(l)*o,d=Math.cos(l)*o,f=s-d,p=c+u,m=e,h=c+o/Math.sin(l);return`
      M ${f} ${p}
      A ${o} ${o} 0 1 1 ${f+d*2} ${p}
      Q ${m} ${h} ${e} ${t+a/2}
      Q ${m} ${h} ${f} ${p}
      Z 
    `}function IF(e,t,n,r){var i=n/2,a=r/2;return`
      M ${e} ${t-a} 
      a ${i} ${a} 0 1 0 0 ${a*2}
      a ${i} ${a} 0 1 0 0 ${-a*2}
      Z
    `}function LF(e,t,n,r){var i=r/2,a=n/2;return`
      M ${e} ${t-i}
      L ${e+a} ${t}
      L ${e} ${t+i}
      L ${e-a} ${t}
      Z
    `}function RF(e,t,n,r){var i=r/2,a=n/2;return`
      M ${e} ${t-i}
      L ${e+a} ${t+i}
      L ${e-a} ${t+i}
      Z
    `}function zF(e,t,n,r){var i=.618,a=r/2,o=n/2*i;return`
      M ${e-o} ${t-a}
      L ${e+o} ${t-a}
      L ${e+o} ${t+a}
      L ${e-o} ${t+a}
      Z
    `}var BF={pin:FF,circle:IF,diamond:LF,triangle:RF,rect:zF};K(`interval`,`liquid-fill-gauge`,{draw:function(e,t){var n=.5,r=.5,i=e.customInfo,a=i,o=a.percent,s=a.radius,c=a.shape,l=a.shapeStyle,u=a.background,d=a.animation,f=i.outline,p=i.wave,m=f.border,h=f.distance,g=p.count,v=p.length,y=be(e.points,function(e,t){return Math.min(e,t.x)},1/0),b=this.parsePoint({x:n,y:r}),x=this.parsePoint({x:y,y:r}),S=b.x-x.x,C=Math.min(S,x.y*s),w=AF(e),T=jF(ut({},e,f)),E=C-m/2,D=(typeof c==`function`?c:BF[c]||BF.circle)(b.x,b.y,E*2,E*2);if(l&&t.addShape(`path`,{name:`shape`,attrs:_({path:D},l)}),o>0){var O=t.addGroup({name:`waves`}),k=O.setClip({type:`path`,attrs:{path:D}});PF(b.x,b.y,1-e.points[1].y,g,w,O,k,C*2,v,d)}return t.addShape(`path`,{name:`distance`,attrs:{path:D,fill:`transparent`,lineWidth:m+h*2,stroke:u===`transparent`?`#fff`:u}}),t.addShape(`path`,{name:`wrap`,attrs:ut(T,{path:D,fill:`transparent`,lineWidth:m})}),t}});var VF=function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=`liquid`,t}return t.getDefaultOptions=function(){return DF},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.changeData=function(e){this.chart.emit(V.BEFORE_CHANGE_DATA,Kg.fromData(this.chart,V.BEFORE_CHANGE_DATA,null)),this.updateOption({percent:e}),this.chart.data(CF(e)),TF({chart:this.chart,options:this.options},!0),this.chart.emit(V.AFTER_CHANGE_DATA,Kg.fromData(this.chart,V.AFTER_CHANGE_DATA,null))},t.prototype.getSchemaAdaptor=function(){return EF},t}($);function HF(e){var t=e.chart,n=e.options,r=n.data,i=n.lineStyle,a=n.color,o=n.point,s=n.area;t.data(r);var c=Y({},e,{options:{line:{style:i,color:a},point:o&&_({color:a},o),area:s&&_({color:a},s),label:void 0}}),l=Y({},c,{options:{tooltip:!1}}),u=o?.state||n.state,d=Y({},c,{options:{tooltip:!1,state:u}});return lD(c),uD(d),aD(l),e}function UF(e){var t,n=e.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField;return X(GE((t={},t[a]=r,t[o]=i,t)))(e)}function WF(e){var t=e.chart,n=e.options,r=n.radius,i=n.startAngle,a=n.endAngle;return t.coordinate(`polar`,{radius:r,startAngle:i,endAngle:a}),e}function GF(e){var t=e.chart,n=e.options,r=n.xField,i=n.xAxis,a=n.yField,o=n.yAxis;return t.axis(r,i),t.axis(a,o),e}function KF(e){var t=e.chart,n=e.options,r=n.label,i=n.yField,a=XT(t,`line`);if(!r)a.label(!1);else{var s=r.fields,c=r.callback,l=o(r,[`fields`,`callback`]);a.label({fields:s||[i],callback:c,cfg:tE(l)})}return e}function qF(e){return X(HF,UF,Q,WF,GF,RE,zE,KF,BE,VE,KE())(e)}var JF=function(e){l(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(t.prototype,`name`,{get:function(){return`radar-tooltip`},enumerable:!1,configurable:!0}),t.prototype.getTooltipItems=function(t){var n=this.getTooltipCfg(),r=n.shared,i=n.title,a=e.prototype.getTooltipItems.call(this,t);if(a.length>0){var o=this.view.geometries[0],s=o.dataArray,c=a[0].name,l=[];return s.forEach(function(e){e.forEach(function(e){var t=hv.getTooltipItems(e,o)[0];if(!r&&t&&t.name===c){var n=M(i)?c:i;l.push(_(_({},t),{name:t.title,title:n}))}else if(r&&t){var n=M(i)?t.name||c:i;l.push(_(_({},t),{name:t.title,title:n}))}})}),l}return[]},t}(r_);Hg(`radar-tooltip`,JF);var YF=function(e){l(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.init=function(){this.context.view.removeInteraction(`tooltip`)},t.prototype.show=function(){var e=this.context.event;this.getTooltipController().showTooltip({x:e.x,y:e.y})},t.prototype.hide=function(){this.getTooltipController().hideTooltip()},t.prototype.getTooltipController=function(){return this.context.view.getController(`radar-tooltip`)},t}(ih);U(`radar-tooltip`,YF),W(`radar-tooltip`,{start:[{trigger:`plot:mousemove`,action:`radar-tooltip:show`}],end:[{trigger:`plot:mouseleave`,action:`radar-tooltip:hide`}]});var XF=function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=`radar`,t}return t.prototype.changeData=function(e){this.updateOption({data:e}),this.chart.changeData(e)},t.prototype.getDefaultOptions=function(){return Y({},e.prototype.getDefaultOptions.call(this),{xAxis:{label:{offset:15},grid:{line:{type:`line`}}},yAxis:{grid:{line:{type:`circle`}}},legend:{position:`top`},tooltip:{shared:!0,showCrosshairs:!0,showMarkers:!0,crosshairs:{type:`xy`,line:{style:{stroke:`#565656`,lineDash:[4]}},follow:!0}}})},t.prototype.getSchemaAdaptor=function(){return qF},t}($);function ZF(e,t,n){var r=n.map(function(e){return e[t]}).filter(function(e){return e!==void 0}),i=r.length>0?Math.max.apply(Math,r):0,a=Math.abs(e)%360;return a?i*360/a:i}function QF(e,t,n){var r=[];return e.forEach(function(e){var i=r.find(function(n){return n[t]===e[t]});i?i[n]+=e[n]||null:r.push(_({},e))}),r}function $F(e){var t=e.chart,n=e.options,r=n.barStyle,i=n.color,a=n.tooltip,o=n.colorField,s=n.type,c=n.xField,l=n.yField,u=n.data,d=n.shape,f=VT(u,l);t.data(f);var p=Y({},e,{options:{tooltip:a,seriesField:o,interval:{style:r,color:i,shape:d||(s===`line`?`line`:`intervel`)},minColumnWidth:n.minBarWidth,maxColumnWidth:n.maxBarWidth,columnBackground:n.barBackground}});return cD(p),s===`line`&&uD({chart:t,options:{xField:c,yField:l,seriesField:o,point:{shape:`circle`,color:i}}}),e}function eI(e){var t,n=e.options,r=n.yField,i=n.xField,a=n.data,o=n.isStack,s=n.isGroup,c=n.colorField,l=n.maxAngle,u=o&&!s&&c?QF(a,i,r):a,d=VT(u,r);return X(GE((t={},t[r]={min:0,max:ZF(l,r,d)},t)))(e)}function tI(e){var t=e.chart,n=e.options,r=n.radius,i=n.innerRadius,a=n.startAngle,o=n.endAngle;return t.coordinate({type:`polar`,cfg:{radius:r,innerRadius:i,startAngle:a,endAngle:o}}).transpose(),e}function nI(e){var t=e.chart,n=e.options,r=n.xField,i=n.xAxis;return t.axis(r,i),e}function rI(e){var t=e.chart,n=e.options,r=n.label,i=n.yField,a=XT(t,`interval`);if(!r)a.label(!1);else{var s=r.callback,c=o(r,[`callback`]);a.label({fields:[i],callback:s,cfg:_(_({},tE(c)),{type:`polar`})})}return e}function iI(e){return X(LE(`barStyle`),$F,eI,nI,tI,BE,VE,Q,zE,RE,KE(),rI)(e)}var aI=Y({},$.getDefaultOptions(),{interactions:[{type:`element-active`}],legend:!1,tooltip:{showMarkers:!1},xAxis:{grid:null,tickLine:null,line:null},maxAngle:240});(function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=`radial-bar`,t}return t.getDefaultOptions=function(){return aI},t.prototype.changeData=function(e){this.updateOption({data:e}),eI({chart:this.chart,options:this.options}),this.chart.changeData(e)},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return iI},t})($);function oI(e){var t=e.chart,n=e.options,r=n.data,i=n.sectorStyle,a=n.shape,o=n.color;return t.data(r),X(cD)(Y({},e,{options:{marginRatio:1,interval:{style:i,color:o,shape:a}}})),e}function sI(e){var t=e.chart,n=e.options,r=n.label,i=n.xField,a=XT(t,`interval`);if(r===!1)a.label(!1);else if(P(r)){var s=r.callback,c=r.fields,l=o(r,[`callback`,`fields`]),u=l.offset,d=l.layout;(u===void 0||u>=0)&&(d=d?N(d)?d:[d]:[],l.layout=k(d,function(e){return e.type!==`limit-in-shape`}),l.layout.length||delete l.layout),a.label({fields:c||[i],callback:s,cfg:tE(l)})}else RT(FT.WARN,r===null,`the label option must be an Object.`),a.label({fields:[i]});return e}function cI(e){var t=e.chart,n=e.options,r=n.legend,i=n.seriesField;return r===!1?t.legend(!1):i&&t.legend(i,r),e}function lI(e){var t=e.chart,n=e.options,r=n.radius,i=n.innerRadius,a=n.startAngle,o=n.endAngle;return t.coordinate({type:`polar`,cfg:{radius:r,innerRadius:i,startAngle:a,endAngle:o}}),e}function uI(e){var t,n=e.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField;return X(GE((t={},t[a]=r,t[o]=i,t)))(e)}function dI(e){var t=e.chart,n=e.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField;return r?t.axis(a,r):t.axis(a,!1),i?t.axis(o,i):t.axis(o,!1),e}function fI(e){X(LE(`sectorStyle`),oI,uI,sI,lI,dI,cI,zE,BE,VE,Q,KE(),HE)(e)}var pI=Y({},$.getDefaultOptions(),{xAxis:!1,yAxis:!1,legend:{position:`right`,radio:{}},sectorStyle:{stroke:`#fff`,lineWidth:1},label:{layout:{type:`limit-in-shape`}},tooltip:{shared:!0,showMarkers:!1},interactions:[{type:`active-region`}]});(function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=`rose`,t}return t.getDefaultOptions=function(){return pI},t.prototype.changeData=function(e){this.updateOption({data:e}),this.chart.changeData(e)},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return fI},t})($);var mI=`name`,hI=`nodes`,gI=`edges`;function _I(e,t,n){var r=[];return e.forEach(function(e){var i=e[t],a=e[n];r.includes(i)||r.push(i),r.includes(a)||r.push(a)}),r}function vI(e,t,n,r){var i={};return t.forEach(function(e){i[e]={},t.forEach(function(t){i[e][t]=0})}),e.forEach(function(e){i[e[n]][e[r]]=1}),i}function yI(e,t,n){if(!N(e))return[];var r=[],i=_I(e,t,n),a=vI(e,i,t,n),o={};i.forEach(function(e){o[e]=0});function s(e){o[e]=1,i.forEach(function(t){if(a[e][t]!=0)if(o[t]==1)r.push(`${e}_${t}`);else if(o[t]==-1)return;else s(t)}),o[e]=-1}return i.forEach(function(e){o[e]!=-1&&s(e)}),r.length!==0&&console.warn(`sankey data contains circle, ${r.length} records removed.`,r),e.filter(function(e){return r.findIndex(function(r){return r===`${e[t]}_${e[n]}`})<0})}function bI(e){return e.target.depth}function xI(e){return e.depth}function SI(e,t){return t-1-e.height}function CI(e,t){return e.sourceLinks.length?e.depth:t-1}function wI(e){return e.targetLinks.length?e.depth:e.sourceLinks.length?Be(e.sourceLinks,bI)-1:0}function TI(e){return function(){return e}}function EI(e,t){for(var n=0,r=0;r<e.length;r++)n+=t(e[r]);return n}function DI(e,t){for(var n=-1/0,r=0;r<e.length;r++)n=Math.max(t(e[r]),n);return n}function OI(e,t){for(var n=1/0,r=0;r<e.length;r++)n=Math.min(t(e[r]),n);return n}function kI(e,t){return jI(e.source,t.source)||e.index-t.index}function AI(e,t){return jI(e.target,t.target)||e.index-t.index}function jI(e,t){return e.y0-t.y0}function MI(e){return e.value}function NI(e){return e.index}function PI(e){return e.nodes}function FI(e){return e.links}function II(e,t){var n=e.get(t);if(!n)throw Error(`missing: `+t);return n}function LI(e){for(var t=e.nodes,n=0,r=t;n<r.length;n++){for(var i=r[n],a=i.y0,o=a,s=0,c=i.sourceLinks;s<c.length;s++){var l=c[s];l.y0=a+l.width/2,a+=l.width}for(var u=0,d=i.targetLinks;u<d.length;u++){var l=d[u];l.y1=o+l.width/2,o+=l.width}}}function RI(){var e=0,t=0,n=1,r=1,i=24,a=8,o,s=NI,c=CI,l,u,d,f=PI,p=FI,m=6;function h(e){var t={nodes:f(e),links:p(e)};return g(t),_(t),v(t),y(t),S(t),LI(t),t}h.update=function(e){return LI(e),e},h.nodeId=function(e){return arguments.length?(s=typeof e==`function`?e:TI(e),h):s},h.nodeAlign=function(e){return arguments.length?(c=typeof e==`function`?e:TI(e),h):c},h.nodeDepth=function(e){return arguments.length?(l=e,h):l},h.nodeSort=function(e){return arguments.length?(u=e,h):u},h.nodeWidth=function(e){return arguments.length?(i=+e,h):i},h.nodePadding=function(e){return arguments.length?(a=o=+e,h):a},h.nodes=function(e){return arguments.length?(f=typeof e==`function`?e:TI(e),h):f},h.links=function(e){return arguments.length?(p=typeof e==`function`?e:TI(e),h):p},h.linkSort=function(e){return arguments.length?(d=e,h):d},h.size=function(i){return arguments.length?(e=t=0,n=+i[0],r=+i[1],h):[n-e,r-t]},h.extent=function(i){return arguments.length?(e=+i[0][0],n=+i[1][0],t=+i[0][1],r=+i[1][1],h):[[e,t],[n,r]]},h.iterations=function(e){return arguments.length?(m=+e,h):m};function g(e){var t=e.nodes,n=e.links;t.forEach(function(e,t){e.index=t,e.sourceLinks=[],e.targetLinks=[]});var r=new Map(t.map(function(e){return[s(e),e]}));if(n.forEach(function(e,t){e.index=t;var n=e.source,i=e.target;typeof n!=`object`&&(n=e.source=II(r,n)),typeof i!=`object`&&(i=e.target=II(r,i)),n.sourceLinks.push(e),i.targetLinks.push(e)}),d!=null)for(var i=0,a=t;i<a.length;i++){var o=a[i],c=o.sourceLinks,l=o.targetLinks;c.sort(d),l.sort(d)}}function _(e){for(var t=e.nodes,n=0,r=t;n<r.length;n++){var i=r[n];i.value=i.fixedValue===void 0?Math.max(EI(i.sourceLinks,MI),EI(i.targetLinks,MI)):i.fixedValue}}function v(e){for(var t=e.nodes,n=t.length,r=new Set(t),i=new Set,a=0;r.size;){if(r.forEach(function(e){e.depth=a;for(var t=0,n=e.sourceLinks;t<n.length;t++){var r=n[t].target;i.add(r)}}),++a>n)throw Error(`circular link`);r=i,i=new Set}if(l)for(var o=Math.max(DI(t,function(e){return e.depth})+1,0),s=void 0,c=0;c<t.length;c++)s=t[c],s.depth=l.call(null,s,o)}function y(e){for(var t=e.nodes,n=t.length,r=new Set(t),i=new Set,a=0;r.size;){if(r.forEach(function(e){e.height=a;for(var t=0,n=e.targetLinks;t<n.length;t++){var r=n[t].source;i.add(r)}}),++a>n)throw Error(`circular link`);r=i,i=new Set}}function b(t){for(var r=t.nodes,a=Math.max(DI(r,function(e){return e.depth})+1,0),o=(n-e-i)/(a-1),s=Array(a).fill(0).map(function(){return[]}),l=0,d=r;l<d.length;l++){var f=d[l],p=Math.max(0,Math.min(a-1,Math.floor(c.call(null,f,a))));f.layer=p,f.x0=e+p*o,f.x1=f.x0+i,s[p]?s[p].push(f):s[p]=[f]}if(u)for(var m=0,h=s;m<h.length;m++)h[m].sort(u);return s}function x(e){for(var n=OI(e,function(e){return(r-t-(e.length-1)*o)/EI(e,MI)}),i=0,a=e;i<a.length;i++){for(var s=a[i],c=t,l=0,u=s;l<u.length;l++){var d=u[l];d.y0=c,d.y1=c+d.value*n,c=d.y1+o;for(var f=0,p=d.sourceLinks;f<p.length;f++){var m=p[f];m.width=m.value*n}}c=(r-c+o)/(s.length+1);for(var h=0;h<s.length;++h){var d=s[h];d.y0+=c*(h+1),d.y1+=c*(h+1)}k(s)}}function S(e){var n=b(e);o=Math.min(a,(r-t)/(DI(n,function(e){return e.length})-1)),x(n);for(var i=0;i<m;++i){var s=.99**i,c=Math.max(1-s,(i+1)/m);w(n,s,c),C(n,s,c)}}function C(e,t,n){for(var r=1,i=e.length;r<i;++r){for(var a=e[r],o=0,s=a;o<s.length;o++){for(var c=s[o],l=0,d=0,f=0,p=c.targetLinks;f<p.length;f++){var m=p[f],h=m.source,g=m.value*(c.layer-h.layer);l+=A(h,c)*g,d+=g}if(d>0){var _=(l/d-c.y0)*t;c.y0+=_,c.y1+=_,O(c)}}u===void 0&&a.sort(jI),a.length&&T(a,n)}}function w(e,t,n){for(var r=e.length,i=r-2;i>=0;--i){for(var a=e[i],o=0,s=a;o<s.length;o++){for(var c=s[o],l=0,d=0,f=0,p=c.sourceLinks;f<p.length;f++){var m=p[f],h=m.target,g=m.value*(h.layer-c.layer);l+=ee(c,h)*g,d+=g}if(d>0){var _=(l/d-c.y0)*t;c.y0+=_,c.y1+=_,O(c)}}u===void 0&&a.sort(jI),a.length&&T(a,n)}}function T(e,n){var i=e.length>>1,a=e[i];D(e,a.y0-o,i-1,n),E(e,a.y1+o,i+1,n),D(e,r,e.length-1,n),E(e,t,0,n)}function E(e,t,n,r){for(;n<e.length;++n){var i=e[n],a=(t-i.y0)*r;a>1e-6&&(i.y0+=a,i.y1+=a),t=i.y1+o}}function D(e,t,n,r){for(;n>=0;--n){var i=e[n],a=(i.y1-t)*r;a>1e-6&&(i.y0-=a,i.y1-=a),t=i.y0-o}}function O(e){var t=e.sourceLinks,n=e.targetLinks;if(d===void 0){for(var r=0,i=n;r<i.length;r++)i[r].source.sourceLinks.sort(AI);for(var a=0,o=t;a<o.length;a++)o[a].target.targetLinks.sort(kI)}}function k(e){if(d===void 0)for(var t=0,n=e;t<n.length;t++){var r=n[t],i=r.sourceLinks,a=r.targetLinks;i.sort(AI),a.sort(kI)}}function A(e,t){for(var n=e.y0-(e.sourceLinks.length-1)*o/2,r=0,i=e.sourceLinks;r<i.length;r++){var a=i[r],s=a.target,c=a.width;if(s===t)break;n+=c+o}for(var l=0,u=t.targetLinks;l<u.length;l++){var d=u[l],s=d.source,c=d.width;if(s===e)break;n-=c}return n}function ee(e,t){for(var n=t.y0-(t.targetLinks.length-1)*o/2,r=0,i=t.targetLinks;r<i.length;r++){var a=i[r],s=a.source,c=a.width;if(s===e)break;n+=c+o}for(var l=0,u=e.sourceLinks;l<u.length;l++){var d=u[l],s=d.target,c=d.width;if(s===t)break;n-=c}return n}return h}var zI={left:xI,right:SI,center:wI,justify:CI},BI={nodeId:function(e){return e.index},nodeAlign:`justify`,nodeWidth:.008,nodePadding:.03,nodeSort:void 0};function VI(e){return(I(e)?zI[e]:j(e)?e:null)||CI}function HI(e){return ut({},BI,e)}function UI(e,t){var n=HI(e),r=n.nodeId,i=n.nodeSort,a=n.nodeAlign,o=n.nodeWidth,s=n.nodePadding,c=n.nodeDepth,l=RI().nodeSort(i).nodeWidth(o).nodePadding(s).nodeDepth(c).nodeAlign(VI(a)).extent([[0,0],[1,1]]).nodeId(r)(t),u=l.nodes.map(function(e){var t=e.x0,n=e.x1,r=e.y0,i=e.y1;return e.x=[t,n,n,t],e.y=[r,r,i,i],e}).filter(function(e){return e.name!==null}),d=l.links.map(function(e){var t=e.source,n=e.target,r=t.x1,i=n.x0;e.x=[r,r,i,i];var a=e.width/2;return e.y=[e.y0+a,e.y0-a,e.y1+a,e.y1-a],e}).filter(function(e){var t=e.source,n=e.target;return t.name!==null&&n.name!==null});return{nodes:u,links:d}}function WI(e){return e===`node-link`}function GI(e,t,n){return iE(e)?e/n:t}function KI(e,t,n){return iE(e)?e/n:t}function qI(e,t,n){var r=e.dataType,i=e.data,a=e.sourceField,o=e.targetField,c=e.weightField,l=e.nodeAlign,u=e.nodeSort,d=e.nodePadding,f=e.nodePaddingRatio,p=e.nodeWidth,m=e.nodeWidthRatio,h=e.nodeDepth,g=e.rawFields,v=g===void 0?[]:g,y=WI(r)?i:BT(yI(i,a,o),a,o,c,v),b=UI({nodeAlign:l,nodePadding:KI(d,f,n),nodeWidth:GI(p,m,t),nodeSort:u,nodeDepth:h},y),x=b.nodes,S=b.links;return{nodes:x.map(function(e){return _(_({},J(e,s([`x`,`y`,`name`],v,!0))),{isNode:!0})}),edges:S.map(function(e){return _(_({source:e.source.name,target:e.target.name,name:e.source.name||e.target.name},J(e,s([`x`,`y`,`value`],v,!0))),{isNode:!1})})}}function JI(e){var t=e.options.rawFields,n=t===void 0?[]:t;return Y({},{options:{tooltip:{fields:we(s([`name`,`source`,`target`,`value`,`isNode`],n,!0))},label:{fields:we(s([`x`,`name`],n,!0))}}},e)}function YI(e){var t=e.chart,n=e.options,r=n.color,i=n.nodeStyle,a=n.edgeStyle,o=n.label,c=n.tooltip,l=n.nodeState,u=n.edgeState,d=n.rawFields,f=d===void 0?[]:d;t.legend(!1),t.tooltip(c),t.axis(!1),t.coordinate().reflect(`y`);var p=qI(n,t.width,t.height),m=p.nodes,h=p.edges,g=t.createView({id:gI});g.data(h),oD({chart:g,options:{xField:`x`,yField:`y`,seriesField:mI,rawFields:s([`source`,`target`],f,!0),edge:{color:r,style:a,shape:`arc`},tooltip:c,state:u}});var _=t.createView({id:hI});return _.data(m),dD({chart:_,options:{xField:`x`,yField:`y`,seriesField:mI,polygon:{color:r,style:i},label:o,tooltip:c,state:l}}),t.interaction(`element-active`),t.scale({x:{sync:!0,nice:!0,min:0,max:1,minLimit:0,maxLimit:1},y:{sync:!0,nice:!0,min:0,max:1,minLimit:0,maxLimit:1},name:{sync:`color`,type:`cat`}}),e}function XI(e){var t=e.chart,n=e.options.animation,r=s(s([],t.views[0].geometries,!0),t.views[1].geometries,!0);return bE(t,n,r),e}function ZI(e){var t=e.chart,n=e.options.nodeDraggable,r=`sankey-node-draggable`;return n?t.interaction(r):t.removeInteraction(r),e}function QI(e){var t=e.chart,n=e.options,r=n.interactions,i=r===void 0?[]:r,a=[].concat(i,n.nodeInteractions||[]),o=[].concat(i,n.edgeInteractions||[]),s=Z(t,hI),c=Z(t,gI);return a.forEach(function(e){e?.enable===!1?s.removeInteraction(e.type):s.interaction(e.type,e.cfg||{})}),o.forEach(function(e){e?.enable===!1?c.removeInteraction(e.type):c.interaction(e.type,e.cfg||{})}),e}function $I(e){return X(JI,YI,QI,ZI,XI,Q)(e)}var eL=function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.isDragging=!1,t}return t.prototype.isNodeElement=function(){var e=z(this.context,`event.target`);if(e){var t=e.get(`element`);return t&&t.getModel().data.isNode}return!1},t.prototype.getNodeView=function(){return Z(this.context.view,hI)},t.prototype.getEdgeView=function(){return Z(this.context.view,gI)},t.prototype.getCurrentDatumIdx=function(e){return this.getNodeView().geometries[0].elements.indexOf(e)},t.prototype.start=function(){if(this.isNodeElement()){this.prevPoint={x:z(this.context,`event.x`),y:z(this.context,`event.y`)};var e=this.context.event.target.get(`element`),t=this.getCurrentDatumIdx(e);if(t===-1)return;this.currentElementIdx=t,this.context.isDragging=!0,this.isDragging=!0,this.prevNodeAnimateCfg=this.getNodeView().getOptions().animate,this.prevEdgeAnimateCfg=this.getEdgeView().getOptions().animate,this.getNodeView().animate(!1),this.getEdgeView().animate(!1)}},t.prototype.translate=function(){if(this.isDragging){var e=this.context.view,t={x:z(this.context,`event.x`),y:z(this.context,`event.y`)},n=t.x-this.prevPoint.x,r=t.y-this.prevPoint.y,i=this.getNodeView(),a=i.geometries[0].elements[this.currentElementIdx];if(a&&a.getModel()){var o=a.getModel().data,c=i.getOptions().data,l=i.getCoordinate(),u={x:n/l.getWidth(),y:r/l.getHeight()},d=_(_({},o),{x:o.x.map(function(e){return e+=u.x}),y:o.y.map(function(e){return e+=u.y})}),f=s([],c,!0);f[this.currentElementIdx]=d,i.data(f);var p=o.name,m=this.getEdgeView(),h=m.getOptions().data;h.forEach(function(e){e.source===p&&(e.x[0]+=u.x,e.x[1]+=u.x,e.y[0]+=u.y,e.y[1]+=u.y),e.target===p&&(e.x[2]+=u.x,e.x[3]+=u.x,e.y[2]+=u.y,e.y[3]+=u.y)}),m.data(h),this.prevPoint=t,e.render(!0)}}},t.prototype.end=function(){this.isDragging=!1,this.context.isDragging=!1,this.prevPoint=null,this.currentElementIdx=null,this.getNodeView().animate(this.prevNodeAnimateCfg),this.getEdgeView().animate(this.prevEdgeAnimateCfg)},t}(ih);U(`sankey-node-drag`,eL),W(`sankey-node-draggable`,{showEnable:[{trigger:`polygon:mouseenter`,action:`cursor:pointer`},{trigger:`polygon:mouseleave`,action:`cursor:default`}],start:[{trigger:`polygon:mousedown`,action:`sankey-node-drag:start`}],processing:[{trigger:`plot:mousemove`,action:`sankey-node-drag:translate`},{isEnable:function(e){return e.isDragging},trigger:`plot:mousemove`,action:`cursor:move`}],end:[{trigger:`plot:mouseup`,action:`sankey-node-drag:end`}]}),function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=`sankey`,t}return t.getDefaultOptions=function(){return{appendPadding:8,syncViewPadding:!0,nodeStyle:{opacity:1,fillOpacity:1,lineWidth:1},edgeStyle:{opacity:.3,lineWidth:0},edgeState:{active:{style:{opacity:.8,lineWidth:0}}},label:{formatter:function(e){return e.name},callback:function(e){var t=e[1]===1;return{style:{fill:`#545454`,textAlign:t?`end`:`start`},offsetX:t?-8:8}},layout:[{type:`hide-overlap`}]},tooltip:{showTitle:!1,showMarkers:!1,shared:!1,showContent:function(e){return!z(e,[0,`data`,`isNode`])},formatter:function(e){var t=e.source,n=e.target,r=e.value;return{name:t+` -> `+n,value:r}}},nodeWidthRatio:.008,nodePaddingRatio:.01,animation:{appear:{animation:`wave-in`},enter:{animation:`wave-in`}}}},t.prototype.changeData=function(e){this.updateOption({data:e});var t=qI(this.options,this.chart.width,this.chart.height),n=t.nodes,r=t.edges,i=Z(this.chart,hI),a=Z(this.chart,gI);i.changeData(n),a.changeData(r)},t.prototype.getSchemaAdaptor=function(){return $I},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t}($);var tL=`ancestor-node`,nL=`value`,rL=`path`,iL=[rL,fP,mP,pP,`name`,`depth`,`height`],aL=Y({},$.getDefaultOptions(),{innerRadius:0,radius:.85,hierarchyConfig:{field:`value`},tooltip:{shared:!0,showMarkers:!1,offset:20,showTitle:!1},legend:!1,sunburstStyle:{lineWidth:.5,stroke:`#FFF`},drilldown:{enabled:!0}}),oL={field:`value`,size:[1,1],round:!1,padding:0,sort:function(e,t){return t.value-e.value},as:[`x`,`y`],ignoreParentValue:!0};function sL(e,t){t=ut({},oL,t);var n=t.as;if(!N(n)||n.length!==2)throw TypeError(`Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!`);var r;try{r=gP(t)}catch(e){console.warn(e)}var i=function(e){return HN().size(t.size).round(t.round).padding(t.padding)(sN(e).sum(function(e){return It(e.children)?t.ignoreParentValue?0:e[r]-be(e.children,function(e,t){return e+t[r]},0):e[r]}).sort(t.sort))}(e),a=n[0],o=n[1];return i.each(function(e){e[a]=[e.x0,e.x1,e.x1,e.x0],e[o]=[e.y1,e.y1,e.y0,e.y0],e.name=e.name||e.data?.name||e.data?.label,e.data.name=e.name,[`x0`,`x1`,`y0`,`y1`].forEach(function(t){n.indexOf(t)===-1&&delete e[t]})}),_P(i)}var cL={field:`value`,tile:`treemapSquarify`,size:[1,1],round:!1,ignoreParentValue:!0,padding:0,paddingInner:0,paddingOuter:0,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0,as:[`x`,`y`],sort:function(e,t){return t.value-e.value},ratio:.5*(1+Math.sqrt(5))};function lL(e,t){return e===`treemapSquarify`?dP[e].ratio(t):dP[e]}function uL(e,t){t=ut({},cL,t);var n=t.as;if(!N(n)||n.length!==2)throw TypeError(`Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!`);var r;try{r=gP(t)}catch(e){console.warn(e)}var i=lL(t.tile,t.ratio),a=function(e){return sP().tile(i).size(t.size).round(t.round).padding(t.padding).paddingInner(t.paddingInner).paddingOuter(t.paddingOuter).paddingTop(t.paddingTop).paddingRight(t.paddingRight).paddingBottom(t.paddingBottom).paddingLeft(t.paddingLeft)(sN(e).sum(function(e){return t.ignoreParentValue&&e.children?0:e[r]}).sort(t.sort))}(e),o=n[0],s=n[1];return a.each(function(e){e[o]=[e.x0,e.x1,e.x1,e.x0],e[s]=[e.y1,e.y1,e.y0,e.y0],[`x0`,`x1`,`y0`,`y1`].forEach(function(t){n.indexOf(t)===-1&&delete e[t]})}),_P(a)}function dL(e){var t=e.data,n=e.colorField,r=e.rawFields,i=e.hierarchyConfig,a=i===void 0?{}:i,o=a.activeDepth,c={partition:sL,treemap:uL},l=e.seriesField,u=e.type||`partition`,d=c[u](t,_(_({field:l||`value`},At(a,[`activeDepth`])),{type:`hierarchy.${u}`,as:[`x`,`y`]})),f=[];return d.forEach(function(e){var t;if(e.depth===0||o>0&&e.depth>o)return null;for(var i=e.data.name,c=_({},e);c.depth>1;)i=`${c.parent.data?.name} / ${i}`,c=c.parent;var u=_(_(_({},J(e.data,s(s([],r||[],!0),[a.field],!1))),(t={},t[rL]=i,t[tL]=c.data.name,t)),e);l&&(u[l]=e.data[l]||e.parent?.data?.[l]),n&&(u[n]=e.data[n]||e.parent?.data?.[n]),u.ext=a,u[IM]={hierarchyConfig:a,colorField:n,rawFields:r},f.push(u)}),f}function fL(e){var t=e.chart,n=e.options,r=n.color,i=n.colorField,a=i===void 0?tL:i,o=n.sunburstStyle,c=n.rawFields,l=c===void 0?[]:c,u=n.shape,d=dL(n);t.data(d);var f;return o&&(f=function(e){return Y({},{fillOpacity:.85**e.depth},j(o)?o(e):o)}),dD(Y({},e,{options:{xField:`x`,yField:`y`,seriesField:a,rawFields:we(s(s([],iL,!0),l,!0)),polygon:{color:r,style:f,shape:u}}})),e}function pL(e){return e.chart.axis(!1),e}function mL(e){var t=e.chart,n=e.options.label,r=XT(t,`polygon`);if(!n)r.label(!1);else{var i=n.fields,a=i===void 0?[`name`]:i,s=n.callback,c=o(n,[`fields`,`callback`]);r.label({fields:a,callback:s,cfg:tE(c)})}return e}function hL(e){var t=e.chart,n=e.options,r=n.innerRadius,i=n.radius,a=n.reflect,o=t.coordinate({type:`polar`,cfg:{innerRadius:r,radius:i}});return a&&o.reflect(a),e}function gL(e){var t,n=e.options,r=n.hierarchyConfig,i=n.meta;return X(GE({},(t={},t[nL]=z(i,z(r,[`field`],`value`)),t)))(e)}function _L(e){var t=e.chart,n=e.options.tooltip;if(n===!1)t.tooltip(!1);else{var r=n;z(n,`fields`)||(r=Y({},{customItems:function(e){return e.map(function(e){var n=z(t.getOptions(),`scales`),r=z(n,[rL,`formatter`],function(e){return e}),i=z(n,[nL,`formatter`],function(e){return e});return _(_({},e),{name:r(e.data[rL]),value:i(e.data.value)})})}},r)),t.tooltip(r)}return e}function vL(e){var t=e.drilldown,n=e.interactions,r=n===void 0?[]:n;return t?.enabled?Y({},e,{interactions:s(s([],r,!0),[{type:`drill-down`,cfg:{drillDownConfig:t,transformData:dL}}],!1)}):e}function yL(e){var t=e.chart,n=e.options,r=n.drilldown;return BE({chart:t,options:vL(n)}),r?.enabled&&(t.appendPadding=sE(t.appendPadding,z(r,[`breadCrumb`,`position`]))),e}function bL(e){return X(Q,LE(`sunburstStyle`),fL,pL,gL,RE,hL,_L,mL,yL,VE,KE())(e)}(function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=`sunburst`,t}return t.getDefaultOptions=function(){return aL},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return bL},t.SUNBURST_ANCESTOR_FIELD=tL,t.SUNBURST_PATH_FIELD=rL,t.NODE_ANCESTORS_FIELD=mP,t})($);function xL(e,t){if(N(e))return e.find(function(e){return e.type===t})}function SL(e,t){var n=xL(e,t);return n&&n.enable!==!1}function CL(e){var t=e.interactions,n=e.drilldown;return z(n,`enabled`)||SL(t,`treemap-drill-down`)}function wL(e){var t=e.interactions[`drill-down`];t&&t.context.actions.find(function(e){return e.name===`drill-down-action`}).reset()}function TL(e){var t=e.data,n=e.colorField,r=e.enableDrillDown,i=e.hierarchyConfig,a=uL(t,_(_({},i),{type:`hierarchy.treemap`,field:`value`,as:[`x`,`y`]})),o=[];return a.forEach(function(e){if(e.depth===0||r&&e.depth!==1||!r&&e.children)return null;var a=e.ancestors().map(function(e){return{data:e.data,height:e.height,value:e.value}}),s=r&&N(t.path)?a.concat(t.path.slice(1)):a,c=Object.assign({},e.data,_({x:e.x,y:e.y,depth:e.depth,value:e.value,path:s},e));!e.data[n]&&e.parent?c[n]=e.ancestors().find(function(e){return e.data[n]})?.data[n]:c[n]=e.data[n],c[IM]={hierarchyConfig:i,colorField:n,enableDrillDown:r},o.push(c)}),o}function EL(e){var t=e.options.colorField;return Y({options:{rawFields:[`value`],tooltip:{fields:[`name`,`value`,t,`path`],formatter:function(e){return{name:e.name,value:e.value}}}}},e)}function DL(e){var t=e.chart,n=e.options,r=n.color,i=n.colorField,a=n.rectStyle,o=n.hierarchyConfig,s=n.rawFields,c=TL({data:n.data,colorField:n.colorField,enableDrillDown:CL(n),hierarchyConfig:o});return t.data(c),dD(Y({},e,{options:{xField:`x`,yField:`y`,seriesField:i,rawFields:s,polygon:{color:r,style:a}}})),t.coordinate().reflect(`y`),e}function OL(e){return e.chart.axis(!1),e}function kL(e){var t=e.drilldown,n=e.interactions,r=n===void 0?[]:n;return CL(e)?Y({},e,{interactions:s(s([],r,!0),[{type:`drill-down`,cfg:{drillDownConfig:t,transformData:TL}}],!1)}):e}function AL(e){var t=e.chart,n=e.options,r=n.interactions,i=n.drilldown;BE({chart:t,options:kL(n)});var a=xL(r,`view-zoom`);return a&&(a.enable===!1?t.getCanvas().off(`mousewheel`):t.getCanvas().on(`mousewheel`,function(e){e.preventDefault()})),CL(n)&&(t.appendPadding=sE(t.appendPadding,z(i,[`breadCrumb`,`position`]))),e}function jL(e){return X(EL,Q,LE(`rectStyle`),DL,OL,RE,zE,AL,VE,KE())(e)}var ML={colorField:`name`,rectStyle:{lineWidth:1,stroke:`#fff`},hierarchyConfig:{tile:`treemapSquarify`},label:{fields:[`name`],layout:{type:`limit-in-shape`}},tooltip:{showMarkers:!1,showTitle:!1},drilldown:{enabled:!1,breadCrumb:{position:`bottom-left`,rootText:`初始`,dividerText:`/`,textStyle:{fontSize:12,fill:`rgba(0, 0, 0, 0.65)`,cursor:`pointer`},activeTextStyle:{fill:`#87B5FF`}}}};(function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=`treemap`,t}return t.getDefaultOptions=function(){return ML},t.prototype.changeData=function(e){var t=this.options,n=t.colorField,r=t.interactions,i=t.hierarchyConfig;this.updateOption({data:e});var a=TL({data:e,colorField:n,enableDrillDown:SL(r,`treemap-drill-down`),hierarchyConfig:i});this.chart.changeData(a),wL(this.chart)},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return jL},t})($);var NL=`path`,PL={appendPadding:[10,0,20,0],blendMode:`multiply`,tooltip:{showTitle:!1,showMarkers:!1,fields:[`id`,`size`],formatter:function(e){return{name:e.id,value:e.size}}},legend:{position:`top-left`},label:{style:{textAlign:`center`,fill:`#fff`}},interactions:[{type:`legend-filter`,enable:!1}],state:{active:{style:{stroke:`#000`}},selected:{style:{stroke:`#000`,lineWidth:2}},inactive:{style:{fillOpacity:.3,strokeOpacity:.3}}},defaultInteractions:[`tooltip`,`venn-legend-active`]};function FL(e){e&&e.geometries[0].elements.forEach(function(e){e.shape.toFront()})}var IL=function(e){l(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.syncElementsPos=function(){FL(this.context.view)},t.prototype.active=function(){e.prototype.active.call(this),this.syncElementsPos()},t.prototype.toggle=function(){e.prototype.toggle.call(this),this.syncElementsPos()},t.prototype.reset=function(){e.prototype.reset.call(this),this.syncElementsPos()},t}(ch(`element-active`)),LL=function(e){l(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.syncElementsPos=function(){FL(this.context.view)},t.prototype.highlight=function(){e.prototype.highlight.call(this),this.syncElementsPos()},t.prototype.toggle=function(){e.prototype.toggle.call(this),this.syncElementsPos()},t.prototype.clear=function(){e.prototype.clear.call(this),this.syncElementsPos()},t.prototype.reset=function(){e.prototype.reset.call(this),this.syncElementsPos()},t}(ch(`element-highlight`)),RL=ch(`element-selected`),zL=ch(`element-single-selected`),BL=function(e){l(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.syncElementsPos=function(){FL(this.context.view)},t.prototype.selected=function(){e.prototype.selected.call(this),this.syncElementsPos()},t.prototype.toggle=function(){e.prototype.toggle.call(this),this.syncElementsPos()},t.prototype.reset=function(){e.prototype.reset.call(this),this.syncElementsPos()},t}(RL),VL=function(e){l(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.syncElementsPos=function(){FL(this.context.view)},t.prototype.selected=function(){e.prototype.selected.call(this),this.syncElementsPos()},t.prototype.toggle=function(){e.prototype.toggle.call(this),this.syncElementsPos()},t.prototype.reset=function(){e.prototype.reset.call(this),this.syncElementsPos()},t}(zL);U(`venn-element-active`,IL),U(`venn-element-highlight`,LL),U(`venn-element-selected`,BL),U(`venn-element-single-selected`,VL),W(`venn-element-active`,{start:[{trigger:`element:mouseenter`,action:`venn-element-active:active`}],end:[{trigger:`element:mouseleave`,action:`venn-element-active:reset`}]}),W(`venn-element-highlight`,{start:[{trigger:`element:mouseenter`,action:`venn-element-highlight:highlight`}],end:[{trigger:`element:mouseleave`,action:`venn-element-highlight:reset`}]}),W(`venn-element-selected`,{start:[{trigger:`element:click`,action:`venn-element-selected:toggle`}],rollback:[{trigger:`dblclick`,action:[`venn-element-selected:reset`]}]}),W(`venn-element-single-selected`,{start:[{trigger:`element:click`,action:`venn-element-single-selected:toggle`}],rollback:[{trigger:`dblclick`,action:[`venn-element-single-selected:reset`]}]}),W(`venn-legend-active`,{start:[{trigger:`legend-item:mouseenter`,action:[`list-active:active`,`venn-element-active:active`]}],end:[{trigger:`legend-item:mouseleave`,action:[`list-active:reset`,`venn-element-active:reset`]}]}),W(`venn-legend-highlight`,{start:[{trigger:`legend-item:mouseenter`,action:[`legend-item-highlight:highlight`,`venn-element-highlight:highlight`]}],end:[{trigger:`legend-item:mouseleave`,action:[`legend-item-highlight:reset`,`venn-element-highlight:reset`]}]});var HL=function(e){l(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getLabelPoint=function(e,t,n){var r=e.data,i=r.x,a=r.y,o=e.customLabelInfo,s=o.offsetX,c=o.offsetY;return{content:e.content[n],x:i+s,y:a+c}},t}(W_);y_(`venn`,HL);var UL=`	
\v\f\r \xA0 ᠎             　\u2028\u2029`,WL=RegExp(`([a-z])[`+UL+`,]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?[`+UL+`]*,?[`+UL+`]*)+)`,`ig`),GL=RegExp(`(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)[`+UL+`]*,?[`+UL+`]*`,`ig`);function KL(e){if(!e)return null;if(r(e))return e;var t={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},n=[];return String(e).replace(WL,function(e,r,i){var a=[],o=r.toLowerCase();if(i.replace(GL,function(e,t){t&&a.push(+t)}),o===`m`&&a.length>2&&(n.push([r].concat(a.splice(0,2))),o=`l`,r=r===`m`?`l`:`L`),o===`o`&&a.length===1&&n.push([r,a[0]]),o===`r`)n.push([r].concat(a));else for(;a.length>=t[o]&&(n.push([r].concat(a.splice(0,t[o]))),t[o]););return``}),n}Math.PI*2;function qL(e){return Y({},e.defaultStyle,{fill:e.color},e.style)}K(`schema`,`venn`,{draw:function(e,t){var n=e.data,r=KL(n[NL]),i=qL(e),a=t.addGroup({name:`venn-shape`});a.addShape(`path`,{attrs:_(_({},i),{path:r}),name:`venn-path`});var o=e.customInfo,s=o.offsetX,c=o.offsetY,l=hv.transform(null,[[`t`,s,c]]);return a.setMatrix(l),a},getMarker:function(e){var t=e.color;return{symbol:`circle`,style:{lineWidth:0,stroke:t,fill:t,r:4}}}});var JL=function(e){return function(t,n){var r=[];return r[0]=e(t[0],n[0]),r[1]=e(t[1],n[1]),r[2]=e(t[2],n[2]),r}},YL={normal:function(e){return e},multiply:function(e,t){return e*t/255},screen:function(e,t){return 255*(1-(1-e/255)*(1-t/255))},overlay:function(e,t){return t<128?2*e*t/255:255*(1-2*(1-e/255)*(1-t/255))},darken:function(e,t){return e>t?t:e},lighten:function(e,t){return e>t?e:t},dodge:function(e,t){return e===255?255:(e=255*(t/255)/(1-e/255),e>255?255:e)},burn:function(e,t){return t===255?255:e===0?0:255*(1-Math.min(1,(1-t/255)/(e/255)))}},XL=function(e){if(!YL[e])throw Error(`unknown blend mode `+e);return YL[e]};function ZL(e,t,n){n===void 0&&(n=`normal`);var r=JL(XL(n))(QL(e),QL(t)),i=QL(e),a=i[0],o=i[1],s=i[2],c=i[3],l=QL(t),u=l[0],d=l[1],f=l[2],p=l[3],m=Number((c+p*(1-c)).toFixed(2)),h=Math.round((c*(1-p)*(a/255)+c*p*(r[0]/255)+(1-c)*p*(u/255))/m*255),g=Math.round((c*(1-p)*(o/255)+c*p*(r[1]/255)+(1-c)*p*(d/255))/m*255),_=Math.round((c*(1-p)*(s/255)+c*p*(r[2]/255)+(1-c)*p*(f/255))/m*255);return`rgba(${h}, ${g}, ${_}, ${m})`}function QL(e){var t=e.replace(`/s+/g`,``),n;return typeof t==`string`&&!t.startsWith(`rgba`)&&!t.startsWith(`#`)?n=sl.rgb2arr(sl.toRGB(t)).concat([1]):(t.startsWith(`rgba`)&&(n=t.replace(`rgba(`,``).replace(`)`,``).split(`,`)),t.startsWith(`#`)&&(n=sl.rgb2arr(t).concat([1])),n.map(function(e,t){return t===3?Number(e):e|0}))}function $L(e,t,n,r){r||={};var i=r.maxIterations||100,a=r.tolerance||1e-10,o=e(t),s=e(n),c=n-t;if(o*s>0)throw`Initial bisect points must have opposite signs`;if(o===0)return t;if(s===0)return n;for(var l=0;l<i;++l){c/=2;var u=t+c,d=e(u);if(d*o>=0&&(t=u),Math.abs(c)<a||d===0)return u}return t+c}function eR(e){for(var t=Array(e),n=0;n<e;++n)t[n]=0;return t}function tR(e,t){return eR(e).map(function(){return eR(t)})}function nR(e,t){for(var n=0,r=0;r<e.length;++r)n+=e[r]*t[r];return n}function rR(e){return Math.sqrt(nR(e,e))}function iR(e,t,n){for(var r=0;r<t.length;++r)e[r]=t[r]*n}function aR(e,t,n,r,i){for(var a=0;a<e.length;++a)e[a]=t*n[a]+r*i[a]}function oR(e,t,n){n||={};var r=n.maxIterations||t.length*200,i=n.nonZeroDelta||1.05,a=n.zeroDelta||.001,o=n.minErrorDelta||1e-6,s=n.minErrorDelta||1e-5,c=n.rho===void 0?1:n.rho,l=n.chi===void 0?2:n.chi,u=n.psi===void 0?-.5:n.psi,d=n.sigma===void 0?.5:n.sigma,f,p=t.length,m=Array(p+1);m[0]=t,m[0].fx=e(t),m[0].id=0;for(var h=0;h<p;++h){var g=t.slice();g[h]=g[h]?g[h]*i:a,m[h+1]=g,m[h+1].fx=e(g),m[h+1].id=h+1}function _(e){for(var t=0;t<e.length;t++)m[p][t]=e[t];m[p].fx=e.fx}for(var v=function(e,t){return e.fx-t.fx},y=t.slice(),b=t.slice(),x=t.slice(),S=t.slice(),C=0;C<r;++C){if(m.sort(v),n.history){var w=m.map(function(e){var t=e.slice();return t.fx=e.fx,t.id=e.id,t});w.sort(function(e,t){return e.id-t.id}),n.history.push({x:m[0].slice(),fx:m[0].fx,simplex:w})}for(f=0,h=0;h<p;++h)f=Math.max(f,Math.abs(m[0][h]-m[1][h]));if(Math.abs(m[0].fx-m[p].fx)<o&&f<s)break;for(h=0;h<p;++h){y[h]=0;for(var T=0;T<p;++T)y[h]+=m[T][h];y[h]/=p}var E=m[p];if(aR(b,1+c,y,-c,E),b.fx=e(b),b.fx<m[0].fx)aR(S,1+l,y,-l,E),S.fx=e(S),S.fx<b.fx?_(S):_(b);else if(b.fx>=m[p-1].fx){var D=!1;if(b.fx>E.fx?(aR(x,1+u,y,-u,E),x.fx=e(x),x.fx<E.fx?_(x):D=!0):(aR(x,1-u*c,y,u*c,E),x.fx=e(x),x.fx<b.fx?_(x):D=!0),D){if(d>=1)break;for(h=1;h<m.length;++h)aR(m[h],1-d,m[0],d,m[h]),m[h].fx=e(m[h])}}else _(b)}return m.sort(v),{fx:m[0].fx,x:m[0]}}function sR(e,t,n,r,i,a,o){var s=n.fx,c=nR(n.fxprime,t),l=s,u=s,d=c,f=0;i||=1,a||=1e-6,o||=.1;function p(u,f,p){for(var m=0;m<16;++m)if(i=(u+f)/2,aR(r.x,1,n.x,i,t),l=r.fx=e(r.x,r.fxprime),d=nR(r.fxprime,t),l>s+a*i*c||l>=p)f=i;else{if(Math.abs(d)<=-o*c)return i;d*(f-u)>=0&&(f=u),u=i,p=l}return 0}for(var m=0;m<10;++m){if(aR(r.x,1,n.x,i,t),l=r.fx=e(r.x,r.fxprime),d=nR(r.fxprime,t),l>s+a*i*c||m&&l>=u)return p(f,i,u);if(Math.abs(d)<=-o*c)return i;if(d>=0)return p(i,f,l);u=l,f=i,i*=2}return i}function cR(e,t,n){var r={x:t.slice(),fx:0,fxprime:t.slice()},i={x:t.slice(),fx:0,fxprime:t.slice()},a=t.slice(),o,s,c=1,l;n||={},l=n.maxIterations||t.length*20,r.fx=e(r.x,r.fxprime),o=r.fxprime.slice(),iR(o,r.fxprime,-1);for(var u=0;u<l;++u){if(c=sR(e,o,r,i,c),n.history&&n.history.push({x:r.x.slice(),fx:r.fx,fxprime:r.fxprime.slice(),alpha:c}),!c)iR(o,r.fxprime,-1);else{aR(a,1,i.fxprime,-1,r.fxprime);var d=nR(r.fxprime,r.fxprime),f=Math.max(0,nR(a,i.fxprime)/d);aR(o,f,o,-1,i.fxprime),s=r,r=i,i=s}if(rR(r.fxprime)<=1e-5)break}return n.history&&n.history.push({x:r.x.slice(),fx:r.fx,fxprime:r.fxprime.slice(),alpha:c}),r}var lR=1e-10;function uR(e,t){var n=fR(e),r=n.filter(function(t){return dR(t,e)}),i=0,a=0,o,s=[];if(r.length>1){var c=_R(r);for(o=0;o<r.length;++o){var l=r[o];l.angle=Math.atan2(l.x-c.x,l.y-c.y)}r.sort(function(e,t){return t.angle-e.angle});var u=r[r.length-1];for(o=0;o<r.length;++o){var d=r[o];a+=(u.x+d.x)*(d.y-u.y);for(var f={x:(d.x+u.x)/2,y:(d.y+u.y)/2},p=null,m=0;m<d.parentIndex.length;++m)if(u.parentIndex.indexOf(d.parentIndex[m])>-1){var h=e[d.parentIndex[m]],g=Math.atan2(d.x-h.x,d.y-h.y),_=Math.atan2(u.x-h.x,u.y-h.y),v=_-g;v<0&&(v+=2*Math.PI);var y=_-v/2,b=mR(f,{x:h.x+h.radius*Math.sin(y),y:h.y+h.radius*Math.cos(y)});b>h.radius*2&&(b=h.radius*2),(p===null||p.width>b)&&(p={circle:h,width:b,p1:d,p2:u})}p!==null&&(s.push(p),i+=pR(p.circle.radius,p.width),u=d)}}else{var x=e[0];for(o=1;o<e.length;++o)e[o].radius<x.radius&&(x=e[o]);var S=!1;for(o=0;o<e.length;++o)if(mR(e[o],x)>Math.abs(x.radius-e[o].radius)){S=!0;break}S?i=a=0:(i=x.radius*x.radius*Math.PI,s.push({circle:x,p1:{x:x.x,y:x.y+x.radius},p2:{x:x.x-lR,y:x.y+x.radius},width:x.radius*2}))}return a/=2,t&&(t.area=i+a,t.arcArea=i,t.polygonArea=a,t.arcs=s,t.innerPoints=r,t.intersectionPoints=n),i+a}function dR(e,t){for(var n=0;n<t.length;++n)if(mR(e,t[n])>t[n].radius+lR)return!1;return!0}function fR(e){for(var t=[],n=0;n<e.length;++n)for(var r=n+1;r<e.length;++r)for(var i=gR(e[n],e[r]),a=0;a<i.length;++a){var o=i[a];o.parentIndex=[n,r],t.push(o)}return t}function pR(e,t){return e*e*Math.acos(1-t/e)-(e-t)*Math.sqrt(t*(2*e-t))}function mR(e,t){return Math.sqrt((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y))}function hR(e,t,n){if(n>=e+t)return 0;if(n<=Math.abs(e-t))return Math.PI*Math.min(e,t)*Math.min(e,t);var r=e-(n*n-t*t+e*e)/(2*n),i=t-(n*n-e*e+t*t)/(2*n);return pR(e,r)+pR(t,i)}function gR(e,t){var n=mR(e,t),r=e.radius,i=t.radius;if(n>=r+i||n<=Math.abs(r-i))return[];var a=(r*r-i*i+n*n)/(2*n),o=Math.sqrt(r*r-a*a),s=e.x+a*(t.x-e.x)/n,c=e.y+a*(t.y-e.y)/n,l=-(t.y-e.y)*(o/n),u=-(t.x-e.x)*(o/n);return[{x:s+l,y:c-u},{x:s-l,y:c+u}]}function _R(e){for(var t={x:0,y:0},n=0;n<e.length;++n)t.x+=e[n].x,t.y+=e[n].y;return t.x/=e.length,t.y/=e.length,t}function vR(e,t,n){var r=t[0].radius-mR(t[0],e),i,a;for(i=1;i<t.length;++i)a=t[i].radius-mR(t[i],e),a<=r&&(r=a);for(i=0;i<n.length;++i)a=mR(n[i],e)-n[i].radius,a<=r&&(r=a);return r}function yR(e,t){var n=[],r;for(r=0;r<e.length;++r){var i=e[r];n.push({x:i.x,y:i.y}),n.push({x:i.x+i.radius/2,y:i.y}),n.push({x:i.x-i.radius/2,y:i.y}),n.push({x:i.x,y:i.y+i.radius/2}),n.push({x:i.x,y:i.y-i.radius/2})}var a=n[0],o=vR(n[0],e,t);for(r=1;r<n.length;++r){var s=vR(n[r],e,t);s>=o&&(a=n[r],o=s)}var c=oR(function(n){return-1*vR({x:n[0],y:n[1]},e,t)},[a.x,a.y],{maxIterations:500,minErrorDelta:1e-10}).x,l={x:c[0],y:c[1]},u=!0;for(r=0;r<e.length;++r)if(mR(l,e[r])>e[r].radius){u=!1;break}for(r=0;r<t.length;++r)if(mR(l,t[r])<t[r].radius){u=!1;break}if(!u)if(e.length==1)l={x:e[0].x,y:e[0].y};else{var d={};uR(e,d),l=d.arcs.length===0?{x:0,y:-1e3,disjoint:!0}:d.arcs.length==1?{x:d.arcs[0].circle.x,y:d.arcs[0].circle.y}:t.length?yR(e,[]):_R(d.arcs.map(function(e){return e.p1}))}return l}function bR(e){var t={},n=[];for(var r in e)n.push(r),t[r]=[];for(var i=0;i<n.length;i++)for(var a=e[n[i]],o=i+1;o<n.length;++o){var s=e[n[o]],c=mR(a,s);c+s.radius<=a.radius+1e-10?t[n[o]].push(n[i]):c+a.radius<=s.radius+1e-10&&t[n[i]].push(n[o])}return t}function xR(e,t){for(var n={},r=bR(e),i=0;i<t.length;++i){for(var a=t[i].sets,o={},s={},c=0;c<a.length;++c){o[a[c]]=!0;for(var l=r[a[c]],u=0;u<l.length;++u)s[l[u]]=!0}var d=[],f=[];for(var p in e)p in o?d.push(e[p]):p in s||f.push(e[p]);var m=yR(d,f);n[a]=m,m.disjoint&&t[i].size>0&&console.log(`WARNING: area `+a+` not represented on screen`)}return n}function SR(e,t,n){var r=[],i=e-n,a=t;return r.push(`M`,i,a),r.push(`A`,n,n,0,1,0,i+2*n,a),r.push(`A`,n,n,0,1,0,i,a),r.join(` `)}function CR(e){var t={};uR(e,t);var n=t.arcs;if(n.length===0)return`M 0 0`;if(n.length==1){var r=n[0].circle;return SR(r.x,r.y,r.radius)}else{for(var i=[`
M`,n[0].p2.x,n[0].p2.y],a=0;a<n.length;++a){var o=n[a],s=o.circle.radius,c=o.width>s;i.push(`
A`,s,s,0,c?1:0,1,o.p1.x,o.p1.y)}return i.join(` `)}}function wR(e,t){t||={},t.maxIterations=t.maxIterations||500;var n=t.initialLayout||AR,r=t.lossFunction||NR;e=DR(e);var i=n(e,t),a=[],o=[],s;for(s in i)i.hasOwnProperty(s)&&(a.push(i[s].x),a.push(i[s].y),o.push(s));for(var c=oR(function(t){for(var n={},a=0;a<o.length;++a){var s=o[a];n[s]={x:t[2*a],y:t[2*a+1],radius:i[s].radius}}return r(n,e)},a,t).x,l=0;l<o.length;++l)s=o[l],i[s].x=c[2*l],i[s].y=c[2*l+1];return i}var TR=1e-10;function ER(e,t,n){return Math.min(e,t)*Math.min(e,t)*Math.PI<=n+TR?Math.abs(e-t):$L(function(r){return hR(e,t,r)-n},0,e+t)}function DR(e){e=e.slice();var t=[],n={},r,i,a,o;for(r=0;r<e.length;++r){var s=e[r];s.sets.length==1?t.push(s.sets[0]):s.sets.length==2&&(a=s.sets[0],o=s.sets[1],n[[a,o]]=!0,n[[o,a]]=!0)}for(t.sort(function(e,t){return e>t?1:-1}),r=0;r<t.length;++r)for(a=t[r],i=r+1;i<t.length;++i)o=t[i],[a,o]in n||e.push({sets:[a,o],size:0});return e}function OR(e,t,n){var r=tR(t.length,t.length),i=tR(t.length,t.length);return e.filter(function(e){return e.sets.length==2}).map(function(e){var a=n[e.sets[0]],o=n[e.sets[1]],s=Math.sqrt(t[a].size/Math.PI),c=Math.sqrt(t[o].size/Math.PI),l=ER(s,c,e.size);r[a][o]=r[o][a]=l;var u=0;e.size+1e-10>=Math.min(t[a].size,t[o].size)?u=1:e.size<=1e-10&&(u=-1),i[a][o]=i[o][a]=u}),{distances:r,constraints:i}}function kR(e,t,n,r){var i=0,a;for(a=0;a<t.length;++a)t[a]=0;for(a=0;a<n.length;++a)for(var o=e[2*a],s=e[2*a+1],c=a+1;c<n.length;++c){var l=e[2*c],u=e[2*c+1],d=n[a][c],f=r[a][c],p=(l-o)*(l-o)+(u-s)*(u-s),m=Math.sqrt(p),h=p-d*d;f>0&&m<=d||f<0&&m>=d||(i+=2*h*h,t[2*a]+=4*h*(o-l),t[2*a+1]+=4*h*(s-u),t[2*c]+=4*h*(l-o),t[2*c+1]+=4*h*(u-s))}return i}function AR(e,t){var n=MR(e,t),r=t.lossFunction||NR;if(e.length>=8){var i=jR(e,t),a=r(i,e),o=r(n,e);a+1e-8<o&&(n=i)}return n}function jR(e,t){t||={};var n=t.restarts||10,r=[],i={},a;for(a=0;a<e.length;++a){var o=e[a];o.sets.length==1&&(i[o.sets[0]]=r.length,r.push(o))}var s=OR(e,r,i),c=s.distances,l=s.constraints,u=rR(c.map(rR))/c.length;c=c.map(function(e){return e.map(function(e){return e/u})});var d=function(e,t){return kR(e,t,c,l)},f,p;for(a=0;a<n;++a){var m=eR(c.length*2).map(Math.random);p=cR(d,m,t),(!f||p.fx<f.fx)&&(f=p)}var h=f.x,g={};for(a=0;a<r.length;++a){var _=r[a];g[_.sets[0]]={x:h[2*a]*u,y:h[2*a+1]*u,radius:Math.sqrt(_.size/Math.PI)}}if(t.history)for(a=0;a<t.history.length;++a)iR(t.history[a].x,u);return g}function MR(e,t){for(var n=t&&t.lossFunction?t.lossFunction:NR,r={},i={},a,o=0;o<e.length;++o){var s=e[o];s.sets.length==1&&(a=s.sets[0],r[a]={x:1e10,y:1e10,rowid:Object.keys(r).length,size:s.size,radius:Math.sqrt(s.size/Math.PI)},i[a]=[])}e=e.filter(function(e){return e.sets.length==2});for(var o=0;o<e.length;++o){var c=e[o],l=c.hasOwnProperty(`weight`)?c.weight:1,u=c.sets[0],d=c.sets[1];c.size+TR>=Math.min(r[u].size,r[d].size)&&(l=0),i[u].push({set:d,size:c.size,weight:l}),i[d].push({set:u,size:c.size,weight:l})}var f=[];for(a in i)if(i.hasOwnProperty(a)){for(var p=0,o=0;o<i[a].length;++o)p+=i[a][o].size*i[a][o].weight;f.push({set:a,size:p})}function m(e,t){return t.size-e.size}f.sort(m);var h={};function g(e){return e.set in h}function _(e,t){r[t].x=e.x,r[t].y=e.y,h[t]=!0}_({x:0,y:0},f[0].set);for(var o=1;o<f.length;++o){var v=f[o].set,y=i[v].filter(g);if(a=r[v],y.sort(m),y.length===0)throw`ERROR: missing pairwise overlap information`;for(var b=[],x=0;x<y.length;++x){var S=r[y[x].set],C=ER(a.radius,S.radius,y[x].size);b.push({x:S.x+C,y:S.y}),b.push({x:S.x-C,y:S.y}),b.push({y:S.y+C,x:S.x}),b.push({y:S.y-C,x:S.x});for(var w=x+1;w<y.length;++w)for(var T=r[y[w].set],E=ER(a.radius,T.radius,y[w].size),D=gR({x:S.x,y:S.y,radius:C},{x:T.x,y:T.y,radius:E}),O=0;O<D.length;++O)b.push(D[O])}for(var k=1e50,A=b[0],x=0;x<b.length;++x){r[v].x=b[x].x,r[v].y=b[x].y;var ee=n(r,e);ee<k&&(k=ee,A=b[x])}_(A,v)}return r}function NR(e,t){var n=0;function r(t){return t.map(function(t){return e[t]})}for(var i=0;i<t.length;++i){var a=t[i],o=void 0;if(a.sets.length!=1){if(a.sets.length==2){var s=e[a.sets[0]],c=e[a.sets[1]];o=hR(s.radius,c.radius,mR(s,c))}else o=uR(r(a.sets));var l=a.hasOwnProperty(`weight`)?a.weight:1;n+=l*(o-a.size)*(o-a.size)}}return n}function PR(e){var t=function(t){var n=Math.max.apply(null,e.map(function(e){return e[t]+e.radius})),r=Math.min.apply(null,e.map(function(e){return e[t]-e.radius}));return{max:n,min:r}};return{xRange:t(`x`),yRange:t(`y`)}}function FR(e,t,n,r){var i=[],a=[];for(var o in e)e.hasOwnProperty(o)&&(a.push(o),i.push(e[o]));t-=2*r,n-=2*r;var s=PR(i),c=s.xRange,l=s.yRange;if(c.max==c.min||l.max==l.min)return console.log(`not scaling solution: zero size detected`),e;for(var u=t/(c.max-c.min),d=n/(l.max-l.min),f=Math.min(d,u),p=(t-(c.max-c.min)*f)/2,m=(n-(l.max-l.min)*f)/2,h={},g=0;g<i.length;++g){var _=i[g];h[a[g]]={radius:f*_.radius,x:r+p+(_.x-c.min)*f,y:r+m+(_.y-l.min)*f}}return h}var IR=ht((function(e,t,n,r){var i=new Map,a=e.length;return t.forEach(function(t,o){if(t[r].length===1)i.set(t.id,e[(o+a)%a]);else{var s=t[r].map(function(e){return i.get(e)});i.set(t.id,s.slice(1).reduce(function(e,t){return ZL(e,t,n)},s[0]))}}),i}),function(){var e=[...arguments];return JSON.stringify(e)});function LR(e,t,n,r){r===void 0&&(r=0);var i=e.data,a=e.setsField,o=e.sizeField;if(i.length===0)return RT(FT.WARN,!1,`warn: %s`,`数据不能为空`),[];var s=i.map(function(e){var t;return _(_({},e),(t={sets:e[a]||[],size:e[o]},t[NL]=``,t.id=``,t))});s.sort(function(e,t){return e.sets.length-t.sets.length});var c=wR(s),l=FR(c,t,n,r),u=xR(l,s);return s.forEach(function(e){var t=e.sets,n=t.join(`,`);e.id=n;var r=t.map(function(e){return l[e]}),i=CR(r);/[zZ]$/.test(i)||(i+=` Z`),e[NL]=i;var a=u[n]||{x:0,y:0};ut(e,a)}),s}function RR(e,t){for(var n=0;n<t.length;n++)if(!e.includes(t[n]))return!1;return!0}function zR(e,t,n){var r=e.chart,i=e.options,a=i.blendMode,o=i.setsField,s=r.getTheme(),c=s.colors10,l=s.colors20,u=n;N(u)||(u=t.filter(function(e){return e[o].length===1}).length<=10?c:l);var d=IR(u,t,a,o);return function(e){return d.get(e)||u[0]}}function BR(e,t){var n=e.options.color;if(typeof n!=`function`){var r=zR(e,t,typeof n==`string`?[n]:n);return function(e){return r(e.id)}}return n}function VR(e){var t=e.chart,n=e.options,r=n.legend,i=n.appendPadding,a=n.padding,o=oE(i);return r!==!1&&(o=sE(i,z(r,`position`),40)),t.appendPadding=cE([o,a]),e}function HR(e){var t=e.options.data;t||=(RT(FT.WARN,!1,`warn: %s`,`数据不能为空`),[]);var n=t.filter(function(e){return e.sets.length===1}).map(function(e){return e.sets[0]}),r=t.filter(function(e){var t=e.sets;return RR(n,t)});return Ct(r,t)||RT(FT.WARN,!1,`warn: %s`,`交集中不能出现不存在的集合, 请输入合法数据`),R({},e,{options:{data:r}})}function UR(e){var t=e.chart,n=e.options,r=n.pointStyle,i=n.setsField,a=n.sizeField,o=oE(t.appendPadding),s=o[0],c=o[1],l=o[2],u=o[3],d={offsetX:u,offsetY:s},f=t.viewBBox,p=f.width,m=f.height,h=LR(n,Math.max(p-(c+u),0),Math.max(m-(s+l),0),0);t.data(h);var g=fD(Y({},e,{options:{xField:`x`,yField:`y`,sizeField:a,seriesField:`id`,rawFields:[i,a],schema:{shape:`venn`,style:r}}})).ext.geometry;g.customInfo(d);var _=BR(e,h);return typeof _==`function`&&g.color(`id`,function(t){var n=h.find(function(e){return e.id===t}),r=zR(e,h)(t);return _(n,r)}),e}function WR(e){var t=e.chart,n=e.options.label,r=oE(t.appendPadding),i=r[0],a={offsetX:r[3],offsetY:i},s=XT(t,`schema`);if(!n)s.label(!1);else{var c=n.callback,l=o(n,[`callback`]);s.label({fields:[`id`],callback:c,cfg:R({},tE(l),{type:`venn`,customLabelInfo:a})})}return e}function GR(e){var t=e.chart,n=e.options,r=n.legend,i=n.sizeField;return t.legend(`id`,r),t.legend(i,!1),e}function KR(e){return e.chart.axis(!1),e}function qR(e){var t=e.options,n=e.chart,r=t.interactions;if(r){var i={"legend-active":`venn-legend-active`,"legend-highlight":`venn-legend-highlight`};BE(Y({},e,{options:{interactions:r.map(function(e){return _(_({},e),{type:i[e.type]||e.type})})}}))}return n.removeInteraction(`legend-active`),n.removeInteraction(`legend-highlight`),e}function JR(e){return X(VR,Q,HR,UR,WR,GE({}),GR,KR,zE,qR,VE)(e)}(function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=`venn`,t}return t.getDefaultOptions=function(){return PL},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return JR},t.prototype.triggerResize=function(){this.chart.destroyed||(this.chart.forceFit(),this.chart.clear(),this.execAdaptor(),this.chart.render(!0))},t})($);var YR=`violinY`,XR=`violinSize`,ZR=`minMax`,QR=`quantile`,$R=`median`,ez=`violin_view`,tz=`min_max_view`,nz=`quantile_view`,rz=`median_view`,iz=Y({},$.getDefaultOptions(),{syncViewPadding:!0,kde:{type:`triangular`,sampleSize:32,width:3},violinStyle:{lineWidth:1,fillOpacity:.3,strokeOpacity:.75},xAxis:{grid:{line:null},tickLine:{alignTick:!1}},yAxis:{grid:{line:{style:{lineWidth:.5,lineDash:[4,4]}}}},legend:{position:`top-left`},tooltip:{showMarkers:!1}}),az=n(((exports,t)=>{var n=t.exports;t.exports.isNumber=function(e){return typeof e==`number`},t.exports.findMin=function(e){if(e.length===0)return 1/0;for(var t=e[0],n=1;n<e.length;n++)t=Math.min(t,e[n]);return t},t.exports.findMax=function(e){if(e.length===0)return-1/0;for(var t=e[0],n=1;n<e.length;n++)t=Math.max(t,e[n]);return t},t.exports.findMinMulti=function(e){for(var t=n.findMin(e[0]),r=1;r<e.length;r++)t=Math.min(t,n.findMin(e[r]));return t},t.exports.findMaxMulti=function(e){for(var t=n.findMax(e[0]),r=1;r<e.length;r++)t=Math.max(t,n.findMax(e[r]));return t},t.exports.inside=function(e,t,n){return e<=n&&n<=t}})),oz=n(((exports,t)=>{var n=50,r=2,i=Math.log(2),a=t.exports,o=az();function s(e){return 1-Math.abs(e)}t.exports.getUnifiedMinMax=function(e,t){return a.getUnifiedMinMaxMulti([e],t)},t.exports.getUnifiedMinMaxMulti=function(e,t){t||={};var i=!1,a=!1,s=o.isNumber(t.width)?t.width:r,c=o.isNumber(t.size)?t.size:n,l=o.isNumber(t.min)?t.min:(i=!0,o.findMinMulti(e)),u=o.isNumber(t.max)?t.max:(a=!0,o.findMaxMulti(e)),d=(u-l)/(c-1);return i&&(l-=2*s*d),a&&(u+=2*s*d),{min:l,max:u}},t.exports.create=function(e,t){if(t||={},!e||e.length===0)return[];var i=o.isNumber(t.size)?t.size:n,l=o.isNumber(t.width)?t.width:r,u=a.getUnifiedMinMax(e,{size:i,width:l,min:t.min,max:t.max}),d=u.min,f=u.max-d,p=f/(i-1);if(f===0)return[{x:d,y:1}];for(var m=[],h=0;h<i;h++)m.push({x:d+h*p,y:0});var g=function(e){return Math.floor((e-d)/p)},_=c(s,l),v=_[l],y=_[l-1]-_[l-2],b=0;e.forEach(function(e){var t=g(e);if(!(t+l<0||t-l>=m.length)){var n=Math.max(t-l,0),r=t,i=Math.min(t+l,m.length-1),a=n-(t-l),s=t+l-i,c=_[-l-1+a]||0,u=_[-l-1+s]||0,d=v/(v-c-u);a>0&&(b+=d*(a-1)*y);var f=Math.max(0,t-l+1);o.inside(0,m.length-1,f)&&(m[f].y+=d*1*y),o.inside(0,m.length-1,r+1)&&(m[r+1].y-=d*2*y),o.inside(0,m.length-1,i+1)&&(m[i+1].y+=d*1*y)}});var x=b,S=0,C=0;return m.forEach(function(e){S+=e.y,x+=S,e.y=x,C+=x}),C>0&&m.forEach(function(e){e.y/=C}),m};function c(e,t){for(var n={},r=0,i=-t;i<=t;i++)r+=e(i/t),n[i]=r;return n}t.exports.getExpectedValueFromPdf=function(e){if(!(!e||e.length===0)){var t=0;return e.forEach(function(e){t+=e.x*e.y}),t}},t.exports.getXWithLeftTailArea=function(e,t){if(!(!e||e.length===0)){for(var n=0,r=0,i=0;i<e.length&&(r=i,n+=e[i].y,!(n>=t));i++);return e[r].x}},t.exports.getPerplexity=function(e){if(!(!e||e.length===0)){var t=0;return e.forEach(function(e){var n=Math.log(e.y);isFinite(n)&&(t+=e.y*n)}),t=-t/i,2**t}}}));function sz(e,t){var n=e.length*t;if(e.length===0)throw Error(`quantile requires at least one data point.`);if(t<0||t>1)throw Error(`quantiles must be between 0 and 1`);return t===1?e[e.length-1]:t===0?e[0]:n%1==0?e.length%2==0?(e[n-1]+e[n])/2:e[n]:e[Math.ceil(n)-1]}function cz(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function lz(e,t,n,r){for(n||=0,r||=e.length-1;r>n;){if(r-n>600){var i=r-n+1,a=t-n+1,o=Math.log(i),s=.5*Math.exp(2*o/3),c=.5*Math.sqrt(o*s*(i-s)/i);a-i/2<0&&(c*=-1);var l=Math.max(n,Math.floor(t-a*s/i+c)),u=Math.min(r,Math.floor(t+(i-a)*s/i+c));lz(e,t,l,u)}var d=e[t],f=n,p=r;for(cz(e,n,t),e[r]>d&&cz(e,n,r);f<p;){for(cz(e,f,p),f++,p--;e[f]<d;)f++;for(;e[p]>d;)p--}e[n]===d?cz(e,n,p):(p++,cz(e,p,r)),p<=t&&(n=p+1),t<=p&&(r=p-1)}}function uz(e,t){var n=e.slice();if(Array.isArray(t)){fz(n,t);for(var r=[],i=0;i<t.length;i++)r[i]=sz(n,t[i]);return r}else{var a=mz(n.length,t);return dz(n,a,0,n.length-1),sz(n,t)}}function dz(e,t,n,r){t%1==0?lz(e,t,n,r):(t=Math.floor(t),lz(e,t,n,r),lz(e,t+1,t+1,r))}function fz(e,t){for(var n=[0],r=0;r<t.length;r++)n.push(mz(e.length,t[r]));n.push(e.length-1),n.sort(pz);for(var i=[0,n.length-1];i.length;){var a=Math.ceil(i.pop()),o=Math.floor(i.pop());if(!(a-o<=1)){var s=Math.floor((o+a)/2);dz(e,n[s],Math.floor(n[o]),Math.ceil(n[a])),i.push(o,s,s,a)}}}function pz(e,t){return e-t}function mz(e,t){var n=e*t;return t===1?e-1:t===0?0:n%1==0?e%2==0?n-.5:n:Math.ceil(n)-1}var hz=t(oz()),gz=function(e){return{low:he(e),high:me(e),q1:uz(e,.25),q3:uz(e,.75),median:uz(e,[.5]),minMax:[he(e),me(e)],quantile:[uz(e,.25),uz(e,.75)]}},_z=function(e,t){var n=hz.default.create(e,t);return{violinSize:n.map(function(e){return e.y}),violinY:n.map(function(e){return e.x})}},vz=function(e){var t=e.xField,n=e.yField,r=e.seriesField,i=e.data,a=e.kde,o={min:a.min,max:a.max,size:a.sampleSize,width:a.width};if(!r){var s=Me(i,t);return Object.keys(s).map(function(e){var t=s[e].map(function(e){return e[n]});return _(_({x:e},_z(t,o)),gz(t))})}var c=[],l=Me(i,r);return Object.keys(l).forEach(function(e){var i=Me(l[e],t);return Object.keys(i).forEach(function(t){var a,s=i[t].map(function(e){return e[n]});c.push(_(_((a={x:t},a[r]=e,a),_z(s,o)),gz(s)))})}),c},yz=[`low`,`high`,`q1`,`q3`,`median`],bz=[{type:`dodge`,marginRatio:1/32}];function xz(e){var t=e.chart,n=e.options;return t.data(vz(n)),e}function Sz(e){var t=e.chart,n=e.options,r=n.seriesField,i=n.color,a=n.shape,o=a===void 0?`violin`:a,s=n.violinStyle,c=n.tooltip,l=n.state,u=t.createView({id:ez});return pD({chart:u,options:{xField:`x`,yField:YR,seriesField:r||`x`,sizeField:XR,tooltip:_({fields:yz},c),violin:{style:s,color:i,shape:o},state:l}}),u.geometries[0].adjust(bz),e}function Cz(e){var t=e.chart,n=e.options,r=n.seriesField,i=n.color,a=n.tooltip,o=n.box;if(o===!1)return e;var s=t.createView({id:tz});cD({chart:s,options:{xField:`x`,yField:ZR,seriesField:r||`x`,tooltip:_({fields:yz},a),state:typeof o==`object`?o.state:{},interval:{color:i,size:1,style:{lineWidth:0}}}}),s.geometries[0].adjust(bz);var c=t.createView({id:nz});cD({chart:c,options:{xField:`x`,yField:QR,seriesField:r||`x`,tooltip:_({fields:yz},a),state:typeof o==`object`?o.state:{},interval:{color:i,size:8,style:{fillOpacity:1}}}}),c.geometries[0].adjust(bz);var l=t.createView({id:rz});return uD({chart:l,options:{xField:`x`,yField:$R,seriesField:r||`x`,tooltip:_({fields:yz},a),state:typeof o==`object`?o.state:{},point:{color:i,size:1,style:{fill:`white`,lineWidth:0}}}}),l.geometries[0].adjust(bz),c.axis(!1),s.axis(!1),l.axis(!1),l.legend(!1),s.legend(!1),c.legend(!1),e}function wz(e){var t,n=e.chart,r=e.options,i=r.meta,a=r.xAxis,o=r.yAxis,s=Y({},i,(t={},t.x=_(_({sync:!0},J(a,PT)),{type:`cat`}),t[YR]=_({sync:!0},J(o,PT)),t[ZR]=_({sync:YR},J(o,PT)),t[QR]=_({sync:YR},J(o,PT)),t[$R]=_({sync:YR},J(o,PT)),t));return n.scale(s),e}function Tz(e){var t=e.chart,n=e.options,r=n.xAxis,i=n.yAxis,a=Z(t,ez);return r===!1?a.axis(`x`,!1):a.axis(`x`,r),i===!1?a.axis(YR,!1):a.axis(YR,i),t.axis(!1),e}function Ez(e){var t=e.chart,n=e.options,r=n.legend,i=n.seriesField,a=n.shape;if(r===!1)t.legend(!1);else{var o=i||`x`,s=At(r,[`selected`]);(!a||!a.startsWith(`hollow`))&&(z(s,[`marker`,`style`,`lineWidth`])||Dt(s,[`marker`,`style`,`lineWidth`],0)),t.legend(o,s),z(r,`selected`)&&F(t.views,function(e){return e.legend(o,r)})}return e}function Dz(e){var t=e.chart,n=Z(t,ez);return KE()(_(_({},e),{chart:n})),e}function Oz(e){var t=e.chart,n=e.options.animation;return F(t.views,function(e){bE(e,n)}),e}function kz(e){return X(Q,xz,Sz,Cz,wz,zE,Tz,Ez,BE,Dz,Oz)(e)}(function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=`violin`,t}return t.getDefaultOptions=function(){return iz},t.prototype.changeData=function(e){this.updateOption({data:e}),this.chart.changeData(vz(this.options))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return kz},t})($);var Az=`$$yField$$`,jz=`$$diffField$$`,Mz=`$$absoluteField$$`,Nz=`$$isTotal$$`,Pz={label:{},leaderLine:{style:{lineWidth:1,stroke:`#8c8c8c`,lineDash:[4,2]}},total:{style:{fill:`rgba(0, 0, 0, 0.25)`}},interactions:[{type:`element-active`}],risingFill:`#f4664a`,fallingFill:`#30bf78`,waterfallStyle:{fill:`rgba(0, 0, 0, 0.25)`},yAxis:{grid:{line:{style:{lineDash:[4,2]}}}}};function Fz(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];if(r){var i=n===0?`M`:`L`;t.push([i,r.x,r.y])}}var a=e[0];return t.push([`L`,a.x,a.y]),t.push([`z`]),t}function Iz(e){return Y({},e.defaultStyle,e.style,{fill:e.color})}K(`interval`,`waterfall`,{draw:function(e,t){var n=e.customInfo,r=e.points,i=e.nextPoints,a=t.addGroup(),o=this.parsePath(Fz(r)),s=Iz(e);a.addShape(`path`,{attrs:_(_({},s),{path:o})});var c=z(n,`leaderLine`);if(c&&i){var l=[[`M`,r[2].x,r[2].y],[`L`,i[0].x,i[0].y]];r[2].y===i[1].y&&(l[1]=[`L`,i[1].x,i[1].y]),l=this.parsePath(l),a.addShape(`path`,{attrs:_({path:l},c.style||{})})}return a}});function Lz(e,t,n,r,i){var a,o=[];if(be(e,function(e,t){var i;RT(FT.WARN,L(t[n]),`${t[n]} is not a valid number`);var a=at(t[n])?null:t[n];return o.push(_(_({},t),(i={},i[r]=[e,e+a],i))),e+a},0),o.length&&i){var s=z(o,[[e.length-1],r,[1]]);o.push((a={},a[t]=i.label,a[n]=s,a[r]=[0,s],a))}return o}function Rz(e,t,n,r){return Lz(e,t,n,Az,r).map(function(t,n){var r;return P(t)?_(_({},t),(r={},r[Mz]=t[Az][1],r[jz]=t[Az][1]-t[Az][0],r[Nz]=n===e.length,r)):t})}function zz(e){var t=e.options,n=t.locale,r=t.total,i=QE(n).get([`waterfall`,`total`]);return r&&typeof r.label!=`string`&&i&&(e.options.total.label=i),e}function Bz(e){var t=e.chart,n=e.options,r=n.data,i=n.xField,a=n.yField,o=n.total,s=n.leaderLine,c=n.columnWidthRatio,l=n.waterfallStyle,u=n.risingFill,d=n.fallingFill,f=n.color,p=n.shape,m=n.customInfo;t.data(Rz(r,i,a,o));var h=Y({},e,{options:{xField:i,yField:Az,seriesField:i,rawFields:[a,jz,Nz,Az],widthRatio:c,interval:{style:l,shape:p||`waterfall`,color:f||function(e){return z(e,[`$$isTotal$$`])?z(o,[`style`,`fill`],``):z(e,[`$$yField$$`,1])-z(e,[`$$yField$$`,0])>0?u:d}}}});return cD(h).ext.geometry.customInfo(_(_({},m),{leaderLine:s})),e}function Vz(e){var t,n,r=e.options,i=r.xAxis,a=r.yAxis,o=r.xField,s=r.yField,c=r.meta,l=Y({},{alias:s},z(c,s));return X(GE((t={},t[o]=i,t[s]=a,t[Az]=a,t),Y({},c,(n={},n[Az]=l,n[jz]=l,n[Mz]=l,n))))(e)}function Hz(e){var t=e.chart,n=e.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField;return r===!1?t.axis(a,!1):t.axis(a,r),i===!1?(t.axis(o,!1),t.axis(Az,!1)):(t.axis(o,i),t.axis(Az,i)),e}function Uz(e){var t=e.chart,n=e.options,r=n.legend,i=n.total,a=n.risingFill,o=n.fallingFill,s=n.locale,c=QE(s);if(r===!1)t.legend(!1);else{var l=[{name:c.get([`general`,`increase`]),value:`increase`,marker:{symbol:`square`,style:{r:5,fill:a}}},{name:c.get([`general`,`decrease`]),value:`decrease`,marker:{symbol:`square`,style:{r:5,fill:o}}}];i&&l.push({name:i.label||``,value:`total`,marker:{symbol:`square`,style:Y({},{r:5},z(i,`style`))}}),t.legend(Y({},{custom:!0,position:`top`,items:l},r)),t.removeInteraction(`legend-filter`)}return e}function Wz(e){var t=e.chart,n=e.options,r=n.label,i=n.labelMode,a=n.xField,s=XT(t,`interval`);if(!r)s.label(!1);else{var c=r.callback,l=o(r,[`callback`]);s.label({fields:i===`absolute`?[Mz,a]:[jz,a],callback:c,cfg:tE(l)})}return e}function Gz(e){var t=e.chart,n=e.options,r=n.tooltip,i=n.xField,a=n.yField;if(r!==!1){t.tooltip(_({showCrosshairs:!1,showMarkers:!1,shared:!0,fields:[a]},r));var o=t.geometries[0];r?.formatter?o.tooltip(`${i}*${a}`,r.formatter):o.tooltip(a)}else t.tooltip(!1);return e}function Kz(e){return X(zz,Q,Bz,Vz,Hz,Uz,Gz,Wz,HE,BE,VE,KE())(e)}(function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=`waterfall`,t}return t.getDefaultOptions=function(){return Pz},t.prototype.changeData=function(e){var t=this.options,n=t.xField,r=t.yField,i=t.total;this.updateOption({data:e}),this.chart.changeData(Rz(e,n,r,i))},t.prototype.getSchemaAdaptor=function(){return Kz},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t})($);var qz=`color`,Jz=Y({},$.getDefaultOptions(),{timeInterval:2e3,legend:!1,tooltip:{showTitle:!1,showMarkers:!1,showCrosshairs:!1,fields:[`text`,`value`,qz],formatter:function(e){return{name:e.text,value:e.value}}},wordStyle:{fontFamily:`Verdana`,fontWeight:`normal`,padding:1,fontSize:[12,60],rotation:[0,90],rotationSteps:2,rotateRatio:.5}}),Yz={font:function(){return`serif`},padding:1,size:[500,500],spiral:`archimedean`,timeInterval:3e3};function Xz(e,t){return t=ut({},Yz,t),Zz(e,t)}function Zz(e,t){var n=_B();[`font`,`fontSize`,`fontWeight`,`padding`,`rotate`,`size`,`spiral`,`timeInterval`,`random`].forEach(function(e){M(t[e])||n[e](t[e])}),n.words(e),t.imageMask&&n.createMask(t.imageMask);var r=n.start()._tags;r.forEach(function(e){e.x+=t.size[0]/2,e.y+=t.size[1]/2});var i=t.size,a=i[0],o=i[1];return r.push({text:``,value:0,x:0,y:0,opacity:0}),r.push({text:``,value:0,x:a,y:o,opacity:0}),r}var Qz=Math.PI/180,$z=64,eB=2048;function tB(e){return e.text}function nB(){return`serif`}function rB(){return`normal`}function iB(e){return e.value}function aB(){return~~(Math.random()*2)*90}function oB(){return 1}function sB(e,t,n,r){if(!t.sprite){var i=e.context,a=e.ratio;i.clearRect(0,0,($z<<5)/a,eB/a);var o=0,s=0,c=0,l=n.length;for(--r;++r<l;){t=n[r],i.save(),i.font=t.style+` `+t.weight+` `+~~((t.size+1)/a)+`px `+t.font;var u=i.measureText(t.text+`m`).width*a,d=t.size<<1;if(t.rotate){var f=Math.sin(t.rotate*Qz),p=Math.cos(t.rotate*Qz),m=u*p,h=u*f,g=d*p,_=d*f;u=Math.max(Math.abs(m+_),Math.abs(m-_))+31>>5<<5,d=~~Math.max(Math.abs(h+g),Math.abs(h-g))}else u=u+31>>5<<5;if(d>c&&(c=d),o+u>=$z<<5&&(o=0,s+=c,c=0),s+d>=eB)break;i.translate((o+(u>>1))/a,(s+(d>>1))/a),t.rotate&&i.rotate(t.rotate*Qz),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=u,t.height=d,t.xoff=o,t.yoff=s,t.x1=u>>1,t.y1=d>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,o+=u}for(var v=i.getImageData(0,0,($z<<5)/a,eB/a).data,y=[];--r>=0;)if(t=n[r],t.hasText){for(var u=t.width,b=u>>5,d=t.y1-t.y0,x=0;x<d*b;x++)y[x]=0;if(o=t.xoff,o==null)return;s=t.yoff;for(var S=0,C=-1,w=0;w<d;w++){for(var x=0;x<u;x++){var T=b*w+(x>>5),E=v[(s+w)*($z<<5)+(o+x)<<2]?1<<31-x%32:0;y[T]|=E,S|=E}S?C=w:(t.y0++,d--,w--,s++)}t.y1=t.y0+C,t.sprite=y.slice(0,(t.y1-t.y0)*b)}}}function cB(e,t,n){n>>=5;for(var r=e.sprite,i=e.width>>5,a=e.x-(i<<4),o=a&127,s=32-o,c=e.y1-e.y0,l=(e.y+e.y0)*n+(a>>5),u,d=0;d<c;d++){u=0;for(var f=0;f<=i;f++)if((u<<s|(f<i?(u=r[d*i+f])>>>o:0))&t[l+f])return!0;l+=n}return!1}function lB(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function uB(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function dB(e){var t=e[0]/e[1];return function(e){return[t*(e*=.1)*Math.cos(e),e*Math.sin(e)]}}function fB(e){var t=4,n=t*e[0]/e[1],r=0,i=0;return function(e){var a=e<0?-1:1;switch(Math.sqrt(1+4*a*e)-a&3){case 0:r+=n;break;case 1:i+=t;break;case 2:r-=n;break;default:i-=t;break}return[r,i]}}function pB(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function mB(){return document.createElement(`canvas`)}function hB(e){return j(e)?e:function(){return e}}var gB={archimedean:dB,rectangular:fB};function _B(){var e=[256,256],t=nB,n=iB,r=rB,i=aB,a=oB,o=dB,s=Math.random,c=[],l=1/0,u=tB,d=rB,f=mB,p={};p.start=function(){var o=e[0],g=e[1],_=m(f()),v=p.board?p.board:pB((e[0]>>5)*e[1]),y=c.length,b=[],x=c.map(function(e,o,s){return e.text=u.call(this,e,o,s),e.font=t.call(this,e,o,s),e.style=d.call(this,e,o,s),e.weight=r.call(this,e,o,s),e.rotate=i.call(this,e,o,s),e.size=~~n.call(this,e,o,s),e.padding=a.call(this,e,o,s),e}).sort(function(e,t){return t.size-e.size}),S=-1,C=p.board?[{x:0,y:0},{x:o,y:g}]:null;w();function w(){for(var t=Date.now();Date.now()-t<l&&++S<y;){var n=x[S];n.x=o*(s()+.5)>>1,n.y=g*(s()+.5)>>1,sB(_,n,x,S),n.hasText&&h(v,n,C)&&(b.push(n),C?p.hasImage||lB(C,n):C=[{x:n.x+n.x0,y:n.y+n.y0},{x:n.x+n.x1,y:n.y+n.y1}],n.x-=e[0]>>1,n.y-=e[1]>>1)}p._tags=b,p._bounds=C}return p};function m(e){e.width=e.height=1;var t=Math.sqrt(e.getContext(`2d`,{willReadFrequently:!0}).getImageData(0,0,1,1).data.length>>2);e.width=($z<<5)/t,e.height=eB/t;var n=e.getContext(`2d`,{willReadFrequently:!0});return n.fillStyle=n.strokeStyle=`red`,n.textAlign=`center`,{context:n,ratio:t}}function h(t,n,r){for(var i=n.x,a=n.y,c=Math.sqrt(e[0]*e[0]+e[1]*e[1]),l=o(e),u=s()<.5?1:-1,d,f=-u,p,m;(d=l(f+=u))&&(p=~~d[0],m=~~d[1],!(Math.min(Math.abs(p),Math.abs(m))>=c));)if(n.x=i+p,n.y=a+m,!(n.x+n.x0<0||n.y+n.y0<0||n.x+n.x1>e[0]||n.y+n.y1>e[1])&&(!r||!cB(n,t,e[0]))&&(!r||uB(n,r))){for(var h=n.sprite,g=n.width>>5,_=e[0]>>5,v=n.x-(g<<4),y=v&127,b=32-y,x=n.y1-n.y0,S=void 0,C=(n.y+n.y0)*_+(v>>5),w=0;w<x;w++){S=0;for(var T=0;T<=g;T++)t[C+T]|=S<<b|(T<g?(S=h[w*g+T])>>>y:0);C+=_}return delete n.sprite,!0}return!1}return p.createMask=function(t){var n=document.createElement(`canvas`),r=e[0],i=e[1];if(!(!r||!i)){var a=r>>5,o=pB((r>>5)*i);n.width=r,n.height=i;var s=n.getContext(`2d`);s.drawImage(t,0,0,t.width,t.height,0,0,r,i);for(var c=s.getImageData(0,0,r,i).data,l=0;l<i;l++)for(var u=0;u<r;u++){var d=a*l+(u>>5),f=l*r+u<<2,m=c[f]>=250&&c[f+1]>=250&&c[f+2]>=250?1<<31-u%32:0;o[d]|=m}p.board=o,p.hasImage=!0}},p.timeInterval=function(e){l=e??1/0},p.words=function(e){c=e},p.size=function(t){e=[+t[0],+t[1]]},p.font=function(e){t=hB(e)},p.fontWeight=function(e){r=hB(e)},p.rotate=function(e){i=hB(e)},p.spiral=function(e){o=gB[e]||e},p.fontSize=function(e){n=hB(e)},p.padding=function(e){a=hB(e)},p.random=function(e){s=hB(e)},p}function vB(e){var t=e.options,n=e.chart,r=n,i=r.width,a=r.height,o=r.padding,s=r.appendPadding,c=r.ele,l=t.data,u=t.imageMask,d=t.wordField,f=t.weightField,p=t.colorField,m=t.wordStyle,h=t.timeInterval,g=t.random,v=t.spiral,y=t.autoFit,b=y===void 0?!0:y,x=t.placementStrategy;if(!l||!l.length)return[];var S=m.fontFamily,C=m.fontWeight,w=m.padding,T=m.fontSize,E=CB(l,f),D=[EB(E),DB(E)],O=l.map(function(e){return{text:e[d],value:e[f],color:e[p],datum:e}}),k={imageMask:u,font:S,fontSize:SB(T,D),fontWeight:C,size:yB({width:i,height:a,padding:o,appendPadding:s,autoFit:b,container:c}),padding:w,timeInterval:h,random:g,spiral:v,rotate:wB(t)};if(j(x)){var A=O.map(function(e,t,r){return _(_(_({},e),{hasText:!!e.text,font:hB(k.font)(e,t,r),weight:hB(k.fontWeight)(e,t,r),rotate:hB(k.rotate)(e,t,r),size:hB(k.fontSize)(e,t,r),style:`normal`}),x.call(n,e,t,r))});return A.push({text:``,value:0,x:0,y:0,opacity:0}),A.push({text:``,value:0,x:k.size[0],y:k.size[1],opacity:0}),A}return Xz(O,k)}function yB(e){var t=e.width,n=e.height,r=e.container,i=e.autoFit,a=e.padding,o=e.appendPadding;if(i){var s=YT(r);t=s.width,n=s.height}t||=400,n||=400;var c=bB({padding:a,appendPadding:o}),l=c[0],u=c[1],d=c[2],f=c[3];return[t-(f+u),n-(l+d)]}function bB(e){var t=oE(e.padding),n=oE(e.appendPadding),r=t[0]+n[0],i=t[1]+n[1],a=t[2]+n[2],o=t[3]+n[3];return[r,i,a,o]}function xB(e){return new Promise(function(t,n){if(e instanceof HTMLImageElement){t(e);return}if(I(e)){var r=new Image;r.crossOrigin=`anonymous`,r.src=e,r.onload=function(){t(r)},r.onerror=function(){RT(FT.ERROR,!1,`image %s load failed !!!`,e),n()};return}RT(FT.WARN,e===void 0,`The type of imageMask option must be String or HTMLImageElement.`),n()})}function SB(e,t){if(j(e))return e;if(N(e)){var n=e[0],r=e[1];if(!t)return function(){return(r+n)/2};var i=t[0],a=t[1];return a===i?function(){return(r+n)/2}:function(e){var t=e.value;return(r-n)/(a-i)*(t-i)+n}}return function(){return e}}function CB(e,t){return e.map(function(e){return e[t]}).filter(function(e){return typeof e==`number`&&!isNaN(e)})}function wB(e){var t=TB(e),n=t.rotation,r=t.rotationSteps;if(!N(n))return n;var i=n[0],a=n[1],o=r===1?0:(a-i)/(r-1);return function(){return a===i?a:Math.floor(Math.random()*r)*o}}function TB(e){var t=e.wordStyle.rotationSteps;return t<1&&(RT(FT.WARN,!1,`The rotationSteps option must be greater than or equal to 1.`),t=1),{rotation:e.wordStyle.rotation,rotationSteps:t}}function EB(e){return Math.min.apply(Math,e)}function DB(e){return Math.max.apply(Math,e)}function OB(e){var t=e.chart,n=e.options,r=n.colorField,i=n.color,a=vB(e);t.data(a);var o=Y({},e,{options:{xField:`x`,yField:`y`,seriesField:r&&`color`,rawFields:j(i)&&s(s([],z(n,`rawFields`,[]),!0),[`datum`],!1),point:{color:i,shape:`word-cloud`}}});return uD(o).ext.geometry.label(!1),t.coordinate().reflect(`y`),t.axis(!1),e}function kB(e){return X(GE({x:{nice:!1},y:{nice:!1}}))(e)}function AB(e){var t=e.chart,n=e.options,r=n.legend,i=n.colorField;return r===!1?t.legend(!1):i&&t.legend(qz,r),e}function jB(e){X(OB,kB,zE,AB,BE,VE,Q,HE)(e)}K(`point`,`word-cloud`,{draw:function(e,t){var n=e.x,r=e.y,i=t.addShape(`text`,{attrs:_(_({},MB(e)),{x:n,y:r})}),a=e.data.rotate;return typeof a==`number`&&hv.rotate(i,a*Math.PI/180),i}});function MB(e){return{fontSize:e.data.size,text:e.data.text,textAlign:`center`,fontFamily:e.data.font,fontWeight:e.data.weight,fill:e.color||e.defaultStyle.stroke,textBaseline:`alphabetic`}}var NB=function(e){l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=`word-cloud`,t}return t.getDefaultOptions=function(){return Jz},t.prototype.changeData=function(e){this.updateOption({data:e}),this.options.imageMask?this.render():this.chart.changeData(vB({chart:this.chart,options:this.options}))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.render=function(){var t=this;return new Promise(function(n){var r=t.options.imageMask;if(!r){e.prototype.render.call(t),n();return}var i=function(r){t.options=_(_({},t.options),{imageMask:r||null}),e.prototype.render.call(t),n()};xB(r).then(i).catch(i)})},t.prototype.getSchemaAdaptor=function(){return jB},t.prototype.triggerResize=function(){var t=this;this.chart.destroyed||(this.execAdaptor(),window.setTimeout(function(){e.prototype.triggerResize.call(t)}))},t}($);(function(e){l(t,e);function t(t,n,r,i){var a=e.call(this,t,Y({},i,n))||this;return a.type=`g2-plot`,a.defaultOptions=i,a.adaptor=r,a}return t.prototype.getDefaultOptions=function(){return this.defaultOptions},t.prototype.getSchemaAdaptor=function(){return this.adaptor},t})($),ZE(`en-US`,$E),ZE(`zh-CN`,eD);export{aj as a,cA as c,SO as d,lj as i,Hk as l,XF as n,bA as o,VF as r,hA as s,NB as t,Dk as u};