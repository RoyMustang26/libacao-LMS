import{B as e,C as t,F as n,H as r,M as i,N as a,Tt as o,Xt as s,it as c,tt as l,wt as u,yt as d,z as f}from"./vue-UmFUivib.js";import{$ as p,At as m,H as h,Nt as g,Pt as _,Q as v,Y as y,fn as b,ht as x,kt as S,nt as C,ot as w,pt as T,rn as E,vt as D}from"./antd-B_p1HNUS.js";import{t as O}from"./crud-operations-CX0bmYPf.js";var k=[`onClick`],A={style:{"margin-top":`16px`,"text-align":`right`}},j=r({__name:`index`,setup(r){let j=o([]),M=o(!1),N=o(``),P=o(!1),F=o(null),I=u({}),L=o(),R=u({current:1,total:0,pageSize:10}),z=[{label:`Lecture`,value:`Lecture`},{label:`Laboratory`,value:`Laboratory`},{label:`Online`,value:`Online`}],B=[{title:`Room Number`,dataIndex:`room_number`},{title:`Building Name`,dataIndex:`building_name`},{title:`Capacity`,dataIndex:`capacity`},{title:`Type`,dataIndex:`type`},{title:`Actions`,dataIndex:`actions`}];function V(e){return[{required:!0,message:`Please input ${e}`}]}async function H(e=R.current){M.value=!0;try{let{data:t}=await O.list(`rooms`,{search:N.value,page:e,per_page:R.pageSize});j.value=t.data,R.current=t.current_page,R.total=t.total}finally{M.value=!1}}function U(){R.current=1,H()}function W(e=null){F.value=e,Object.keys(I).forEach(e=>delete I[e]),e&&Object.assign(I,e),P.value=!0}async function G(){try{let e={...I};F.value?await O.update(`rooms`,F.value.room_id,e):await O.create(`rooms`,e),S.success(`Saved successfully!`),P.value=!1,await H()}catch{S.error(`Error saving record`)}}async function K(e){try{await O.remove(`rooms`,e.room_id),S.success(`Deleted successfully!`),await H()}catch{S.error(`Error deleting record`)}}function q(e){R.current=e,H(e)}return l(()=>{H()}),(r,o)=>{let l=D,u=E,S=p,O=v,H=h,J=w,Y=x,X=_,Z=m,Q=y,$=T,ee=b,te=g,ne=C;return c(),n(`div`,null,[e(S,{style:{"margin-bottom":`16px`,width:`100%`}},{default:d(()=>[e(l,{value:N.value,"onUpdate:value":o[0]||=e=>N.value=e,placeholder:`Search rooms...`,"enter-button":``,style:{"max-width":`300px`},onSearch:U},null,8,[`value`]),e(u,{type:`primary`,onClick:o[1]||=e=>W()},{default:d(()=>[...o[7]||=[f(` Add Room `,-1)]]),_:1})]),_:1}),e(H,{columns:B,"data-source":j.value,loading:M.value,"row-key":`room_id`,bordered:``,pagination:!1},{bodyCell:d(({column:r,record:l})=>[r.dataIndex===`actions`?(c(),a(S,{key:0},{default:d(()=>[i(`a`,{onClick:e=>W(l)},`Edit`,8,k),e(O,{title:`Delete this room?`,"ok-text":`Yes`,"cancel-text":`No`,onConfirm:e=>K(l)},{default:d(()=>[...o[8]||=[i(`a`,null,`Delete`,-1)]]),_:1},8,[`onConfirm`])]),_:2},1024)):(c(),n(t,{key:1},[f(s(l[r.dataIndex]||`-`),1)],64))]),_:1},8,[`data-source`,`loading`]),i(`div`,A,[e(J,{current:R.current,total:R.total,"page-size":R.pageSize,"show-total":e=>`Total ${e} rooms`,onChange:q},null,8,[`current`,`total`,`page-size`,`show-total`])]),e(ne,{open:P.value,"onUpdate:open":o[6]||=e=>P.value=e,title:F.value?`Edit Room`:`Add Room`,"destroy-on-close":``,onOk:G},{default:d(()=>[e(te,{ref_key:`formRef`,ref:L,model:I,layout:`vertical`},{default:d(()=>[e(Q,{gutter:16},{default:d(()=>[e(Z,{span:12},{default:d(()=>[e(X,{label:`Room Number`,name:`room_number`,rules:V(`Room Number`)},{default:d(()=>[e(Y,{value:I.room_number,"onUpdate:value":o[2]||=e=>I.room_number=e},null,8,[`value`])]),_:1},8,[`rules`])]),_:1}),e(Z,{span:12},{default:d(()=>[e(X,{label:`Building Name`,name:`building_name`,rules:V(`Building Name`)},{default:d(()=>[e(Y,{value:I.building_name,"onUpdate:value":o[3]||=e=>I.building_name=e},null,8,[`value`])]),_:1},8,[`rules`])]),_:1})]),_:1}),e(X,{label:`Capacity`,name:`capacity`},{default:d(()=>[e($,{value:I.capacity,"onUpdate:value":o[4]||=e=>I.capacity=e,min:0,style:{width:`100%`}},null,8,[`value`])]),_:1}),e(X,{label:`Type`,name:`type`},{default:d(()=>[e(ee,{value:I.type,"onUpdate:value":o[5]||=e=>I.type=e,options:z},null,8,[`value`])]),_:1})]),_:1},8,[`model`])]),_:1},8,[`open`,`title`])])}}});export{j as default};