import{B as e,C as t,F as n,H as r,M as i,N as a,Tt as o,Xt as s,it as c,tt as l,wt as u,yt as d,z as f}from"./vue-UmFUivib.js";import{$ as ee,At as p,Dt as m,H as h,Jt as g,Nt as _,Pt as v,Q as te,Tt as y,Y as b,fn as ne,ht as re,kt as x,nt as S,ot as C,rn as w,vt as T}from"./antd-B_p1HNUS.js";import{t as E}from"./crud-operations-CX0bmYPf.js";var D=[`onClick`],O={style:{"margin-top":`16px`,"text-align":`right`}},k=`professors`,A=r({__name:`index`,setup(r){let A=o([]),j=o([]),M=o(!1),N=o(!1),P=o(``),F=o(!1),I=o(null),L=u({}),R=o(),z={first_name:``,last_name:``,middle_name:``,gender:``,email:``,phone_number:``,hire_date:null,specialization:``,status:`active`,department_id:null},B=u({current:1,total:0,pageSize:10}),V=[{label:`Male`,value:`Male`},{label:`Female`,value:`Female`}],H=[{label:`Active`,value:`active`},{label:`Inactive`,value:`inactive`}],U=[{title:`First Name`,dataIndex:`first_name`},{title:`Last Name`,dataIndex:`last_name`},{title:`Email`,dataIndex:`email`},{title:`Phone`,dataIndex:`phone_number`},{title:`Gender`,dataIndex:`gender`},{title:`Department`,dataIndex:`department_name`},{title:`Status`,dataIndex:`status`},{title:`Actions`,dataIndex:`actions`}];function W(e){return[{required:!0,message:`Please input ${e}`}]}async function G(e=B.current){M.value=!0;try{let t=await E.list(k,{search:P.value,page:e,per_page:B.pageSize});A.value=t.data.data,B.current=t.data.current_page,B.total=t.data.total}finally{M.value=!1}}function K(){B.current=1,G()}async function q(){N.value=!0;try{j.value=(await E.list(`departments`)).data.map(e=>({label:`${e.department_code} - ${e.department_name}`,value:e.department_id}))}finally{N.value=!1}}function J(e=null){Object.assign(L,z),I.value=e,e&&(Object.assign(L,e),e.hire_date&&(L.hire_date=g(e.hire_date))),F.value=!0}async function Y(){try{let e={...L};e.hire_date?.format&&(e.hire_date=e.hire_date.format(`YYYY-MM-DD`)),I.value?await E.update(k,I.value.professor_id,e):await E.create(k,e),x.success(`Saved successfully!`),F.value=!1,await G()}catch{x.error(`Error saving record`)}}async function ie(e){try{await E.remove(k,e.professor_id),x.success(`Deleted successfully!`),await G()}catch{x.error(`Error deleting record`)}}function X(e){B.current=e,G(e)}return l(()=>{G(),q()}),(r,o)=>{let l=T,u=w,g=ee,x=te,E=m,k=h,z=C,q=re,Z=v,Q=p,ae=b,$=ne,oe=y,se=_,ce=S;return c(),n(`div`,null,[e(g,{style:{"margin-bottom":`16px`,width:`100%`}},{default:d(()=>[e(l,{value:P.value,"onUpdate:value":o[0]||=e=>P.value=e,placeholder:`Search professors...`,"enter-button":``,style:{"max-width":`300px`},onSearch:K},null,8,[`value`]),e(u,{type:`primary`,onClick:o[1]||=e=>J()},{default:d(()=>[...o[14]||=[f(` Add Professor `,-1)]]),_:1})]),_:1}),e(k,{columns:U,"data-source":A.value,loading:M.value,"row-key":`professor_id`,bordered:``,pagination:!1},{bodyCell:d(({column:r,record:l})=>[r.dataIndex===`actions`?(c(),a(g,{key:0},{default:d(()=>[i(`a`,{onClick:e=>J(l)},`Edit`,8,D),e(x,{title:`Delete this professor?`,"ok-text":`Yes`,"cancel-text":`No`,onConfirm:e=>ie(l)},{default:d(()=>[...o[15]||=[i(`a`,null,`Delete`,-1)]]),_:1},8,[`onConfirm`])]),_:2},1024)):r.dataIndex===`department_name`?(c(),n(t,{key:1},[f(s(l.department?.department_code||`-`),1)],64)):r.dataIndex===`status`?(c(),a(E,{key:2,color:l.status===`active`?`green`:`red`},{default:d(()=>[f(s(l.status),1)]),_:2},1032,[`color`])):(c(),n(t,{key:3},[f(s(l[r.dataIndex]),1)],64))]),_:1},8,[`data-source`,`loading`]),i(`div`,O,[e(z,{current:B.current,total:B.total,"page-size":B.pageSize,"show-size-changer":!0,"show-total":e=>`Total ${e} professors`,onChange:X,onShowSizeChange:o[2]||=(e,t)=>{B.pageSize=t,G(e)}},null,8,[`current`,`total`,`page-size`,`show-total`])]),e(ce,{open:F.value,"onUpdate:open":o[13]||=e=>F.value=e,title:I.value?`Edit Professor`:`Add Professor`,"destroy-on-close":``,onOk:Y},{default:d(()=>[e(se,{ref_key:`formRef`,ref:R,model:L,layout:`vertical`},{default:d(()=>[e(ae,{gutter:16},{default:d(()=>[e(Q,{span:12},{default:d(()=>[e(Z,{label:`First Name`,name:`first_name`,rules:W(`First name`)},{default:d(()=>[e(q,{value:L.first_name,"onUpdate:value":o[3]||=e=>L.first_name=e},null,8,[`value`])]),_:1},8,[`rules`])]),_:1}),e(Q,{span:12},{default:d(()=>[e(Z,{label:`Last Name`,name:`last_name`,rules:W(`Last name`)},{default:d(()=>[e(q,{value:L.last_name,"onUpdate:value":o[4]||=e=>L.last_name=e},null,8,[`value`])]),_:1},8,[`rules`])]),_:1})]),_:1}),e(Z,{label:`Middle Name`,name:`middle_name`},{default:d(()=>[e(q,{value:L.middle_name,"onUpdate:value":o[5]||=e=>L.middle_name=e},null,8,[`value`])]),_:1}),e(Z,{label:`Gender`,name:`gender`,rules:W(`Gender`)},{default:d(()=>[e($,{value:L.gender,"onUpdate:value":o[6]||=e=>L.gender=e,options:V},null,8,[`value`])]),_:1},8,[`rules`]),e(Z,{label:`Email`,name:`email`,rules:W(`Email`)},{default:d(()=>[e(q,{value:L.email,"onUpdate:value":o[7]||=e=>L.email=e,type:`email`},null,8,[`value`])]),_:1},8,[`rules`]),e(Z,{label:`Phone Number`,name:`phone_number`},{default:d(()=>[e(q,{value:L.phone_number,"onUpdate:value":o[8]||=e=>L.phone_number=e},null,8,[`value`])]),_:1}),e(Z,{label:`Hire Date`,name:`hire_date`},{default:d(()=>[e(oe,{value:L.hire_date,"onUpdate:value":o[9]||=e=>L.hire_date=e,style:{width:`100%`}},null,8,[`value`])]),_:1}),e(Z,{label:`Specialization`,name:`specialization`},{default:d(()=>[e(q,{value:L.specialization,"onUpdate:value":o[10]||=e=>L.specialization=e},null,8,[`value`])]),_:1}),e(Z,{label:`Status`,name:`status`},{default:d(()=>[e($,{value:L.status,"onUpdate:value":o[11]||=e=>L.status=e,options:H},null,8,[`value`])]),_:1}),e(Z,{label:`Department`,name:`department_id`},{default:d(()=>[e($,{value:L.department_id,"onUpdate:value":o[12]||=e=>L.department_id=e,options:j.value,loading:N.value,"show-search":``,"option-filter-prop":`label`},null,8,[`value`,`options`,`loading`])]),_:1})]),_:1},8,[`model`])]),_:1},8,[`open`,`title`])])}}});export{A as default};