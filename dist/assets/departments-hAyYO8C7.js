import{B as e,C as t,F as n,H as r,M as i,N as a,Tt as o,Xt as s,it as c,tt as l,wt as u,yt as d,z as f}from"./vue-UmFUivib.js";import{$ as p,At as m,H as h,Nt as g,Pt as _,Q as v,Y as y,ht as b,kt as x,nt as S,ot as C,rn as w,vt as T}from"./antd-B_p1HNUS.js";import{t as E}from"./crud-operations-CX0bmYPf.js";var D=[`onClick`],O={style:{"margin-top":`16px`,"text-align":`right`}},k=r({__name:`index`,setup(r){let k=o([]),A=o(!1),j=o(``),M=o(!1),N=o(null),P=u({}),F=o(),I=u({current:1,total:0,pageSize:10}),L=[{title:`Code`,dataIndex:`department_code`},{title:`Name`,dataIndex:`department_name`},{title:`Office Location`,dataIndex:`office_location`},{title:`Email`,dataIndex:`contact_email`},{title:`Contact Number`,dataIndex:`contact_number`},{title:`Actions`,dataIndex:`actions`}];function R(e){return[{required:!0,message:`Please input ${e}`}]}async function z(e=I.current){A.value=!0;try{let{data:t}=await E.list(`departments`,{search:j.value,page:e,per_page:I.pageSize});k.value=t.data,I.current=t.current_page,I.total=t.total}finally{A.value=!1}}function B(){I.current=1,z()}function V(e=null){N.value=e,Object.keys(P).forEach(e=>delete P[e]),e&&Object.assign(P,e),M.value=!0}async function H(){try{let e={...P};N.value?await E.update(`departments`,N.value.department_id,e):await E.create(`departments`,e),x.success(`Saved successfully!`),M.value=!1,await z()}catch{x.error(`Error saving record`)}}async function U(e){try{await E.remove(`departments`,e.department_id),x.success(`Deleted successfully!`),await z()}catch{x.error(`Error deleting record`)}}function W(e){I.current=e,z(e)}return l(()=>{z()}),(r,o)=>{let l=T,u=w,x=p,E=v,z=h,G=C,K=b,q=_,J=m,Y=y,X=g,Z=S;return c(),n(`div`,null,[e(x,{style:{"margin-bottom":`16px`,width:`100%`}},{default:d(()=>[e(l,{value:j.value,"onUpdate:value":o[0]||=e=>j.value=e,placeholder:`Search departments...`,"enter-button":``,style:{"max-width":`300px`},onSearch:B},null,8,[`value`]),e(u,{type:`primary`,onClick:o[1]||=e=>V()},{default:d(()=>[...o[8]||=[f(` Add Department `,-1)]]),_:1})]),_:1}),e(z,{columns:L,"data-source":k.value,loading:A.value,"row-key":`department_id`,bordered:``,pagination:!1},{bodyCell:d(({column:r,record:l})=>[r.dataIndex===`actions`?(c(),a(x,{key:0},{default:d(()=>[i(`a`,{onClick:e=>V(l)},`Edit`,8,D),e(E,{title:`Delete this department?`,"ok-text":`Yes`,"cancel-text":`No`,onConfirm:e=>U(l)},{default:d(()=>[...o[9]||=[i(`a`,null,`Delete`,-1)]]),_:1},8,[`onConfirm`])]),_:2},1024)):(c(),n(t,{key:1},[f(s(l[r.dataIndex]||`-`),1)],64))]),_:1},8,[`data-source`,`loading`]),i(`div`,O,[e(G,{current:I.current,total:I.total,"page-size":I.pageSize,"show-total":e=>`Total ${e} departments`,onChange:W},null,8,[`current`,`total`,`page-size`,`show-total`])]),e(Z,{open:M.value,"onUpdate:open":o[7]||=e=>M.value=e,title:N.value?`Edit Department`:`Add Department`,"destroy-on-close":``,onOk:H},{default:d(()=>[e(X,{ref_key:`formRef`,ref:F,model:P,layout:`vertical`},{default:d(()=>[e(Y,{gutter:16},{default:d(()=>[e(J,{span:12},{default:d(()=>[e(q,{label:`Department Code`,name:`department_code`,rules:R(`Department Code`)},{default:d(()=>[e(K,{value:P.department_code,"onUpdate:value":o[2]||=e=>P.department_code=e},null,8,[`value`])]),_:1},8,[`rules`])]),_:1}),e(J,{span:12},{default:d(()=>[e(q,{label:`Department Name`,name:`department_name`,rules:R(`Department Name`)},{default:d(()=>[e(K,{value:P.department_name,"onUpdate:value":o[3]||=e=>P.department_name=e},null,8,[`value`])]),_:1},8,[`rules`])]),_:1})]),_:1}),e(q,{label:`Office Location`,name:`office_location`},{default:d(()=>[e(K,{value:P.office_location,"onUpdate:value":o[4]||=e=>P.office_location=e},null,8,[`value`])]),_:1}),e(q,{label:`Contact Email`,name:`contact_email`},{default:d(()=>[e(K,{value:P.contact_email,"onUpdate:value":o[5]||=e=>P.contact_email=e,type:`email`},null,8,[`value`])]),_:1}),e(q,{label:`Contact Number`,name:`contact_number`},{default:d(()=>[e(K,{value:P.contact_number,"onUpdate:value":o[6]||=e=>P.contact_number=e},null,8,[`value`])]),_:1})]),_:1},8,[`model`])]),_:1},8,[`open`,`title`])])}}});export{k as default};