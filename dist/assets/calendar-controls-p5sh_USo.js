import{B as e,C as t,F as n,M as r,N as i,P as a,Tt as o,_t as s,it as c,j as l,tt as u,yt as d,z as f}from"./vue-UmFUivib.js";import{fn as p,ht as m,kt as h,rn as g,vt as _}from"./antd-B_p1HNUS.js";import{l as v,p as y}from"./index-BwYHa19M.js";import{t as b}from"./search-modal-BFuDBt1f.js";var x={class:`flex flex-wrap items-center justify-between gap-4 bg-gray-900 p-4 rounded-xl mb-4 shadow`},S={class:`flex items-center gap-2`},C={class:`flex flex-wrap gap-3 items-center`},w={class:`flex gap-2 items-center`},T={class:`flex gap-2 items-center`},E=y({__name:`calendar-controls`,emits:[`filters-change`],setup(y,{emit:E}){let D=E,O=o(`course`),k=o({department:null,professor:null,building:null,room:null,course:null,yearLevel:null,section:null}),A=o([]),j=o([]),M=o([]),N=o([]),P=o([{label:`1st Year`,value:`1st`},{label:`2nd Year`,value:`2nd`},{label:`3rd Year`,value:`3rd`},{label:`4th Year`,value:`4th`}]),F=o(!1),I=o(`professor`);function L(e){I.value===`professor`?k.value.professor=e.name:I.value===`section`&&(k.value.section=e.name),F.value=!1}async function R(){try{let[e,t,n]=await Promise.all([v(`/departments`),v(`/rooms`),v(`/courses`)]);A.value=e.data.data.map(e=>({label:e.department_name,value:e.department_id}));let r={};t.data.data.forEach(e=>{r[e.building_name]||(r[e.building_name]=[]),r[e.building_name].push({label:`Room ${e.room_number}`,value:e.room_id})}),M.value=Object.entries(r).map(([e,t])=>({label:e,options:t})),N.value=n.data.data.map(e=>({label:e.course_code,value:e.course_id})),j.value=Object.keys(r).map(e=>({label:e,value:e}))}catch(e){console.error(e),h.error(`Failed to load initial data.`)}}u(R),s([O,k],()=>{D(`filters-change`,{viewBy:O.value,filters:k.value})},{deep:!0});let z=l(()=>O.value===`professor`),B=l(()=>O.value===`room`),V=l(()=>O.value===`section`);function H(e){I.value=e,F.value=!0}return(o,s)=>{let l=p,u=_,h=m,v=g;return c(),n(t,null,[r(`div`,x,[r(`div`,S,[s[10]||=r(`span`,{class:`text-gray-300 font-medium`},`View By:`,-1),e(l,{value:O.value,"onUpdate:value":s[0]||=e=>O.value=e,style:{width:`160px`},options:[{label:`Course`,value:`course`},{label:`Professor`,value:`professor`},{label:`Room`,value:`room`},{label:`Section`,value:`section`},{label:`Student`,value:`student`}]},null,8,[`value`])]),r(`div`,C,[z.value?(c(),n(t,{key:0},[e(l,{value:k.value.department,"onUpdate:value":s[1]||=e=>k.value.department=e,options:A.value,placeholder:`Select Department`,style:{width:`200px`}},null,8,[`value`,`options`]),r(`div`,w,[e(u,{value:k.value.professor,"onUpdate:value":s[2]||=e=>k.value.professor=e,placeholder:`Search Professor`,style:{width:`200px`},"enter-button":``,readonly:``,onSearch:s[3]||=e=>H(`professor`)},null,8,[`value`])])],64)):a(``,!0),B.value?(c(),i(l,{key:1,value:k.value.room,"onUpdate:value":s[4]||=e=>k.value.room=e,options:M.value,placeholder:`Select room`,style:{width:`200px`}},null,8,[`value`,`options`])):a(``,!0),V.value?(c(),n(t,{key:2},[e(l,{value:k.value.course,"onUpdate:value":s[5]||=e=>k.value.course=e,options:N.value,placeholder:`Select Course`,style:{width:`200px`}},null,8,[`value`,`options`]),e(l,{value:k.value.yearLevel,"onUpdate:value":s[6]||=e=>k.value.yearLevel=e,options:P.value,placeholder:`Select Year Level`,style:{width:`180px`}},null,8,[`value`,`options`]),r(`div`,T,[e(h,{value:k.value.section,"onUpdate:value":s[7]||=e=>k.value.section=e,placeholder:`Search Section`,style:{width:`150px`},readonly:``},null,8,[`value`]),e(v,{type:`primary`,onClick:s[8]||=e=>H(`section`)},{default:d(()=>[...s[11]||=[f(` Search `,-1)]]),_:1})])],64)):a(``,!0)])]),e(b,{open:F.value,"onUpdate:open":s[9]||=e=>F.value=e,type:I.value,departments:A.value,courses:N.value,"year-levels":P.value,onSelect:L},null,8,[`open`,`type`,`departments`,`courses`,`year-levels`])],64)}}},[[`__scopeId`,`data-v-68870ea5`]]);export{E as t};